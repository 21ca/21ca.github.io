var te=Object.defineProperty,ne=Object.defineProperties;var oe=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var B=(e,t,n)=>t in e?te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_=(e,t)=>{for(var n in t||(t={}))re.call(t,n)&&B(e,n,t[n]);if(U)for(var n of U(t))se.call(t,n)&&B(e,n,t[n]);return e},C=(e,t)=>ne(e,oe(t));function ct(){import("data:text/javascript,")}const ie=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}};ie();const ae="modulepreload",N={},ce="",T=function(t,n){return!n||n.length===0?t():Promise.all(n.map(r=>{if(r=`${ce}${r}`,r in N)return;N[r]=!0;const o=r.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${s}`))return;const i=document.createElement("link");if(i.rel=o?"stylesheet":ae,o||(i.as="script",i.crossOrigin=""),i.href=r,document.head.appendChild(i),o)return new Promise((u,m)=>{i.addEventListener("load",u),i.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())};const ue=[0,"0","true","ok"],le=[200,0],de={"content-type":"application/json"},K=(e,t)=>fetch(e,t).then(n=>{if(!n.ok)throw Error("\u63A5\u53E3\u8BF7\u6C42\u5F02\u5E38");return n.json()}).then(n=>{if(ue.includes(n.status)||le.includes(n.code))return n;throw Error(n.message||n.msg)}).catch(n=>Promise.reject(n)),d=(e,t={},n={})=>{const r=Object.keys(t).filter(o=>t[o]!=null).map(function(o){return H(o)+"="+H(t[o])}).join("&");return K(`${e}${r&&"?"+r}`,C(_({},n),{method:"GET"}))},J=(e,t={},n={})=>K(e,{body:JSON.stringify(t),headers:Object.assign({},de,n),method:"POST"});function H(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function E(e,t=window.location.href){const n=new URL(t);return n.searchParams?n.searchParams.get(e):Q(e,n.search)}function Q(e,t=window.location.search){let n=decodeURIComponent(t).replace("?","");(n!==""?n.split("&"):[]).forEach(i=>{if(i){const u=i.split("=");n=n.replace(u[0],u[0].toLowerCase())}});const o=new RegExp(`(^|&)${e.toLowerCase()}=([^&]*)(&|$)`),s=n.match(o);return s!=null?s[2]:""}var fe=(e=>(e[e.HOUSE=0]="HOUSE",e[e.THREE=1]="THREE",e))(fe||{}),X=(e=>(e.ROAM="roam",e.CUT="cut",e))(X||{}),_e=(e=>(e.TWO="2D",e.THREE="3D",e))(_e||{});const c={houseModuleToRoomType:X.ROAM},pe=()=>{},ut=e=>{e.stopPropagation()},me=["weapp","bdapp","aliapp"];function he(e){let t={},n={};if(typeof e=="string")try{n=JSON.parse(decodeURIComponent(e))}catch{n={}}const r=E("from");if(window.VRNativeBizFunction)try{t=JSON.parse(window.VRNativeBizFunction.appInfo()),delete t.cid,delete t.i,delete t.udid2,delete t.macid,t.from="app"}catch{t.from="app"}else if(me.includes(r)){const o=E("weapp_source")||"ajk_weapp",s=E("weapp")||"";t={from:r,app:o,weapp:s}}return _(_({},n),t)}function lt(e){return sessionStorage.getItem(e)}function dt(e,t){localStorage.setItem(e,t)}function ft(e){return localStorage.getItem(e)}function _t(e,t){document.dispatchEvent(new CustomEvent(e,{detail:t}))}const A=function(){const e=window.navigator.userAgent.toLowerCase(),t=/ipad/i.test(e),n=/iphone os/i.test(e),r=/midp/i.test(e),o=/rv:1.2.3.4/i.test(e),s=/ucweb/i.test(e),i=/android/i.test(e),u=/windows ce/i.test(e),m=/windows mobile/i.test(e);return t||n||r||o||s||i||u||m},Z=window.location.host.includes(".58."),ge=window.location.host.includes(".anjuke."),a=navigator.userAgent||"",S=navigator.userAgent.toLowerCase(),h={isIos:!!a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),isAndroid:a.indexOf("Android")>-1||a.indexOf("Linux")>-1,isIPhone:a.indexOf("iPhone")>-1,isMidp:/midp/i.test(S),isIPad:a.indexOf("iPad")>-1,isUc7:/rv:1.2.3.4/i.test(S),isUc:/ucweb/i.test(S),isCE:/windows ce/i.test(S),isWM:/windows mobile/i.test(S),isWx:a.indexOf("MicroMessenger")>-1,isWeibo:a.indexOf("Weibo")>-1,isQQ:/qq\/([\d.]+)/i.test(a),isQQBrowser:/(qqbrowser)\/([\d.]+)/i.test(a),isChrome:/chrome\/[\d.]+ Mobile Safari\/[\d.]+/i.test(a)&&(a.indexOf("Android")>-1||a.indexOf("Linux")>-1),isHWBrowser:a.toLowerCase().indexOf("huawei")>-1,isWeixinMiniProgram:/miniprogram/gi.test(a),isBaiDuMiniprogram:/swan/.test(a)||/^webswan-/.test(a),isZfbMiniprogram:/AliApp/.test(a)&&/MiniProgram/.test(a)||/AlipayClient/.test(a)};h.isMiniProgram=h.isWeixinMiniProgram||h.isBaiDuMiniprogram||h.isZfbMiniprogram;const D=Z,y=ge,p=he(Q("params"));let M;if(typeof window!="undefined"&&window.feCommon){const e=["Anjuke","Broker","Wuba","Ajlz","Weixin","Miniprogram"],t=["Anjuke","Broker","Wuba"],{app:n}=window.feCommon||{},{APP_TYPES:r}=n,o="is";e.forEach(s=>{n[o+s]=n.type===r[s.toUpperCase()]}),n.isVr=!!(window.WVRChatNativeFunction||window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.WVRChatSendMessageToNative),n.isWeb=!t.some(s=>n[o+s]),n.isWbHost=D,n.isAnjukeHost=y,n.isAnjukeWeb=n.isWeb&&n.isAnjukeHost,n.isWeiXin=n.APP_TYPES.WEIXIN===n.type,n.isWubaM=D&&A()&&n.isWeb,n.isAnjukeM=y&&A()&&n.isWeb,M=n}else M={isWeiXin:!1,isWeb:!0,isWubaM:D&&A(),isAnjukeM:y&&A()};M.isMiniProgram=h.isMiniProgram;const Ee=["i-ajk","a-ajk","i-wb","a-wb","a-town"].includes(p.app),Oe=["i-broker2","a-broker","i-qf","a-qf","i-rkyj","a-rkyj","i-yjdc","a-yjdc","i-hxyh","a-hxyh"].includes(p.app),Se=["i-broker2","a-broker","i-wlk","a-wlk","i-ajlz","a-ajlz","i-qf","a-qf","i-rkyj","a-rkyj","i-yjdc","a-yjdc","i-hxyh","a-hxyh"].includes(p.app);function Ae(){var e;return!!+((e=window.feCommon)==null?void 0:e.seo_source_type)}var F,G,q,Y;const we=((G=(F=window.feCommon)==null?void 0:F.app)==null?void 0:G.type)===((Y=(q=window.feCommon)==null?void 0:q.app)==null?void 0:Y.APP_TYPES.MINIPROGRAM);var pt=Object.freeze(Object.defineProperty({__proto__:null,get APP(){return M},appInfo:p,Device:h,isAnjuke:y,isBrokerApp:Oe,isBusinessApp:Se,isCustomerApp:Ee,isCustomerMiniprogram:we,isMobile:A,isSeo:Ae,isWuba:D},Symbol.toStringTag,{value:"Module"}));const f=".",ve=(e,t=!0)=>d(`${f}/esf-ajax/pano/v/pano_info`,e||O()).then(n=>t?n.result:n),Ie=e=>d(`${f}/esf-ajax/property/pano/pano_biz_info`,e||O()).then(t=>t.result),mt=e=>d(`${f}/esf-ajax/property/recommend/combo`,e||O()).then(t=>t.data),ht=e=>d(`${f}/esf-ajax/pano/v/getVoiceExtend`,e||O()).then(t=>t.result),gt=(e,t)=>d(`${f}/esf-ajax/property/pano/takelook_list`,_({},O({brokerId:e,use_type:t}))).then(n=>n.result),Et=e=>{var t,n;return d(`${f}/esf-ajax/broker/info`,C(_({},O()),{broker_id:e,city_id:(n=(t=c.vrBizData)==null?void 0:t.page_config)==null?void 0:n.city_id})).then(r=>r.data)};function Ot(e){return d("//api.anjuke.com/broker-vr/askPhone/vr/getRecord",e).then(t=>t.data)}function St(e){return J("//api.anjuke.com/broker-vr/askPhone/vr/applyAuthorize",e,{withCredentials:!0}).then(()=>!0)}function At(e){return J(`${f}/esf-ajax/pano/std/vrview/comment`,e)}function wt(e){return d(`${f}/esf-ajax/pano/v/user_portrait`,e).then(t=>t.result)}const vt=(e,t)=>d(e,t).then(n=>n.data);function It(e){return d(`${f}/member/common/getSecretPhone`,e).then(t=>t.data)}const Pt=`${f}/esf-ajax/pano`;function O(e={}){const t=E("entry_source");return{params:JSON.stringify(C(_(_({},p),e),{entry_source:t})),type:E("type"),p:E("p"),cv:p.cv,app:p.app}}const Pe=!1;console.log("isDev env",Pe);const v="https://pages.anjukestatic.com/",I="v5.5.7-1-2023.1.9-18.57.1-a58",k=new Date;k.getFullYear();k.getMonth()-1;k.getDay();const Ce=`./main.js`,Re=`./lib.js`,De=`./aihouse.js`,ye=`./vr-chat-sdk.js`,Te=`${v}usersite/touch/vr-teg/${I}/`,Me="reactRoot",ee="vrRoot",Ct="vr-achor",Rt="VR_ACHOR_BUILD_EVENT",Le="vr-guide-map-wrapper";function x(e){return Object.prototype.toString.call(e)==="[object Object]"}function be(e){return Array.isArray(e)}function L(e,...t){return t.reduce((n,r)=>Object.keys(r).reduce((o,s)=>{const i=r[s];return x(i)?o[s]=L(o[s]?o[s]:{},i):be(i)?o[s]=i.map((u,m)=>{if(x(u)){const j=o[s]?o[s]:[];return L(j[m]?j[m]:{},u)}else return u}):o[s]=i,o},n),e)}function Dt(){var e;return window.VRHOUSE_SPACE&&window.VRHOUSE_SPACE[`room${(e=c.vrData)!=null&&e.extend.is_2d?"2D":""}Module`]}function yt(){return window.VRHOUSE_SPACE.houseModule}function ke(){return window.VRHOUSE_SPACE.ruler}function Tt(){return window.VRHOUSE_SPACE.system}function Mt(){return window.VRHOUSE_SPACE.aiHouse}function Lt(){return window.VRHOUSE_SPACE.chat}const l={room:{},house:{}},je={room:{DEFAULT_UI_RENDERED_CB:pe}};function Ue(e,t){for(const n in t)l[e][n]||(l[e][n]=new Set),l[e][n].add(t[n])}function bt(e,t){for(const n in t)l[e][n]&&l[e][n].delete(t[n])}function Be(e){for(const t in e){const n=e[t];for(const r in n)l[t][r]||(l[t][r]=new Set),l[t][r].add(n[r])}}function Ne(e){const t={};for(const n in l[e])t[n]=(...r)=>{l[e][n].forEach(o=>o(...r))};return t}const He=()=>({crossOrigin:null,rendererId:ee,uiUrl:null,dataFrom:{},DISCLAIMER_CUSTOM:"",HOTSPOT_IMG:"",IS_AREA_DISPLAY:!0,IS_HOTSPOT_IMG_DISPLAY:!0,NO_PANO_AUTOPLAY:!0,IS_NEED_ACCOMPANY_VOICE:!1,IS_SHOW_BIG_GUIDE_TAB:!0,IS_SHOW_COMPASS_DIRECTION:!0,MINI_STEREO_FLOORPLAN_DEFAULT:"2D",MINI_STEREO_FLOORPLAN_TEXT:"\u6237\u578B\u56FE/3D\u6A21\u578B",PANO_HOTSPOT_TEXT:"",ROTATION_TIME:0,RULER_BTN_DEFAULT_VALUE:!1,SAFE_TOP_HEIGHT:"34",MODULE:[_({key:"room",IS_SHOW_FLOORPLAN:!0,plate:{img:"",text:"",visible:!0}},Ne("room")),{key:"house",IS_SHOW_BIG_GUIDE_TAB:!0,ROTATION_TIME:0}],CUSTOMER:[],SDK:[],STYLE_COLOR:Z?"#ff552e":"#23C993",LIB_URLS:{domain:Te},VRCHAT_CONFIG:{IS_ENABLE_VR_CHAT:!0}});function xe(){ke().hide(!0)}function Ve(e={config:{},listeners:{}}){return Be(L({},je,e.listeners)),window.VRHOUSE_CONFIG=L({},He(),e==null?void 0:e.config),e==null?void 0:e.vrDataPromise.then(t=>{window.VRHOUSE_CONFIG.dataFrom={house:t.vrdata,type:`${t.extend.is_2d?"2":"3"}D`},window.buildUI=function(n){c.vrBuildUiHook=n},c.vrData=t}).then(()=>Promise.all([T(()=>import(Ce),[]),T(()=>import(Re),[])]).catch(()=>{})).then(()=>(c.vr_loaded_time=Date.now(),new Promise(t=>{Ue("room",{DEFAULT_UI_RENDERED_CB:()=>{c.vr_rended_time=Date.now(),t(void 0)}})}))).then(xe)}function We(e){var n;const t=c.vrBizData;e.IS_SHOW_COMPASS_DIRECTION=(n=t.vrhouse_config)==null?void 0:n.is_show_compass_direction}function $e(e){var n,r,o;const t=c.vrBizData;(n=t.vrhouse_config)!=null&&n.hide_rooms&&(e.HIDE_ROOMS={isFuzzyQuery:(r=t.vrhouse_config)==null?void 0:r.hide_rooms.fuzzy_query,queryNames:((o=t.vrhouse_config)==null?void 0:o.hide_rooms.query_names)||[]})}function ze(e){var n;const t=c.vrBizData;e.MINI_STEREO_FLOORPLAN_DEFAULT=(n=t.vrhouse_config)==null?void 0:n.mini_stereo_floorplan_default}function Fe(e){$e(e),We(e),ze(e)}const P=e=>{const t=document.createElement("div");return e&&(t.id=e),t},V=P(Me),W=P(ee),$=P(""),b=document.getElementById("root"),w=P(Le),Ge=()=>{const e=["fixed","inset-0"],t=["pointer-events-none"];W.classList.add(...e),V.classList.add(...e,...t),$.classList.add(...e,...t),b.appendChild(W),b.appendChild(V),b.appendChild($)},kt=(e,t)=>e?t:null,qe=()=>{const e=document.getElementById("preload-page");e?e.remove():window._panoMask&&window._panoMask.closePreload()},Ye=94,Ke=88;function Je(e){w.style.width=`${Ye}px`,w.style.height=`${Ke}px`,w.className="absolute top-2 left-2 bg-black/10 rounded-lg transition-all duration-500 !hidden",e.MODULE[0].SMALL_FLOORPLAN_DOM=w}let R=null;function jt(){return R||(R=P(),w.after(R)),R}function Qe(e){var n;(n=c.vrBizData.page_config)!=null&&n.is_open_ai_house&&e.SDK.push({des:"aiHouse",inLoadName:"aiHouse",url:De,style:""})}function Xe(e){e.CUSTOMER.push({key:"vrchat",inLoadName:"vrchat",url:ye})}function Ze(e){Qe(e),Xe(e)}function et(e,t,n){const r=new URL(e);return r.searchParams.set(t,n),r}const tt=(e,t,n)=>{var r,o;+((r=e.extend)==null?void 0:r.sv)!==t&&!((o=e.extend)!=null&&o.is_2d)&&(location.href=et(location.href,"type",n).href)},nt=5,ot="103",g={SDK:[],CUSTOMER:[],MODULE:[{key:"room",IS_ROAM_LAZYLOADING:!1},{key:"house"}]},rt={room:{UI_SHOW_CB:()=>{T(()=>import("./index.49f10ce6.js").then(function(e){return e.aB}),["index.49f10ce6.js","index.61e2e4f3.css","cls.ebe14fa8.js","cls.ce173621.css"]),qe()},onClickInBackgroundForClear:()=>!1}};let z=null;Ge();Promise.all([Ie(),ve()]).then(e=>{c.vrBizData=e[0],tt(e[1],nt,ot),z=Promise.resolve(e[1])}).then(st).then(it).then(()=>Fe(g)).then(()=>Ze(g)).then(()=>Je(g)).then(()=>{Ve({listeners:rt,config:g,vrDataPromise:z})}).catch(e=>{console.log(e),T(()=>import("./error.9fd50d8f.js"),["error.9fd50d8f.js","cls.ebe14fa8.js","cls.ce173621.css"])});function st(){g.CLICK_CB=e=>console.log("CLICK_CB",e)}function it(){var e,t,n,r,o,s;g.MODULE[0].plate={img:(t=(e=c.vrBizData)==null?void 0:e.vrhouse_config)==null?void 0:t.hotspot_img,text:(r=(n=c.vrBizData)==null?void 0:n.vrhouse_config)==null?void 0:r.pano_hotspot_text,visible:(s=(o=c.vrBizData)==null?void 0:o.vrhouse_config)==null?void 0:s.is_hotspot_img_display}}export{At as $,M as A,ut as B,dt as C,h as D,Oe as E,d as F,ft as G,X as H,w as I,jt as J,Pt as K,vt as L,_e as M,ve as N,Ie as O,ht as P,It as Q,mt as R,qe as S,Rt as T,Se as U,Ct as V,Et as W,D as X,Ot as Y,Ee as Z,T as _,ct as __vite_legacy_guard,v as a,lt as a0,O as a1,gt as a2,wt as a3,y as a4,St as a5,pt as a6,c as b,Mt as c,P as d,Z as e,Ue as f,Lt as g,bt as h,we as i,ke as j,p as k,E as l,Dt as m,A as n,_t as o,pe as p,Tt as q,V as r,Fe as s,Ze as t,L as u,W as v,He as w,fe as x,yt as y,kt as z};
