!function(s){function t(t){for(var e,o,r=t[0],n=t[1],i=0,a=[];i<r.length;i++)o=r[i],Object.prototype.hasOwnProperty.call(l,o)&&l[o]&&a.push(l[o][0]),l[o]=0;for(e in n)Object.prototype.hasOwnProperty.call(n,e)&&(s[e]=n[e]);for(h&&h(t);a.length;)a.shift()()}var o={},u={3:0},l={3:0};function p(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return s[t].call(e.exports,e,e.exports,p),e.l=!0,e.exports}p.e=function(c){var t=[];u[c]?t.push(u[c]):0!==u[c]&&{0:1}[c]&&t.push(u[c]=new Promise(function(r,n){for(var t="./static/css/"+({0:"buildUI",1:"cusCompare",4:"sdkRuler"}[c]||c)+"_"+{0:"5497d1d",1:"31d6cfe",4:"31d6cfe"}[c]+".css",i=p.p+t,e=document.getElementsByTagName("link"),o=0;o<e.length;o++){var a=(s=e[o]).getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(a===t||a===i))return r()}for(var s,l=document.getElementsByTagName("style"),o=0;o<l.length;o++)if((a=(s=l[o]).getAttribute("data-href"))===t||a===i)return r();var h=document.createElement("link");h.rel="stylesheet",h.type="text/css";h.onerror=h.onload=function(t){var e,o;h.onerror=h.onload=null,"load"===t.type?r():(e=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.href||i,(t=new Error("Loading CSS chunk "+c+" failed.\n("+o+")")).code="CSS_CHUNK_LOAD_FAILED",t.type=e,t.request=o,delete u[c],h.parentNode.removeChild(h),n(t))},h.href=i,0!==h.href.indexOf(window.location.origin+"/")&&(h.crossOrigin="anonymous"),document.head.appendChild(h)}).then(function(){u[c]=0}));var r,n,e,i,o,a=l[c];return 0!==a&&(a?t.push(a[2]):(o=new Promise(function(t,e){a=l[c]=[t,e]}),t.push(a[2]=o),(r=document.createElement("script")).charset="utf-8",r.timeout=120,p.nc&&r.setAttribute("nonce",p.nc),r.src="./sdkRuler_7dacc17b.js",0!==r.src.indexOf(window.location.origin+"/")&&(r.crossOrigin="anonymous"),n=new Error,e=function(t){r.onerror=r.onload=null,clearTimeout(i);var e,o=l[c];0!==o&&(o&&(e=t&&("load"===t.type?"missing":t.type),t=t&&t.target&&t.target.src,n.message="Loading chunk "+c+" failed.\n("+e+": "+t+")",n.name="ChunkLoadError",n.type=e,n.request=t,o[1](n)),l[c]=void 0)},i=setTimeout(function(){e({type:"timeout",target:r})},12e4),r.onerror=r.onload=e,document.head.appendChild(r))),Promise.all(t)},p.m=s,p.c=o,p.d=function(t,e,o){p.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},p.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},p.t=function(e,t){if(1&t&&(e=p(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(p.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)p.d(o,r,function(t){return e[t]}.bind(null,r));return o},p.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return p.d(e,"a",e),e},p.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},p.p="",p.oe=function(t){throw console.error(t),t};var e=(r=window.webpackJsonp=window.webpackJsonp||[]).push.bind(r);r.push=t;for(var r=r.slice(),n=0;n<r.length;n++)t(r[n]);var h=e;p(p.s="tjUo")}({"+auO":function(t,e,o){var r=o("XKFU"),n=o("lvtm");r(r.S,"Math",{cbrt:function(t){return n(t=+t)*Math.pow(Math.abs(t),1/3)}})},"+fQ6":function(t,e,o){"use strict";e.a=function(r){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=t.method,n=void 0===e?"GET":e,i=t.payload,a=void 0===(e=t.errorCallback)?function(t){throw t}:e,s=void 0===(t=t.type)?"json":t;return new Promise(function(e){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){throw new Error("json 请求异常")},t={method:"GET"};"GET"!==n&&(t.method=n,t.body="FormData"==s?i:JSON.stringify(i)),fetch(r,t).then(function(t){t.ok?e(t.json()):o(t,r)}).catch(function(t){throw a(t),Error("fetch err"+r)})})}},"+lvF":function(t,e,o){t.exports=o("VTer")("native-function-to-string",Function.toString)},"+oPb":function(t,e,o){"use strict";o("OGtf")("blink",function(t){return function(){return t(this,"blink","","")}})},"+rLv":function(t,e,o){o=o("dyZX").document;t.exports=o&&o.documentElement},"/8Fb":function(t,e,o){var r=o("XKFU"),n=o("UExd")(!0);r(r.S,"Object",{entries:function(t){return n(t)}})},"/KAi":function(t,e,o){var r=o("XKFU"),n=o("dyZX").isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&n(t)}})},"/SS/":function(t,e,o){var r=o("XKFU");r(r.S,"Object",{setPrototypeOf:o("i5dc").set})},"/Vpf":function(t,e,o){o("0Mri"),t.exports=o("g3g5").RegExp.escape},"/e88":function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},"/uf1":function(t,e,o){"use strict";var r=o("XKFU"),n=o("S/j/"),i=o("2OiF"),a=o("hswa");o("nh4g")&&r(r.P+o("xbSm"),"Object",{__defineSetter__:function(t,e){a.f(n(this),t,{set:i(e),enumerable:!0,configurable:!0})}})},"0/R4":function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},"0E+W":function(t,e,o){o("elZq")("Array")},"0LDn":function(t,e,o){"use strict";o("OGtf")("italics",function(t){return function(){return t(this,"i","","")}})},"0Mri":function(t,e,o){var r=o("XKFU"),n=o("q9eg")(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(t){return n(t)}})},"0YWM":function(t,e,o){var i=o("EemH"),a=o("OP3Y"),s=o("aagx"),r=o("XKFU"),l=o("0/R4"),h=o("y3w9");r(r.S,"Reflect",{get:function t(e,o){var r,n=arguments.length<3?e:arguments[2];return h(e)===n?e[o]:(r=i.f(e,o))?s(r,"value")?r.value:void 0!==r.get?r.get.call(n):void 0:l(r=a(e))?t(r,o,n):void 0}})},"0l/t":function(t,e,o){"use strict";var r=o("XKFU"),n=o("CkkT")(2);r(r.P+r.F*!o("LyE8")([].filter,!0),"Array",{filter:function(t){return n(this,t,arguments[1])}})},"0mN4":function(t,e,o){"use strict";o("OGtf")("fixed",function(t){return function(){return t(this,"tt","","")}})},"0sh+":function(t,e,o){var r=o("quPj"),n=o("vhPU");t.exports=function(t,e,o){if(r(e))throw TypeError("String#"+o+" doesn't accept regex!");return String(n(t))}},"11IZ":function(t,e,o){var r=o("dyZX").parseFloat,n=o("qncB").trim;t.exports=1/r(o("/e88")+"-0")!=-1/0?function(t){var e=n(String(t),3),t=r(e);return 0===t&&"-"==e.charAt(0)?-0:t}:r},"1MBn":function(t,e,o){var s=o("DVgA"),l=o("JiEa"),h=o("UqcF");t.exports=function(t){var e=s(t),o=l.f;if(o)for(var r,n=o(t),i=h.f,a=0;n.length>a;)i.call(t,r=n[a++])&&e.push(r);return e}},"1TsA":function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},"1sa7":function(t,e){t.exports=Math.log1p||function(t){return-1e-8<(t=+t)&&t<1e-8?t-t*t/2:Math.log(1+t)}},"201c":function(t,e,o){"use strict";!function(t){if(o("Zvmr"),o("ls82"),o("/Vpf"),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;function e(t,e,o){t[e]||Object.defineProperty(t,e,{writable:!0,configurable:!0,value:o})}e(String.prototype,"padLeft","".padStart),e(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&e(Array,t,Function.call.bind([][t]))})}.call(this,o("yLpj"))},"25dN":function(t,e,o){var r=o("XKFU");r(r.S,"Object",{is:o("g6HL")})},"25qn":function(t,e,o){var r=o("XKFU");r(r.P+r.R,"Set",{toJSON:o("RLh9")("Set")})},"2JR3":function(t,e,o){},"2OiF":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},"2Spj":function(t,e,o){var r=o("XKFU");r(r.P,"Function",{bind:o("8MEG")})},"2atp":function(t,e,o){var r=o("XKFU"),o=Math.atanh;r(r.S+r.F*!(o&&1/o(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},"3Lyj":function(t,e,o){var n=o("KroJ");t.exports=function(t,e,o){for(var r in e)n(t,r,e[r],o);return t}},"3O7/":function(t,e,o){},"3UD+":function(t,e){t.exports=function(t){var e;return t.webpackPolyfill||((e=Object.create(t)).children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1),e}},"3YpW":function(t,e,o){o("KOQb")("Set")},"3xty":function(t,e,o){var r=o("XKFU"),n=o("2OiF"),i=o("y3w9"),a=(o("dyZX").Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!o("eeVq")(function(){a(function(){})}),"Reflect",{apply:function(t,e,o){t=n(t),o=i(o);return a?a(t,e,o):s.call(t,e,o)}})},"43Bq":function(t,e,o){"use strict";var h={type:"3d",roomId:"",roomDir:"",isDomainCall:!1,pathParams:null,MarkMd5:"",isMarkDataType:""};!function(t,e){var o=t.split("/"),r=1<(e=e.split("?")).length&&e[1].split("&"),n={};h.type="3d",h.roomId="",h.roomDir="",h.isDomainCall=1<e.length,h.pathParams=n;for(var i="",a=o.length-1;0<=a;a--)if(""!==o[a]){i=o[a];break}-1<(e=i.indexOf("-"))&&(h.type=i.substring(0,e),h.roomId=i.substring(e+1)),window.VRHOUSE_DATA_2D&&window.VRHOUSE_DATA_2D.GI?h.type="2d":"2d"!==h.type&&(h.type="3d");for(var s,l=0;l<r.length;l++)""===r[l]||1<(s=r[l].split("=")).length&&(n[s[0]]=s[1]);void 0!==n.IS_MARK_SYSTEM&&(window.VRHOUSE_CONFIG.IS_MARK_SYSTEM="true"===n.IS_MARK_SYSTEM),h.type=n.type||h.type,h.markMd5=n.MarkMd5,h.isMarkDataType=n.isMarkDataType,h.isDomainCall=h.isDomainCall&&void 0!==h.pathParams.domain&&void 0!==h.pathParams.hid,h.roomDir=h.isDomainCall?h.pathParams.domain+h.pathParams.hid+"/":h.roomId?"/"+h.roomId+"/":""}(window.location.pathname,window.location.search),e.a=h},"45Tv":function(t,e,o){function r(t,e,o){return s(t,e,o)?l(t,e,o):null!==(e=a(e))?r(t,e,o):void 0}var n=o("N6cJ"),i=o("y3w9"),a=o("OP3Y"),s=n.has,l=n.get,h=n.key;n.exp({getMetadata:function(t,e){return r(t,i(e),arguments.length<3?void 0:h(arguments[2]))}})},"49D4":function(t,e,o){var r=o("N6cJ"),n=o("y3w9"),i=r.key,a=r.set;r.exp({defineMetadata:function(t,e,o,r){a(t,e,n(o),i(r))}})},"4LiD":function(t,e,o){"use strict";var v=o("dyZX"),y=o("XKFU"),S=o("KroJ"),b=o("3Lyj"),E=o("Z6vF"),w=o("SlkY"),T=o("9gX7"),x=o("0/R4"),P=o("eeVq"),M=o("XMVh"),D=o("fyDq"),C=o("Xbzi");t.exports=function(o,t,e,r,n,i){function a(t){var o=m[t];S(m,t,"delete"==t?function(t){return!(i&&!x(t))&&o.call(this,0===t?0:t)}:"has"==t?function(t){return!(i&&!x(t))&&o.call(this,0===t?0:t)}:"get"==t?function(t){return i&&!x(t)?void 0:o.call(this,0===t?0:t)}:"add"==t?function(t){return o.call(this,0===t?0:t),this}:function(t,e){return o.call(this,0===t?0:t,e),this})}var s,l,h,c,u,p=v[o],d=p,f=n?"set":"add",m=d&&d.prototype,g={};return"function"==typeof d&&(i||m.forEach&&!P(function(){(new d).entries().next()}))?(l=(s=new d)[f](i?{}:-0,1)!=s,h=P(function(){s.has(1)}),c=M(function(t){new d(t)}),u=!i&&P(function(){for(var t=new d,e=5;e--;)t[f](e,e);return!t.has(-0)}),c||(((d=t(function(t,e){T(t,d,o);t=C(new p,t,d);return null!=e&&w(e,n,t[f],t),t})).prototype=m).constructor=d),(h||u)&&(a("delete"),a("has"),n&&a("get")),(u||l)&&a(f),i&&m.clear&&delete m.clear):(d=r.getConstructor(t,o,n,f),b(d.prototype,e),E.NEED=!0),D(d,o),g[o]=d,y(y.G+y.W+y.F*(d!=p),g),i||r.setStrong(d,o,n),d}},"4R4u":function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"5Pf0":function(t,e,o){var r=o("S/j/"),n=o("OP3Y");o("Xtr8")("getPrototypeOf",function(){return function(t){return n(r(t))}})},"694e":function(t,e,o){var r=o("EemH"),n=o("XKFU"),i=o("y3w9");n(n.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return r.f(i(t),e)}})},"69bn":function(t,e,o){var r=o("y3w9"),n=o("2OiF"),i=o("K0xU")("species");t.exports=function(t,e){var o,t=r(t).constructor;return void 0===t||null==(o=r(t)[i])?e:n(o)}},"6AQ9":function(t,e,o){"use strict";var r=o("XKFU"),n=o("8a7r");r(r.S+r.F*o("eeVq")(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,o=new("function"==typeof this?this:Array)(e);t<e;)n(o,t,arguments[t++]);return o.length=e,o}})},"6FMO":function(t,e,o){var r=o("0/R4"),n=o("EWmC"),i=o("K0xU")("species");t.exports=function(t){var e;return n(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!n(e.prototype)||(e=void 0),r(e)&&null===(e=e[i])&&(e=void 0)),void 0===e?Array:e}},"6VaU":function(t,e,o){"use strict";var r=o("XKFU"),n=o("xF/b"),i=o("S/j/"),a=o("ne8i"),s=o("2OiF"),l=o("zRwo");r(r.P,"Array",{flatMap:function(t){var e,o,r=i(this);return s(t),e=a(r.length),o=l(r,0),n(o,r,r,e,0,1,t,arguments[1]),o}}),o("nGyu")("flatMap")},"6dIT":function(t,e){t.exports=Math.scale||function(t,e,o,r,n){return 0===arguments.length||t!=t||e!=e||o!=o||r!=r||n!=n?NaN:t===1/0||t===-1/0?t:(t-e)*(n-r)/(o-e)+r}},"7DDg":function(t,e,o){"use strict";var d,f,m,g,v,r,u,y,n,S,i,a,b,E,s,l,h,w,T,p,x,P,M,D,C,c,k,R,I,A,_,F,O,L,H,B,V,N,z,U,G,j,X,W,Y,K,q,Z,J,Q,$,tt,et,ot,rt,nt,it,at,st,lt,ht,ct,ut,pt,dt,ft,mt,gt,vt,yt,St,bt,Et,wt,Tt,xt,Pt,Mt,Dt,Ct,kt,Rt,It,At,_t,Ft,Ot,Lt,Ht,Bt,Vt,Nt,zt;o("nh4g")?(d=o("LQAc"),f=o("dyZX"),m=o("eeVq"),g=o("XKFU"),v=o("D4iV"),r=o("7Qtz"),u=o("m0Pp"),y=o("9gX7"),n=o("RjD/"),S=o("Mukb"),i=o("3Lyj"),a=o("RYi7"),b=o("ne8i"),E=o("Cfrj"),s=o("d/Gc"),l=o("apmT"),h=o("aagx"),w=o("I8a+"),T=o("0/R4"),p=o("S/j/"),x=o("M6Qj"),P=o("Kuth"),M=o("OP3Y"),D=o("kJMx").f,C=o("J+6e"),Vt=o("ylqs"),kt=o("K0xU"),Nt=o("CkkT"),c=o("w2a5"),k=o("69bn"),R=o("yt8O"),I=o("hPIQ"),A=o("XMVh"),_=o("elZq"),F=o("Nr18"),O=o("upKx"),L=o("hswa"),H=o("EemH"),B=L.f,V=H.f,N=f.RangeError,z=f.TypeError,U=f.Uint8Array,j="Shared"+(G="ArrayBuffer"),X="BYTES_PER_ELEMENT",W="prototype",o=Array[W],Y=r.ArrayBuffer,K=r.DataView,q=Nt(0),Z=Nt(2),J=Nt(3),Q=Nt(4),$=Nt(5),tt=Nt(6),et=c(!0),ot=c(!1),rt=R.values,nt=R.keys,it=R.entries,at=o.lastIndexOf,st=o.reduce,lt=o.reduceRight,ht=o.join,ct=o.sort,ut=o.slice,pt=o.toString,dt=o.toLocaleString,ft=kt("iterator"),mt=kt("toStringTag"),gt=Vt("typed_constructor"),vt=Vt("def_constructor"),o=v.CONSTR,yt=v.TYPED,St=v.VIEW,bt="Wrong length!",Et=Nt(1,function(t,e){return Mt(k(t,t[vt]),e)}),wt=m(function(){return 1===new U(new Uint16Array([1]).buffer)[0]}),Tt=!!U&&!!U[W].set&&m(function(){new U(1).set({})}),xt=function(t,e){t=a(t);if(t<0||t%e)throw N("Wrong offset!");return t},Pt=function(t){if(T(t)&&yt in t)return t;throw z(t+" is not a typed array!")},Mt=function(t,e){if(!(T(t)&&gt in t))throw z("It is not a typed array constructor!");return new t(e)},Dt=function(t,e){return Ct(k(t,t[vt]),e)},Ct=function(t,e){for(var o=0,r=e.length,n=Mt(t,r);o<r;)n[o]=e[o++];return n},kt=function(t,e,o){B(t,e,{get:function(){return this._d[o]}})},Rt=function(t){var e,o,r,n,i,a,s=p(t),l=arguments.length,h=1<l?arguments[1]:void 0,c=void 0!==h,t=C(s);if(null!=t&&!x(t)){for(a=t.call(s),r=[],e=0;!(i=a.next()).done;e++)r.push(i.value);s=r}for(c&&2<l&&(h=u(h,arguments[2],2)),e=0,o=b(s.length),n=Mt(this,o);e<o;e++)n[e]=c?h(s[e],e):s[e];return n},It=function(){for(var t=0,e=arguments.length,o=Mt(this,e);t<e;)o[t]=arguments[t++];return o},At=!!U&&m(function(){dt.call(new U(1))}),_t=function(){return dt.apply(At?ut.call(Pt(this)):Pt(this),arguments)},Ft={copyWithin:function(t,e){return O.call(Pt(this),t,e,2<arguments.length?arguments[2]:void 0)},every:function(t){return Q(Pt(this),t,1<arguments.length?arguments[1]:void 0)},fill:function(t){return F.apply(Pt(this),arguments)},filter:function(t){return Dt(this,Z(Pt(this),t,1<arguments.length?arguments[1]:void 0))},find:function(t){return $(Pt(this),t,1<arguments.length?arguments[1]:void 0)},findIndex:function(t){return tt(Pt(this),t,1<arguments.length?arguments[1]:void 0)},forEach:function(t){q(Pt(this),t,1<arguments.length?arguments[1]:void 0)},indexOf:function(t){return ot(Pt(this),t,1<arguments.length?arguments[1]:void 0)},includes:function(t){return et(Pt(this),t,1<arguments.length?arguments[1]:void 0)},join:function(t){return ht.apply(Pt(this),arguments)},lastIndexOf:function(t){return at.apply(Pt(this),arguments)},map:function(t){return Et(Pt(this),t,1<arguments.length?arguments[1]:void 0)},reduce:function(t){return st.apply(Pt(this),arguments)},reduceRight:function(t){return lt.apply(Pt(this),arguments)},reverse:function(){for(var t,e=this,o=Pt(e).length,r=Math.floor(o/2),n=0;n<r;)t=e[n],e[n++]=e[--o],e[o]=t;return e},some:function(t){return J(Pt(this),t,1<arguments.length?arguments[1]:void 0)},sort:function(t){return ct.call(Pt(this),t)},subarray:function(t,e){var o=Pt(this),r=o.length,t=s(t,r);return new(k(o,o[vt]))(o.buffer,o.byteOffset+t*o.BYTES_PER_ELEMENT,b((void 0===e?r:s(e,r))-t))}},Ot=function(t,e){return Dt(this,ut.call(Pt(this),t,e))},Lt=function(t){Pt(this);var e=xt(arguments[1],1),o=this.length,r=p(t),n=b(r.length),i=0;if(o<n+e)throw N(bt);for(;i<n;)this[e+i]=r[i++]},Ht={entries:function(){return it.call(Pt(this))},keys:function(){return nt.call(Pt(this))},values:function(){return rt.call(Pt(this))}},Bt=function(t,e){return T(t)&&t[yt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Vt=function(t,e){return Bt(t,e=l(e,!0))?n(2,t[e]):V(t,e)},Nt=function(t,e,o){return!(Bt(t,e=l(e,!0))&&T(o)&&h(o,"value"))||h(o,"get")||h(o,"set")||o.configurable||h(o,"writable")&&!o.writable||h(o,"enumerable")&&!o.enumerable?B(t,e,o):(t[e]=o.value,t)},o||(H.f=Vt,L.f=Nt),g(g.S+g.F*!o,"Object",{getOwnPropertyDescriptor:Vt,defineProperty:Nt}),m(function(){pt.call({})})&&(pt=dt=function(){return ht.call(this)}),zt=i({},Ft),i(zt,Ht),S(zt,ft,Ht.values),i(zt,{slice:Ot,set:Lt,constructor:function(){},toString:pt,toLocaleString:_t}),kt(zt,"buffer","b"),kt(zt,"byteOffset","o"),kt(zt,"byteLength","l"),kt(zt,"length","e"),B(zt,mt,{get:function(){return this[yt]}}),t.exports=function(t,h,e,r){function c(t,e){B(t,e,{get:function(){return function(t,e){t=t._d;return t.v[o](e*h+t.o,wt)}(this,e)},set:function(t){return function(t,e,o){t=t._d;r&&(o=(o=Math.round(o))<0?0:255<o?255:255&o),t.v[n](e*h+t.o,o,wt)}(this,e,t)},enumerable:!0})}var u=t+((r=!!r)?"Clamped":"")+"Array",o="get"+t,n="set"+t,p=f[u],i=p||{},a=p&&M(p),s=!p||!v.ABV,t={},l=p&&p[W];s?(p=e(function(t,e,o,r){y(t,p,u,"_d");var n,i,a=0,s=0;if(T(e)){if(!(e instanceof Y||(l=w(e))==G||l==j))return yt in e?Ct(p,e):Rt.call(p,e);var l=e,s=xt(o,h),o=e.byteLength;if(void 0===r){if(o%h)throw N(bt);if((n=o-s)<0)throw N(bt)}else if(o<(n=b(r)*h)+s)throw N(bt);i=n/h}else i=E(e),l=new Y(n=i*h);for(S(t,"_d",{b:l,o:s,l:n,e:i,v:new K(l)});a<i;)c(t,a++)}),l=p[W]=P(zt),S(l,"constructor",p)):m(function(){p(1)})&&m(function(){new p(-1)})&&A(function(t){new p,new p(null),new p(1.5),new p(t)},!0)||(p=e(function(t,e,o,r){var n;return y(t,p,u),T(e)?e instanceof Y||(n=w(e))==G||n==j?void 0!==r?new i(e,xt(o,h),r):void 0!==o?new i(e,xt(o,h)):new i(e):yt in e?Ct(p,e):Rt.call(p,e):new i(E(e))}),q(a!==Function.prototype?D(i).concat(D(a)):D(i),function(t){t in p||S(p,t,i[t])}),p[W]=l,d||(l.constructor=p));s=l[ft],e=!!s&&("values"==s.name||null==s.name),a=Ht.values;S(p,gt,!0),S(l,yt,u),S(l,St,!0),S(l,vt,p),(r?new p(1)[mt]==u:mt in l)||B(l,mt,{get:function(){return u}}),t[u]=p,g(g.G+g.W+g.F*(p!=i),t),g(g.S,u,{BYTES_PER_ELEMENT:h}),g(g.S+g.F*m(function(){i.of.call(p,1)}),u,{from:Rt,of:It}),X in l||S(l,X,h),g(g.P,u,Ft),_(u),g(g.P+g.F*Tt,u,{set:Lt}),g(g.P+g.F*!e,u,Ht),d||l.toString==pt||(l.toString=pt),g(g.P+g.F*m(function(){new p(1).slice()}),u,{slice:Ot}),g(g.P+g.F*(m(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!m(function(){l.toLocaleString.call([1,2])})),u,{toLocaleString:_t}),I[u]=e?s:a,d||e||S(l,ft,a)}):t.exports=function(){}},"7Dlh":function(t,e,o){var r=o("N6cJ"),n=o("y3w9"),i=r.has,a=r.key;r.exp({hasOwnMetadata:function(t,e){return i(t,n(e),arguments.length<3?void 0:a(arguments[2]))}})},"7Pct":function(t,e,o){"use strict";o.d(e,"e",function(){return r}),o.d(e,"a",function(){return n}),o.d(e,"f",function(){return i}),o.d(e,"h",function(){return a}),o.d(e,"d",function(){return s}),o.d(e,"c",function(){return l}),o.d(e,"b",function(){return h}),o.d(e,"g",function(){return c});var e=o("7Qib"),o=o("43Bq"),r={isAutoRotate:!window.VRHOUSE_CONFIG.NO_PANO_AUTOPLAY,maxFov:90,minFov:75,compareFov:65,zoomSteps:4,clickMaxFovLimit:98,maxFovLimit:115,minFovLimit:40,autoRotateSpeed:1.5,speed:.6,autoRotateDelay:500,inertiaMovingFactor:.7,inertiaFactor:.8,rotateToCenterSpeed:3,controlSpeed:.8,zoomSpeed:.8,autoPlayTime:window.VRHOUSE_CONFIG.PANO_AUTOPLAY_TIME&&parseInt(window.VRHOUSE_CONFIG.PANO_AUTOPLAY_TIME,10)||1e4,panoramaLogoOpacity:1,changeDuration:800,maxPloarAngle:40,minPloarAngle:-46,zoomMinFov:60,zoomMaxFov:120},n={isMobile:Object(e.b)(),checkIsIosSafari:e.a,isIPhoneXSMax:e.n,fullScreenSize:Object(e.i)(Object(e.b)()),fullScreenSizeFn:e.i,getBrowserKernel:Object(e.e)(),setCssPrefix:e.r,routerMatch:o.a,getRightTipsItem:e.k,getConfig:e.f,sizeTranslate:e.s,objectDeepAssign:e.p,isPortrait:e.o,largeViewBgColor:!0===window.VRHOUSE_CONFIG.IS_WHITE_STYLE?16777215:3355443,panoramaViewBgColor:0,textFillColor:!0===window.VRHOUSE_CONFIG.IS_WHITE_STYLE?"rgba(0, 0, 0, 1)":"rgba(255, 255, 255, 1)",miniGuideWidth:200,miniGuideHeight:200,backgroundOpacity:.3,guideMarginM:10,guideMarginPC:15,guideRadiusTop:22,anisotropy:1,surveyUrl:"./survy?id=1010854&hash=8ndc",initialHouseData:null,changedDecorationStyle:!1,changeDecorationStyleReady:!0,compareScale:Object(e.b)()?1.8:1,defaultScale:.5,isIosEnv:window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.WVRChatSendMessageToNative,isAndroidEnv:window.WVRChatNativeFunction,getVersion:function(){return"5.5.7-1"},isDrawFloorPlan:!1,IS_DRAW_FLOORPLAN:!1,IS_SHOW_SIZE_UNIT_TYPE_BTN:!1},i={styleColor:"rgba(11,15,18,1)",styleIcon:"normal"},a={configMap:{"vr-btn":{configName:"IS_SHOW_VR_BTN",type:"Boolean"},"change-decoration-btn":{configName:"decorationStyleList",type:"Array",lenghtMin:2}}},s={smallGuideFov:40,fullScreenFov:50,zoomSteps:3,orbitControlsMaxDistance:2.5,orbitControlsMinDistance:n.isMobile?1.2:.8,orbitControlsDampingFactor:.7,smallViewAutoRotateSpeed:.6,largeViewAutoRotateSpeed:n.isMobile?.6:n.isPcIE?1:.8,rotateSpeed:.2,largeRotateSpeed:.1,largeViewZoomSpeed:n.isMobile?.65:.8,inertiaFactor:.2,entry:"玄关"},l={sourcesShowH:24,scrolLimit:75},h={STATUS_ISONLINE:window.VRHOUSE_CONFIG.STATUS_ISONLINE,vrType:"vr",dataType:"3D"},c={textData:{campass:{east:"东",south:"南",west:"西",north:"北"},houseTitle:"3D模型",roomTitle:"户型图",tFingerZoom:"双指缩放",oFingerRotate:"单指旋转",tFingerMove:"双指移动",oFingerMove:"单指移动",floorsName:"楼",floors:[{name:"1楼",translation:"1F"},{name:"全部",translation:"All"}],wheelZoom:"滚轮缩放",lDragRotate:"拖动左键旋转",rDragRotate:"拖动右键移动",entrance:"入户门",dragRotate:"拖动鼠标旋转",ruler:"约",disclaimer:"免责声明",feedback:"我要反馈",rooms:[{name:"主卧",translation:""}],loadingTip:["wifi环境下浏览更顺畅 · 实际情况以现场实勘为准"],loading:{wifi:"wifi环境下浏览更顺畅 · 实际情况以现场实勘为准"},vrOperate:{vrGlasses:"请将手机横屏放入VR眼镜中",setSafari:"请到设置->Safari浏览器中开启动作与方向访问并刷新（ios12）",switchRoom:"切换房间：视角点对准房间名称，直接变绿"},failedText:"不好意思，资源加载出错啦~",tryAgain:"点击重试"},compareData:{decorationStatus:{before:"装修前",after:"装修后"},guideTip:"点击切换风格",compareBtn:"对比现状",bottomIcon:{switchStyle:"切换风格",furnitureList:"好物列表",enquiry:"设计咨询"},styleName:{1:"艺居·现代",4:"意蕴·新中式",2:"慢享·北欧",3:"温暖·简美",6:"悦己·轻奢",5:"和风·日式"},styleDescribe:{1:"时尚/潮流/简洁纯粹",4:"古韵今风/诗意/雅致",2:"慢生活/冬日暖阳/北纬54°",3:"微甜/随性/曼妙",6:"低调奢华/精致/仪式感",5:"禅意/和风雅叙/静谧舒适"},switchStyle:"切换风格",moreStyle:"更多风格",comingSoon:"敬请期待",style:"风格",switchTo:"切换中…",inquiryText:{txt1:"喜欢这么装？问问多少钱",txt2:"已咨询过设计师"}}}},"7Qib":function(t,e,o){"use strict";o.d(e,"b",function(){return r}),o.d(e,"a",function(){return n}),o.d(e,"n",function(){return h}),o.d(e,"k",function(){return c}),o.d(e,"e",function(){return u}),o.d(e,"r",function(){return p}),o.d(e,"i",function(){return d}),o.d(e,"j",function(){return f}),o.d(e,"f",function(){return m}),o.d(e,"d",function(){return g}),o.d(e,"s",function(){return v}),o.d(e,"o",function(){return y}),o.d(e,"q",function(){return S}),o.d(e,"p",function(){return b}),o.d(e,"c",function(){return w}),o.d(e,"g",function(){return T}),o.d(e,"h",function(){return x}),o.d(e,"m",function(){return P}),o.d(e,"l",function(){return M});var e=o("J4zp"),s=o.n(e),e=o("RIqP"),i=o.n(e);function a(t,e){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function(t,e){if(t){if("string"==typeof t)return l(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(o="Object"===o&&t.constructor?t.constructor.name:o)||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?l(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i=!0,a=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return i=t.done,t},e:function(t){a=!0,n=t},f:function(){try{i||null==o.return||o.return()}finally{if(a)throw n}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,r=new Array(e);o<e;o++)r[o]=t[o];return r}var r=function(){var t=window.navigator.userAgent.toLowerCase(),e=/ipad/i.test(t),o=/iphone os/i.test(t),r=/midp/i.test(t),n=/rv:1.2.3.4/i.test(t),i=/ucweb/i.test(t),a=/android/i.test(t),s=/windows ce/i.test(t),t=/windows mobile/i.test(t);return e||o||r||n||i||a||s||t},n=function(t){var e=window.navigator.userAgent.toLowerCase();if(!e.indexOf("iphone os"))return!1;e=e.substr(e.indexOf("iphone os")+10,2);return 12===t?parseInt(e,10)===t:parseInt(e,10)>=t};var h=function(){var t=window.devicePixelRatio&&3===window.devicePixelRatio&&414===window.screen.width&&896===window.screen.height;return r()&&t||!1},c=function(t,e,o){try{if(!(e<t.replace(/[^\\x00-\xff]/g,"01").length))return t;for(var r=0,n=0;n<t.length;n++)if(127<t.charCodeAt(n)||94===t.charCodeAt(n)?r+=2:r++,e<r)return t.substring(0,n)+(o||"");if(r<=e)return t.substring(0,r)+(o||"")}catch(t){return""}},u=function(){var t,e=!1,o=document.createElement("div").style,r={webkit:"webkitTransform",Moz:"MozTransform",O:"OTransform",ms:"msTransform",standard:"transform"};for(t in r)void 0!==o[r[t]]&&(e=t);return e},p=function(t,e){return"standard"!=e&&e?e+t.charAt(0).toUpperCase()+t.substr(1):t},d=function(t){return{width:t&&document.documentElement.clientWidth<320?320:document.documentElement.clientWidth,height:t&&document.documentElement.clientHeight<320?320:document.documentElement.clientHeight}},f=function(t){var e=0,o=0,o="touchstart"===t.type?(e=t.touches[0].pageX,t.touches[0].pageY):"touchend"===t.type||"touchmove"===t.type?(e=t.changedTouches[0].pageX,t.changedTouches[0].pageY):(e=t.clientX,t.clientY);return{x:e,y:o+=document.body.scrollTop}},m=function(t,e){var o,r={},n=a(t);try{for(n.s();!(o=n.n()).done;){var i=o.value;r[i.key]=i}}catch(t){n.e(t)}finally{n.f()}return r[e]},g=function(t,e){var o=t.message,r=t.stack.split("\n")[1],n=r.indexOf("(")+1,i=r.indexOf(")"),a=r.slice(n,i),r=a.lastIndexOf(":"),n=a.lastIndexOf(":",r-1),i=a.slice(0,n),n=Number(a.slice(n+1,r)),r=Number(a.slice(r+1)),t=new ErrorEvent("error",{message:o,filename:i,lineno:n,colno:r,error:t});return e&&window.dispatchEvent(t),t},v=function(t){var e=t.translateType,o=void 0===e?"mToFt":e,r=t.size,e=t.sizeType;if(r){t=1,t="millimeter"===e?.00328:"squarmeter"===e?10.76:3.28;return"ftToM"===o?r/=t:r*=t,Number(r.toFixed(1))}},y=function(){return window.orientation%180==0||!r()||void 0===window.orientation},S=function(){var t="top";return 90===window.orientation?t="left":-90===window.orientation&&(t="right"),t},b=function r(){for(var n=Object.create(null),t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return e.forEach(function(o){o&&Object.keys(o).forEach(function(t){var e=o[t];E(e)?E(n[t])?n[t]=r(n[t],e):n[t]=r(e):Array.isArray(e)?n[t]=i()(e):n[t]=e})}),n};function E(t){return"[object Object]"===Object.prototype.toString.call(t)}function w(t){if(/^(rgb|RGB)/.test(t)){var e=t.replace(/(?:\(|\)|rgb|RGB)*/g,"").replace("a","").split(",");return e.length=3,{r:e[0],g:e[0],b:e[0]}}if(/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t)){var o=t.toLowerCase();if(4===o.length){for(var r="#",n=1;n<4;n+=1)r+=o.slice(n,n+1).concat(o.slice(n,n+1));o=r}for(var i=[],a=1;a<7;a+=2)i.push(parseInt("0x"+o.slice(a,a+2)));return{r:i[0],g:i[1],b:i[2]}}return null}var T=function(t){return{onload:t,sum:0,count:0,add:function(){this.sum+=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1},pass:function(){this.count+=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,this.count===this.sum&&this.onload()}}},x=function(){return{finished:!1,listeners:[],on:function(t){this.finished?t():this.listeners.push(t)},finish:function(){this.listeners.forEach(function(t){return t()}),this.finished=!0,this.listeners=[]}}},P=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return t?{step:t,delay:1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,index:0,list:[],runnig:!1,__go:function(){var n=this,t=this.step,e=this.delay,i=this.list,o=this.index+t;o>i.length&&(o=i.length),this.runnig=!0;var a=T(function(){n.index===n.list.length?(n.runnig=!1,n.list=[],n.index=0):e?window.setTimeout(function(){return n.__go()},e):n.__go()});a.add();for(this.index;this.index<o;)!function(){var t=s()(i[n.index],2),e=t[0],t=t[1],o=void 0===t?function(){}:t;a.add(),n.index++;var r=!1;try{e(function(){o(),a.pass(),r=!0})}catch(t){r||a.pass(),console.error(t)}}();a.pass()},add:function(t){return this.list.push(t),this.runnig||this.__go(),this}}:{add:function(t){var e=s()(t,2),t=e[0],e=e[1];return t(void 0===e?function(){}:e),this}}},M=function(t,e){var o,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:.01,n={};for(o in t)n[o]=t[o]>=e[o]?t[o]+r:t[o]-r;return n}},"7Qtz":function(t,e,o){"use strict";var r=o("dyZX"),n=o("nh4g"),i=o("LQAc"),a=o("D4iV"),s=o("Mukb"),l=o("3Lyj"),h=o("eeVq"),c=o("9gX7"),u=o("RYi7"),p=o("ne8i"),d=o("Cfrj"),f=o("kJMx").f,m=o("hswa").f,g=o("Nr18"),v=o("fyDq"),y="ArrayBuffer",S="DataView",b="prototype",E="Wrong index!",w=r[y],T=r[S],o=r.Math,x=r.RangeError,P=r.Infinity,M=w,D=o.abs,C=o.pow,k=o.floor,R=o.log,I=o.LN2,r="byteLength",o="byteOffset",A=n?"_b":"buffer",_=n?"_l":r,F=n?"_o":o;function O(t,e,o){var r,n,i=new Array(o),a=8*o-e-1,s=(1<<a)-1,l=s>>1,h=23===e?C(2,-24)-C(2,-77):0,c=0,u=t<0||0===t&&1/t<0?1:0;for((t=D(t))!=t||t===P?(n=t!=t?1:0,r=s):(r=k(R(t)/I),t*(o=C(2,-r))<1&&(r--,o*=2),2<=(t+=1<=r+l?h/o:h*C(2,1-l))*o&&(r++,o/=2),s<=r+l?(n=0,r=s):1<=r+l?(n=(t*o-1)*C(2,e),r+=l):(n=t*C(2,l-1)*C(2,e),r=0));8<=e;i[c++]=255&n,n/=256,e-=8);for(r=r<<e|n,a+=e;0<a;i[c++]=255&r,r/=256,a-=8);return i[--c]|=128*u,i}function L(t,e,o){var r,n=8*o-e-1,i=(1<<n)-1,a=i>>1,s=n-7,l=o-1,o=t[l--],h=127&o;for(o>>=7;0<s;h=256*h+t[l],l--,s-=8);for(r=h&(1<<-s)-1,h>>=-s,s+=e;0<s;r=256*r+t[l],l--,s-=8);if(0===h)h=1-a;else{if(h===i)return r?NaN:o?-P:P;r+=C(2,e),h-=a}return(o?-1:1)*r*C(2,h-e)}function H(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function B(t){return[255&t]}function V(t){return[255&t,t>>8&255]}function N(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function z(t){return O(t,52,8)}function U(t){return O(t,23,4)}function G(t,e,o){m(t[b],e,{get:function(){return this[o]}})}function j(t,e,o,r){var n=d(+o);if(n+e>t[_])throw x(E);o=t[A]._b,t=n+t[F],e=o.slice(t,t+e);return r?e:e.reverse()}function X(t,e,o,r,n,i){o=d(+o);if(o+e>t[_])throw x(E);for(var a=t[A]._b,s=o+t[F],l=r(+n),h=0;h<e;h++)a[s+h]=l[i?h:e-h-1]}if(a.ABV){if(!h(function(){w(1)})||!h(function(){new w(-1)})||h(function(){return new w,new w(1.5),new w(NaN),w.name!=y})){for(var W,Y=(w=function(t){return c(this,w),new M(d(t))})[b]=M[b],K=f(M),q=0;K.length>q;)(W=K[q++])in w||s(w,W,M[W]);i||(Y.constructor=w)}var Y=new T(new w(2)),Z=T[b].setInt8;Y.setInt8(0,2147483648),Y.setInt8(1,2147483649),!Y.getInt8(0)&&Y.getInt8(1)||l(T[b],{setInt8:function(t,e){Z.call(this,t,e<<24>>24)},setUint8:function(t,e){Z.call(this,t,e<<24>>24)}},!0)}else w=function(t){c(this,w,y);t=d(t);this._b=g.call(new Array(t),0),this[_]=t},T=function(t,e,o){c(this,T,S),c(t,w,S);var r=t[_],e=u(e);if(e<0||r<e)throw x("Wrong offset!");if(r<e+(o=void 0===o?r-e:p(o)))throw x("Wrong length!");this[A]=t,this[F]=e,this[_]=o},n&&(G(w,r,"_l"),G(T,"buffer","_b"),G(T,r,"_l"),G(T,o,"_o")),l(T[b],{getInt8:function(t){return j(this,1,t)[0]<<24>>24},getUint8:function(t){return j(this,1,t)[0]},getInt16:function(t){t=j(this,2,t,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(t){t=j(this,2,t,arguments[1]);return t[1]<<8|t[0]},getInt32:function(t){return H(j(this,4,t,arguments[1]))},getUint32:function(t){return H(j(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return L(j(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return L(j(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){X(this,1,t,B,e)},setUint8:function(t,e){X(this,1,t,B,e)},setInt16:function(t,e){X(this,2,t,V,e,arguments[2])},setUint16:function(t,e){X(this,2,t,V,e,arguments[2])},setInt32:function(t,e){X(this,4,t,N,e,arguments[2])},setUint32:function(t,e){X(this,4,t,N,e,arguments[2])},setFloat32:function(t,e){X(this,4,t,U,e,arguments[2])},setFloat64:function(t,e){X(this,8,t,z,e,arguments[2])}});v(w,y),v(T,S),s(T[b],a.VIEW,!0),e[y]=w,e[S]=T},"7VC1":function(t,e,o){"use strict";var r=o("XKFU"),n=o("Lgjv"),o=o("ol8x"),o=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*o,"String",{padEnd:function(t){return n(this,t,1<arguments.length?arguments[1]:void 0,!1)}})},"7W2i":function(t,e,o){var r=o("SksO");t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)},t.exports.default=t.exports,t.exports.__esModule=!0},"7X58":function(t,e,o){o=o("XKFU");o(o.S,"Math",{signbit:function(t){return(t=+t)!=t?t:0==t?1/t==1/0:0<t}})},"7h0T":function(t,e,o){o=o("XKFU");o(o.S,"Number",{isNaN:function(t){return t!=t}})},"7xj+":function(t,e,r){"use strict";!function(t){var e,o=r("cDf5"),m=r.n(o);e=self,o=function(){var r={d:function(t,e){for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},t={};r.d(t,{default:function(){return f}});var e=window.location.hostname,n=window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.WVRChatSendMessageToNative,i=window.WVRChatNativeFunction,a=(window.location.href.indexOf("miniprogram"),0<=e.indexOf("localhost")||0<=e.indexOf("10.252")||0<=e.indexOf("192.168")),o=["localEnvUserList","localEnvRequestSync","sceneInfoBack","customDataBack","exit","callSuccess","roomUpdate","switchToVrChat","requestRoomInfoBack","WVRSyncFrameBack","vrBackEvent","calleeAccept","createRoom","updateTalkingStatus","audienceInvite","WVRChatUpdateAudience","audienceOut","audienceIn","syncMicrophone","WVRSwitchScreen","refreshCurrentSpot","updateMuteState"];function s(t,e){try{p("outputLog","h5 log receiver "+t),console.log("outputLog","h5 log receiver "+t,e);try{e&&"string"==typeof e&&(e=JSON.parse(e))}catch(t){}if(!window.vrChatConnectorConfig)return;switch(t){case"localEnvUserList":case"localEnvRequestSync":break;case"WVRChatWrtcSceneInfo":case"sceneInfoBack":case"WVRChatWrtcSceneInfo":case"customDataBack":window.vrChatConnectorConfig.sceneInfoCb&&window.vrChatConnectorConfig.sceneInfoCb(e);break;case"WVRChatVrExit":case"exit":window.vrChatConnectorConfig.exitCb&&window.vrChatConnectorConfig.exitCb(e);break;case"WVRChatVrAudioConnected":case"callSuccess":window.vrChatConnectorConfig.audioConnectedCb&&window.vrChatConnectorConfig.audioConnectedCb(e);break;case"WVRChatUpdateRoomInfo":case"roomUpdate":window.vrChatConnectorConfig.updateRoomInfoCb&&window.vrChatConnectorConfig.updateRoomInfoCb(e);break;case"WVRChatSwitchToVRChat":case"switchToVrChat":window.vrChatConnectorConfig.switchToVrChatCb&&window.vrChatConnectorConfig.switchToVrChatCb(e);break;case"WVRChatRequestRoomInfo":case"requestRoomInfoBack":window.vrChatConnectorConfig.requestRoomInfoCb&&window.vrChatConnectorConfig.requestRoomInfoCb(e);break;case"WVRSyncFrame":case"WVRSyncFrameBack":window.vrChatConnectorConfig.syncFrameCb&&window.vrChatConnectorConfig.syncFrameCb(e);break;case"WVRBackEvent":case"vrBackEvent":window.vrChatConnectorConfig.backEventCb&&window.vrChatConnectorConfig.backEventCb(e);break;case"WVRChatCalleeAccept":case"calleeAccept":window.vrChatConnectorConfig.calleeAcceptCb&&window.vrChatConnectorConfig.calleeAcceptCb(e);break;case"WVRChatCreateRoom":case"createRoom":window.vrChatConnectorConfig.createRoomCb&&window.vrChatConnectorConfig.createRoomCb(e);break;case"WVRChatUpdateTalkingStatus":case"updateTalkingStatus":window.vrChatConnectorConfig.talkingStatusCb&&window.vrChatConnectorConfig.talkingStatusCb(e);break;case"WVRChatAudienceInvite":case"audienceInvite":window.vrChatConnectorConfig.audienceInviteCb&&window.vrChatConnectorConfig.audienceInviteCb(e);break;case"WVRChatUpdateAudience":window.vrChatConnectorConfig.audienceUpdateCb&&window.vrChatConnectorConfig.audienceUpdateCb(e);break;case"WVRChatAudienceOut":case"audienceOut":window.vrChatConnectorConfig.audienceOutCb&&window.vrChatConnectorConfig.audienceOutCb(e);break;case"WVRChatAudienceIn":case"audienceIn":window.vrChatConnectorConfig.audienceInCb&&window.vrChatConnectorConfig.audienceInCb(e);break;case"WVRChatSyncMicrophone":case"syncMicrophone":window.vrChatConnectorConfig.syncMicrophoneCb&&window.vrChatConnectorConfig.syncMicrophoneCb(e);break;case"WVRSwitchScreen":window.vrChatConnectorConfig.switchScreenCb&&window.vrChatConnectorConfig.switchScreenCb(e);break;case"WVRRefreshCurrentSpot":case"refreshCurrentSpot":window.vrChatConnectorConfig.refreshCurrentSpotCb&&window.vrChatConnectorConfig.refreshCurrentSpotCb(e);break;case"updateMuteState":window.vrChatConnectorConfig.updateMuteState&&window.vrChatConnectorConfig.updateMuteState(e);break;default:window.vrChatConnectorConfig.ortherCb&&window.vrChatConnectorConfig.ortherCb(t,e)}}catch(t){var o={name:t.name,message:t.message,stack:t.stack&&"string"==typeof t.stack?t.stack:void 0};console.error(t),console.trace(),p("outputLog",{data:o})}}var l,h={},c={sendSceneInfo:function(t){!(1<arguments.length&&void 0!==arguments[1])||arguments[1]?(t.isCustomMsg=!0,p("customData",t)):p("sceneInfo",t)},call:function(){p("call")},exit:function(t){console.log(t,"exit====================>"),p("bye",t)},mute:function(t){p("mute",t?{status:"on"}:{status:"off"})},outputNativeLog:function(t){p("WVRChatOutputLog",t)},callComment:function(){p("callComment")},firstFrameReady:function(t){p("firstFrameReady",t)},interceptBackEvent:function(t){p("interceptBackEvent",t)},requestRoomInfo:function(){p("requestRoomInfo")},switchURL:function(t){p("switchURL",{url:t})},syncFrame:function(t){p("WVRSyncFrame",t)},testInvite:function(){p("testInvite")},trackEvent:function(t){p("WVRChatTrackEvent",t)},wvrExit:function(t){p("vrExit",t)},getVersion:function(){return"1.0.3"},switchScreen:function(t){p("switchScreen",t)},updatePageId:function(t){console.log(l,"updatePageId=====>"),l?p("WVRUpdatePageId",t):h.WVRUpdatePageId=t},dataTransmitter:p,requestCallState:function(t){p("requestCallState",t)},requestRoomInfoSync:function(t){p("requestRoomInfoSync",t)},requestMuteState:function(t){p("requestMuteState",t)},requestMicrophoneAuthority:function(t){p("requestMicrophoneAuthority",t)},requestChatConfigStr:function(t){p("requestChatConfigStr",t)},requestLastByeInfo:function(t){p("requestLastByeInfo",t)}};function u(t){return(u="function"==typeof Symbol&&"symbol"==m()(Symbol.iterator)?function(t){return m()(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":m()(t)})(t)}function p(t){var e,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";try{e="object"===u(o)?JSON.stringify(o):o}catch(t){e=o}console.log("transmitter",t,"function"==typeof e?"function":e),l?l.emit(t,e):i&&window.WVRChatNativeFunction?window.WVRChatNativeFunction.sendMessageToNative(t,e):n&&window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.WVRChatSendMessageToNative?window.webkit.messageHandlers.WVRChatSendMessageToNative.postMessage([t,e]):a&&console.log("dev transmitter",t,e)}window.addEventListener("message",function(t){"vrChannelInited"===t.data&&(console.log("vrchatV2Ready++++++++++++++++++========>"),l=window.vrchatSdkV2(),o.forEach(function(e){l.on(e,function(t){s(e,t)})}),window.receiveMessageFromNativeCb=s,window.vrChatConnectorApi=c,function(){for(var t in h)p(t,h[t])}())});var d={sendSceneInfo:function(t){1<arguments.length&&void 0!==arguments[1]&&!arguments[1]||(t.isCustomMsg=!0),p("WVRChatWrtcSceneInfo",t)},call:function(){p("WVRChatCallVrChat")},exit:function(t){p("WVRChatVrExit",t)},mute:function(t){p("WVRChatWrtcVrMute",t?{status:"on"}:{status:"off"})},outputNativeLog:function(t){p("WVRChatOutputLog",t)},callComment:function(){p("callComment")},firstFrameReady:function(t){p("WVRFirstFrameReady",t)},interceptBackEvent:function(t){p("WVRInterceptBackEvent",t)},requestRoomInfo:function(){p("WVRChatRequestRoomInfo")},switchURL:function(t){p("WVRChatSwitchURL",{url:t})},syncFrame:function(t){p("WVRSyncFrame",t)},testInvite:function(){p("testInvite")},trackEvent:function(t){p("WVRChatTrackEvent",t)},wvrExit:function(t){p("WVRExit",t)},getVersion:function(){return"1.0.3"},switchScreen:function(t){p("WVRSwitchScreen",t)},updatePageId:function(t){p("WVRUpdatePageId",t)},dataTransmitter:p};function f(){window.location.hostname,window.receiveMessageFromNative=s,window.vrChatConnectorApi=d}return t.default},"object"==("undefined"==typeof exports?"undefined":m()(exports))&&"object"==m()(t)?t.exports=o():"function"==typeof define&&r("PDX0")?define([],o):"object"==("undefined"==typeof exports?"undefined":m()(exports))?exports.vrChatConnector=o():e.vrChatConnector=o()}.call(this,r("3UD+")(t))},"8+KV":function(t,e,o){"use strict";var r=o("XKFU"),n=o("CkkT")(0),o=o("LyE8")([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(t){return n(this,t,arguments[1])}})},"84bF":function(t,e,o){"use strict";o("OGtf")("small",function(t){return function(){return t(this,"small","","")}})},"8MEG":function(t,e,o){"use strict";var i=o("2OiF"),a=o("0/R4"),s=o("MfQN"),l=[].slice,h={};t.exports=Function.bind||function(e){var o=i(this),r=l.call(arguments,1),n=function(){var t=r.concat(l.call(arguments));return this instanceof n?function(t,e,o){if(!(e in h)){for(var r=[],n=0;n<e;n++)r[n]="a["+n+"]";h[e]=Function("F,a","return new F("+r.join(",")+")")}return h[e](t,o)}(o,t.length,t):s(o,t,e)};return a(o.prototype)&&(n.prototype=o.prototype),n}},"8a7r":function(t,e,o){"use strict";var r=o("hswa"),n=o("RjD/");t.exports=function(t,e,o){e in t?r.f(t,e,n(0,o)):t[e]=o}},"8oxB":function(t,e){var o,r,t=t.exports={};function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(o===setTimeout)return setTimeout(e,0);if((o===n||!o)&&setTimeout)return o=setTimeout,setTimeout(e,0);try{return o(e,0)}catch(t){try{return o.call(null,e,0)}catch(t){return o.call(this,e,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:n}catch(t){o=n}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(t){r=i}}();var s,l=[],h=!1,c=-1;function u(){h&&s&&(h=!1,s.length?l=s.concat(l):c=-1,l.length&&p())}function p(){if(!h){var t=a(u);h=!0;for(var e=l.length;e;){for(s=l,l=[];++c<e;)s&&s[c].run();c=-1,e=l.length}s=null,h=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function f(){}t.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var o=1;o<arguments.length;o++)e[o-1]=arguments[o];l.push(new d(t,e)),1!==l.length||h||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=f,t.addListener=f,t.once=f,t.off=f,t.removeListener=f,t.removeAllListeners=f,t.emit=f,t.prependListener=f,t.prependOnceListener=f,t.listeners=function(t){return[]},t.binding=function(t){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(t){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},"91GP":function(t,e,o){var r=o("XKFU");r(r.S+r.F,"Object",{assign:o("czNK")})},"9AAn":function(t,e,o){"use strict";var r=o("wmvG"),n=o("s5qY");t.exports=o("4LiD")("Map",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{get:function(t){t=r.getEntry(n(this,"Map"),t);return t&&t.v},set:function(t,e){return r.def(n(this,"Map"),0===t?0:t,e)}},r,!0)},"9P93":function(t,e,o){var r=o("XKFU"),n=Math.imul;r(r.S+r.F*o("eeVq")(function(){return-5!=n(4294967295,5)||2!=n.length}),"Math",{imul:function(t,e){var o=65535,r=+t,n=+e,t=o&r,e=o&n;return 0|t*e+((o&r>>>16)*e+t*(o&n>>>16)<<16>>>0)}})},"9VmF":function(t,e,o){"use strict";var r=o("XKFU"),n=o("ne8i"),i=o("0sh+"),a="startsWith",s=""[a];r(r.P+r.F*o("UUeW")(a),"String",{startsWith:function(t){var e=i(this,t,a),o=n(Math.min(1<arguments.length?arguments[1]:void 0,e.length)),t=String(t);return s?s.call(e,t,o):e.slice(o,o+t.length)===t}})},"9XZr":function(t,e,o){"use strict";var r=o("XKFU"),n=o("Lgjv"),o=o("ol8x"),o=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*o,"String",{padStart:function(t){return n(this,t,1<arguments.length?arguments[1]:void 0,!0)}})},"9gX7":function(t,e){t.exports=function(t,e,o,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(o+": incorrect invocation!");return t}},"9rMk":function(t,e,o){o=o("XKFU");o(o.S,"Reflect",{has:function(t,e){return e in t}})},A2zW:function(t,e,o){"use strict";function a(t,e){for(var o=-1,r=e;++o<6;)r+=t*d[o],d[o]=r%1e7,r=i(r/1e7)}function s(t){for(var e=6,o=0;0<=--e;)o+=d[e],d[e]=i(o/t),o=o%t*1e7}function l(){for(var t,e=6,o="";0<=--e;)""===o&&0!==e&&0===d[e]||(t=String(d[e]),o=""===o?t:o+p.call("0",7-t.length)+t);return o}function h(t,e,o){return 0===e?o:e%2==1?h(t,e-1,o*t):h(t*t,e/2,o)}var r=o("XKFU"),c=o("RYi7"),u=o("vvmO"),p=o("l0Rn"),n=1..toFixed,i=Math.floor,d=[0,0,0,0,0,0],f="Number.toFixed: incorrect invocation!";r(r.P+r.F*(!!n&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==0xde0b6b3a7640080.toFixed(0))||!o("eeVq")(function(){n.call({})})),"Number",{toFixed:function(t){var e,o,r=u(this,f),n=c(t),i="",t="0";if(n<0||20<n)throw RangeError(f);if(r!=r)return"NaN";if(r<=-1e21||1e21<=r)return String(r);if(r<0&&(i="-",r=-r),1e-21<r)if(r=(o=function(t){for(var e=0,o=t;4096<=o;)e+=12,o/=4096;for(;2<=o;)e+=1,o/=2;return e}(r*h(2,69,1))-69)<0?r*h(2,-o,1):r/h(2,o,1),r*=4503599627370496,0<(o=52-o)){for(a(0,r),e=n;7<=e;)a(1e7,0),e-=7;for(a(h(10,e,1),0),e=o-1;23<=e;)s(1<<23),e-=23;s(1<<e),a(1,1),s(2),t=l()}else a(0,r),a(1<<-o,0),t=l()+p.call("0",n);return t=0<n?i+((o=t.length)<=n?"0."+p.call("0",n-o)+t:t.slice(0,o-n)+"."+t.slice(o-n)):i+t}})},A5AN:function(t,e,o){"use strict";var r=o("AvRE")(!0);t.exports=function(t,e,o){return e+(o?r(t,e).length:1)}},"AP+2":function(t,e,o){"use strict";e.a=function(t,e){Object.assign(t,e)}},Afnz:function(t,e,o){"use strict";function y(){return this}var S=o("LQAc"),b=o("XKFU"),E=o("KroJ"),w=o("Mukb"),T=o("hPIQ"),x=o("QaDb"),P=o("fyDq"),M=o("OP3Y"),D=o("K0xU")("iterator"),C=!([].keys&&"next"in[].keys()),k="values";t.exports=function(t,e,o,r,n,i,a){x(o,e,r);function s(t){if(!C&&t in f)return f[t];switch(t){case"keys":case k:return function(){return new o(this,t)}}return function(){return new o(this,t)}}var l,h,c,u=e+" Iterator",p=n==k,d=!1,f=t.prototype,m=f[D]||f["@@iterator"]||n&&f[n],g=m||s(n),v=n?p?s("entries"):g:void 0,r="Array"==e&&f.entries||m;if(r&&(c=M(r.call(new t)))!==Object.prototype&&c.next&&(P(c,u,!0),S||"function"==typeof c[D]||w(c,D,y)),p&&m&&m.name!==k&&(d=!0,g=function(){return m.call(this)}),S&&!a||!C&&!d&&f[D]||w(f,D,g),T[e]=g,T[u]=y,n)if(l={values:p?g:s(k),keys:i?g:s("keys"),entries:v},a)for(h in l)h in f||E(f,h,l[h]);else b(b.P+b.F*(C||d),e,l);return l}},AphP:function(t,e,o){"use strict";var r=o("XKFU"),n=o("S/j/"),i=o("apmT");r(r.P+r.F*o("eeVq")(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=n(this),o=i(e);return"number"!=typeof o||isFinite(o)?e.toISOString():null}})},AvRE:function(t,e,o){var a=o("RYi7"),s=o("vhPU");t.exports=function(i){return function(t,e){var o,r=String(s(t)),n=a(e),t=r.length;return n<0||t<=n?i?"":void 0:(e=r.charCodeAt(n))<55296||56319<e||n+1===t||(o=r.charCodeAt(n+1))<56320||57343<o?i?r.charAt(n):e:i?r.slice(n,n+2):o-56320+(e-55296<<10)+65536}}},BC7C:function(t,e,o){var r=o("XKFU");r(r.S,"Math",{fround:o("kcoS")})},"BJ/l":function(t,e,o){var r=o("XKFU");r(r.S,"Math",{log1p:o("1sa7")})},BP8U:function(t,e,o){var r=o("XKFU"),o=o("PKUr");r(r.S+r.F*(Number.parseInt!=o),"Number",{parseInt:o})},Bnag:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},BqfV:function(t,e,o){var r=o("N6cJ"),n=o("y3w9"),i=r.get,a=r.key;r.exp({getOwnMetadata:function(t,e){return i(t,n(e),arguments.length<3?void 0:a(arguments[2]))}})},Btvt:function(t,e,o){"use strict";var r=o("I8a+"),n={};n[o("K0xU")("toStringTag")]="z",n+""!="[object z]"&&o("KroJ")(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},"C/va":function(t,e,o){"use strict";var r=o("y3w9");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},CX2u:function(t,e,o){"use strict";var r=o("XKFU"),n=o("g3g5"),i=o("dyZX"),a=o("69bn"),s=o("vKrd");r(r.P+r.R,"Promise",{finally:function(e){var o=a(this,n.Promise||i.Promise),t="function"==typeof e;return this.then(t?function(t){return s(o,e()).then(function(){return t})}:e,t?function(t){return s(o,e()).then(function(){throw t})}:e)}})},CeCd:function(t,e,o){o=o("XKFU");o(o.S,"Math",{clamp:function(t,e,o){return Math.min(o,Math.max(e,t))}})},Cfrj:function(t,e,o){var r=o("RYi7"),n=o("ne8i");t.exports=function(t){if(void 0===t)return 0;var e=r(t),t=n(e);if(e!==t)throw RangeError("Wrong length!");return t}},CkkT:function(t,e,o){var S=o("m0Pp"),b=o("Ymqv"),E=o("S/j/"),w=o("ne8i"),r=o("zRwo");t.exports=function(u,t){var p=1==u,d=2==u,f=3==u,m=4==u,g=6==u,v=5==u||g,y=t||r;return function(t,e,o){for(var r,n,i=E(t),a=b(i),s=S(e,o,3),l=w(a.length),h=0,c=p?y(t,l):d?y(t,0):void 0;h<l;h++)if((v||h in a)&&(n=s(r=a[h],h,i),u))if(p)c[h]=n;else if(n)switch(u){case 3:return!0;case 5:return r;case 6:return h;case 2:c.push(r)}else if(m)return!1;return g?-1:f||m?m:c}}},CyHz:function(t,e,o){var r=o("XKFU");r(r.S,"Math",{sign:o("lvtm")})},D4iV:function(t,e,o){for(var r,n=o("dyZX"),i=o("Mukb"),o=o("ylqs"),a=o("typed_array"),s=o("view"),o=!(!n.ArrayBuffer||!n.DataView),l=o,h=0,c="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<9;)(r=n[c[h++]])?(i(r.prototype,a,!0),i(r.prototype,s,!0)):l=!1;t.exports={ABV:o,CONSTR:l,TYPED:a,VIEW:s}},DACs:function(t,e,o){o=o("XKFU");o(o.S,"Math",{DEG_PER_RAD:Math.PI/180})},DDYI:function(t,e,o){var r=o("XKFU");r(r.G,{global:o("dyZX")})},DNiP:function(t,e,o){"use strict";var r=o("XKFU"),n=o("eyMr");r(r.P+r.F*!o("LyE8")([].reduce,!0),"Array",{reduce:function(t){return n(this,t,arguments.length,arguments[1],!1)}})},DSV3:function(t,e,o){var r=o("XKFU"),n=o("gHnn")(),i=o("dyZX").process,a="process"==o("LZWt")(i);r(r.G,{asap:function(t){var e=a&&i.domain;n(e?e.bind(t):t)}})},DVgA:function(t,e,o){var r=o("zhAb"),n=o("4R4u");t.exports=Object.keys||function(t){return r(t,n)}},DW2E:function(t,e,o){var r=o("0/R4"),n=o("Z6vF").onFreeze;o("Xtr8")("freeze",function(e){return function(t){return e&&r(t)?e(n(t)):t}})},"DWN/":function(t,e,o){var r;!function(){"use strict";void 0===(r="function"==typeof(r=function(){"use strict";var t=function t(e){if(!(this instanceof t))return new t(e);var o={swfContainerId:"fingerprintjs2",swfPath:"flash/compiled/FontList.swf",detectScreenOrientation:!0,sortPluginsFor:[/palemoon/i],userDefinedFonts:[]};this.options=this.extend(e,o),this.nativeForEach=Array.prototype.forEach,this.nativeMap=Array.prototype.map};return t.prototype={extend:function t(e,o){if(null==e)return o;for(var r in e)null!=e[r]&&o[r]!==e[r]&&(o[r]=e[r]);return o},get:function t(r){var e=[];e=this.userAgentKey(e),e=this.languageKey(e),e=this.colorDepthKey(e),e=this.pixelRatioKey(e),e=this.hardwareConcurrencyKey(e),e=this.screenResolutionKey(e),e=this.availableScreenResolutionKey(e),e=this.timezoneOffsetKey(e),e=this.sessionStorageKey(e),e=this.localStorageKey(e),e=this.indexedDbKey(e),e=this.addBehaviorKey(e),e=this.openDatabaseKey(e),e=this.cpuClassKey(e),e=this.platformKey(e),e=this.doNotTrackKey(e),e=this.pluginsKey(e),e=this.canvasKey(e),e=this.webglKey(e),e=this.adBlockKey(e),e=this.hasLiedLanguagesKey(e),e=this.hasLiedResolutionKey(e),e=this.hasLiedOsKey(e),e=this.hasLiedBrowserKey(e),e=this.touchSupportKey(e),e=this.customEntropyFunction(e);var n=this;this.fontsKey(e,function(t){var o=[];n.each(t,function(t){var e=t.value;"undefined"!=typeof t.value.join&&(e=t.value.join(";")),o.push(e)});var e=n.x64hash128(o.join("~~~"),31);return r(e,t)})},customEntropyFunction:function t(e){return"function"==typeof this.options.customFunction&&e.push({key:"custom",value:this.options.customFunction()}),e},userAgentKey:function t(e){return this.options.excludeUserAgent||e.push({key:"user_agent",value:this.getUserAgent()}),e},getUserAgent:function t(){return navigator.userAgent},languageKey:function t(e){return this.options.excludeLanguage||e.push({key:"language",value:navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||""}),e},colorDepthKey:function t(e){return this.options.excludeColorDepth||e.push({key:"color_depth",value:screen.colorDepth||-1}),e},pixelRatioKey:function t(e){return this.options.excludePixelRatio||e.push({key:"pixel_ratio",value:this.getPixelRatio()}),e},getPixelRatio:function t(){return window.devicePixelRatio||""},screenResolutionKey:function t(e){return this.options.excludeScreenResolution?e:this.getScreenResolution(e)},getScreenResolution:function t(e){var o;return o=this.options.detectScreenOrientation&&screen.height>screen.width?[screen.height,screen.width]:[screen.width,screen.height],"undefined"!=typeof o&&e.push({key:"resolution",value:o}),e},availableScreenResolutionKey:function t(e){return this.options.excludeAvailableScreenResolution?e:this.getAvailableScreenResolution(e)},getAvailableScreenResolution:function t(e){var o;return screen.availWidth&&screen.availHeight&&(o=this.options.detectScreenOrientation?screen.availHeight>screen.availWidth?[screen.availHeight,screen.availWidth]:[screen.availWidth,screen.availHeight]:[screen.availHeight,screen.availWidth]),"undefined"!=typeof o&&e.push({key:"available_resolution",value:o}),e},timezoneOffsetKey:function t(e){return this.options.excludeTimezoneOffset||e.push({key:"timezone_offset",value:(new Date).getTimezoneOffset()}),e},sessionStorageKey:function t(e){return!this.options.excludeSessionStorage&&this.hasSessionStorage()&&e.push({key:"session_storage",value:1}),e},localStorageKey:function t(e){return!this.options.excludeSessionStorage&&this.hasLocalStorage()&&e.push({key:"local_storage",value:1}),e},indexedDbKey:function t(e){return!this.options.excludeIndexedDB&&this.hasIndexedDB()&&e.push({key:"indexed_db",value:1}),e},addBehaviorKey:function t(e){return document.body&&!this.options.excludeAddBehavior&&document.body.addBehavior&&e.push({key:"add_behavior",value:1}),e},openDatabaseKey:function t(e){return!this.options.excludeOpenDatabase&&window.openDatabase&&e.push({key:"open_database",value:1}),e},cpuClassKey:function t(e){return this.options.excludeCpuClass||e.push({key:"cpu_class",value:this.getNavigatorCpuClass()}),e},platformKey:function t(e){return this.options.excludePlatform||e.push({key:"navigator_platform",value:this.getNavigatorPlatform()}),e},doNotTrackKey:function t(e){return this.options.excludeDoNotTrack||e.push({key:"do_not_track",value:this.getDoNotTrack()}),e},canvasKey:function t(e){return!this.options.excludeCanvas&&this.isCanvasSupported()&&e.push({key:"canvas",value:this.getCanvasFp()}),e},webglKey:function t(e){return this.options.excludeWebGL?e:this.isWebGlSupported()?(e.push({key:"webgl",value:this.getWebglFp()}),e):e},adBlockKey:function t(e){return this.options.excludeAdBlock||e.push({key:"adblock",value:this.getAdBlock()}),e},hasLiedLanguagesKey:function t(e){return this.options.excludeHasLiedLanguages||e.push({key:"has_lied_languages",value:this.getHasLiedLanguages()}),e},hasLiedResolutionKey:function t(e){return this.options.excludeHasLiedResolution||e.push({key:"has_lied_resolution",value:this.getHasLiedResolution()}),e},hasLiedOsKey:function t(e){return this.options.excludeHasLiedOs||e.push({key:"has_lied_os",value:this.getHasLiedOs()}),e},hasLiedBrowserKey:function t(e){return this.options.excludeHasLiedBrowser||e.push({key:"has_lied_browser",value:this.getHasLiedBrowser()}),e},fontsKey:function t(e,o){return this.options.excludeJsFonts?this.flashFontsKey(e,o):this.jsFontsKey(e,o)},flashFontsKey:function t(e,o){return this.options.excludeFlashFonts?o(e):this.hasSwfObjectLoaded()&&this.hasMinFlashInstalled()?"undefined"==typeof this.options.swfPath?o(e):void this.loadSwfAndDetectFonts(function(t){e.push({key:"swf_fonts",value:t.join(";")}),o(e)}):o(e)},jsFontsKey:function t(w,T){var x=this;return setTimeout(function(){var l=["monospace","sans-serif","serif"],h=["Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Garamond","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"],t=["Abadi MT Condensed Light","Academy Engraved LET","ADOBE CASLON PRO","Adobe Garamond","ADOBE GARAMOND PRO","Agency FB","Aharoni","Albertus Extra Bold","Albertus Medium","Algerian","Amazone BT","American Typewriter","American Typewriter Condensed","AmerType Md BT","Andalus","Angsana New","AngsanaUPC","Antique Olive","Aparajita","Apple Chancery","Apple Color Emoji","Apple SD Gothic Neo","Arabic Typesetting","ARCHER","ARNO PRO","Arrus BT","Aurora Cn BT","AvantGarde Bk BT","AvantGarde Md BT","AVENIR","Ayuthaya","Bandy","Bangla Sangam MN","Bank Gothic","BankGothic Md BT","Baskerville","Baskerville Old Face","Batang","BatangChe","Bauer Bodoni","Bauhaus 93","Bazooka","Bell MT","Bembo","Benguiat Bk BT","Berlin Sans FB","Berlin Sans FB Demi","Bernard MT Condensed","BernhardFashion BT","BernhardMod BT","Big Caslon","BinnerD","Blackadder ITC","BlairMdITC TT","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bodoni MT","Bodoni MT Black","Bodoni MT Condensed","Bodoni MT Poster Compressed","Bookshelf Symbol 7","Boulder","Bradley Hand","Bradley Hand ITC","Bremen Bd BT","Britannic Bold","Broadway","Browallia New","BrowalliaUPC","Brush Script MT","Californian FB","Calisto MT","Calligrapher","Candara","CaslonOpnface BT","Castellar","Centaur","Cezanne","CG Omega","CG Times","Chalkboard","Chalkboard SE","Chalkduster","Charlesworth","Charter Bd BT","Charter BT","Chaucer","ChelthmITC Bk BT","Chiller","Clarendon","Clarendon Condensed","CloisterBlack BT","Cochin","Colonna MT","Constantia","Cooper Black","Copperplate","Copperplate Gothic","Copperplate Gothic Bold","Copperplate Gothic Light","CopperplGoth Bd BT","Corbel","Cordia New","CordiaUPC","Cornerstone","Coronet","Cuckoo","Curlz MT","DaunPenh","Dauphin","David","DB LCD Temp","DELICIOUS","Denmark","DFKai-SB","Didot","DilleniaUPC","DIN","DokChampa","Dotum","DotumChe","Ebrima","Edwardian Script ITC","Elephant","English 111 Vivace BT","Engravers MT","EngraversGothic BT","Eras Bold ITC","Eras Demi ITC","Eras Light ITC","Eras Medium ITC","EucrosiaUPC","Euphemia","Euphemia UCAS","EUROSTILE","Exotc350 Bd BT","FangSong","Felix Titling","Fixedsys","FONTIN","Footlight MT Light","Forte","FrankRuehl","Fransiscan","Freefrm721 Blk BT","FreesiaUPC","Freestyle Script","French Script MT","FrnkGothITC Bk BT","Fruitger","FRUTIGER","Futura","Futura Bk BT","Futura Lt BT","Futura Md BT","Futura ZBlk BT","FuturaBlack BT","Gabriola","Galliard BT","Gautami","Geeza Pro","Geometr231 BT","Geometr231 Hv BT","Geometr231 Lt BT","GeoSlab 703 Lt BT","GeoSlab 703 XBd BT","Gigi","Gill Sans","Gill Sans MT","Gill Sans MT Condensed","Gill Sans MT Ext Condensed Bold","Gill Sans Ultra Bold","Gill Sans Ultra Bold Condensed","Gisha","Gloucester MT Extra Condensed","GOTHAM","GOTHAM BOLD","Goudy Old Style","Goudy Stout","GoudyHandtooled BT","GoudyOLSt BT","Gujarati Sangam MN","Gulim","GulimChe","Gungsuh","GungsuhChe","Gurmukhi MN","Haettenschweiler","Harlow Solid Italic","Harrington","Heather","Heiti SC","Heiti TC","HELV","Herald","High Tower Text","Hiragino Kaku Gothic ProN","Hiragino Mincho ProN","Hoefler Text","Humanst 521 Cn BT","Humanst521 BT","Humanst521 Lt BT","Imprint MT Shadow","Incised901 Bd BT","Incised901 BT","Incised901 Lt BT","INCONSOLATA","Informal Roman","Informal011 BT","INTERSTATE","IrisUPC","Iskoola Pota","JasmineUPC","Jazz LET","Jenson","Jester","Jokerman","Juice ITC","Kabel Bk BT","Kabel Ult BT","Kailasa","KaiTi","Kalinga","Kannada Sangam MN","Kartika","Kaufmann Bd BT","Kaufmann BT","Khmer UI","KodchiangUPC","Kokila","Korinna BT","Kristen ITC","Krungthep","Kunstler Script","Lao UI","Latha","Leelawadee","Letter Gothic","Levenim MT","LilyUPC","Lithograph","Lithograph Light","Long Island","Lydian BT","Magneto","Maiandra GD","Malayalam Sangam MN","Malgun Gothic","Mangal","Marigold","Marion","Marker Felt","Market","Marlett","Matisse ITC","Matura MT Script Capitals","Meiryo","Meiryo UI","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Tai Le","Microsoft Uighur","Microsoft YaHei","Microsoft Yi Baiti","MingLiU","MingLiU_HKSCS","MingLiU_HKSCS-ExtB","MingLiU-ExtB","Minion","Minion Pro","Miriam","Miriam Fixed","Mistral","Modern","Modern No. 20","Mona Lisa Solid ITC TT","Mongolian Baiti","MONO","MoolBoran","Mrs Eaves","MS LineDraw","MS Mincho","MS PMincho","MS Reference Specialty","MS UI Gothic","MT Extra","MUSEO","MV Boli","Nadeem","Narkisim","NEVIS","News Gothic","News GothicMT","NewsGoth BT","Niagara Engraved","Niagara Solid","Noteworthy","NSimSun","Nyala","OCR A Extended","Old Century","Old English Text MT","Onyx","Onyx BT","OPTIMA","Oriya Sangam MN","OSAKA","OzHandicraft BT","Palace Script MT","Papyrus","Parchment","Party LET","Pegasus","Perpetua","Perpetua Titling MT","PetitaBold","Pickwick","Plantagenet Cherokee","Playbill","PMingLiU","PMingLiU-ExtB","Poor Richard","Poster","PosterBodoni BT","PRINCETOWN LET","Pristina","PTBarnum BT","Pythagoras","Raavi","Rage Italic","Ravie","Ribbon131 Bd BT","Rockwell","Rockwell Condensed","Rockwell Extra Bold","Rod","Roman","Sakkal Majalla","Santa Fe LET","Savoye LET","Sceptre","Script","Script MT Bold","SCRIPTINA","Serifa","Serifa BT","Serifa Th BT","ShelleyVolante BT","Sherwood","Shonar Bangla","Showcard Gothic","Shruti","Signboard","SILKSCREEN","SimHei","Simplified Arabic","Simplified Arabic Fixed","SimSun","SimSun-ExtB","Sinhala Sangam MN","Sketch Rockwell","Skia","Small Fonts","Snap ITC","Snell Roundhand","Socket","Souvenir Lt BT","Staccato222 BT","Steamer","Stencil","Storybook","Styllo","Subway","Swis721 BlkEx BT","Swiss911 XCm BT","Sylfaen","Synchro LET","System","Tamil Sangam MN","Technical","Teletype","Telugu Sangam MN","Tempus Sans ITC","Terminal","Thonburi","Traditional Arabic","Trajan","TRAJAN PRO","Tristan","Tubular","Tunga","Tw Cen MT","Tw Cen MT Condensed","Tw Cen MT Condensed Extra Bold","TypoUpright BT","Unicorn","Univers","Univers CE 55 Medium","Univers Condensed","Utsaah","Vagabond","Vani","Vijaya","Viner Hand ITC","VisualUI","Vivaldi","Vladimir Script","Vrinda","Westminster","WHITNEY","Wide Latin","ZapfEllipt BT","ZapfHumnst BT","ZapfHumnst Dm BT","Zapfino","Zurich BlkEx BT","Zurich Ex BT","ZWAdobeF"];x.options.extendedJsFonts&&(h=h.concat(t)),h=h.concat(x.options.userDefinedFonts);var o="mmmmmmmmmmlli",r="72px",e=document.getElementsByTagName("body")[0],i=document.createElement("div"),c=document.createElement("div"),n={},a={},s=function t(){var e=document.createElement("span");return e.style.position="absolute",e.style.left="-9999px",e.style.fontSize=r,e.style.lineHeight="normal",e.innerHTML=o,e},u=function t(e,o){var r=s();return r.style.fontFamily="'"+e+"',"+o,r},p=function t(){for(var e=[],o=0,r=l.length;o<r;o++){var n=s();n.style.fontFamily=l[o],i.appendChild(n),e.push(n)}return e},d=function t(){for(var e={},o=0,r=h.length;o<r;o++){for(var n=[],i=0,a=l.length;i<a;i++){var s=u(h[o],l[i]);c.appendChild(s),n.push(s)}e[h[o]]=n}return e},f=function t(e){for(var o=!1,r=0;r<l.length;r++)if(o=e[r].offsetWidth!==n[l[r]]||e[r].offsetHeight!==a[l[r]])return o;return o},m=p();e.appendChild(i);for(var g=0,v=l.length;g<v;g++)n[l[g]]=m[g].offsetWidth,a[l[g]]=m[g].offsetHeight;var y=d();e.appendChild(c);for(var S=[],b=0,E=h.length;b<E;b++)f(y[h[b]])&&S.push(h[b]);e.removeChild(c),e.removeChild(i),w.push({key:"js_fonts",value:S}),T(w)},1)},pluginsKey:function t(e){return this.options.excludePlugins||(this.isIE()?this.options.excludeIEPlugins||e.push({key:"ie_plugins",value:this.getIEPlugins()}):e.push({key:"regular_plugins",value:this.getRegularPlugins()})),e},getRegularPlugins:function t(){for(var e=[],o=0,r=navigator.plugins.length;o<r;o++)e.push(navigator.plugins[o]);return this.pluginsShouldBeSorted()&&(e=e.sort(function(t,e){return t.name>e.name?1:t.name<e.name?-1:0})),this.map(e,function(t){var e=this.map(t,function(t){return[t.type,t.suffixes].join("~")}).join(",");return[t.name,t.description,e].join("::")},this)},getIEPlugins:function t(){var e=[];if(Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(window,"ActiveXObject")||"ActiveXObject"in window){var o=["AcroPDF.PDF","Adodb.Stream","AgControl.AgControl","DevalVRXCtrl.DevalVRXCtrl.1","MacromediaFlashPaper.MacromediaFlashPaper","Msxml2.DOMDocument","Msxml2.XMLHTTP","PDF.PdfCtrl","QuickTime.QuickTime","QuickTimeCheckObject.QuickTimeCheck.1","RealPlayer","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","Scripting.Dictionary","SWCtl.SWCtl","Shell.UIHelper","ShockwaveFlash.ShockwaveFlash","Skype.Detection","TDCCtl.TDCCtl","WMPlayer.OCX","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1"];e=this.map(o,function(t){try{return new ActiveXObject(t),t}catch(t){return null}})}return navigator.plugins&&(e=e.concat(this.getRegularPlugins())),e},pluginsShouldBeSorted:function t(){for(var e=!1,o=0,r=this.options.sortPluginsFor.length;o<r;o++){var n=this.options.sortPluginsFor[o];if(navigator.userAgent.match(n)){e=!0;break}}return e},touchSupportKey:function t(e){return this.options.excludeTouchSupport||e.push({key:"touch_support",value:this.getTouchSupport()}),e},hardwareConcurrencyKey:function t(e){return this.options.excludeHardwareConcurrency||e.push({key:"hardware_concurrency",value:this.getHardwareConcurrency()}),e},hasSessionStorage:function t(){try{return!!window.sessionStorage}catch(t){return!0}},hasLocalStorage:function t(){try{return!!window.localStorage}catch(t){return!0}},hasIndexedDB:function t(){try{return!!window.indexedDB}catch(t){return!0}},getHardwareConcurrency:function t(){return navigator.hardwareConcurrency?navigator.hardwareConcurrency:"unknown"},getNavigatorCpuClass:function t(){return navigator.cpuClass?navigator.cpuClass:"unknown"},getNavigatorPlatform:function t(){return navigator.platform?navigator.platform:"unknown"},getDoNotTrack:function t(){return navigator.doNotTrack?navigator.doNotTrack:navigator.msDoNotTrack?navigator.msDoNotTrack:window.doNotTrack?window.doNotTrack:"unknown"},getTouchSupport:function t(){var e=0,o=!1;"undefined"!=typeof navigator.maxTouchPoints?e=navigator.maxTouchPoints:"undefined"!=typeof navigator.msMaxTouchPoints&&(e=navigator.msMaxTouchPoints);try{document.createEvent("TouchEvent"),o=!0}catch(t){}var r="ontouchstart"in window;return[e,o,r]},getCanvasFp:function t(){var e=[],o=document.createElement("canvas");o.width=2e3,o.height=200,o.style.display="inline";var r=o.getContext("2d");return r.rect(0,0,10,10),r.rect(2,2,6,6),e.push("canvas winding:"+(r.isPointInPath(5,5,"evenodd")===!1?"yes":"no")),r.textBaseline="alphabetic",r.fillStyle="#f60",r.fillRect(125,1,62,20),r.fillStyle="#069",this.options.dontUseFakeFontInCanvas?r.font="11pt Arial":r.font="11pt no-real-font-123",r.fillText("Cwm fjordbank glyphs vext quiz, 😃",2,15),r.fillStyle="rgba(102, 204, 0, 0.2)",r.font="18pt Arial",r.fillText("Cwm fjordbank glyphs vext quiz, 😃",4,45),r.globalCompositeOperation="multiply",r.fillStyle="rgb(255,0,255)",r.beginPath(),r.arc(50,50,50,0,2*Math.PI,!0),r.closePath(),r.fill(),r.fillStyle="rgb(0,255,255)",r.beginPath(),r.arc(100,50,50,0,2*Math.PI,!0),r.closePath(),r.fill(),r.fillStyle="rgb(255,255,0)",r.beginPath(),r.arc(75,100,50,0,2*Math.PI,!0),r.closePath(),r.fill(),r.fillStyle="rgb(255,0,255)",r.arc(75,75,75,0,2*Math.PI,!0),r.arc(75,75,25,0,2*Math.PI,!0),r.fill("evenodd"),e.push("canvas fp:"+o.toDataURL()),e.join("~")},getWebglFp:function t(){var o,e=function t(e){return o.clearColor(0,0,0,1),o.enable(o.DEPTH_TEST),o.depthFunc(o.LEQUAL),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),"["+e[0]+", "+e[1]+"]"},r=function t(e){var o,t=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic");return t?(o=e.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT),0===o&&(o=2),o):null};if(o=this.getWebglCanvas(),!o)return null;var n=[],i="attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}",a="precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}",s=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,s);var l=new Float32Array([-.2,-.9,0,.4,-.26,0,0,.732134444,0]);o.bufferData(o.ARRAY_BUFFER,l,o.STATIC_DRAW),s.itemSize=3,s.numItems=3;var h=o.createProgram(),c=o.createShader(o.VERTEX_SHADER);o.shaderSource(c,i),o.compileShader(c);var u=o.createShader(o.FRAGMENT_SHADER);o.shaderSource(u,a),o.compileShader(u),o.attachShader(h,c),o.attachShader(h,u),o.linkProgram(h),o.useProgram(h),h.vertexPosAttrib=o.getAttribLocation(h,"attrVertex"),h.offsetUniform=o.getUniformLocation(h,"uniformOffset"),o.enableVertexAttribArray(h.vertexPosArray),o.vertexAttribPointer(h.vertexPosAttrib,s.itemSize,o.FLOAT,!1,0,0),o.uniform2f(h.offsetUniform,1,1),o.drawArrays(o.TRIANGLE_STRIP,0,s.numItems),null!=o.canvas&&n.push(o.canvas.toDataURL()),n.push("extensions:"+o.getSupportedExtensions().join(";")),n.push("webgl aliased line width range:"+e(o.getParameter(o.ALIASED_LINE_WIDTH_RANGE))),n.push("webgl aliased point size range:"+e(o.getParameter(o.ALIASED_POINT_SIZE_RANGE))),n.push("webgl alpha bits:"+o.getParameter(o.ALPHA_BITS)),n.push("webgl antialiasing:"+(o.getContextAttributes().antialias?"yes":"no")),n.push("webgl blue bits:"+o.getParameter(o.BLUE_BITS)),n.push("webgl depth bits:"+o.getParameter(o.DEPTH_BITS)),n.push("webgl green bits:"+o.getParameter(o.GREEN_BITS)),n.push("webgl max anisotropy:"+r(o)),n.push("webgl max combined texture image units:"+o.getParameter(o.MAX_COMBINED_TEXTURE_IMAGE_UNITS)),n.push("webgl max cube map texture size:"+o.getParameter(o.MAX_CUBE_MAP_TEXTURE_SIZE)),n.push("webgl max fragment uniform vectors:"+o.getParameter(o.MAX_FRAGMENT_UNIFORM_VECTORS)),n.push("webgl max render buffer size:"+o.getParameter(o.MAX_RENDERBUFFER_SIZE)),n.push("webgl max texture image units:"+o.getParameter(o.MAX_TEXTURE_IMAGE_UNITS)),n.push("webgl max texture size:"+o.getParameter(o.MAX_TEXTURE_SIZE)),n.push("webgl max varying vectors:"+o.getParameter(o.MAX_VARYING_VECTORS)),n.push("webgl max vertex attribs:"+o.getParameter(o.MAX_VERTEX_ATTRIBS)),n.push("webgl max vertex texture image units:"+o.getParameter(o.MAX_VERTEX_TEXTURE_IMAGE_UNITS)),n.push("webgl max vertex uniform vectors:"+o.getParameter(o.MAX_VERTEX_UNIFORM_VECTORS)),n.push("webgl max viewport dims:"+e(o.getParameter(o.MAX_VIEWPORT_DIMS))),n.push("webgl red bits:"+o.getParameter(o.RED_BITS)),n.push("webgl renderer:"+o.getParameter(o.RENDERER)),n.push("webgl shading language version:"+o.getParameter(o.SHADING_LANGUAGE_VERSION)),n.push("webgl stencil bits:"+o.getParameter(o.STENCIL_BITS)),n.push("webgl vendor:"+o.getParameter(o.VENDOR)),n.push("webgl version:"+o.getParameter(o.VERSION));try{var p=o.getExtension("WEBGL_debug_renderer_info");p&&(n.push("webgl unmasked vendor:"+o.getParameter(p.UNMASKED_VENDOR_WEBGL)),n.push("webgl unmasked renderer:"+o.getParameter(p.UNMASKED_RENDERER_WEBGL)))}catch(t){}return o.getShaderPrecisionFormat?(n.push("webgl vertex shader high float precision:"+o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.HIGH_FLOAT).precision),n.push("webgl vertex shader high float precision rangeMin:"+o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.HIGH_FLOAT).rangeMin),n.push("webgl vertex shader high float precision rangeMax:"+o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.HIGH_FLOAT).rangeMax),n.push("webgl vertex shader medium float precision:"+o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.MEDIUM_FLOAT).precision),n.push("webgl vertex shader medium float precision rangeMin:"+o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.MEDIUM_FLOAT).rangeMin),n.push("webgl vertex shader medium float precision rangeMax:"+o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.MEDIUM_FLOAT).rangeMax),n.push("webgl vertex shader low float precision:"+o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.LOW_FLOAT).precision),n.push("webgl vertex shader low float precision rangeMin:"+o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.LOW_FLOAT).rangeMin),n.push("webgl vertex shader low float precision rangeMax:"+o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.LOW_FLOAT).rangeMax),n.push("webgl fragment shader high float precision:"+o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.HIGH_FLOAT).precision),n.push("webgl fragment shader high float precision rangeMin:"+o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.HIGH_FLOAT).rangeMin),n.push("webgl fragment shader high float precision rangeMax:"+o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.HIGH_FLOAT).rangeMax),n.push("webgl fragment shader medium float precision:"+o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.MEDIUM_FLOAT).precision),n.push("webgl fragment shader medium float precision rangeMin:"+o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.MEDIUM_FLOAT).rangeMin),n.push("webgl fragment shader medium float precision rangeMax:"+o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.MEDIUM_FLOAT).rangeMax),n.push("webgl fragment shader low float precision:"+o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.LOW_FLOAT).precision),n.push("webgl fragment shader low float precision rangeMin:"+o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.LOW_FLOAT).rangeMin),n.push("webgl fragment shader low float precision rangeMax:"+o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.LOW_FLOAT).rangeMax),n.push("webgl vertex shader high int precision:"+o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.HIGH_INT).precision),n.push("webgl vertex shader high int precision rangeMin:"+o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.HIGH_INT).rangeMin),n.push("webgl vertex shader high int precision rangeMax:"+o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.HIGH_INT).rangeMax),n.push("webgl vertex shader medium int precision:"+o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.MEDIUM_INT).precision),n.push("webgl vertex shader medium int precision rangeMin:"+o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.MEDIUM_INT).rangeMin),n.push("webgl vertex shader medium int precision rangeMax:"+o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.MEDIUM_INT).rangeMax),n.push("webgl vertex shader low int precision:"+o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.LOW_INT).precision),n.push("webgl vertex shader low int precision rangeMin:"+o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.LOW_INT).rangeMin),n.push("webgl vertex shader low int precision rangeMax:"+o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.LOW_INT).rangeMax),n.push("webgl fragment shader high int precision:"+o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.HIGH_INT).precision),n.push("webgl fragment shader high int precision rangeMin:"+o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.HIGH_INT).rangeMin),n.push("webgl fragment shader high int precision rangeMax:"+o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.HIGH_INT).rangeMax),n.push("webgl fragment shader medium int precision:"+o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.MEDIUM_INT).precision),n.push("webgl fragment shader medium int precision rangeMin:"+o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.MEDIUM_INT).rangeMin),n.push("webgl fragment shader medium int precision rangeMax:"+o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.MEDIUM_INT).rangeMax),n.push("webgl fragment shader low int precision:"+o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.LOW_INT).precision),n.push("webgl fragment shader low int precision rangeMin:"+o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.LOW_INT).rangeMin),n.push("webgl fragment shader low int precision rangeMax:"+o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.LOW_INT).rangeMax),n.join("~")):n.join("~")},getAdBlock:function t(){var e=document.createElement("div");e.innerHTML="&nbsp;",e.className="adsbox";var o=!1;try{document.body.appendChild(e),o=0===document.getElementsByClassName("adsbox")[0].offsetHeight,document.body.removeChild(e)}catch(t){o=!1}return o},getHasLiedLanguages:function t(){if("undefined"!=typeof navigator.languages)try{var e=navigator.languages[0].substr(0,2);if(e!==navigator.language.substr(0,2))return!0}catch(t){return!0}return!1},getHasLiedResolution:function t(){return screen.width<screen.availWidth||screen.height<screen.availHeight},getHasLiedOs:function t(){var e,o=navigator.userAgent.toLowerCase(),r=navigator.oscpu,n=navigator.platform.toLowerCase();e=o.indexOf("windows phone")>=0?"Windows Phone":o.indexOf("win")>=0?"Windows":o.indexOf("android")>=0?"Android":o.indexOf("linux")>=0?"Linux":o.indexOf("iphone")>=0||o.indexOf("ipad")>=0?"iOS":o.indexOf("mac")>=0?"Mac":"Other";var i;if(i="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,i&&"Windows Phone"!==e&&"Android"!==e&&"iOS"!==e&&"Other"!==e)return!0;if("undefined"!=typeof r){if(r=r.toLowerCase(),r.indexOf("win")>=0&&"Windows"!==e&&"Windows Phone"!==e)return!0;if(r.indexOf("linux")>=0&&"Linux"!==e&&"Android"!==e)return!0;if(r.indexOf("mac")>=0&&"Mac"!==e&&"iOS"!==e)return!0;if(0===r.indexOf("win")&&0===r.indexOf("linux")&&r.indexOf("mac")>=0&&"other"!==e)return!0}return n.indexOf("win")>=0&&"Windows"!==e&&"Windows Phone"!==e||(n.indexOf("linux")>=0||n.indexOf("android")>=0||n.indexOf("pike")>=0)&&"Linux"!==e&&"Android"!==e||(n.indexOf("mac")>=0||n.indexOf("ipad")>=0||n.indexOf("ipod")>=0||n.indexOf("iphone")>=0)&&"Mac"!==e&&"iOS"!==e||0===n.indexOf("win")&&0===n.indexOf("linux")&&n.indexOf("mac")>=0&&"other"!==e||"undefined"==typeof navigator.plugins&&"Windows"!==e&&"Windows Phone"!==e},getHasLiedBrowser:function t(){var e,o=navigator.userAgent.toLowerCase(),r=navigator.productSub;if(e=o.indexOf("firefox")>=0?"Firefox":o.indexOf("opera")>=0||o.indexOf("opr")>=0?"Opera":o.indexOf("chrome")>=0?"Chrome":o.indexOf("safari")>=0?"Safari":o.indexOf("trident")>=0?"Internet Explorer":"Other",("Chrome"===e||"Safari"===e||"Opera"===e)&&"20030107"!==r)return!0;var n=eval.toString().length;if(37===n&&"Safari"!==e&&"Firefox"!==e&&"Other"!==e)return!0;if(39===n&&"Internet Explorer"!==e&&"Other"!==e)return!0;if(33===n&&"Chrome"!==e&&"Opera"!==e&&"Other"!==e)return!0;var i;try{throw"a"}catch(t){try{t.toSource(),i=!0}catch(t){i=!1}}return!(!i||"Firefox"===e||"Other"===e)},isCanvasSupported:function t(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},isWebGlSupported:function t(){if(!this.isCanvasSupported())return!1;var e,o=document.createElement("canvas");try{e=o.getContext&&(o.getContext("webgl")||o.getContext("experimental-webgl"))}catch(t){e=!1}return!!window.WebGLRenderingContext&&!!e},isIE:function t(){return"Microsoft Internet Explorer"===navigator.appName||!("Netscape"!==navigator.appName||!/Trident/.test(navigator.userAgent))},hasSwfObjectLoaded:function t(){return"undefined"!=typeof window.swfobject},hasMinFlashInstalled:function t(){return swfobject.hasFlashPlayerVersion("9.0.0")},addFlashDivNode:function t(){var e=document.createElement("div");e.setAttribute("id",this.options.swfContainerId),document.body.appendChild(e)},loadSwfAndDetectFonts:function t(e){var o="___fp_swf_loaded";window[o]=function(t){e(t)};var r=this.options.swfContainerId;this.addFlashDivNode();var n={onReady:o},i={allowScriptAccess:"always",menu:"false"};swfobject.embedSWF(this.options.swfPath,r,"1","1","9.0.0",!1,n,i,{})},getWebglCanvas:function t(){var e=document.createElement("canvas"),o=null;try{o=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(t){}return o||(o=null),o},each:function t(e,o,r){if(null!==e)if(this.nativeForEach&&e.forEach===this.nativeForEach)e.forEach(o,r);else if(e.length===+e.length){for(var n=0,i=e.length;n<i;n++)if(o.call(r,e[n],n,e)==={})return}else for(var a in e)if(e.hasOwnProperty(a)&&o.call(r,e[a],a,e)==={})return},map:function t(e,r,n){var i=[];return null==e?i:this.nativeMap&&e.map===this.nativeMap?e.map(r,n):(this.each(e,function(t,e,o){i[i.length]=r.call(n,t,e,o)}),i)},x64Add:function t(e,o){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],o=[o[0]>>>16,65535&o[0],o[1]>>>16,65535&o[1]];var r=[0,0,0,0];return r[3]+=e[3]+o[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]+o[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]+o[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]+o[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]},x64Multiply:function t(e,o){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],o=[o[0]>>>16,65535&o[0],o[1]>>>16,65535&o[1]];var r=[0,0,0,0];return r[3]+=e[3]*o[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]*o[3],r[1]+=r[2]>>>16,r[2]&=65535,r[2]+=e[3]*o[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]*o[3],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[2]*o[2],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[3]*o[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]*o[3]+e[1]*o[2]+e[2]*o[1]+e[3]*o[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]},x64Rotl:function t(e,o){return o%=64,32===o?[e[1],e[0]]:o<32?[e[0]<<o|e[1]>>>32-o,e[1]<<o|e[0]>>>32-o]:(o-=32,[e[1]<<o|e[0]>>>32-o,e[0]<<o|e[1]>>>32-o])},x64LeftShift:function t(e,o){return o%=64,0===o?e:o<32?[e[0]<<o|e[1]>>>32-o,e[1]<<o]:[e[1]<<o-32,0]},x64Xor:function t(e,o){return[e[0]^o[0],e[1]^o[1]]},x64Fmix:function t(e){return e=this.x64Xor(e,[0,e[0]>>>1]),e=this.x64Multiply(e,[4283543511,3981806797]),e=this.x64Xor(e,[0,e[0]>>>1]),e=this.x64Multiply(e,[3301882366,444984403]),e=this.x64Xor(e,[0,e[0]>>>1])},x64hash128:function t(e,o){e=e||"",o=o||0;for(var r=e.length%16,n=e.length-r,i=[0,o],a=[0,o],s=[0,0],l=[0,0],h=[2277735313,289559509],c=[1291169091,658871167],u=0;u<n;u+=16)s=[255&e.charCodeAt(u+4)|(255&e.charCodeAt(u+5))<<8|(255&e.charCodeAt(u+6))<<16|(255&e.charCodeAt(u+7))<<24,255&e.charCodeAt(u)|(255&e.charCodeAt(u+1))<<8|(255&e.charCodeAt(u+2))<<16|(255&e.charCodeAt(u+3))<<24],l=[255&e.charCodeAt(u+12)|(255&e.charCodeAt(u+13))<<8|(255&e.charCodeAt(u+14))<<16|(255&e.charCodeAt(u+15))<<24,255&e.charCodeAt(u+8)|(255&e.charCodeAt(u+9))<<8|(255&e.charCodeAt(u+10))<<16|(255&e.charCodeAt(u+11))<<24],s=this.x64Multiply(s,h),s=this.x64Rotl(s,31),s=this.x64Multiply(s,c),i=this.x64Xor(i,s),i=this.x64Rotl(i,27),i=this.x64Add(i,a),i=this.x64Add(this.x64Multiply(i,[0,5]),[0,1390208809]),l=this.x64Multiply(l,c),l=this.x64Rotl(l,33),l=this.x64Multiply(l,h),a=this.x64Xor(a,l),a=this.x64Rotl(a,31),a=this.x64Add(a,i),a=this.x64Add(this.x64Multiply(a,[0,5]),[0,944331445]);switch(s=[0,0],l=[0,0],r){case 15:l=this.x64Xor(l,this.x64LeftShift([0,e.charCodeAt(u+14)],48));case 14:l=this.x64Xor(l,this.x64LeftShift([0,e.charCodeAt(u+13)],40));case 13:l=this.x64Xor(l,this.x64LeftShift([0,e.charCodeAt(u+12)],32));case 12:l=this.x64Xor(l,this.x64LeftShift([0,e.charCodeAt(u+11)],24));case 11:l=this.x64Xor(l,this.x64LeftShift([0,e.charCodeAt(u+10)],16));case 10:l=this.x64Xor(l,this.x64LeftShift([0,e.charCodeAt(u+9)],8));case 9:l=this.x64Xor(l,[0,e.charCodeAt(u+8)]),l=this.x64Multiply(l,c),l=this.x64Rotl(l,33),l=this.x64Multiply(l,h),a=this.x64Xor(a,l);case 8:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(u+7)],56));case 7:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(u+6)],48));case 6:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(u+5)],40));case 5:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(u+4)],32));case 4:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(u+3)],24));case 3:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(u+2)],16));case 2:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(u+1)],8));case 1:s=this.x64Xor(s,[0,e.charCodeAt(u)]),s=this.x64Multiply(s,h),s=this.x64Rotl(s,31),s=this.x64Multiply(s,c),i=this.x64Xor(i,s)}return i=this.x64Xor(i,[0,e.length]),a=this.x64Xor(a,[0,e.length]),i=this.x64Add(i,a),a=this.x64Add(a,i),i=this.x64Fmix(i),a=this.x64Fmix(a),i=this.x64Add(i,a),a=this.x64Add(a,i),("00000000"+(i[0]>>>0).toString(16)).slice(-8)+("00000000"+(i[1]>>>0).toString(16)).slice(-8)+("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)}},t.VERSION="1.5.1",t})?r.call(e,o,e,t):r)||(t.exports=r)}()},EK0E:function(t,e,o){"use strict";function r(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}}var n,i=o("dyZX"),a=o("CkkT")(0),s=o("KroJ"),l=o("Z6vF"),h=o("czNK"),c=o("ZD67"),u=o("0/R4"),p=o("s5qY"),d=o("s5qY"),f=!i.ActiveXObject&&"ActiveXObject"in i,m="WeakMap",g=l.getWeak,v=Object.isExtensible,y=c.ufstore,i={get:function(t){if(u(t)){var e=g(t);return!0===e?y(p(this,m)).get(t):e?e[this._i]:void 0}},set:function(t,e){return c.def(p(this,m),t,e)}},S=t.exports=o("4LiD")(m,r,i,c,!0,!0);d&&f&&(h((n=c.getConstructor(r,m)).prototype,i),l.NEED=!0,a(["delete","has","get","set"],function(o){var t=S.prototype,r=t[o];s(t,o,function(t,e){if(!u(t)||v(t))return r.call(this,t,e);this._f||(this._f=new n);e=this._f[o](t,e);return"set"==o?this:e})}))},EWmC:function(t,e,o){var r=o("LZWt");t.exports=Array.isArray||function(t){return"Array"==r(t)}},EbDI:function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.default=t.exports,t.exports.__esModule=!0},EemH:function(t,e,o){var r=o("UqcF"),n=o("RjD/"),i=o("aCFj"),a=o("apmT"),s=o("aagx"),l=o("xpql"),h=Object.getOwnPropertyDescriptor;e.f=o("nh4g")?h:function(t,e){if(t=i(t),e=a(e,!0),l)try{return h(t,e)}catch(t){}if(s(t,e))return n(!r.f.call(t,e),t[e])}},"Ew+T":function(t,e,o){var r=o("XKFU"),o=o("GZEu");r(r.G+r.B,{setImmediate:o.set,clearImmediate:o.clear})},FEjr:function(t,e,o){"use strict";o("OGtf")("strike",function(t){return function(){return t(this,"strike","","")}})},FJW5:function(t,e,o){var a=o("hswa"),s=o("y3w9"),l=o("DVgA");t.exports=o("nh4g")?Object.defineProperties:function(t,e){s(t);for(var o,r=l(e),n=r.length,i=0;i<n;)a.f(t,o=r[i++],e[o]);return t}},FLlr:function(t,e,o){var r=o("XKFU");r(r.P,"String",{repeat:o("l0Rn")})},Faw5:function(t,e,o){o("7DDg")("Int16",2,function(r){return function(t,e,o){return r(this,t,e,o)}})},FlsD:function(t,e,o){var r=o("0/R4");o("Xtr8")("isExtensible",function(e){return function(t){return!!r(t)&&(!e||e(t))}})},GNAe:function(t,e,o){var r=o("XKFU"),o=o("PKUr");r(r.G+r.F*(parseInt!=o),{parseInt:o})},GZEu:function(t,e,o){function r(){var t,e=+this;v.hasOwnProperty(e)&&(t=v[e],delete v[e],t())}function n(t){r.call(t.data)}var i,a=o("m0Pp"),s=o("MfQN"),l=o("+rLv"),h=o("Iw71"),c=o("dyZX"),u=c.process,p=c.setImmediate,d=c.clearImmediate,f=c.MessageChannel,m=c.Dispatch,g=0,v={},y="onreadystatechange";p&&d||(p=function(t){for(var e=[],o=1;o<arguments.length;)e.push(arguments[o++]);return v[++g]=function(){s("function"==typeof t?t:Function(t),e)},i(g),g},d=function(t){delete v[t]},"process"==o("LZWt")(u)?i=function(t){u.nextTick(a(r,t,1))}:m&&m.now?i=function(t){m.now(a(r,t,1))}:f?(f=(o=new f).port2,o.port1.onmessage=n,i=a(f.postMessage,f,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(t){c.postMessage(t+"","*")},c.addEventListener("message",n,!1)):i=y in h("script")?function(t){l.appendChild(h("script"))[y]=function(){l.removeChild(this),r.call(t)}}:function(t){setTimeout(a(r,t,1),0)}),t.exports={set:p,clear:d}},H5GT:function(t,e,o){var r=o("XKFU"),i=o("6dIT"),a=o("kcoS");r(r.S,"Math",{fscale:function(t,e,o,r,n){return a(i(t,e,o,r,n))}})},H6hf:function(t,e,o){var n=o("y3w9");t.exports=function(e,t,o,r){try{return r?t(n(o)[0],o[1]):t(o)}catch(t){o=e.return;throw void 0!==o&&n(o.call(e)),t}}},"HAE/":function(t,e,o){var r=o("XKFU");r(r.S+r.F*!o("nh4g"),"Object",{defineProperty:o("hswa").f})},HEwt:function(t,e,o){"use strict";var u=o("m0Pp"),r=o("XKFU"),p=o("S/j/"),d=o("H6hf"),f=o("M6Qj"),m=o("ne8i"),g=o("8a7r"),v=o("J+6e");r(r.S+r.F*!o("XMVh")(function(t){Array.from(t)}),"Array",{from:function(t){var e,o,r,n,i=p(t),a="function"==typeof this?this:Array,s=arguments.length,l=1<s?arguments[1]:void 0,h=void 0!==l,c=0,t=v(i);if(h&&(l=u(l,2<s?arguments[2]:void 0,2)),null==t||a==Array&&f(t))for(o=new a(e=m(i.length));c<e;c++)g(o,c,h?l(i[c],c):i[c]);else for(n=t.call(i),o=new a;!(r=n.next()).done;c++)g(o,c,h?d(n,l,[r.value,c],!0):r.value);return o.length=c,o}})},Hxic:function(t,e,o){o=o("XKFU");o(o.S,"Math",{RAD_PER_DEG:180/Math.PI})},I5cv:function(t,e,o){var r=o("XKFU"),n=o("Kuth"),i=o("2OiF"),a=o("y3w9"),s=o("0/R4"),l=o("eeVq"),h=o("8MEG"),c=(o("dyZX").Reflect||{}).construct,u=l(function(){function t(){}return!(c(function(){},[],t)instanceof t)}),p=!l(function(){c(function(){})});r(r.S+r.F*(u||p),"Reflect",{construct:function(t,e){i(t),a(e);var o=arguments.length<3?t:i(arguments[2]);if(p&&!u)return c(t,e,o);if(t==o){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(h.apply(t,r))}r=o.prototype,o=n(s(r)?r:Object.prototype),r=Function.apply.call(t,o,e);return s(r)?r:o}})},I74W:function(t,e,o){"use strict";o("qncB")("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},I78e:function(t,e,o){"use strict";var r=o("XKFU"),n=o("+rLv"),l=o("LZWt"),h=o("d/Gc"),c=o("ne8i"),u=[].slice;r(r.P+r.F*o("eeVq")(function(){n&&u.call(n)}),"Array",{slice:function(t,e){var o=c(this.length),r=l(this);if(e=void 0===e?o:e,"Array"==r)return u.call(this,t,e);for(var n=h(t,o),o=h(e,o),i=c(o-n),a=new Array(i),s=0;s<i;s++)a[s]="String"==r?this.charAt(n+s):this[n+s];return a}})},"I8a+":function(t,e,o){var r=o("LZWt"),n=o("K0xU")("toStringTag"),i="Arguments"==r(function(){return arguments}());t.exports=function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(t=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),n))?t:i?r(e):"Object"==(t=r(e))&&"function"==typeof e.callee?"Arguments":t}},INYr:function(t,e,o){"use strict";var r=o("XKFU"),n=o("CkkT")(6),i="findIndex",a=!0;i in[]&&Array(1)[i](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(t){return n(this,t,1<arguments.length?arguments[1]:void 0)}}),o("nGyu")(i)},"IU+Z":function(t,e,o){"use strict";o("sMXx");var l=o("KroJ"),h=o("Mukb"),c=o("eeVq"),u=o("vhPU"),p=o("K0xU"),d=o("Ugos"),f=p("species"),m=!c(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),g=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};t="ab".split(t);return 2===t.length&&"a"===t[0]&&"b"===t[1]}();t.exports=function(o,t,e){var i,r,n=p(o),a=!c(function(){var t={};return t[n]=function(){return 7},7!=""[o](t)}),s=a?!c(function(){var t=!1,e=/a/;return e.exec=function(){return t=!0,null},"split"===o&&(e.constructor={},e.constructor[f]=function(){return e}),e[n](""),!t}):void 0;a&&s&&("replace"!==o||m)&&("split"!==o||g)||(i=/./[n],e=(s=e(u,n,""[o],function(t,e,o,r,n){return e.exec===d?a&&!n?{done:!0,value:i.call(e,o,r)}:{done:!0,value:t.call(o,e,r)}:{done:!1}}))[0],r=s[1],l(String.prototype,o,e),h(RegExp.prototype,n,2==t?function(t,e){return r.call(t,this,e)}:function(t){return r.call(t,this)}))}},IXt9:function(t,e,o){"use strict";var r=o("0/R4"),n=o("OP3Y"),i=o("K0xU")("hasInstance"),a=Function.prototype;i in a||o("hswa").f(a,i,{value:function(t){if("function"!=typeof this||!r(t))return!1;if(!r(this.prototype))return t instanceof this;for(;t=n(t);)if(this.prototype===t)return!0;return!1}})},Ijbi:function(t,e,o){var r=o("WkPL");t.exports=function(t){if(Array.isArray(t))return r(t)},t.exports.default=t.exports,t.exports.__esModule=!0},IlFx:function(t,e,o){var r=o("XKFU"),n=o("y3w9"),i=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return n(t),!i||i(t)}})},Iw71:function(t,e,o){var r=o("0/R4"),n=o("dyZX").document,i=r(n)&&r(n.createElement);t.exports=function(t){return i?n.createElement(t):{}}},"J+6e":function(t,e,o){var r=o("I8a+"),n=o("K0xU")("iterator"),i=o("hPIQ");t.exports=o("g3g5").getIteratorMethod=function(t){if(null!=t)return t[n]||t["@@iterator"]||i[r(t)]}},J0gd:function(t,e,o){var o=o("XKFU"),r=180/Math.PI;o(o.S,"Math",{degrees:function(t){return t*r}})},J4zp:function(t,e,o){var r=o("wTVA"),n=o("m0LI"),i=o("ZhPi"),a=o("wkBT");t.exports=function(t,e){return r(t)||n(t,e)||i(t,e)||a()},t.exports.default=t.exports,t.exports.__esModule=!0},JCqj:function(t,e,o){"use strict";o("OGtf")("sup",function(t){return function(){return t(this,"sup","","")}})},Jcmo:function(t,e,o){var o=o("XKFU"),r=Math.exp;o(o.S,"Math",{cosh:function(t){return(r(t=+t)+r(-t))/2}})},JduL:function(t,e,o){o("Xtr8")("getOwnPropertyNames",function(){return o("e7yV").f})},"Ji/l":function(t,e,o){var r=o("XKFU");r(r.G+r.W+r.F*!o("D4iV").ABV,{DataView:o("7Qtz").DataView})},JiEa:function(t,e){e.f=Object.getOwnPropertySymbols},K0xU:function(t,e,o){var r=o("VTer")("wks"),n=o("ylqs"),i=o("dyZX").Symbol,a="function"==typeof i;(t.exports=function(t){return r[t]||(r[t]=a&&i[t]||(a?i:n)("Symbol."+t))}).store=r},KKXr:function(t,e,o){"use strict";var u=o("quPj"),v=o("y3w9"),y=o("69bn"),S=o("A5AN"),b=o("ne8i"),E=o("Xxuz"),p=o("Ugos"),r=o("eeVq"),w=Math.min,d=[].push,a="split",T="length",x="lastIndex",P=4294967295,M=!r(function(){RegExp(P,"y")});o("IU+Z")("split",2,function(n,i,f,m){var g="c"=="abbc"[a](/(b)*/)[1]||4!="test"[a](/(?:)/,-1)[T]||2!="ab"[a](/(?:ab)*/)[T]||4!="."[a](/(.?)(.?)/)[T]||1<"."[a](/()()/)[T]||""[a](/.?/)[T]?function(t,e){var o=String(this);if(void 0===t&&0===e)return[];if(!u(t))return f.call(o,t,e);for(var r,n,i,a=[],s=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,h=void 0===e?P:e>>>0,c=new RegExp(t.source,s+"g");(r=p.call(c,o))&&!(l<(n=c[x])&&(a.push(o.slice(l,r.index)),1<r[T]&&r.index<o[T]&&d.apply(a,r.slice(1)),i=r[0][T],l=n,a[T]>=h));)c[x]===r.index&&c[x]++;return l===o[T]?!i&&c.test("")||a.push(""):a.push(o.slice(l)),a[T]>h?a.slice(0,h):a}:"0"[a](void 0,0)[T]?function(t,e){return void 0===t&&0===e?[]:f.call(this,t,e)}:f;return[function(t,e){var o=n(this),r=null==t?void 0:t[i];return void 0!==r?r.call(t,o,e):g.call(String(o),t,e)},function(t,e){var o=m(g,t,this,e,g!==f);if(o.done)return o.value;var r=v(t),n=String(this),o=y(r,RegExp),i=r.unicode,t=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(M?"y":"g"),a=new o(M?r:"^(?:"+r.source+")",t),s=void 0===e?P:e>>>0;if(0==s)return[];if(0===n.length)return null===E(a,n)?[n]:[];for(var l=0,h=0,c=[];h<n.length;){a.lastIndex=M?h:0;var u,p=E(a,M?n:n.slice(h));if(null===p||(u=w(b(a.lastIndex+(M?0:h)),n.length))===l)h=S(n,h,i);else{if(c.push(n.slice(l,h)),c.length===s)return c;for(var d=1;d<=p.length-1;d++)if(c.push(p[d]),c.length===s)return c;h=l=u}}return c.push(n.slice(l)),c}]})},KOQb:function(t,e,o){"use strict";var r=o("XKFU"),a=o("2OiF"),s=o("m0Pp"),l=o("SlkY");t.exports=function(t){r(r.S,t,{from:function(t){var e,o,r,n,i=arguments[1];return a(this),(e=void 0!==i)&&a(i),null==t?new this:(o=[],e?(r=0,n=s(i,arguments[2],2),l(t,!1,function(t){o.push(n(t,r++))})):l(t,!1,o.push,o),new this(o))}})}},KroJ:function(t,e,o){var i=o("dyZX"),a=o("Mukb"),s=o("aagx"),l=o("ylqs")("src"),r=o("+lvF"),n="toString",h=(""+r).split(n);o("g3g5").inspectSource=function(t){return r.call(t)},(t.exports=function(t,e,o,r){var n="function"==typeof o;n&&(s(o,"name")||a(o,"name",e)),t[e]!==o&&(n&&(s(o,l)||a(o,l,t[e]?""+t[e]:h.join(String(e)))),t===i?t[e]=o:r?t[e]?t[e]=o:a(t,e,o):(delete t[e],a(t,e,o)))})(Function.prototype,n,function(){return"function"==typeof this&&this[l]||r.call(this)})},Kuth:function(t,e,o){function r(){}var n=o("y3w9"),i=o("FJW5"),a=o("4R4u"),s=o("YTvA")("IE_PROTO"),l="prototype",h=function(){var t=o("Iw71")("iframe"),e=a.length;for(t.style.display="none",o("+rLv").appendChild(t),t.src="javascript:",(t=t.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),h=t.F;e--;)delete h[l][a[e]];return h()};t.exports=Object.create||function(t,e){var o;return null!==t?(r[l]=n(t),o=new r,r[l]=null,o[s]=t):o=h(),void 0===e?o:i(o,e)}},L3jF:function(t,e,o){o=o("XKFU");o(o.S,"Math",{isubh:function(t,e,o,r){t>>>=0,o>>>=0;return(e>>>0)-(r>>>0)-((~t&o|~(t^o)&t-o>>>0)>>>31)|0}})},L9s1:function(t,e,o){"use strict";var r=o("XKFU"),n=o("0sh+"),i="includes";r(r.P+r.F*o("UUeW")(i),"String",{includes:function(t){return!!~n(this,t,i).indexOf(t,1<arguments.length?arguments[1]:void 0)}})},LK8F:function(t,e,o){var r=o("XKFU");r(r.S,"Array",{isArray:o("EWmC")})},LQAc:function(t,e){t.exports=!1},LTTk:function(t,e,o){var r=o("XKFU"),n=o("OP3Y"),i=o("y3w9");r(r.S,"Reflect",{getPrototypeOf:function(t){return n(i(t))}})},LVwc:function(t,e){var o=Math.expm1;t.exports=!o||22025.465794806718<o(10)||o(10)<22025.465794806718||-2e-17!=o(-2e-17)?function(t){return 0==(t=+t)?t:-1e-6<t&&t<1e-6?t+t*t/2:Math.exp(t)-1}:o},LZWt:function(t,e){var o={}.toString;t.exports=function(t){return o.call(t).slice(8,-1)}},Lgjv:function(t,e,o){var i=o("ne8i"),a=o("l0Rn"),s=o("vhPU");t.exports=function(t,e,o,r){var n=String(s(t)),t=n.length,o=void 0===o?" ":String(o),e=i(e);if(e<=t||""==o)return n;t=e-t,o=a.call(o,Math.ceil(t/o.length));return o.length>t&&(o=o.slice(0,t)),r?o+n:n+o}},Ljet:function(t,e,o){o=o("XKFU");o(o.S,"Number",{EPSILON:Math.pow(2,-52)})},LyE8:function(t,e,o){"use strict";var r=o("eeVq");t.exports=function(t,e){return!!t&&r(function(){e?t.call(null,function(){},1):t.call(null)})}},M0Sy:function(t,e,o){"use strict";var r=o("lwsE"),n=o.n(r),r=o("W8MJ"),i=o.n(r);function c(t,e){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function(t,e){if(t){if("string"==typeof t)return s(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(o="Object"===o&&t.constructor?t.constructor.name:o)||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?s(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i=!0,a=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return i=t.done,t},e:function(t){a=!0,n=t},f:function(){try{i||null==o.return||o.return()}finally{if(a)throw n}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,r=new Array(e);o<e;o++)r[o]=t[o];return r}r=function(){function t(){n()(this,t),this.crossOrigin="anonymous"}return i()(t,[{key:"load",value:function(t){var e=t.url,o=t.onload,r=t.onerror,t=(window.location.hostname,document.createElement("script"));t.type="text/javascript",t.crossOrigin=this.crossOrigin,t.async=!0,t.src=e,t.onload=o,t.onerror=r;r=document.getElementsByTagName("script")[0];return r.parentNode.insertBefore(t,r),t}},{key:"loadAll",value:function(t){function e(){++s>=a&&n()}var o,r=t.urls,n=t.onload,i=t.onerror,a=r.length,s=0,l=c(r);try{for(l.s();!(o=l.n()).done;){var h=o.value;this.load({url:h,onload:e,onerror:function(){i()}})}}catch(t){l.e(t)}finally{l.f()}}}]),t}();e.a=new r},M6Qj:function(t,e,o){var r=o("hPIQ"),n=o("K0xU")("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[n]===t)}},MfQN:function(t,e){t.exports=function(t,e,o){var r=void 0===o;switch(e.length){case 0:return r?t():t.call(o);case 1:return r?t(e[0]):t.call(o,e[0]);case 2:return r?t(e[0],e[1]):t.call(o,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(o,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(o,e[0],e[1],e[2],e[3])}return t.apply(o,e)}},MtdB:function(t,e,o){o=o("XKFU");o(o.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},Mukb:function(t,e,o){var r=o("hswa"),n=o("RjD/");t.exports=o("nh4g")?function(t,e,o){return r.f(t,e,n(1,o))}:function(t,e,o){return t[e]=o,t}},N6cJ:function(t,e,o){function n(t,e,o){var r=s.get(t);if(!r){if(!o)return;s.set(t,r=new i)}if(!(t=r.get(e))){if(!o)return;r.set(e,t=new i)}return t}var i=o("9AAn"),r=o("XKFU"),a=o("VTer")("metadata"),s=a.store||(a.store=new(o("EK0E")));t.exports={store:s,map:n,has:function(t,e,o){o=n(e,o,!1);return void 0!==o&&o.has(t)},get:function(t,e,o){o=n(e,o,!1);return void 0===o?void 0:o.get(t)},set:function(t,e,o,r){n(o,r,!0).set(t,e)},keys:function(t,e){var e=n(t,e,!1),o=[];return e&&e.forEach(function(t,e){o.push(e)}),o},key:function(t){return void 0===t||"symbol"==typeof t?t:String(t)},exp:function(t){r(r.S,"Reflect",t)}}},N7VW:function(t,e,o){"use strict";function n(t){return null==t?void 0:d(t)}function i(t){var e=t._c;e&&(t._c=void 0,e())}function a(t){return void 0===t._o}function s(t){a(t)||(t._o=void 0,i(t))}function r(e,t){f(e),this._c=void 0,this._o=e,e=new b(this);try{var o=t(e),r=o;null!=o&&("function"==typeof o.unsubscribe?o=function(){r.unsubscribe()}:d(o),this._c=o)}catch(t){return void e.error(t)}a(this)&&i(this)}var l=o("XKFU"),h=o("dyZX"),c=o("g3g5"),u=o("gHnn")(),p=o("K0xU")("observable"),d=o("2OiF"),f=o("y3w9"),m=o("9gX7"),g=o("3Lyj"),v=o("Mukb"),y=o("SlkY"),S=y.RETURN;r.prototype=g({},{unsubscribe:function(){s(this)}});var b=function(t){this._s=t};b.prototype=g({},{next:function(t){var e=this._s;if(!a(e)){var o=e._o;try{var r=n(o.next);if(r)return r.call(o,t)}catch(t){try{s(e)}finally{throw t}}}},error:function(t){var e=this._s;if(a(e))throw t;var o=e._o;e._o=void 0;try{var r=n(o.error);if(!r)throw t;t=r.call(o,t)}catch(t){try{i(e)}finally{throw t}}return i(e),t},complete:function(t){var e=this._s;if(!a(e)){var o=e._o;e._o=void 0;try{var r=n(o.complete);t=r?r.call(o,t):void 0}catch(t){try{i(e)}finally{throw t}}return i(e),t}}});var E=function(t){m(this,E,"Observable","_f")._f=d(t)};g(E.prototype,{subscribe:function(t){return new r(t,this._f)},forEach:function(r){var n=this;return new(c.Promise||h.Promise)(function(t,e){d(r);var o=n.subscribe({next:function(t){try{return r(t)}catch(t){e(t),o.unsubscribe()}},error:e,complete:t})})}}),g(E,{from:function(t){var e="function"==typeof this?this:E,o=n(f(t)[p]);if(o){var r=f(o.call(t));return r.constructor===e?r:new e(function(t){return r.subscribe(t)})}return new e(function(e){var o=!1;return u(function(){if(!o){try{if(y(t,!1,function(t){if(e.next(t),o)return S})===S)return}catch(t){if(o)throw t;return void e.error(t)}e.complete()}}),function(){o=!0}})},of:function(){for(var t=0,e=arguments.length,r=new Array(e);t<e;)r[t]=arguments[t++];return new("function"==typeof this?this:E)(function(e){var o=!1;return u(function(){if(!o){for(var t=0;t<r.length;++t)if(e.next(r[t]),o)return;e.complete()}}),function(){o=!0}})}}),v(E.prototype,p,function(){return this}),l(l.G,{Observable:E}),o("elZq")("Observable")},N8g3:function(t,e,o){e.f=o("K0xU")},NO8f:function(t,e,o){o("7DDg")("Uint8",1,function(r){return function(t,e,o){return r(this,t,e,o)}})},NTXk:function(t,e,o){"use strict";var r=o("XKFU"),n=o("AvRE")(!0),o=o("eeVq")(function(){return"𠮷"!=="𠮷".at(0)});r(r.P+r.F*o,"String",{at:function(t){return n(this,t)}})},Nr18:function(t,e,o){"use strict";var a=o("S/j/"),s=o("d/Gc"),l=o("ne8i");t.exports=function(t){for(var e=a(this),o=l(e.length),r=arguments.length,n=s(1<r?arguments[1]:void 0,o),r=2<r?arguments[2]:void 0,i=void 0===r?o:s(r,o);n<i;)e[n++]=t;return e}},Nsbk:function(e,t){function o(t){return e.exports=o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e.exports.default=e.exports,e.exports.__esModule=!0,o(t)}e.exports=o,e.exports.default=e.exports,e.exports.__esModule=!0},Nz9U:function(t,e,o){"use strict";var r=o("XKFU"),n=o("aCFj"),i=[].join;r(r.P+r.F*(o("Ymqv")!=Object||!o("LyE8")(i)),"Array",{join:function(t){return i.call(n(this),void 0===t?",":t)}})},OEbY:function(t,e,o){o("nh4g")&&"g"!=/./g.flags&&o("hswa").f(RegExp.prototype,"flags",{configurable:!0,get:o("C/va")})},OG14:function(t,e,o){"use strict";var s=o("y3w9"),l=o("g6HL"),h=o("Xxuz");o("IU+Z")("search",1,function(r,n,i,a){return[function(t){var e=r(this),o=null==t?void 0:t[n];return void 0!==o?o.call(t,e):new RegExp(t)[n](String(e))},function(t){var e=a(i,t,this);if(e.done)return e.value;var o=s(t),e=String(this),t=o.lastIndex;l(t,0)||(o.lastIndex=0);e=h(o,e);return l(o.lastIndex,t)||(o.lastIndex=t),null===e?-1:e.index}]})},OGtf:function(t,e,o){function r(t,e,o,r){var n=String(a(t)),t="<"+e;return""!==o&&(t+=" "+o+'="'+String(r).replace(s,"&quot;")+'"'),t+">"+n+"</"+e+">"}var n=o("XKFU"),i=o("eeVq"),a=o("vhPU"),s=/"/g;t.exports=function(e,t){var o={};o[e]=t(r),n(n.P+n.F*i(function(){var t=""[e]('"');return t!==t.toLowerCase()||3<t.split('"').length}),"String",o)}},OP3Y:function(t,e,o){var r=o("aagx"),n=o("S/j/"),i=o("YTvA")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=n(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},OnI7:function(t,e,o){var r=o("dyZX"),n=o("g3g5"),i=o("LQAc"),a=o("N8g3"),s=o("hswa").f;t.exports=function(t){var e=n.Symbol||(n.Symbol=!i&&r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},Opxb:function(t,e,o){var r=o("N6cJ"),n=o("y3w9"),i=o("2OiF"),a=r.key,s=r.set;r.exp({metadata:function(o,r){return function(t,e){s(o,r,(void 0!==e?n:i)(t),a(e))}}})},Oyvg:function(t,e,o){var r=o("dyZX"),i=o("Xbzi"),n=o("hswa").f,a=o("kJMx").f,s=o("quPj"),l=o("C/va"),h=f=r.RegExp,c=f.prototype,u=/a/g,p=/a/g,d=new f(u)!==u;if(o("nh4g")&&(!d||o("eeVq")(function(){return p[o("K0xU")("match")]=!1,f(u)!=u||f(p)==p||"/a/i"!=f(u,"i")}))){for(var f=function(t,e){var o=this instanceof f,r=s(t),n=void 0===e;return!o&&r&&t.constructor===f&&n?t:i(d?new h(r&&!n?t.source:t,e):h((r=t instanceof f)?t.source:t,r&&n?l.call(t):e),o?this:c,f)},m=a(h),g=0;m.length>g;)!function(e){e in f||n(f,e,{configurable:!0,get:function(){return h[e]},set:function(t){h[e]=t}})}(m[g++]);(c.constructor=f).prototype=c,o("KroJ")(r,"RegExp",f)}o("elZq")("RegExp")},PDX0:function(e,t){!function(t){e.exports=t}.call(this,{})},PJYZ:function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.default=t.exports,t.exports.__esModule=!0},PKUr:function(t,e,o){var r=o("dyZX").parseInt,n=o("qncB").trim,o=o("/e88"),i=/^[-+]?0[xX]/;t.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(t,e){t=n(String(t),3);return r(t,e>>>0||(i.test(t)?16:10))}:r},Q3ne:function(t,e,o){var r=o("SlkY");t.exports=function(t,e){var o=[];return r(t,!1,o.push,o,e),o}},QLe4:function(t,e,o){},QWy2:function(t,e,o){o("KOQb")("Map")},QaDb:function(t,e,o){"use strict";var r=o("Kuth"),n=o("RjD/"),i=o("fyDq"),a={};o("Mukb")(a,o("K0xU")("iterator"),function(){return this}),t.exports=function(t,e,o){t.prototype=r(a,{next:n(1,o)}),i(t,e+" Iterator")}},QnYD:function(t,e,o){var r=o("XKFU"),n=o("LZWt");r(r.S,"Error",{isError:function(t){return"Error"===n(t)}})},R5XZ:function(t,e,o){var r=o("dyZX"),n=o("XKFU"),i=o("ol8x"),a=[].slice,o=/MSIE .\./.test(i),i=function(n){return function(t,e){var o=2<arguments.length,r=o&&a.call(arguments,2);return n(o?function(){("function"==typeof t?t:Function(t)).apply(this,r)}:t,e)}};n(n.G+n.B+n.F*o,{setTimeout:i(r.setTimeout),setInterval:i(r.setInterval)})},RIqP:function(t,e,o){var r=o("Ijbi"),n=o("EbDI"),i=o("ZhPi"),a=o("Bnag");t.exports=function(t){return r(t)||n(t)||i(t)||a()},t.exports.default=t.exports,t.exports.__esModule=!0},"RK/D":function(t,e,o){"use strict";function s(t){return t.replace("://j1.58cdn.com.cn/git/teg-app-fe/","://img.58cdn.com.cn/git/teg-app-fe/")}var r=o("lwsE"),n=o.n(r),r=o("W8MJ"),i=o.n(r),u=["https:/","data:im","/static","http://","wvrhttp","file://"],r=function(){function o(t){var e=t.THREE,t=t.prefix;n()(this,o),this.cache={},this.prefix=t,this.textureLoader=new e.TextureLoader,this.imgSize=0,this.imgs=[],this.cubePathsList=[],this.cubeTextureList=[],this.clientGPU=0,this.idleLoadList=[],this.idleLoadIndex=0,this.inLoadNum=0,this.flag=0}return i()(o,[{key:"loadImg",value:function(t){var e=this,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},n=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],i=4<arguments.length?arguments[4]:void 0;if(t){var i=-1===u.indexOf(t.substring(0,7))?i||this.prefix:"",t=s(i+t),a=this.imgs[t];return n&&a&&a.isLoaded?o(this.imgs[t]):(a&&n||((a=document.createElement("img")).crossOrigin="anonymous",a.onload=function(){e.__endLoad(a),a.isLoaded=!0},a.onerror=function(){e.__endLoad()},this.__startLoad(),a.src=t,this.imgs[t]=a),a.addEventListener("load",function(){o(a)}),a.addEventListener("error",function(t){r(t)})),a}}},{key:"load",value:function(t){var e=this,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},n=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],i=4<arguments.length?arguments[4]:void 0;if(t){var a=this.cache[t];return n&&a&&a.isLoaded?o(a):a&&n||((a=new THREE.Texture).image=this.loadImg(s(t),function(){a.needsUpdate=!0,a.isLoaded=!0,e.cache[t]=a,o(a)},function(t){r(t)},n,i)),a}}},{key:"loadAll",value:function(o,r){for(var n=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){},s=(4<arguments.length&&void 0!==arguments[4]||this.prefix,!(5<arguments.length&&void 0!==arguments[5])||arguments[5]),l=0,h=!1,c=[],t=0;t<o.length;t++)!function(e){var t=-1===u.indexOf(o[e].substring(0,7))?t:"";n.load(t+o[e],function(t){h||(c[e]=t,i(++l,e,c[e]),l===o.length&&r(c))},function(t){h||(h=!0,a(t))},s)}(t)}},{key:"loadCubeTexture",value:function(o,r){var n=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){},s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,l=5<arguments.length?arguments[5]:void 0,t=6<arguments.length&&void 0!==arguments[6]?arguments[6]:this.prefix,h=!(7<arguments.length&&void 0!==arguments[7])||arguments[7],c=0,u=!1,p=[],e=this.cubeClip();if(l&&e){for(var d=2;d<l/e;)d*=2;l=d}else l=0;function f(t,e){if(!t.image[0]||"CAVNAS"!==t.image[0].tagName)for(var o=0;o<6;o++)t.image[o]=document.createElement("canvas");for(var r=0;r<6;r++){var n=t.image[r],i=n.getContext("2d");n.width=n.height=l,i.drawImage(e[r],0,0,l,l)}}if(h)for(var m=0;m<this.cubePathsList.length;m++){for(var g=this.cubePathsList[m],v=0,y=0;y<g.length;y++)g[y]===o[y]&&v++;if(v===o.length){var S=this.cubeTextureList[m];return S.image.forEach(function(t,e){i(e+1,e,t,o)}),s?(l?f(s,S.image):(s.dispose(),s.image=S.image),S.dispose()):s=S,s.needsUpdate=!0,r(s,o,!0),function(){}}}for(var b=!0,E=0;E<o.length;E++)!function(e){n.loadImg(o[e],function(t){return u?function(){}:(p[e]=t,i(++c,e,p[e],o),void(c===o.length&&(t=new THREE.CubeTexture(p),n.cubePathsList.push(o),n.cubeTextureList.push(t),b&&(s?(l?f(s,t.image):(s.dispose(),s.image=t.image),t.dispose()):s=t,s.needsUpdate=!0,r(s,o,!1)))))},function(t){u||(u=!0,a(t))},h,t)}(E);return function(){b=!1}}},{key:"getFromCache",value:function(t){return this.cache[t]}},{key:"clear",value:function(){for(var t in this.cache)this.cache[t].dispose();this.cubeTextureList.forEach(function(t){t.dispose()}),this.cache={},this.cubePathsList=[],this.cubeTextureList=[],this.idleLoadList=[],this.idleLoadIndex=0,this.flag++}},{key:"idleLoad",value:function(t){var e=this;this.idleLoadList=this.idleLoadList.concat(t),window.setTimeout(function(){return e.__continueIdleLoad()},0)}},{key:"sumGpu",value:function(t){var e;t&&(e=t.naturalWidth,t=t.naturalHeight,this.clientGPU+=e*t*4*1.33)}},{key:"__startLoad",value:function(){this.inLoadNum++}},{key:"__endLoad",value:function(t){var e=this;this.inLoadNum--,this.sumGpu(t),this.idleLoadIndex<this.idleLoadList.length&&window.setTimeout(function(){e.__continueIdleLoad()},0)}},{key:"__continueIdleLoad",value:function(){var t,e,o,r,n,i,a,s,l,h=this,c=this.idleLoadList,u=this.idleLoadIndex,p=this.flag,d=c[u];this.inLoadNum<6&&d&&(this.idleLoadIndex++,l=d.url,t=d.prefix,e=d.size,o=d.texture,r=d.isNeedCache,s=d.onLoaded,n=void 0===s?function(){}:s,c=void 0===(a=d.onLoading)?function(){}:a,u=d.onError,i=void 0===u?function(){}:u,a=void 0===(s=d.onStart)?function(){}:s,u=function(t,e,o){h.idleLoadIndex>=h.idleLoadList.length?(h.idleLoadIndex=0,h.idleLoadList=[]):h.__continueIdleLoad(),n(t,e,o)},s=function(t){h.idleLoadIndex>=h.idleLoadList.length?(h.idleLoadIndex=0,h.idleLoadList=[]):h.__continueIdleLoad(),i(t)},l=l||d,d=function(t){var e=this;return function(){p===e.flag&&t.apply(void 0,arguments)}}.bind(this),Array.isArray(l)?(a(),this.loadCubeTexture(l,d(u),d(c),d(s),o,e,t,r)):"string"==typeof l?(a(),this.load(l,u,s,r,t)):this.__continueIdleLoad())}}]),o}();e.a=r},RLh9:function(t,e,o){var r=o("I8a+"),n=o("Q3ne");t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return n(this)}}},"RM+U":function(t,e,u){"use strict";u.d(e,"a",function(){return li});var o,r,n=u("J4zp"),T=u.n(n),i=u("lSNA"),S=u.n(i),a=u("yXPU"),x=u.n(a),s=u("o0o1"),P=u.n(s),l="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==l&&l,h="URLSearchParams"in l,c="Symbol"in l&&"iterator"in Symbol,p="FileReader"in l&&"Blob"in l&&function(){try{return new Blob,!0}catch(t){return!1}}(),d="FormData"in l,f="ArrayBuffer"in l;function m(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function g(t){return t="string"!=typeof t?String(t):t}function v(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return c&&(t[Symbol.iterator]=function(){return t}),t}function y(e){this.map={},e instanceof y?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function b(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function E(o){return new Promise(function(t,e){o.onload=function(){t(o.result)},o.onerror=function(){e(o.error)}})}function w(t){var e=new FileReader,o=E(e);return e.readAsArrayBuffer(t),o}function M(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function D(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,(this._bodyInit=t)?"string"==typeof t?this._bodyText=t:p&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:d&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:h&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():f&&p&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=M(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):f&&(ArrayBuffer.prototype.isPrototypeOf(t)||r(t))?this._bodyArrayBuffer=M(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):h&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},p&&(this.blob=function(){var t=b(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=b(this);return t?t:ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)}return this.blob().then(w)}),this.text=function(){var t,e,o=b(this);if(o)return o;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,o=E(e),e.readAsText(t),o;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),o=new Array(e.length),r=0;r<e.length;r++)o[r]=String.fromCharCode(e[r]);return o.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d&&(this.formData=function(){return this.text().then(R)}),this.json=function(){return this.text().then(JSON.parse)},this}f&&(o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=ArrayBuffer.isView||function(t){return t&&-1<o.indexOf(Object.prototype.toString.call(t))}),y.prototype.append=function(t,e){t=m(t),e=g(e);var o=this.map[t];this.map[t]=o?o+", "+e:e},y.prototype.delete=function(t){delete this.map[m(t)]},y.prototype.get=function(t){return t=m(t),this.has(t)?this.map[t]:null},y.prototype.has=function(t){return this.map.hasOwnProperty(m(t))},y.prototype.set=function(t,e){this.map[m(t)]=g(e)},y.prototype.forEach=function(t,e){for(var o in this.map)this.map.hasOwnProperty(o)&&t.call(e,this.map[o],o,this)},y.prototype.keys=function(){var o=[];return this.forEach(function(t,e){o.push(e)}),v(o)},y.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),v(e)},y.prototype.entries=function(){var o=[];return this.forEach(function(t,e){o.push([e,t])}),v(o)},c&&(y.prototype[Symbol.iterator]=y.prototype.entries);var C=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function k(t,e){if(!(this instanceof k))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var o,r=(e=e||{}).body;if(t instanceof k){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new y(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new y(e.headers)),this.method=(o=e.method||this.method||"GET",t=o.toUpperCase(),-1<C.indexOf(t)?t:o),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r),"GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache||((e=/([?&])_=[^&]*/).test(this.url)?this.url=this.url.replace(e,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime())}function R(t){var o=new FormData;return t.trim().split("&").forEach(function(t){var e;t&&(t=(e=t.split("=")).shift().replace(/\+/g," "),e=e.join("=").replace(/\+/g," "),o.append(decodeURIComponent(t),decodeURIComponent(e)))}),o}function I(t,e){if(!(this instanceof I))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText=void 0===e.statusText?"":""+e.statusText,this.headers=new y(e.headers),this.url=e.url||"",this._initBody(t)}k.prototype.clone=function(){return new k(this,{body:this._bodyInit})},D.call(k.prototype),D.call(I.prototype),I.prototype.clone=function(){return new I(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new y(this.headers),url:this.url})},I.error=function(){var t=new I(null,{status:0,statusText:""});return t.type="error",t};var A=[301,302,303,307,308];I.redirect=function(t,e){if(-1===A.indexOf(e))throw new RangeError("Invalid status code");return new I(null,{status:e,headers:{location:t}})};var _=l.DOMException;try{new _}catch(t){(_=function(t,e){this.message=t,this.name=e;t=Error(t);this.stack=t.stack}).prototype=Object.create(Error.prototype),_.prototype.constructor=_}function F(r,a){return new Promise(function(n,t){var e=new k(r,a);if(e.signal&&e.signal.aborted)return t(new _("Aborted","AbortError"));var i=new XMLHttpRequest;function o(){i.abort()}i.onload=function(){var t,o,e={status:i.status,statusText:i.statusText,headers:(t=i.getAllResponseHeaders()||"",o=new y,t.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(t){return 0===t.indexOf("\n")?t.substr(1,t.length):t}).forEach(function(t){var e=t.split(":"),t=e.shift().trim();t&&(e=e.join(":").trim(),o.append(t,e))}),o)};e.url="responseURL"in i?i.responseURL:e.headers.get("X-Request-URL");var r="response"in i?i.response:i.responseText;setTimeout(function(){n(new I(r,e))},0)},i.onerror=function(){setTimeout(function(){t(new TypeError("Network request failed"))},0)},i.ontimeout=function(){setTimeout(function(){t(new TypeError("Network request failed"))},0)},i.onabort=function(){setTimeout(function(){t(new _("Aborted","AbortError"))},0)},i.open(e.method,function(e){try{return""===e&&l.location.href?l.location.href:e}catch(t){return e}}(e.url),!0),"include"===e.credentials?i.withCredentials=!0:"omit"===e.credentials&&(i.withCredentials=!1),"responseType"in i&&(p?i.responseType="blob":f&&e.headers.get("Content-Type")&&-1!==e.headers.get("Content-Type").indexOf("application/octet-stream")&&(i.responseType="arraybuffer")),!a||"object"!=typeof a.headers||a.headers instanceof y?e.headers.forEach(function(t,e){i.setRequestHeader(e,t)}):Object.getOwnPropertyNames(a.headers).forEach(function(t){i.setRequestHeader(t,g(a.headers[t]))}),e.signal&&(e.signal.addEventListener("abort",o),i.onreadystatechange=function(){4===i.readyState&&e.signal.removeEventListener("abort",o)}),i.send(void 0===e._bodyInit?null:e._bodyInit)})}F.polyfill=!0,l.fetch||(l.fetch=F,l.Headers=y,l.Request=k,l.Response=I);function O(o){this.updateCb=o;var r=0,n=document.createElement("div");function t(t){return n.appendChild(t.dom),t}function e(t){for(var e=0;e<n.children.length;e++)n.children[e].style.display=e===t?"block":"none";r=t}n.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000;display:none",n.addEventListener("click",function(t){t.preventDefault(),e(++r%n.children.length)},!1);var i,a=(performance||Date).now(),s=a,l=0,h=t(new O.Panel("FPS","#0ff","#002")),c=t(new O.Panel("MS","#0f0","#020"));return self.performance&&self.performance.memory&&(i=t(new O.Panel("MB","#f08","#201"))),e(0),{REVISION:16,dom:n,addPanel:t,showPanel:e,begin:function(){a=(performance||Date).now()},end:function(){l++;var t,e=(performance||Date).now();return c.update(e-a,200,o),s+1e3<e&&(h.update(1e3*l/(e-s),100),s=e,l=0,i&&(t=performance.memory,i.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576,o))),e},update:function(){a=this.end()},domElement:n,setMode:e}}var L=u("lPHp"),H=u.n(L);O.Panel=function(r,n,i){var a=1/0,s=0,l=Math.round,h=l(window.devicePixelRatio||1),c=80*h,t=48*h,u=3*h,p=2*h,d=3*h,f=15*h,m=74*h,g=30*h,v=document.createElement("canvas");v.width=c,v.height=t,v.style.cssText="width:80px;height:48px";var y=v.getContext("2d");return y.font="bold "+9*h+"px Helvetica,Arial,sans-serif",y.textBaseline="top",y.fillStyle=i,y.fillRect(0,0,c,t),y.fillStyle=n,y.fillText(r,u,p),y.fillRect(d,f,m,g),y.fillStyle=i,y.globalAlpha=.9,y.fillRect(d,f,m,g),{dom:v,update:function(t,e,o){a=Math.min(a,t),s=Math.max(s,t),y.fillStyle=i,y.globalAlpha=1,y.fillRect(0,0,c,f),y.fillStyle=n,y.fillText(l(t)+" "+r+" ("+l(a)+"-"+l(s)+")",u,p),o&&"MB"==r&&o(S()({},r,l(t))),y.drawImage(v,d+h,f,m-h,g,d,f,m-h,g),y.fillRect(d+m-h,f,h,g),y.fillStyle=i,y.globalAlpha=.9,y.fillRect(d+m-h,f,h,l((1-t/e)*g))}}};var B=function(t,e){return(B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)};function V(t,e){function o(){this.constructor=t}B(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}var N=function(){return(N=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function z(t,a,s,l){return new(s=s||Promise)(function(o,e){function r(t){try{i(l.next(t))}catch(t){e(t)}}function n(t){try{i(l.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?o(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,n)}i((l=l.apply(t,a||[])).next())})}function U(o,r){var n,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(a=2&e[0]?i.return:e[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,e[1])).done)return a;switch(i=0,(e=a?[2&e[0],a.value]:e)[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(o,s)}catch(t){e=[6,t],i=0}finally{n=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function G(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;for(var r=Array(t),n=0,e=0;e<o;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,n++)r[n]=i[a];return r}var j=[{sourceKey:"scroller.scrollBehaviorX.currentPos",key:"x"},{sourceKey:"scroller.scrollBehaviorY.currentPos",key:"y"},{sourceKey:"scroller.scrollBehaviorX.hasScroll",key:"hasHorizontalScroll"},{sourceKey:"scroller.scrollBehaviorY.hasScroll",key:"hasVerticalScroll"},{sourceKey:"scroller.scrollBehaviorX.contentSize",key:"scrollerWidth"},{sourceKey:"scroller.scrollBehaviorY.contentSize",key:"scrollerHeight"},{sourceKey:"scroller.scrollBehaviorX.maxScrollPos",key:"maxScrollX"},{sourceKey:"scroller.scrollBehaviorY.maxScrollPos",key:"maxScrollY"},{sourceKey:"scroller.scrollBehaviorX.minScrollPos",key:"minScrollX"},{sourceKey:"scroller.scrollBehaviorY.minScrollPos",key:"minScrollY"},{sourceKey:"scroller.scrollBehaviorX.movingDirection",key:"movingDirectionX"},{sourceKey:"scroller.scrollBehaviorY.movingDirection",key:"movingDirectionY"},{sourceKey:"scroller.scrollBehaviorX.direction",key:"directionX"},{sourceKey:"scroller.scrollBehaviorY.direction",key:"directionY"},{sourceKey:"scroller.actions.enabled",key:"enabled"},{sourceKey:"scroller.animater.pending",key:"pending"},{sourceKey:"scroller.animater.stop",key:"stop"},{sourceKey:"scroller.scrollTo",key:"scrollTo"},{sourceKey:"scroller.scrollBy",key:"scrollBy"},{sourceKey:"scroller.scrollToElement",key:"scrollToElement"},{sourceKey:"scroller.resetPosition",key:"resetPosition"}];function X(t){console.error("[BScroll warn]: "+t)}function W(t,e){if(!t)throw new Error("[BScroll] "+e)}var Y="undefined"!=typeof window,K=Y&&navigator.userAgent.toLowerCase(),q=!(!K||!/wechatdevtools/.test(K)),Z=K&&0<K.indexOf("android"),J=function(){if("string"!=typeof K)return!1;var t=/os (\d\d?_\d(_\d)?)/.exec(K);if(!t)return!1;t=t[1].split("_").map(function(t){return parseInt(t,10)});return!!(13===t[0]&&4<=t[1])}(),Q=!1;if(Y)try{var $={};Object.defineProperty($,"passive",{get:function(){Q=!0}}),window.addEventListener("test-passive",function(){},$)}catch(t){}function tt(){return window.performance&&window.performance.now&&window.performance.timing?window.performance.now()+window.performance.timing.navigationStart:+new Date}var et=function(t,e){for(var o in e)t[o]=e[o];return t};function ot(t){return null==t}function rt(t,e,o){return t<e?e:o<t?o:t}function nt(t,r){if(t.findIndex)return t.findIndex(r);var n=-1;return t.some(function(t,e,o){o=r(t,e,o);if(o)return n=e,o}),n}var it=Y&&document.createElement("div").style,at=function(){if(!Y)return!1;for(var t=0,e=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}];t<e.length;t++){var o=e[t];if(void 0!==it[o.value])return o.key}return!1}();function st(t){return!1===at?t:"standard"===at?"transitionEnd"===t?"transitionend":t:at+t.charAt(0).toUpperCase()+t.substr(1)}function lt(t){return"string"==typeof t?document.querySelector(t):t}function ht(t,e,o,r){r=Q?{passive:!1,capture:!!r}:!!r;t.addEventListener(e,o,r)}function ct(t,e,o,r){t.removeEventListener(e,o,{capture:!!r})}function ut(t){for(var e=0,o=0;t;)e-=t.offsetLeft,o-=t.offsetTop,t=t.offsetParent;return{left:e,top:o}}var pt=at&&"standard"!==at?"-"+at.toLowerCase()+"-":"",dt=st("transform"),ft=st("transition"),mt=Y&&st("perspective")in it,gt=Y&&("ontouchstart"in window||q),vt=Y&&ft in it,yt={transform:dt,transition:ft,transitionTimingFunction:st("transitionTimingFunction"),transitionDuration:st("transitionDuration"),transitionDelay:st("transitionDelay"),transformOrigin:st("transformOrigin"),transitionEnd:st("transitionEnd"),transitionProperty:st("transitionProperty")},St={touchstart:1,touchmove:1,touchend:1,touchcancel:1,mousedown:2,mousemove:2,mouseup:2};function bt(t){if(t instanceof window.SVGElement){var e=t.getBoundingClientRect();return{top:e.top,left:e.left,width:e.width,height:e.height}}return{top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}function Et(t,e){for(var o in e)if(e[o].test(t[o]))return!0;return!1}var wt=Et;function Tt(t,e){void 0===e&&(e="click"),"mouseup"===t.type?n=t:"touchend"!==t.type&&"touchcancel"!==t.type||(n=t.changedTouches[0]);var o,r={};n&&(r.screenX=n.screenX||0,r.screenY=n.screenY||0,r.clientX=n.clientX||0,r.clientY=n.clientY||0);var n={ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey};if("undefined"!=typeof MouseEvent)try{o=new MouseEvent(e,et(N({bubbles:!0,cancelable:!0},n),r))}catch(t){i()}else i();function i(){(o=document.createEvent("Event")).initEvent(e,!0,!0),et(o,r)}o.forwardedTouchEvent=!0,o._constructed=!0,t.target.dispatchEvent(o)}function xt(t,e){return new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)}var Pt={swipe:{style:"cubic-bezier(0.23, 1, 0.32, 1)",fn:function(t){return 1+--t*t*t*t*t}},swipeBounce:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},bounce:{style:"cubic-bezier(0.165, 0.84, 0.44, 1)",fn:function(t){return 1- --t*t*t*t}}},Mt=Y&&window;function Dt(){}var Ct=Y?Mt.requestAnimationFrame||Mt.webkitRequestAnimationFrame||Mt.mozRequestAnimationFrame||Mt.oRequestAnimationFrame||function(t){return window.setTimeout(t,t.interval||1e3/60)}:Dt,kt=Y?Mt.cancelAnimationFrame||Mt.webkitCancelAnimationFrame||Mt.mozCancelAnimationFrame||Mt.oCancelAnimationFrame||function(t){window.clearTimeout(t)}:Dt,Rt=function(t){},It={enumerable:!0,configurable:!0,get:Rt,set:Rt};function At(t,e,o){It.get=function(){return function(t,e){for(var o=e.split("."),r=0;r<o.length-1;r++)if("object"!=typeof(t=t[o[r]])||!t)return;var n=o.pop();return"function"==typeof t[n]?function(){return t[n].apply(t,arguments)}:t[n]}(this,e)},It.set=function(t){!function(t,e,o){for(var r,n=e.split("."),i=0;i<n.length-1;i++)t[r=n[i]]||(t[r]={}),t=t[r];t[n.pop()]=o}(this,e,t)},Object.defineProperty(t,o,It)}var _t=(Ft.prototype.on=function(t,e,o){return void 0===o&&(o=this),this.hasType(t),this.events[t]||(this.events[t]=[]),this.events[t].push([e,o]),this},Ft.prototype.once=function(r,n,i){var a=this;void 0===i&&(i=this),this.hasType(r);var s=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a.off(r,s);var o=n.apply(i,t);if(!0===o)return o};return s.fn=n,this.on(r,s),this},Ft.prototype.off=function(t,e){if(!t&&!e)return this.events={},this;if(t){if(this.hasType(t),!e)return this.events[t]=[],this;var o=this.events[t];if(!o)return this;for(var r=o.length;r--;)(o[r][0]===e||o[r][0]&&o[r][0].fn===e)&&o.splice(r,1);return this}},Ft.prototype.trigger=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];this.hasType(t);t=this.events[t];if(t)for(var r,n=t.length,i=G(t),a=0;a<n;a++){var s=i[a],l=s[0],s=s[1];if(l&&!0===(r=l.apply(s,e)))return r}},Ft.prototype.registerType=function(t){var e=this;t.forEach(function(t){e.eventTypes[t]=t})},Ft.prototype.destroy=function(){this.events={},this.eventTypes={}},Ft.prototype.hasType=function(t){var e=this.eventTypes;e[t]===t||X('EventEmitter has used unknown event type: "'+t+'", should be oneof ['+Object.keys(e).map(function(t){return JSON.stringify(t)})+"]")},Ft);function Ft(t){this.events={},this.eventTypes={},this.registerType(t)}var Ot=(Lt.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},Lt.prototype.addDOMEvents=function(){this.handleDOMEvents(ht)},Lt.prototype.removeDOMEvents=function(){this.handleDOMEvents(ct)},Lt.prototype.handleDOMEvents=function(e){var o=this,r=this.wrapper;this.events.forEach(function(t){e(r,t.name,o,!!t.capture)})},Lt.prototype.handleEvent=function(e){var o=e.type;this.events.some(function(t){return t.name===o&&(t.handler(e),!0)})},Lt);function Lt(t,e){this.wrapper=t,this.events=e,this.addDOMEvents()}var Ht,Bt=(V(Vt,Ht=function(){}),Vt.prototype.merge=function(t){if(!t)return this;for(var e in t)"bounce"!==e?this[e]=t[e]:this.bounce=this.resolveBounce(t[e]);return this},Vt.prototype.process=function(){return this.translateZ=this.HWCompositing&&mt?" translateZ(1px)":"",this.useTransition=this.useTransition&&vt,this.preventDefault=!this.eventPassthrough&&this.preventDefault,this.scrollX="horizontal"!==this.eventPassthrough&&this.scrollX,this.scrollY="vertical"!==this.eventPassthrough&&this.scrollY,this.freeScroll=this.freeScroll&&!this.eventPassthrough,this.scrollX=!!this.freeScroll||this.scrollX,this.scrollY=!!this.freeScroll||this.scrollY,this.directionLockThreshold=this.eventPassthrough?0:this.directionLockThreshold,this},Vt.prototype.resolveBounce=function(t){var e={top:!0,right:!0,bottom:!0,left:!0},e="object"==typeof t?et(e,t):t?e:{top:!1,right:!1,bottom:!1,left:!1};return e},Vt);function Vt(){var t=Ht.call(this)||this;return t.startX=0,t.startY=0,t.scrollX=!1,t.scrollY=!0,t.freeScroll=!1,t.directionLockThreshold=0,t.eventPassthrough="",t.click=!1,t.dblclick=!1,t.tap="",t.bounce={top:!0,bottom:!0,left:!0,right:!0},t.bounceTime=800,t.momentum=!0,t.momentumLimitTime=300,t.momentumLimitDistance=15,t.swipeTime=2500,t.swipeBounceTime=500,t.deceleration=.0015,t.flickLimitTime=200,t.flickLimitDistance=100,t.resizePolling=60,t.probeType=0,t.stopPropagation=!1,t.preventDefault=!0,t.preventDefaultException={tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|AUDIO)$/},t.tagException={tagName:/^TEXTAREA$/},t.HWCompositing=!0,t.useTransition=!0,t.bindToWrapper=!1,t.bindToTarget=!1,t.disableMouse=gt,t.disableTouch=!gt,t.autoBlur=!0,t.autoEndDistance=5,t.outOfBoundaryDampingFactor=1/3,t.specifiedIndexAsContent=0,t.quadrant=1,t}var Nt=(zt.prototype.handleDOMEvents=function(){var t=this.options,e=t.bindToWrapper,o=t.disableMouse,r=t.disableTouch,n=t.click,i=this.wrapper,a=e?i:window,t=[],e=[],r=!r,o=!o;n&&t.push({name:"click",handler:this.click.bind(this),capture:!0}),r&&(t.push({name:"touchstart",handler:this.start.bind(this)}),e.push({name:"touchmove",handler:this.move.bind(this)},{name:"touchend",handler:this.end.bind(this)},{name:"touchcancel",handler:this.end.bind(this)})),o&&(t.push({name:"mousedown",handler:this.start.bind(this)}),e.push({name:"mousemove",handler:this.move.bind(this)},{name:"mouseup",handler:this.end.bind(this)})),this.wrapperEventRegister=new Ot(i,t),this.targetEventRegister=new Ot(a,e)},zt.prototype.beforeHandler=function(t,e){var o=this.options,r=o.preventDefault,n=o.stopPropagation,i=o.preventDefaultException;!{start:function(){return r&&!Et(t.target,i)},end:function(){return r&&!Et(t.target,i)},move:function(){return r}}[e]()||t.preventDefault(),n&&t.stopPropagation()},zt.prototype.setInitiated=function(t){this.initiated=t=void 0===t?0:t},zt.prototype.start=function(t){var e=St[t.type];this.initiated&&this.initiated!==e||(this.setInitiated(e),wt(t.target,this.options.tagException)?this.setInitiated():2===e&&0!==t.button||this.hooks.trigger(this.hooks.eventTypes.beforeStart,t)||(this.beforeHandler(t,"start"),e=t.touches?t.touches[0]:t,this.pointX=e.pageX,this.pointY=e.pageY,this.hooks.trigger(this.hooks.eventTypes.start,t)))},zt.prototype.move=function(t){var e,o,r;St[t.type]===this.initiated&&(this.beforeHandler(t,"move"),r=(o=t.touches?t.touches[0]:t).pageX-this.pointX,e=o.pageY-this.pointY,this.pointX=o.pageX,this.pointY=o.pageY,this.hooks.trigger(this.hooks.eventTypes.move,{deltaX:r,deltaY:e,e:t})||(o=document.documentElement.scrollLeft||window.pageXOffset||document.body.scrollLeft,r=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,e=this.pointX-o,o=this.pointY-r,r=this.options.autoEndDistance,(e>document.documentElement.clientWidth-r||o>document.documentElement.clientHeight-r||e<r||o<r)&&this.end(t)))},zt.prototype.end=function(t){St[t.type]===this.initiated&&(this.setInitiated(),this.beforeHandler(t,"end"),this.hooks.trigger(this.hooks.eventTypes.end,t))},zt.prototype.click=function(t){this.hooks.trigger(this.hooks.eventTypes.click,t)},zt.prototype.setContent=function(t){t!==this.wrapper&&(this.wrapper=t,this.rebindDOMEvents())},zt.prototype.rebindDOMEvents=function(){this.wrapperEventRegister.destroy(),this.targetEventRegister.destroy(),this.handleDOMEvents()},zt.prototype.destroy=function(){this.wrapperEventRegister.destroy(),this.targetEventRegister.destroy(),this.hooks.destroy()},zt);function zt(t,e){this.wrapper=t,this.options=e,this.hooks=new _t(["beforeStart","start","move","end","click"]),this.handleDOMEvents()}var Ut={x:["translateX","px"],y:["translateY","px"]},Gt=(jt.prototype.getComputedPosition=function(){var t=window.getComputedStyle(this.content,null)[yt.transform].split(")")[0].split(", ");return{x:+(t[12]||t[4])||0,y:+(t[13]||t[5])||0}},jt.prototype.translate=function(r){var n=[];Object.keys(r).forEach(function(t){var e,o;!Ut[t]||(e=Ut[t][0])&&(o=Ut[t][1],t=r[t],n.push(e+"("+t+o+")"))}),this.hooks.trigger(this.hooks.eventTypes.beforeTranslate,n,r),this.style[yt.transform]=n.join(" "),this.hooks.trigger(this.hooks.eventTypes.translate,r)},jt.prototype.setContent=function(t){this.content!==t&&(this.content=t,this.style=t.style)},jt.prototype.destroy=function(){this.hooks.destroy()},jt);function jt(t){this.setContent(t),this.hooks=new _t(["beforeTranslate","translate"])}var Xt=(Wt.prototype.translate=function(t){this.translater.translate(t)},Wt.prototype.setPending=function(t){this.pending=t},Wt.prototype.setForceStopped=function(t){this.forceStopped=t},Wt.prototype.setCallStop=function(t){this.callStopWhenPending=t},Wt.prototype.setContent=function(t){this.content!==t&&(this.content=t,this.style=t.style,this.stop())},Wt.prototype.clearTimer=function(){this.timer&&(kt(this.timer),this.timer=0)},Wt.prototype.destroy=function(){this.hooks.destroy(),kt(this.timer)},Wt);function Wt(t,e,o){this.translater=e,this.options=o,this.timer=0,this.hooks=new _t(["move","end","beforeForceStop","forceStop","callStop","time","timeFunction"]),this.setContent(t)}function Yt(t,e,o,r){function n(t,e){return 0<(e=t-e)?-1:e<0?1:0}var i=n(e.x,t.x),e=n(e.y,t.y),t=o.x-r.x,r=o.y-r.y;return i*t<=0&&e*r<=0}var Kt,qt=(V(Zt,Kt=Xt),Zt.prototype.startProbe=function(e,o){var r=this,n=e,i=function(){var t=r.translater.getComputedPosition();Yt(e,o,t,n)&&r.hooks.trigger(r.hooks.eventTypes.move,t),r.pending||(r.callStopWhenPending?r.callStopWhenPending=!1:r.hooks.trigger(r.hooks.eventTypes.end,t)),n=t,r.pending&&(r.timer=Ct(i))};this.callStopWhenPending&&this.setCallStop(!1),kt(this.timer),i()},Zt.prototype.transitionTime=function(t){this.style[yt.transitionDuration]=(t=void 0===t?0:t)+"ms",this.hooks.trigger(this.hooks.eventTypes.time,t)},Zt.prototype.transitionTimingFunction=function(t){this.style[yt.transitionTimingFunction]=t,this.hooks.trigger(this.hooks.eventTypes.timeFunction,t)},Zt.prototype.transitionProperty=function(){this.style[yt.transitionProperty]=yt.transform},Zt.prototype.move=function(t,e,o,r){this.setPending(0<o),this.transitionTimingFunction(r),this.transitionProperty(),this.transitionTime(o),this.translate(e);r=3===this.options.probeType;o&&r&&this.startProbe(t,e),o||(this._reflow=this.content.offsetHeight,r&&this.hooks.trigger(this.hooks.eventTypes.move,e),this.hooks.trigger(this.hooks.eventTypes.end,e))},Zt.prototype.doStop=function(){var t,e,o=this.pending;return this.setForceStopped(!1),this.setCallStop(!1),o&&(this.setPending(!1),kt(this.timer),t=(e=this.translater.getComputedPosition()).x,e=e.y,this.transitionTime(),this.translate({x:t,y:e}),this.setForceStopped(!0),this.setCallStop(!0),this.hooks.trigger(this.hooks.eventTypes.forceStop,{x:t,y:e})),o},Zt.prototype.stop=function(){this.doStop()&&this.hooks.trigger(this.hooks.eventTypes.callStop)},Zt);function Zt(){return null!==Kt&&Kt.apply(this,arguments)||this}var Jt,Qt=(V($t,Jt=Xt),$t.prototype.move=function(t,e,o,r){if(!o)return this.translate(e),3===this.options.probeType&&this.hooks.trigger(this.hooks.eventTypes.move,e),void this.hooks.trigger(this.hooks.eventTypes.end,e);this.animate(t,e,o,r)},$t.prototype.animate=function(i,a,e,o){var s=this,l=tt(),h=l+e,c=3===this.options.probeType,u=function(){var t=tt();if(h<=t)return s.translate(a),c&&s.hooks.trigger(s.hooks.eventTypes.move,a),void s.hooks.trigger(s.hooks.eventTypes.end,a);var r=o(t=(t-l)/e),n={};Object.keys(a).forEach(function(t){var e=i[t],o=a[t];n[t]=(o-e)*r+e}),s.translate(n),c&&s.hooks.trigger(s.hooks.eventTypes.move,n),s.pending&&(s.timer=Ct(u)),s.pending||(s.callStopWhenPending?s.callStopWhenPending=!1:s.hooks.trigger(s.hooks.eventTypes.end,a))};this.setPending(!0),this.callStopWhenPending&&this.setCallStop(!1),kt(this.timer),u()},$t.prototype.doStop=function(){var t,e=this.pending;return this.setForceStopped(!1),this.setCallStop(!1),e&&(this.setPending(!1),kt(this.timer),t=this.translater.getComputedPosition(),this.setForceStopped(!0),this.setCallStop(!0),this.hooks.trigger(this.hooks.eventTypes.forceStop,t)),e},$t.prototype.stop=function(){this.doStop()&&this.hooks.trigger(this.hooks.eventTypes.callStop)},$t);function $t(){return null!==Jt&&Jt.apply(this,arguments)||this}var te=(ee.prototype.start=function(){this.dist=0,this.setMovingDirection(0),this.setDirection(0)},ee.prototype.move=function(t){return t=this.hasScroll?t:0,this.setMovingDirection(t),this.performDampingAlgorithm(t,this.options.outOfBoundaryDampingFactor)},ee.prototype.setMovingDirection=function(t){this.movingDirection=0<t?-1:t<0?1:0},ee.prototype.setDirection=function(t){this.direction=0<t?-1:t<0?1:0},ee.prototype.performDampingAlgorithm=function(t,e){var o=this.currentPos+t;return o=o>this.minScrollPos||o<this.maxScrollPos?o>this.minScrollPos&&this.options.bounces[0]||o<this.maxScrollPos&&this.options.bounces[1]?this.currentPos+t*e:o>this.minScrollPos?this.minScrollPos:this.maxScrollPos:o},ee.prototype.end=function(t){var e={duration:0},o=Math.abs(this.currentPos-this.startPos);return this.options.momentum&&t<this.options.momentumLimitTime&&o>this.options.momentumLimitDistance?(o=-1===this.direction&&this.options.bounces[0]||1===this.direction&&this.options.bounces[1]?this.wrapperSize:0,e=this.hasScroll?this.momentum(this.currentPos,this.startPos,t,this.maxScrollPos,this.minScrollPos,o,this.options):{destination:this.currentPos,duration:0}):this.hooks.trigger(this.hooks.eventTypes.end,e),e},ee.prototype.momentum=function(t,e,o,r,n,i,a){void 0===a&&(a=this.options);var s=t-e,l=Math.abs(s)/o,e=a.deceleration,o=a.swipeBounceTime,a=a.swipeTime,e={destination:t+l*l/e*(s<0?-1:1),duration:Math.min(a,2*l/e),rate:15};return this.hooks.trigger(this.hooks.eventTypes.momentum,e,s),e.destination<r?(e.destination=i?Math.max(r-i/4,r-i/e.rate*l):r,e.duration=o):e.destination>n&&(e.destination=i?Math.min(n+i/4,n+i/e.rate*l):n,e.duration=o),e.destination=Math.round(e.destination),e},ee.prototype.updateDirection=function(){var t=this.currentPos-this.absStartPos;this.setDirection(t)},ee.prototype.refresh=function(t){var e=this.options.rect,o=e.size,r=e.position,n="static"===window.getComputedStyle(this.wrapper,null).position,e=bt(this.wrapper);this.wrapperSize=this.wrapper["width"===o?"clientWidth":"clientHeight"],this.setContent(t);t=bt(this.content);this.contentSize=t[o],this.relativeOffset=t[r],n&&(this.relativeOffset-=e[r]),this.computeBoundary(),this.setDirection(0)},ee.prototype.setContent=function(t){t!==this.content&&(this.content=t,this.resetState())},ee.prototype.resetState=function(){this.currentPos=0,this.startPos=0,this.dist=0,this.setDirection(0),this.setMovingDirection(0),this.resetStartPos()},ee.prototype.computeBoundary=function(){this.hooks.trigger(this.hooks.eventTypes.beforeComputeBoundary);var t={minScrollPos:0,maxScrollPos:this.wrapperSize-this.contentSize};t.maxScrollPos<0&&(t.maxScrollPos-=this.relativeOffset,0===this.options.specifiedIndexAsContent&&(t.minScrollPos=-this.relativeOffset)),this.hooks.trigger(this.hooks.eventTypes.computeBoundary,t),this.minScrollPos=t.minScrollPos,this.maxScrollPos=t.maxScrollPos,this.hasScroll=this.options.scrollable&&this.maxScrollPos<this.minScrollPos,!this.hasScroll&&this.minScrollPos<this.maxScrollPos&&(this.maxScrollPos=this.minScrollPos,this.contentSize=this.wrapperSize)},ee.prototype.updatePosition=function(t){this.currentPos=t},ee.prototype.getCurrentPos=function(){return this.currentPos},ee.prototype.checkInBoundary=function(){var t=this.adjustPosition(this.currentPos);return{position:t,inBoundary:t===this.getCurrentPos()}},ee.prototype.adjustPosition=function(t){return!this.hasScroll&&!this.hooks.trigger(this.hooks.eventTypes.ignoreHasScroll)||t>this.minScrollPos?t=this.minScrollPos:t<this.maxScrollPos&&(t=this.maxScrollPos),t},ee.prototype.updateStartPos=function(){this.startPos=this.currentPos},ee.prototype.updateAbsStartPos=function(){this.absStartPos=this.currentPos},ee.prototype.resetStartPos=function(){this.updateStartPos(),this.updateAbsStartPos()},ee.prototype.getAbsDist=function(t){return this.dist+=t,Math.abs(this.dist)},ee.prototype.destroy=function(){this.hooks.destroy()},ee);function ee(t,e,o){this.wrapper=t,this.options=o,this.hooks=new _t(["beforeComputeBoundary","computeBoundary","momentum","end","ignoreHasScroll"]),this.refresh(e)}var oe=((io={}).yes=function(t){return!0},io.no=function(t){return t.preventDefault(),!1},io),re=((e={}).horizontal=((n={}).yes="horizontal",n.no="vertical",n),e.vertical=((i={}).yes="vertical",i.no="horizontal",i),e),ne=(ie.prototype.reset=function(){this.directionLocked=""},ie.prototype.checkMovingDirection=function(t,e,o){return this.computeDirectionLock(t,e),this.handleEventPassthrough(o)},ie.prototype.adjustDelta=function(t,e){return"horizontal"===this.directionLocked?e=0:"vertical"===this.directionLocked&&(t=0),{deltaX:t,deltaY:e}},ie.prototype.computeDirectionLock=function(t,e){""!==this.directionLocked||this.freeScroll||(t>e+this.directionLockThreshold?this.directionLocked="horizontal":e>=t+this.directionLockThreshold?this.directionLocked="vertical":this.directionLocked="none")},ie.prototype.handleEventPassthrough=function(t){var e=re[this.directionLocked];if(e){if(this.eventPassthrough===e.yes)return oe.yes(t);if(this.eventPassthrough===e.no)return oe.no(t)}return!1},ie);function ie(t,e,o){this.directionLockThreshold=t,this.freeScroll=e,this.eventPassthrough=o,this.reset()}var ae=(se.prototype.bindActionsHandler=function(){var n=this;this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.start,function(t){return!n.enabled||n.handleStart(t)}),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.move,function(t){var e=t.deltaX,o=t.deltaY,r=t.e;if(!n.enabled)return!0;t=e,e=o,e=2===(o=n.options.quadrant)?[e,-t]:3===o?[-t,-e]:4===o?[-e,t]:[t,e],e={deltaX:e[0],deltaY:e[1]};return n.hooks.trigger(n.hooks.eventTypes.coordinateTransformation,e),n.handleMove(e.deltaX,e.deltaY,r)}),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.end,function(t){return!n.enabled||n.handleEnd(t)}),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.click,function(t){n.enabled&&!t._constructed&&n.handleClick(t)})},se.prototype.handleStart=function(t){var e=tt();this.fingerMoved=!1,this.contentMoved=!1,this.startTime=e,this.directionLockAction.reset(),this.scrollBehaviorX.start(),this.scrollBehaviorY.start(),this.animater.doStop(),this.scrollBehaviorX.resetStartPos(),this.scrollBehaviorY.resetStartPos(),this.hooks.trigger(this.hooks.eventTypes.start,t)},se.prototype.handleMove=function(t,e,o){if(!this.hooks.trigger(this.hooks.eventTypes.beforeMove,o)){var r=this.scrollBehaviorX.getAbsDist(t),n=this.scrollBehaviorY.getAbsDist(e),i=tt();if(this.checkMomentum(r,n,i))return!0;if(this.directionLockAction.checkMovingDirection(r,n,o))return this.actionsHandler.setInitiated(),!0;n=this.directionLockAction.adjustDelta(t,e),o=this.scrollBehaviorX.getCurrentPos(),t=this.scrollBehaviorX.move(n.deltaX),e=this.scrollBehaviorY.getCurrentPos(),n=this.scrollBehaviorY.move(n.deltaY);this.hooks.trigger(this.hooks.eventTypes.detectMovingDirection)||(this.fingerMoved||(this.fingerMoved=!0),e=t!==o||n!==e,this.contentMoved||e||this.hooks.trigger(this.hooks.eventTypes.contentNotMoved),!this.contentMoved&&e&&(this.contentMoved=!0,this.hooks.trigger(this.hooks.eventTypes.scrollStart)),this.contentMoved&&e&&(this.animater.translate({x:t,y:n}),this.dispatchScroll(i)))}},se.prototype.dispatchScroll=function(t){t-this.startTime>this.options.momentumLimitTime&&(this.startTime=t,this.scrollBehaviorX.updateStartPos(),this.scrollBehaviorY.updateStartPos(),1===this.options.probeType&&this.hooks.trigger(this.hooks.eventTypes.scroll,this.getCurrentPos())),1<this.options.probeType&&this.hooks.trigger(this.hooks.eventTypes.scroll,this.getCurrentPos())},se.prototype.checkMomentum=function(t,e,o){return o-this.endTime>this.options.momentumLimitTime&&e<this.options.momentumLimitDistance&&t<this.options.momentumLimitDistance},se.prototype.handleEnd=function(t){if(!this.hooks.trigger(this.hooks.eventTypes.beforeEnd,t)){var e=this.getCurrentPos();if(this.scrollBehaviorX.updateDirection(),this.scrollBehaviorY.updateDirection(),this.hooks.trigger(this.hooks.eventTypes.end,t,e))return!0;e=this.ensureIntegerPos(e),this.animater.translate(e),this.endTime=tt();t=this.endTime-this.startTime;this.hooks.trigger(this.hooks.eventTypes.scrollEnd,e,t)}},se.prototype.ensureIntegerPos=function(t){this.ensuringInteger=!0;var e=t.x,o=t.y,r=this.scrollBehaviorX,n=r.minScrollPos,i=r.maxScrollPos,t=this.scrollBehaviorY,r=t.minScrollPos,t=t.maxScrollPos,e=0<e?Math.ceil(e):Math.floor(e),o=0<o?Math.ceil(o):Math.floor(o);return{x:e=rt(e,i,n),y:o=rt(o,t,r)}},se.prototype.handleClick=function(t){Et(t.target,this.options.preventDefaultException)||(t.preventDefault(),t.stopPropagation())},se.prototype.getCurrentPos=function(){return{x:this.scrollBehaviorX.getCurrentPos(),y:this.scrollBehaviorY.getCurrentPos()}},se.prototype.refresh=function(){this.endTime=0},se.prototype.destroy=function(){this.hooks.destroy()},se);function se(t,e,o,r,n){this.hooks=new _t(["start","beforeMove","scrollStart","scroll","beforeEnd","end","scrollEnd","contentNotMoved","detectMovingDirection","coordinateTransformation"]),this.scrollBehaviorX=t,this.scrollBehaviorY=e,this.actionsHandler=o,this.animater=r,this.options=n,this.directionLockAction=new ne(n.directionLockThreshold,n.freeScroll,n.eventPassthrough),this.enabled=!0,this.bindActionsHandler()}function le(o,t,e,r){var n=["momentum","momentumLimitTime","momentumLimitDistance","deceleration","swipeBounceTime","swipeTime","outOfBoundaryDampingFactor","specifiedIndexAsContent"].reduce(function(t,e){return t[e]=o[e],t},{});return n.scrollable=!!o[t],n.bounces=e,n.rect=r,n}function he(r,n,t){t.forEach(function(t){var e,o;"string"==typeof t?e=o=t:(e=t.source,o=t.target),r.on(e,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.trigger.apply(n,G([o],t))})})}var ce=(ue.prototype.init=function(){var t=this;this.bindTranslater(),this.bindAnimater(),this.bindActions(),this.hooks.on(this.hooks.eventTypes.scrollEnd,function(){t.togglePointerEvents(!0)})},ue.prototype.registerTransitionEnd=function(){this.transitionEndRegister=new Ot(this.content,[{name:yt.transitionEnd,handler:this.transitionEnd.bind(this)}])},ue.prototype.bindTranslater=function(){var o=this,t=this.translater.hooks;t.on(t.eventTypes.beforeTranslate,function(t){o.options.translateZ&&t.push(o.options.translateZ)}),t.on(t.eventTypes.translate,function(t){var e=o.getCurrentPos();o.updatePositions(t),!0!==o.actions.ensuringInteger?t.x===e.x&&t.y===e.y||o.togglePointerEvents(!1):o.actions.ensuringInteger=!1})},ue.prototype.bindAnimater=function(){var e=this;this.animater.hooks.on(this.animater.hooks.eventTypes.end,function(t){e.resetPosition(e.options.bounceTime)||(e.animater.setPending(!1),e.hooks.trigger(e.hooks.eventTypes.scrollEnd,t))}),he(this.animater.hooks,this.hooks,[{source:this.animater.hooks.eventTypes.move,target:this.hooks.eventTypes.scroll},{source:this.animater.hooks.eventTypes.forceStop,target:this.hooks.eventTypes.scrollEnd}])},ue.prototype.bindActions=function(){var n=this,i=this.actions;he(i.hooks,this.hooks,[{source:i.hooks.eventTypes.start,target:this.hooks.eventTypes.beforeStart},{source:i.hooks.eventTypes.start,target:this.hooks.eventTypes.beforeScrollStart},{source:i.hooks.eventTypes.beforeMove,target:this.hooks.eventTypes.beforeMove},{source:i.hooks.eventTypes.scrollStart,target:this.hooks.eventTypes.scrollStart},{source:i.hooks.eventTypes.scroll,target:this.hooks.eventTypes.scroll},{source:i.hooks.eventTypes.beforeEnd,target:this.hooks.eventTypes.beforeEnd}]),i.hooks.on(i.hooks.eventTypes.end,function(t,e){return n.hooks.trigger(n.hooks.eventTypes.touchEnd,e),!!n.hooks.trigger(n.hooks.eventTypes.end,e)||(!(i.fingerMoved||(n.hooks.trigger(n.hooks.eventTypes.scrollCancel),!n.checkClick(t)))||(n.resetPosition(n.options.bounceTime,Pt.bounce)?(n.animater.setForceStopped(!1),!0):void 0))}),i.hooks.on(i.hooks.eventTypes.scrollEnd,function(t,e){var o=Math.abs(t.x-n.scrollBehaviorX.startPos),r=Math.abs(t.y-n.scrollBehaviorY.startPos);if(n.checkFlick(e,o,r))return n.animater.setForceStopped(!1),void n.hooks.trigger(n.hooks.eventTypes.flick);n.momentum(t,e)?n.animater.setForceStopped(!1):(i.contentMoved&&n.hooks.trigger(n.hooks.eventTypes.scrollEnd,t),n.animater.forceStopped&&n.animater.setForceStopped(!1))})},ue.prototype.checkFlick=function(t,e,o){if(1<this.hooks.events.flick.length&&t<this.options.flickLimitTime&&e<this.options.flickLimitDistance&&o<this.options.flickLimitDistance&&(1<o||1<e))return!0},ue.prototype.momentum=function(t,e){var o={time:0,easing:Pt.swiper,newX:t.x,newY:t.y},r=this.scrollBehaviorX.end(e),e=this.scrollBehaviorY.end(e);if(o.newX=ot(r.destination)?o.newX:r.destination,o.newY=ot(e.destination)?o.newY:e.destination,o.time=Math.max(r.duration,e.duration),this.hooks.trigger(this.hooks.eventTypes.momentum,o,this),o.newX!==t.x||o.newY!==t.y)return(o.newX>this.scrollBehaviorX.minScrollPos||o.newX<this.scrollBehaviorX.maxScrollPos||o.newY>this.scrollBehaviorY.minScrollPos||o.newY<this.scrollBehaviorY.maxScrollPos)&&(o.easing=Pt.swipeBounce),this.scrollTo(o.newX,o.newY,o.time,o.easing),!0},ue.prototype.checkClick=function(t){var e=this.animater.forceStopped;if(this.hooks.trigger(this.hooks.eventTypes.checkClick))return this.animater.setForceStopped(!1),!0;if(e)return!1;var o,r,n=this.options.dblclick,e=!1;return n&&this.lastClickTime&&(r=void 0===(o=n.delay)?300:o,tt()-this.lastClickTime<r&&(e=!0,Tt(t,"dblclick"))),this.options.tap&&(n=t,o=this.options.tap,(r=document.createEvent("Event")).initEvent(o,!0,!0),r.pageX=n.pageX,r.pageY=n.pageY,n.target.dispatchEvent(r)),this.options.click&&!Et(t.target,this.options.preventDefaultException)&&Tt(t),this.lastClickTime=e?null:tt(),!0},ue.prototype.resize=function(){var t=this;this.actions.enabled&&(Z&&(this.wrapper.scrollTop=0),clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(function(){t.hooks.trigger(t.hooks.eventTypes.resize)},this.options.resizePolling))},ue.prototype.transitionEnd=function(t){t.target===this.content&&this.animater.pending&&(this.animater.transitionTime(),this.resetPosition(this.options.bounceTime,Pt.bounce)||(this.animater.setPending(!1),3!==this.options.probeType&&this.hooks.trigger(this.hooks.eventTypes.scrollEnd,this.getCurrentPos())))},ue.prototype.togglePointerEvents=function(t){for(var e=this.content.children.length?this.content.children:[this.content],o=(t=void 0===t?!0:t)?"auto":"none",r=0;r<e.length;r++){var n=e[r];n.isBScrollContainer||(n.style.pointerEvents=o)}},ue.prototype.refresh=function(t){var e=this.setContent(t);this.hooks.trigger(this.hooks.eventTypes.beforeRefresh),this.scrollBehaviorX.refresh(t),this.scrollBehaviorY.refresh(t),e&&(this.translater.setContent(t),this.animater.setContent(t),this.transitionEndRegister.destroy(),this.registerTransitionEnd(),this.options.bindToTarget&&this.actionsHandler.setContent(t)),this.actions.refresh(),this.wrapperOffset=ut(this.wrapper)},ue.prototype.setContent=function(t){var e=t!==this.content;return e&&(this.content=t),e},ue.prototype.scrollBy=function(t,e,o,r){void 0===o&&(o=0);var n=this.getCurrentPos(),i=n.x,n=n.y;this.scrollTo(t+=i,e+=n,o,r=r||Pt.bounce)},ue.prototype.scrollTo=function(t,e,o,r,n){void 0===o&&(o=0),void 0===r&&(r=Pt.bounce),void 0===n&&(n={start:{},end:{}});var i=this.options.useTransition?r.style:r.fn,r=this.getCurrentPos(),r=N({x:r.x,y:r.y},n.start),t=N({x:t,y:e},n.end);this.hooks.trigger(this.hooks.eventTypes.scrollTo,t),function(t,e){for(var o=0,r=Object.keys(t);o<r.length;o++){var n=r[o];if(t[n]!==e[n])return}return 1}(r,t)||(e=Math.abs(t.x-r.x),n=Math.abs(t.y-r.y),e<1&&n<1&&(o=0,this.hooks.trigger(this.hooks.eventTypes.minDistanceScroll)),this.animater.move(r,t,o,i))},ue.prototype.scrollToElement=function(t,e,o,r,n){var i=lt(t),a=ut(i),t=function(t,e,o){return"number"==typeof t?t:t?Math.round(e/2-o/2):0};o=t(o,i.offsetWidth,this.wrapper.offsetWidth),r=t(r,i.offsetHeight,this.wrapper.offsetHeight);t=function(t,e,o,r){return t=r.adjustPosition((t-=e)-o)};a.left=t(a.left,this.wrapperOffset.left,o,this.scrollBehaviorX),a.top=t(a.top,this.wrapperOffset.top,r,this.scrollBehaviorY),this.hooks.trigger(this.hooks.eventTypes.scrollToElement,i,a)||this.scrollTo(a.left,a.top,e,n)},ue.prototype.resetPosition=function(t,e){void 0===t&&(t=0),void 0===e&&(e=Pt.bounce);var o=this.scrollBehaviorX.checkInBoundary(),r=o.position,n=o.inBoundary,i=this.scrollBehaviorY.checkInBoundary(),o=i.position,i=i.inBoundary;return(!n||!i)&&(J&&this.reflow(),this.scrollTo(r,o,t,e),!0)},ue.prototype.reflow=function(){this._reflow=this.content.offsetHeight},ue.prototype.updatePositions=function(t){this.scrollBehaviorX.updatePosition(t.x),this.scrollBehaviorY.updatePosition(t.y)},ue.prototype.getCurrentPos=function(){return this.actions.getCurrentPos()},ue.prototype.enable=function(){this.actions.enabled=!0},ue.prototype.disable=function(){kt(this.animater.timer),this.actions.enabled=!1},ue.prototype.destroy=function(){var e=this;["resizeRegister","transitionEndRegister","actionsHandler","actions","hooks","animater","translater","scrollBehaviorX","scrollBehaviorY"].forEach(function(t){return e[t].destroy()})},ue);function ue(t,e,o){this.wrapper=t,this.content=e,this.resizeTimeout=0,this.hooks=new _t(["beforeStart","beforeMove","beforeScrollStart","scrollStart","scroll","beforeEnd","scrollEnd","resize","touchEnd","end","flick","scrollCancel","momentum","scrollTo","minDistanceScroll","scrollToElement","beforeRefresh"]),this.options=o;var r,n,i=this.options.bounce,a=i.left,s=i.right,l=i.top,i=i.bottom;this.scrollBehaviorX=new te(t,e,le(o,"scrollX",[a,s],{size:"width",position:"left"})),this.scrollBehaviorY=new te(t,e,le(o,"scrollY",[l,i],{size:"height",position:"top"})),this.translater=new Gt(this.content),this.animater=(e=this.content,o=this.translater,r=this.options,l=r.useTransition,i={},Object.defineProperty(i,"probeType",{enumerable:!0,configurable:!1,get:function(){return r.probeType}}),new(l?qt:Qt)(e,o,i)),this.actionsHandler=new Nt(this.options.bindToTarget?this.content:t,(n=this.options,["click","bindToWrapper","disableMouse","disableTouch","preventDefault","stopPropagation","tagException","preventDefaultException","autoEndDistance"].reduce(function(t,e){return t[e]=n[e],t},{}))),this.actions=new ae(this.scrollBehaviorX,this.scrollBehaviorY,this.actionsHandler,this.animater,this.options);t=this.resize.bind(this);this.resizeRegister=new Ot(window,[{name:"orientationchange",handler:t},{name:"resize",handler:t}]),this.registerTransitionEnd(),this.init()}var pe,de=(V(fe,pe=_t),fe.use=function(e){var t=e.pluginName;return fe.plugins.some(function(t){return e===t.ctor})||(ot(t)?X("Plugin Class must specify plugin's name in static property by 'pluginName' field."):(fe.pluginsMap[t]=!0,fe.plugins.push({name:t,applyOrder:e.applyOrder,ctor:e}))),fe},fe.prototype.setContent=function(t){var e=!1,o=!0,t=t.children[this.options.specifiedIndexAsContent];return t?(e=this.content!==t)&&(this.content=t):(X("The wrapper need at least one child element to be content element to scroll."),o=!1),{valid:o,contentChanged:e}},fe.prototype.init=function(t){var e=this;(this.wrapper=t).isBScrollContainer=!0,this.scroller=new ce(t,this.content,this.options),this.scroller.hooks.on(this.scroller.hooks.eventTypes.resize,function(){e.refresh()}),this.eventBubbling(),this.handleAutoBlur(),this.enable(),this.proxy(j),this.applyPlugins(),this.refreshWithoutReset(this.content);t=this.options,t={x:t.startX,y:t.startY};this.hooks.trigger(this.hooks.eventTypes.beforeInitialScrollTo,t)||this.scroller.scrollTo(t.x,t.y)},fe.prototype.applyPlugins=function(){var o=this,r=this.options;fe.plugins.sort(function(t,e){var o=((o={}).pre=-1,o.post=1,o);return(t.applyOrder?o[t.applyOrder]:0)-(e.applyOrder?o[e.applyOrder]:0)}).forEach(function(t){var e=t.ctor;r[t.name]&&"function"==typeof e&&(o.plugins[t.name]=new e(o))})},fe.prototype.handleAutoBlur=function(){this.options.autoBlur&&this.on(this.eventTypes.beforeScrollStart,function(){var t=document.activeElement;!t||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName||t.blur()})},fe.prototype.eventBubbling=function(){he(this.scroller.hooks,this,[this.eventTypes.beforeScrollStart,this.eventTypes.scrollStart,this.eventTypes.scroll,this.eventTypes.scrollEnd,this.eventTypes.scrollCancel,this.eventTypes.touchEnd,this.eventTypes.flick])},fe.prototype.refreshWithoutReset=function(t){this.scroller.refresh(t),this.hooks.trigger(this.hooks.eventTypes.refresh,t),this.trigger(this.eventTypes.refresh,t)},fe.prototype.proxy=function(t){var o=this;t.forEach(function(t){var e=t.key,t=t.sourceKey;At(o,t,e)})},fe.prototype.refresh=function(){var t=this.setContent(this.wrapper),e=t.contentChanged;t.valid&&(t=this.content,this.refreshWithoutReset(t),e&&(this.hooks.trigger(this.hooks.eventTypes.contentChanged,t),this.trigger(this.eventTypes.contentChanged,t)),this.scroller.resetPosition())},fe.prototype.enable=function(){this.scroller.enable(),this.hooks.trigger(this.hooks.eventTypes.enable),this.trigger(this.eventTypes.enable)},fe.prototype.disable=function(){this.scroller.disable(),this.hooks.trigger(this.hooks.eventTypes.disable),this.trigger(this.eventTypes.disable)},fe.prototype.destroy=function(){this.hooks.trigger(this.hooks.eventTypes.destroy),this.trigger(this.eventTypes.destroy),this.scroller.destroy()},fe.prototype.eventRegister=function(t){this.registerType(t)},fe.plugins=[],fe.pluginsMap={},fe);function fe(t,e){var o=pe.call(this,["refresh","contentChanged","enable","disable","beforeScrollStart","scrollStart","scroll","scrollEnd","scrollCancel","touchEnd","flick","destroy"])||this,t=lt(t);return t?(o.plugins={},o.options=(new Bt).merge(e).process(),o.setContent(t).valid&&(o.hooks=new _t(["refresh","enable","disable","destroy","beforeInitialScrollTo","contentChanged"]),o.init(t)),o):(X("Can not resolve the wrapper DOM."),o)}function me(t,e){return new de(t,e)}me.use=de.use,me.plugins=de.plugins,me.pluginsMap=de.pluginsMap;a=me,ge.prototype.init=function(){this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.registerEvent()},ge.prototype.handleBScroll=function(){this.scroll.registerType(["alterOptions","mousewheelStart","mousewheelMove","mousewheelEnd"])},ge.prototype.handleOptions=function(){var t=!0===this.scroll.options.mouseWheel?{}:this.scroll.options.mouseWheel;this.mouseWheelOpt=et({speed:20,invert:!1,easeTime:300,discreteTime:400,throttleTime:0,dampingFactor:.1},t)},ge.prototype.handleHooks=function(){this.hooksFn=[],this.registerHooks(this.scroll.hooks,"destroy",this.destroy)},ge.prototype.registerEvent=function(){this.eventRegister=new Ot(this.scroll.scroller.wrapper,[{name:"wheel",handler:this.wheelHandler.bind(this)},{name:"mousewheel",handler:this.wheelHandler.bind(this)},{name:"DOMMouseScroll",handler:this.wheelHandler.bind(this)}])},ge.prototype.registerHooks=function(t,e,o){t.on(e,o,this),this.hooksFn.push([t,e,o])},ge.prototype.wheelHandler=function(t){this.scroll.enabled&&(this.beforeHandler(t),this.wheelStart||(this.wheelStartHandler(t),this.wheelStart=!0),t=this.getWheelDelta(t),this.wheelMoveHandler(t),this.wheelEndDetector(t))},ge.prototype.wheelStartHandler=function(t){this.cleanCache();var e=this.scroll.scroller,o=e.scrollBehaviorX,e=e.scrollBehaviorY;o.setMovingDirection(0),e.setMovingDirection(0),o.setDirection(0),e.setDirection(0),this.scroll.trigger(this.scroll.eventTypes.alterOptions,this.mouseWheelOpt),this.scroll.trigger(this.scroll.eventTypes.mousewheelStart)},ge.prototype.cleanCache=function(){this.deltaCache=[]},ge.prototype.wheelMoveHandler=function(t){var e,o,r=this,n=this.mouseWheelOpt,i=n.throttleTime,a=n.dampingFactor;i&&this.wheelMoveTimer?this.deltaCache.push(t):(o=this.deltaCache.reduce(function(t,e){return{x:t.x+e.x,y:t.y+e.y}},{x:0,y:0}),this.cleanCache(),n=(e=this.scroll.scroller).scrollBehaviorX,e=e.scrollBehaviorY,n.setMovingDirection(-t.directionX),e.setMovingDirection(-t.directionY),n.setDirection(t.x),e.setDirection(t.y),n=n.performDampingAlgorithm(Math.round(t.x)+o.x,a),o=e.performDampingAlgorithm(Math.round(t.y)+o.x,a),this.scroll.trigger(this.scroll.eventTypes.mousewheelMove,{x:n,y:o})||(a=this.getEaseTime(),n===this.scroll.x&&o===this.scroll.y||this.scroll.scrollTo(n,o,a)),i&&(this.wheelMoveTimer=window.setTimeout(function(){r.wheelMoveTimer=0},i)))},ge.prototype.wheelEndDetector=function(t){var e=this;window.clearTimeout(this.wheelEndTimer),this.wheelEndTimer=window.setTimeout(function(){e.wheelStart=!1,window.clearTimeout(e.wheelMoveTimer),e.wheelMoveTimer=0,e.scroll.trigger(e.scroll.eventTypes.mousewheelEnd,t)},this.mouseWheelOpt.discreteTime)},ge.prototype.getWheelDelta=function(t){var e=this.mouseWheelOpt,o=e.speed,r=0,n=0,e=e.invert?-1:1;switch(!0){case"deltaX"in t:n=1===t.deltaMode?(r=-t.deltaX*o,-t.deltaY*o):(r=-t.deltaX,-t.deltaY);break;case"wheelDeltaX"in t:r=t.wheelDeltaX/120*o,n=t.wheelDeltaY/120*o;break;case"wheelDelta"in t:r=n=t.wheelDelta/120*o;break;case"detail"in t:r=n=-t.detail/3*o}return r*=e,n*=e,this.scroll.hasVerticalScroll||(Math.abs(n)>Math.abs(r)&&(r=n),n=0),{x:r=!this.scroll.hasHorizontalScroll?0:r,y:n,directionX:0<r?-1:r<0?1:0,directionY:0<n?-1:n<0?1:0}},ge.prototype.beforeHandler=function(t){var e=this.scroll.options,o=e.preventDefault,r=e.stopPropagation,e=e.preventDefaultException;o&&!Et(t.target,e)&&t.preventDefault(),r&&t.stopPropagation()},ge.prototype.getEaseTime=function(){var t=this.mouseWheelOpt.easeTime;return t<100&&X("easeTime should be greater than 100.If mouseWheel easeTime is too small,scrollEnd will be triggered many times."),Math.max(t,100)},ge.prototype.destroy=function(){this.eventRegister.destroy(),window.clearTimeout(this.wheelEndTimer),window.clearTimeout(this.wheelMoveTimer),this.hooksFn.forEach(function(t){var e=t[0],o=t[1],t=t[2];e.off(o,t)})},ge.pluginName="mouseWheel",ge.applyOrder="pre",s=ge;function ge(t){this.scroll=t,this.wheelEndTimer=0,this.wheelMoveTimer=0,this.wheelStart=!1,this.init()}ve.prototype.init=function(){this.handleMutationObserver(),this.handleHooks()},ve.prototype.handleMutationObserver=function(){var e=this;"undefined"!=typeof MutationObserver?(this.observer=new MutationObserver(function(t){e.mutationObserverHandler(t,0)}),this.startObserve(this.observer)):this.checkDOMUpdate()},ve.prototype.handleHooks=function(){var t=this;this.hooksFn=[],this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.contentChanged,function(){t.stopObserve(),t.handleMutationObserver()}),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.enable,function(){t.stopObserver&&t.handleMutationObserver()}),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.disable,function(){t.stopObserve()}),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.destroy,function(){t.destroy()})},ve.prototype.mutationObserverHandler=function(t,e){var o=this;if(!this.shouldNotRefresh()){for(var r=!1,n=!1,i=0;i<t.length;i++){var a=t[i];if("attributes"!==a.type){r=!0;break}if(a.target!==this.scroll.scroller.content){n=!0;break}}r?this.scroll.refresh():n&&(clearTimeout(e),window.setTimeout(function(){o.shouldNotRefresh()||o.scroll.refresh()},60))}},ve.prototype.startObserve=function(t){t.observe(this.scroll.scroller.content,{attributes:!0,childList:!0,subtree:!0})},ve.prototype.shouldNotRefresh=function(){var t=this.scroll.scroller,e=t.scrollBehaviorX,o=t.scrollBehaviorY,o=e.currentPos>e.minScrollPos||e.currentPos<e.maxScrollPos||o.currentPos>o.minScrollPos||o.currentPos<o.maxScrollPos;return t.animater.pending||o},ve.prototype.checkDOMUpdate=function(){var o=this,r=this.scroll.scroller.content,n=bt(r),i=n.width,a=n.height,s=function(){setTimeout(function(){var t,e;o.stopObserver||(t=(n=bt(r)).width,e=n.height,i===t&&a===e||o.scroll.refresh(),i=t,a=e,s())},1e3)};s()},ve.prototype.registerHooks=function(t,e,o){t.on(e,o,this),this.hooksFn.push([t,e,o])},ve.prototype.stopObserve=function(){this.stopObserver=!0,this.observer&&this.observer.disconnect()},ve.prototype.destroy=function(){this.stopObserve(),this.hooksFn.forEach(function(t){var e=t[0],o=t[1],t=t[2];e.off(o,t)}),this.hooksFn.length=0},ve.pluginName="observeDOM",L=ve;function ve(t){this.scroll=t,this.stopObserver=!1,this.init()}var ye=[{key:"finishPullDown",name:"finishPullDown"},{key:"openPullDown",name:"openPullDown"},{key:"closePullDown",name:"closePullDown"},{key:"autoPullDownRefresh",name:"autoPullDownRefresh"}].map(function(t){return{key:t.key,sourceKey:"plugins.pullDownRefresh."+t.name}}),Se="pullingDown",be="enterThreshold",Ee="leaveThreshold",$=(we.prototype.setPulling=function(t){this.pulling=t},we.prototype.setThresholdBoundary=function(t){this.thresholdBoundary=t},we.prototype.init=function(){this.handleBScroll(),this.handleOptions(this.scroll.options.pullDownRefresh),this.handleHooks(),this.watch()},we.prototype.handleBScroll=function(){this.scroll.registerType([Se,be,Ee]),this.scroll.proxy(ye)},we.prototype.handleOptions=function(t){this.options=et({threshold:90,stop:40},t=!0===(t=void 0===t?{}:t)?{}:t),this.scroll.options.probeType=3},we.prototype.handleHooks=function(){var e=this;this.hooksFn=[];var t=this.scroll.scroller,o=t.scrollBehaviorY;this.currentMinScrollY=this.cachedOriginanMinScrollY=o.minScrollPos,this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.contentChanged,function(){e.finishPullDown()}),this.registerHooks(o.hooks,o.hooks.eventTypes.computeBoundary,function(t){0<t.maxScrollPos&&(t.maxScrollPos=-1),t.minScrollPos=e.currentMinScrollY}),this.hasMouseWheelPlugin()&&(this.registerHooks(this.scroll,this.scroll.eventTypes.alterOptions,function(t){t.discreteTime=300,t.easeTime=350}),this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelEnd,function(){t.hooks.trigger(t.hooks.eventTypes.end)}))},we.prototype.registerHooks=function(t,e,o){t.on(e,o,this),this.hooksFn.push([t,e,o])},we.prototype.hasMouseWheelPlugin=function(){return!!this.scroll.eventTypes.alterOptions},we.prototype.watch=function(){var t=this.scroll.scroller;this.watching=!0,this.registerHooks(t.hooks,t.hooks.eventTypes.end,this.checkPullDown),this.registerHooks(this.scroll,this.scroll.eventTypes.scrollStart,this.resetStateBeforeScrollStart),this.registerHooks(this.scroll,this.scroll.eventTypes.scroll,this.checkLocationOfThresholdBoundary),this.hasMouseWheelPlugin()&&this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelStart,this.resetStateBeforeScrollStart)},we.prototype.resetStateBeforeScrollStart=function(){this.isFetchingStatus()||(this.setPulling(1),this.setThresholdBoundary(0))},we.prototype.checkLocationOfThresholdBoundary=function(){var t,e,o;1===this.pulling&&(t=this.scroll,e=1!==this.thresholdBoundary&&this.locateInsideThresholdBoundary(),o=2!==this.thresholdBoundary&&!this.locateInsideThresholdBoundary(),e&&(this.setThresholdBoundary(1),t.trigger(be)),o&&(this.setThresholdBoundary(2),t.trigger(Ee)))},we.prototype.locateInsideThresholdBoundary=function(){return this.scroll.y<=this.options.threshold},we.prototype.unwatch=function(){var t=this.scroll,e=t.scroller;this.watching=!1,e.hooks.off(e.hooks.eventTypes.end,this.checkPullDown),t.off(t.eventTypes.scrollStart,this.resetStateBeforeScrollStart),t.off(t.eventTypes.scroll,this.checkLocationOfThresholdBoundary),this.hasMouseWheelPlugin()&&t.off(t.eventTypes.mousewheelStart,this.resetStateBeforeScrollStart)},we.prototype.checkPullDown=function(){var t=this.options,e=t.threshold,t=t.stop;return!(this.scroll.y<e)&&(1===this.pulling&&(this.modifyBehaviorYBoundary(t),this.setPulling(2),this.scroll.trigger(Se)),this.scroll.scrollTo(this.scroll.x,t,this.scroll.options.bounceTime,Pt.bounce),this.isFetchingStatus())},we.prototype.isFetchingStatus=function(){return 2===this.pulling},we.prototype.modifyBehaviorYBoundary=function(t){var e=this.scroll.scroller.scrollBehaviorY;this.cachedOriginanMinScrollY=e.minScrollPos,this.currentMinScrollY=t,e.computeBoundary()},we.prototype.finishPullDown=function(){var t;this.isFetchingStatus()&&(t=this.scroll.scroller.scrollBehaviorY,this.currentMinScrollY=this.cachedOriginanMinScrollY,t.computeBoundary(),this.setPulling(0),this.scroll.resetPosition(this.scroll.options.bounceTime,Pt.bounce))},we.prototype.openPullDown=function(t){this.handleOptions(t=void 0===t?{}:t),this.watching||this.watch()},we.prototype.closePullDown=function(){this.unwatch()},we.prototype.autoPullDownRefresh=function(){var t=this.options,e=t.threshold,t=t.stop;!this.isFetchingStatus()&&this.watching&&(this.modifyBehaviorYBoundary(t),this.scroll.trigger(this.scroll.eventTypes.scrollStart),this.scroll.scrollTo(this.scroll.x,e),this.setPulling(2),this.scroll.trigger(Se),this.scroll.scrollTo(this.scroll.x,t,this.scroll.options.bounceTime,Pt.bounce))},we.pluginName="pullDownRefresh",we);function we(t){this.scroll=t,this.pulling=0,this.thresholdBoundary=0,this.init()}var Te=[{key:"finishPullUp",name:"finishPullUp"},{key:"openPullUp",name:"openPullUp"},{key:"closePullUp",name:"closePullUp"},{key:"autoPullUpLoad",name:"autoPullUpLoad"}].map(function(t){return{key:t.key,sourceKey:"plugins.pullUpLoad."+t.name}}),xe="pullingUp",q=(Pe.prototype.init=function(){this.handleBScroll(),this.handleOptions(this.scroll.options.pullUpLoad),this.handleHooks(),this.watch()},Pe.prototype.handleBScroll=function(){this.scroll.registerType([xe]),this.scroll.proxy(Te)},Pe.prototype.handleOptions=function(t){this.options=et({threshold:0},t=!0===(t=void 0===t?{}:t)?{}:t),this.scroll.options.probeType=3},Pe.prototype.handleHooks=function(){var t=this;this.hooksFn=[];var e=this.scroll.scroller.scrollBehaviorY;this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.contentChanged,function(){t.finishPullUp()}),this.registerHooks(e.hooks,e.hooks.eventTypes.computeBoundary,function(t){0<t.maxScrollPos&&(t.maxScrollPos=-1)})},Pe.prototype.registerHooks=function(t,e,o){t.on(e,o,this),this.hooksFn.push([t,e,o])},Pe.prototype.watch=function(){this.watching||(this.watching=!0,this.registerHooks(this.scroll,this.scroll.eventTypes.scroll,this.checkPullUp))},Pe.prototype.unwatch=function(){this.watching=!1,this.scroll.off(this.scroll.eventTypes.scroll,this.checkPullUp)},Pe.prototype.checkPullUp=function(t){var e=this,o=this.options.threshold;1===this.scroll.movingDirectionY&&t.y<=this.scroll.maxScrollY+o&&(this.pulling=!0,this.scroll.once(this.scroll.eventTypes.scrollEnd,function(){e.pulling=!1}),this.unwatch(),this.scroll.trigger(xe))},Pe.prototype.finishPullUp=function(){var t=this;this.scroll.scroller.scrollBehaviorY.setMovingDirection(0),this.pulling?this.scroll.once(this.scroll.eventTypes.scrollEnd,function(){t.watch()}):this.watch()},Pe.prototype.openPullUp=function(t){this.handleOptions(t=void 0===t?{}:t),this.watch()},Pe.prototype.closePullUp=function(){this.unwatch()},Pe.prototype.autoPullUpLoad=function(){var t=this.options.threshold,e=this.scroll.scroller.scrollBehaviorY;!this.pulling&&this.watching&&(t=e.maxScrollPos+t+-1,this.scroll.scroller.scrollBehaviorY.setMovingDirection(-1),this.scroll.scrollTo(this.scroll.x,t,this.scroll.options.bounceTime))},Pe.pluginName="pullUpLoad",Pe);function Pe(t){this.scroll=t,this.pulling=!1,this.watching=!1,this.init()}var Me=(De.prototype.registerEvents=function(){var t=this.options,e=t.disableMouse,o=t.disableTouch,r=[],n=[],t=[];e||(r.push({name:"mousedown",handler:this.start.bind(this)}),n.push({name:"mousemove",handler:this.move.bind(this)}),t.push({name:"mouseup",handler:this.end.bind(this)})),o||(r.push({name:"touchstart",handler:this.start.bind(this)}),n.push({name:"touchmove",handler:this.move.bind(this)}),t.push({name:"touchend",handler:this.end.bind(this)},{name:"touchcancel",handler:this.end.bind(this)})),this.startEventRegister=new Ot(this.indicator.indicatorEl,r),this.moveEventRegister=new Ot(window,n),this.endEventRegister=new Ot(window,t)},De.prototype.BScrollIsDisabled=function(){return!this.indicator.scroll.enabled},De.prototype.start=function(t){var e;this.BScrollIsDisabled()||(e=t.touches?t.touches[0]:t,t.preventDefault(),t.stopPropagation(),this.initiated=!0,this.lastPoint=e[this.indicator.keysMap.point],this.hooks.trigger(this.hooks.eventTypes.touchStart))},De.prototype.move=function(t){var e;this.initiated&&(e=(t.touches?t.touches[0]:t)[this.indicator.keysMap.point],t.preventDefault(),t.stopPropagation(),t=e-this.lastPoint,this.lastPoint=e,this.hooks.trigger(this.hooks.eventTypes.touchMove,t))},De.prototype.end=function(t){this.initiated&&(this.initiated=!1,t.preventDefault(),t.stopPropagation(),this.hooks.trigger(this.hooks.eventTypes.touchEnd))},De.prototype.destroy=function(){this.startEventRegister.destroy(),this.moveEventRegister.destroy(),this.endEventRegister.destroy()},De);function De(t,e){this.indicator=t,this.options=e,this.hooks=new _t(["touchStart","touchMove","touchEnd"]),this.registerEvents()}var Ce=(ke.prototype.handleFade=function(){this.options.fade&&(this.wrapper.style.opacity="0")},ke.prototype.handleHooks=function(){var o=this,t=this.options,e=t.fade,r=t.interactive,n=t.scrollbarTrackClickable,i=this.scroll,a=i.hooks,s=i.scroller.translater.hooks,t=i.scroller.animater.hooks;this.registerHooks(a,a.eventTypes.refresh,this.refresh),this.registerHooks(s,s.eventTypes.translate,function(t){var e=o.keysMap.hasScroll;o.scroll[e]&&o.updatePosition(t)}),this.registerHooks(t,t.eventTypes.time,this.transitionTime),this.registerHooks(t,t.eventTypes.timeFunction,this.transitionTimingFunction),e&&(this.registerHooks(i,i.eventTypes.scrollEnd,function(){o.fade()}),this.registerHooks(i,i.eventTypes.scrollStart,function(){o.fade(!0)}),i.eventTypes.mousewheelStart&&i.eventTypes.mousewheelEnd&&(this.registerHooks(i,i.eventTypes.mousewheelStart,function(){o.fade(!0)}),this.registerHooks(i,i.eventTypes.mousewheelMove,function(){o.fade(!0)}),this.registerHooks(i,i.eventTypes.mousewheelEnd,function(){o.fade()}))),r&&(r=(i=this.scroll.options).disableMouse,i=i.disableTouch,this.eventHandler=new Me(this,{disableMouse:r,disableTouch:i}),i=this.eventHandler.hooks,this.registerHooks(i,i.eventTypes.touchStart,this.startHandler),this.registerHooks(i,i.eventTypes.touchMove,this.moveHandler),this.registerHooks(i,i.eventTypes.touchEnd,this.endHandler)),n&&this.bindClick()},ke.prototype.registerHooks=function(t,e,o){t.on(e,o,this),this.hooksFn.push([t,e,o])},ke.prototype.bindClick=function(){var t=this.wrapper;this.clickEventRegister=new Ot(t,[{name:"click",handler:this.handleClick.bind(this)}])},ke.prototype.handleClick=function(t){var e=this.calculateclickOffsetPos(t),o=this.scroll,t=o.x,o=o.y,t="horizontal"===this.direction?e:t,o="vertical"===this.direction?e:o;this.scroll.scrollTo(t,o,this.options.scrollbarTrackOffsetTime)},ke.prototype.calculateclickOffsetPos=function(t){var e=this.keysMap,o=e.point,r=e.domRect,n=this.options.scrollbarTrackOffsetType,e=t[o]-this.wrapperRect[r],t=e<this.currentPos?-1:1,o=0,r=this.currentPos;return"step"===n?o=this.scrollInfo.baseSize*t:(o=0,r=e),this.newPos(r,o,this.scrollInfo)},ke.prototype.getKeysMap=function(){return"vertical"===this.direction?{hasScroll:"hasVerticalScroll",size:"height",wrapperSize:"clientHeight",scrollerSize:"scrollerHeight",maxScrollPos:"maxScrollY",pos:"y",point:"pageY",translateProperty:"translateY",domRect:"top"}:{hasScroll:"hasHorizontalScroll",size:"width",wrapperSize:"clientWidth",scrollerSize:"scrollerWidth",maxScrollPos:"maxScrollX",pos:"x",point:"pageX",translateProperty:"translateX",domRect:"left"}},ke.prototype.fade=function(t){var e=this.options,o=e.fadeInTime,r=e.fadeOutTime,e=this.wrapper;e.style[yt.transitionDuration]=(t?o:r)+"ms",e.style.opacity=t?"1":"0"},ke.prototype.refresh=function(){var t,e,o=this.keysMap.hasScroll,r=this.scroll,n=r.x,i=r.y;this.wrapperRect=this.wrapper.getBoundingClientRect(),this.canScroll(r[o])&&(t=(e=this.keysMap).wrapperSize,o=e.scrollerSize,e=e.maxScrollPos,this.scrollInfo=this.refreshScrollInfo(this.wrapper[t],r[o],r[e],this.indicatorEl[t]),this.updatePosition({x:n,y:i}))},ke.prototype.transitionTime=function(t){this.indicatorEl.style[yt.transitionDuration]=(t=void 0===t?0:t)+"ms"},ke.prototype.transitionTimingFunction=function(t){this.indicatorEl.style[yt.transitionTimingFunction]=t},ke.prototype.canScroll=function(t){return this.wrapper.style.display=t?"block":"none",t},ke.prototype.refreshScrollInfo=function(t,e,o,r){e=Math.max(Math.round(t*t/(e||t||1)),this.options.minSize),r=t-(e=this.options.isCustom?r:e);return{baseSize:e,maxScrollPos:r,minScrollPos:0,sizeRatio:r/o}},ke.prototype.updatePosition=function(t){var e=this.caculatePosAndSize(t,this.scrollInfo),t=e.pos,e=e.size;this.refreshStyle(e,t),this.currentPos=t},ke.prototype.caculatePosAndSize=function(t,e){var o,r=this.keysMap.pos,n=e.sizeRatio,i=e.baseSize,a=e.maxScrollPos,s=e.minScrollPos,e=this.options.minSize,r=Math.round(n*t[r]);return r<s?(o=Math.max(i+3*r,e),r=s):a<r?r=a+i-(o=Math.max(i-3*(r-a),e)):o=i,{pos:r,size:o}},ke.prototype.refreshStyle=function(t,e){var o=this.keysMap,r=o.translateProperty,n=o.size,o=this.scroll.options.translateZ;this.indicatorEl.style[n]=t+"px",this.indicatorEl.style[yt.transform]=r+"("+e+"px)"+o},ke.prototype.startHandler=function(){this.moved=!1,this.startTime=tt(),this.transitionTime(),this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.beforeScrollStart)},ke.prototype.moveHandler=function(t){this.moved||this.indicatorNotMoved(t)||(this.moved=!0,this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollStart)),this.moved&&(t=this.newPos(this.currentPos,t,this.scrollInfo),this.syncBScroll(t))},ke.prototype.endHandler=function(){var t,e;this.moved&&(t=(e=this.scroll).x,e=e.y,this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollEnd,{x:t,y:e}))},ke.prototype.indicatorNotMoved=function(t){var e=this.currentPos,o=this.scrollInfo,r=o.maxScrollPos;return e===o.minScrollPos&&t<=0||e===r&&0<=t},ke.prototype.syncBScroll=function(t){var e=tt(),o=this.scroll,r=o.x,n=o.y,i=o.options,a=o.scroller,s=o.maxScrollY,l=o.minScrollY,h=o.maxScrollX,c=o.minScrollX,o=i.probeType,i=i.momentumLimitTime,n={x:r,y:n};"vertical"===this.direction?n.y=rt(t,s,l):n.x=rt(t,h,c),a.translater.translate(n),e-this.startTime>i&&(this.startTime=e,1===o&&a.hooks.trigger(a.hooks.eventTypes.scroll,n)),1<o&&a.hooks.trigger(a.hooks.eventTypes.scroll,n)},ke.prototype.newPos=function(t,e,o){var r=o.maxScrollPos,n=o.sizeRatio,e=rt(e=t+e,o.minScrollPos,r);return Math.round(e/n)},ke.prototype.destroy=function(){var t=this.options,e=t.interactive,o=t.scrollbarTrackClickable,t=t.isCustom;e&&this.eventHandler.destroy(),o&&this.clickEventRegister.destroy(),t||this.wrapper.parentNode.removeChild(this.wrapper),this.hooksFn.forEach(function(t){var e=t[0],o=t[1],t=t[2];e.off(o,t)}),this.hooksFn.length=0},ke);function ke(t,e){this.scroll=t,this.options=e,this.hooksFn=[],this.wrapper=e.wrapper,this.direction=e.direction,this.indicatorEl=this.wrapper.children[0],this.keysMap=this.getKeysMap(),this.handleFade(),this.handleHooks()}Re.prototype.handleHooks=function(){var o=this,t=this.scroll;t.hooks.on(t.hooks.eventTypes.destroy,function(){for(var t=0,e=o.indicators;t<e.length;t++)e[t].destroy()})},Re.prototype.handleOptions=function(){var t=!0===this.scroll.options.scrollbar?{}:this.scroll.options.scrollbar;this.options=et({fade:!0,fadeInTime:250,fadeOutTime:500,interactive:!1,customElements:[],minSize:8,scrollbarTrackClickable:!1,scrollbarTrackOffsetType:"step",scrollbarTrackOffsetTime:300},t)},Re.prototype.createIndicators=function(){for(var t,e,o,r,n=this.scroll,i=[],a=["scrollX","scrollY"],s=["horizontal","vertical"],l=this.options.customElements,h=0;h<a.length;h++)n.options[a[h]]&&(t=l.shift(),e=s[h],o=!1,(r=t||this.createScrollbarElement(e))!==t?n.wrapper.appendChild(r):o=!0,o=N(N({wrapper:r,direction:e},this.options),{isCustom:o}),i.push(new Ce(n,o)));this.indicators=i},Re.prototype.createScrollbarElement=function(t,e){void 0===e&&(e=this.options.scrollbarTrackClickable);var o=document.createElement("div"),r=document.createElement("div");return o.style.cssText="position:absolute;z-index:9999;overflow:hidden;",r.style.cssText="box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px;",r.className="bscroll-indicator","horizontal"===t?(o.style.cssText+="height:7px;left:2px;right:2px;bottom:0;",r.style.height="100%",o.className="bscroll-horizontal-scrollbar"):(o.style.cssText+="width:7px;bottom:2px;top:2px;right:1px;",r.style.width="100%",o.className="bscroll-vertical-scrollbar"),e||(o.style.cssText+="pointer-events:none;"),o.appendChild(r),o},Re.pluginName="scrollbar",dt=Re;function Re(t){this.scroll=t,this.handleOptions(),this.createIndicators(),this.handleHooks()}var Ie=(Ae.prototype.init=function(){var t=this.scroll.scroller,e=t.scrollBehaviorX,t=t.scrollBehaviorY;this.wrapperWidth=e.wrapperSize,this.wrapperHeight=t.wrapperSize,this.scrollerHeight=t.contentSize,this.scrollerWidth=e.contentSize,this.pages=this.buildPagesMatrix(this.wrapperWidth,this.wrapperHeight),this.pageLengthOfX=this.pages?this.pages.length:0,this.pageLengthOfY=this.pages&&this.pages[0]?this.pages[0].length:0},Ae.prototype.getPageStats=function(t,e){return this.pages[t][e]},Ae.prototype.getNearestPageIndex=function(t,e){for(var o=0,r=0,n=this.pages.length;o<n-1&&!(t>=this.pages[o][0].cx);o++);for(n=this.pages[o].length;r<n-1&&!(e>=this.pages[0][r].cy);r++);return{pageX:o,pageY:r}},Ae.prototype.buildPagesMatrix=function(t,e){for(var o,r,n=[],i=0,a=0,s=this.scroll.scroller.scrollBehaviorX.maxScrollPos,l=this.scroll.scroller.scrollBehaviorY.maxScrollPos,h=Math.round(t/2),c=Math.round(e/2);i>-this.scrollerWidth;){for(n[a]=[],o=r=0;o>-this.scrollerHeight;)n[a][r]={x:Math.max(i,s),y:Math.max(o,l),width:t,height:e,cx:i-h,cy:o-c},o-=e,r++;i-=t,a++}return n},Ae);function Ae(t){this.scroll=t,this.init()}var _e={pageX:0,pageY:0,x:0,y:0},Fe=(Oe.prototype.refresh=function(){this.pagesMatrix=new Ie(this.scroll),this.checkSlideLoop(),this.currentPage=this.getAdjustedCurrentPage()},Oe.prototype.getAdjustedCurrentPage=function(){var t=this.currentPage,e=t.pageX,o=t.pageY,e=Math.min(e,this.pagesMatrix.pageLengthOfX-1),o=Math.min(o,this.pagesMatrix.pageLengthOfY-1);this.loopX&&(e=Math.min(e,this.pagesMatrix.pageLengthOfX-2)),this.loopY&&(o=Math.min(o,this.pagesMatrix.pageLengthOfY-2));t=this.pagesMatrix.getPageStats(e,o);return{pageX:e,pageY:o,x:t.x,y:t.y}},Oe.prototype.setCurrentPage=function(t){this.currentPage=t},Oe.prototype.getInternalPage=function(t,e){t>=this.pagesMatrix.pageLengthOfX?t=this.pagesMatrix.pageLengthOfX-1:t<0&&(t=0),e>=this.pagesMatrix.pageLengthOfY?e=this.pagesMatrix.pageLengthOfY-1:e<0&&(e=0);var o=this.pagesMatrix.getPageStats(t,e);return{pageX:t,pageY:e,x:o.x,y:o.y}},Oe.prototype.getInitialPage=function(t,e){var o=this.slideOptions,r=o.startPageXIndex,n=o.startPageYIndex,i=this.loopX?1:0,a=this.loopY?1:0,s=(t=void 0===t?!1:t)?i:this.currentPage.pageX,o=t?a:this.currentPage.pageY,o=(e=void 0===e?!1:e)?(s=this.loopX?r+1:r,this.loopY?n+1:n):(s=t?i:this.currentPage.pageX,t?a:this.currentPage.pageY),a=this.pagesMatrix.getPageStats(s,o);return{pageX:s,pageY:o,x:a.x,y:a.y}},Oe.prototype.getExposedPage=function(t){t=et({},t);return this.loopX&&(t.pageX=this.fixedPage(t.pageX,this.pagesMatrix.pageLengthOfX-2)),this.loopY&&(t.pageY=this.fixedPage(t.pageY,this.pagesMatrix.pageLengthOfY-2)),t},Oe.prototype.getExposedPageByPageIndex=function(t,e){var o={pageX:t,pageY:e};this.loopX&&(o.pageX=t+1),this.loopY&&(o.pageY=e+1);o=this.pagesMatrix.getPageStats(o.pageX,o.pageY);return{x:o.x,y:o.y,pageX:t,pageY:e}},Oe.prototype.getWillChangedPage=function(t){return t=et({},t),this.loopX&&(t.pageX=this.fixedPage(t.pageX,this.pagesMatrix.pageLengthOfX-2),t.x=this.pagesMatrix.getPageStats(t.pageX+1,0).x),this.loopY&&(t.pageY=this.fixedPage(t.pageY,this.pagesMatrix.pageLengthOfY-2),t.y=this.pagesMatrix.getPageStats(0,t.pageY+1).y),t},Oe.prototype.fixedPage=function(t,e){for(var o=[],r=0;r<e;r++)o.push(r);return o.unshift(e-1),o.push(0),o[t]},Oe.prototype.getPageStats=function(){return this.pagesMatrix.getPageStats(this.currentPage.pageX,this.currentPage.pageY)},Oe.prototype.getValidPageIndex=function(t,e){var o=this.pagesMatrix.pageLengthOfX-1,r=this.pagesMatrix.pageLengthOfY-1,n=0,i=0;return this.loopX&&(t+=1,n+=1,o-=1),this.loopY&&(e+=1,i+=1,r-=1),{pageX:t=rt(t,n,o),pageY:e=rt(e,i,r)}},Oe.prototype.nextPageIndex=function(){return this.getPageIndexByDirection("positive")},Oe.prototype.prevPageIndex=function(){return this.getPageIndexByDirection("negative")},Oe.prototype.getNearestPage=function(t,e){t=this.pagesMatrix.getNearestPageIndex(t,e),e=t.pageX,t=t.pageY;return{x:this.pagesMatrix.getPageStats(e,0).x,y:this.pagesMatrix.getPageStats(0,t).y,pageX:e,pageY:t}},Oe.prototype.getPageByDirection=function(t,e,o){var r=t.pageX,t=t.pageY;return r===this.currentPage.pageX&&(r=rt(r+e,0,this.pagesMatrix.pageLengthOfX-1)),t===this.currentPage.pageY&&(t=rt(t+o,0,this.pagesMatrix.pageLengthOfY-1)),{x:this.pagesMatrix.getPageStats(r,0).x,y:this.pagesMatrix.getPageStats(0,t).y,pageX:r,pageY:t}},Oe.prototype.resetLoopPage=function(){if(this.loopX){if(0===this.currentPage.pageX)return{pageX:this.pagesMatrix.pageLengthOfX-2,pageY:this.currentPage.pageY};if(this.currentPage.pageX===this.pagesMatrix.pageLengthOfX-1)return{pageX:1,pageY:this.currentPage.pageY}}if(this.loopY)return 0===this.currentPage.pageY?{pageX:this.currentPage.pageX,pageY:this.pagesMatrix.pageLengthOfY-2}:this.currentPage.pageY===this.pagesMatrix.pageLengthOfY-1?{pageX:this.currentPage.pageX,pageY:1}:void 0},Oe.prototype.getPageIndexByDirection=function(t){var e=this.currentPage.pageX,o=this.currentPage.pageY;return{pageX:e=this.slideX?"negative"===t?e-1:e+1:e,pageY:o=this.slideY?"negative"===t?o-1:o+1:o}},Oe.prototype.checkSlideLoop=function(){this.wannaLoop=this.slideOptions.loop,1<this.pagesMatrix.pageLengthOfX?this.slideX=!0:this.slideX=!1,this.pagesMatrix.pages[0]&&1<this.pagesMatrix.pageLengthOfY?this.slideY=!0:this.slideY=!1,this.loopX=this.wannaLoop&&this.slideX,this.loopY=this.wannaLoop&&this.slideY,this.slideX&&this.slideY&&X("slide does not support two direction at the same time.")},Oe);function Oe(t,e){this.scroll=t,this.slideOptions=e,this.slideX=!1,this.slideY=!1,this.currentPage=et({},_e)}var Le=[{key:"next",name:"next"},{key:"prev",name:"prev"},{key:"goToPage",name:"goToPage"},{key:"getCurrentPage",name:"getCurrentPage"},{key:"startPlay",name:"startPlay"},{key:"pausePlay",name:"pausePlay"}].map(function(t){return{key:t.key,sourceKey:"plugins.slide."+t.name}}),ft=(He.prototype.satisfyInitialization=function(){return!(this.scroll.scroller.content.children.length<=0)||(X("slide need at least one slide page to be initialised.please check your DOM layout."),!1)},He.prototype.init=function(){this.willChangeToPage=et({},_e),this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.createPages()},He.prototype.createPages=function(){this.pages=new Fe(this.scroll,this.options)},He.prototype.handleBScroll=function(){this.scroll.registerType(["slideWillChange","slidePageChanged"]),this.scroll.proxy(Le)},He.prototype.handleOptions=function(){var t=!0===this.scroll.options.slide?{}:this.scroll.options.slide;this.options=et({loop:!0,threshold:.1,speed:400,easing:Pt.bounce,listenFlick:!0,autoplay:!0,interval:3e3,startPageXIndex:0,startPageYIndex:0},t)},He.prototype.handleLoop=function(t){var e=this.options.loop,o=this.scroll.scroller.content,r=o.children.length;e&&(o!==t?(this.resetLoopChangedStatus(),this.removeClonedSlidePage(t),1<r&&this.cloneFirstAndLastSlidePage(o)):3===r&&this.initialised?(this.removeClonedSlidePage(o),this.moreToOnePageInLoop=!0,this.oneToMorePagesInLoop=!1):1<r?(this.initialised&&0===this.cachedClonedPageDOM.length?(this.oneToMorePagesInLoop=!0,this.moreToOnePageInLoop=!1):(this.removeClonedSlidePage(o),this.resetLoopChangedStatus()),this.cloneFirstAndLastSlidePage(o)):this.resetLoopChangedStatus())},He.prototype.resetLoopChangedStatus=function(){this.moreToOnePageInLoop=!1,this.oneToMorePagesInLoop=!1},He.prototype.handleHooks=function(){var e=this,t=this.scroll.hooks,o=this.scroll.scroller.hooks,r=this.options.listenFlick;this.prevContent=this.scroll.scroller.content,this.hooksFn=[],this.registerHooks(this.scroll,this.scroll.eventTypes.beforeScrollStart,this.pausePlay),this.registerHooks(this.scroll,this.scroll.eventTypes.scrollEnd,this.modifyCurrentPage),this.registerHooks(this.scroll,this.scroll.eventTypes.scrollEnd,this.startPlay),this.scroll.eventTypes.mousewheelMove&&(this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelMove,function(){return!0}),this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelEnd,function(t){1!==t.directionX&&1!==t.directionY||e.next(),-1!==t.directionX&&-1!==t.directionY||e.prev()})),this.registerHooks(t,t.eventTypes.refresh,this.refreshHandler),this.registerHooks(t,t.eventTypes.destroy,this.destroy),this.registerHooks(o,o.eventTypes.beforeRefresh,function(){e.handleLoop(e.prevContent),e.setSlideInlineStyle()}),this.registerHooks(o,o.eventTypes.momentum,this.modifyScrollMetaHandler),this.registerHooks(o,o.eventTypes.scroll,this.scrollHandler),this.registerHooks(o,o.eventTypes.checkClick,this.startPlay),r&&this.registerHooks(o,o.eventTypes.flick,this.flickHandler)},He.prototype.startPlay=function(){var t=this,e=this.options,o=e.interval;e.autoplay&&(clearTimeout(this.autoplayTimer),this.autoplayTimer=window.setTimeout(function(){t.next()},o))},He.prototype.pausePlay=function(){this.options.autoplay&&clearTimeout(this.autoplayTimer)},He.prototype.setSlideInlineStyle=function(){var t=this.scroll.scroller,l=t.content,h=t.wrapper,c=this.scroll.options;[{direction:"scrollX",sizeType:"offsetWidth",styleType:"width"},{direction:"scrollY",sizeType:"offsetHeight",styleType:"height"}].forEach(function(t){var e=t.direction,o=t.sizeType,r=t.styleType;if(c[e]){for(var n=h[o],i=l.children,a=i.length,s=0;s<a;s++)i[s].style[r]=n+"px";l.style[r]=n*a+"px"}})},He.prototype.next=function(t,e){var o=this.pages.nextPageIndex(),r=o.pageX,o=o.pageY;this.goTo(r,o,t,e)},He.prototype.prev=function(t,e){var o=this.pages.prevPageIndex(),r=o.pageX,o=o.pageY;this.goTo(r,o,t,e)},He.prototype.goToPage=function(t,e,o,r){e=this.pages.getValidPageIndex(t,e);this.goTo(e.pageX,e.pageY,o,r)},He.prototype.getCurrentPage=function(){return this.exposedPage||this.pages.getInitialPage(!1,!0)},He.prototype.setCurrentPage=function(t){this.pages.setCurrentPage(t),this.exposedPage=this.pages.getExposedPage(t)},He.prototype.nearestPage=function(t,e){var o=this.scroll.scroller,r=o.scrollBehaviorX,n=o.scrollBehaviorY,i=r.maxScrollPos,o=r.minScrollPos,r=n.maxScrollPos,n=n.minScrollPos;return this.pages.getNearestPage(rt(t,i,o),rt(e,r,n))},He.prototype.satisfyThreshold=function(t,e){var o=this.scroll.scroller,r=o.scrollBehaviorX,n=o.scrollBehaviorY,o=!0;return o=Math.abs(t-r.absStartPos)<=this.thresholdX&&Math.abs(e-n.absStartPos)<=this.thresholdY?!1:o},He.prototype.refreshHandler=function(t){var e,o,r=this;this.satisfyInitialization()&&(this.pages.refresh(),this.computeThreshold(),(e=this.contentChanged=this.prevContent!==t)&&(this.prevContent=t),o=this.pages.getInitialPage(this.oneToMorePagesInLoop||this.moreToOnePageInLoop,e||!this.initialised),this.initialised?this.goTo(o.pageX,o.pageY,0):this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.beforeInitialScrollTo,function(t){r.initialised=!0,t.x=o.x,t.y=o.y}),this.startPlay())},He.prototype.computeThreshold=function(){var t,e,o=this.options.threshold;o%1==0?(this.thresholdX=o,this.thresholdY=o):(t=(e=this.pages.getPageStats()).width,e=e.height,this.thresholdX=Math.round(t*o),this.thresholdY=Math.round(e*o))},He.prototype.cloneFirstAndLastSlidePage=function(t){var e,o,r=t.children,n=r[r.length-1].cloneNode(!0),i=r[0].cloneNode(!0);e=n,(r=(o=t).firstChild)?r.parentNode.insertBefore(e,r):o.appendChild(e),t.appendChild(i),this.cachedClonedPageDOM=[n,i]},He.prototype.removeClonedSlidePage=function(e){(e&&e.children||[]).length&&this.cachedClonedPageDOM.forEach(function(t){e.removeChild(t)}),this.cachedClonedPageDOM=[]},He.prototype.modifyCurrentPage=function(t){var e=this.getCurrentPage(),o=e.pageX,r=e.pageY,n=this.nearestPage(t.x,t.y);if(this.setCurrentPage(n),this.contentChanged)return!(this.contentChanged=!1);e=this.getCurrentPage(),t=e.pageX,e=e.pageY;if(this.pageWillChangeTo(n),this.oneToMorePagesInLoop)return!(this.oneToMorePagesInLoop=!1);if(this.moreToOnePageInLoop&&0===o&&0===r)return!(this.moreToOnePageInLoop=!1);if(o===t&&r===e||(i=this.pages.getExposedPageByPageIndex(t,e),this.scroll.trigger(this.scroll.eventTypes.slidePageChanged,i)),!this.resetLooping){var i=this.pages.resetLoopPage();return i?(this.resetLooping=!0,this.goTo(i.pageX,i.pageY,0),!0):void 0}this.resetLooping=!1},He.prototype.goTo=function(t,e,o,r){var n=this.pages.getInternalPage(t,e),i=r||this.options.easing||Pt.bounce,t=n.x,e=n.y,r=t-this.scroll.scroller.scrollBehaviorX.currentPos,n=e-this.scroll.scroller.scrollBehaviorY.currentPos;r||n?(o=void 0===o?this.getEaseTime(r,n):o,this.scroll.scroller.scrollTo(t,e,o,i)):this.scroll.scroller.togglePointerEvents(!0)},He.prototype.flickHandler=function(){var t=this.scroll.scroller,e=t.scrollBehaviorX,o=t.scrollBehaviorY,r=e.currentPos,n=e.startPos,i=e.direction,a=o.currentPos,s=o.startPos,t=o.direction,e=this.pages.currentPage,o=e.pageX,e=e.pageY,s=this.getEaseTime(r-n,a-s);this.goTo(o+i,e+t,s)},He.prototype.getEaseTime=function(t,e){return this.options.speed||Math.max(Math.max(Math.min(Math.abs(t),1e3),Math.min(Math.abs(e),1e3)),300)},He.prototype.modifyScrollMetaHandler=function(t){var e=this.scroll.scroller,o=e.scrollBehaviorX,r=e.scrollBehaviorY,n=e.animater,i=t.newX,e=t.newY,r=this.satisfyThreshold(i,e)||n.forceStopped?this.pages.getPageByDirection(this.nearestPage(i,e),o.direction,r.direction):this.pages.currentPage;t.time=this.getEaseTime(t.newX-r.x,t.newY-r.y),t.newX=r.x,t.newY=r.y,t.easing=this.options.easing||Pt.bounce},He.prototype.scrollHandler=function(t){var e=t.x,t=t.y;this.satisfyThreshold(e,t)&&(t=this.nearestPage(e,t),this.pageWillChangeTo(t))},He.prototype.pageWillChangeTo=function(t){var e,o=this.pages.getWillChangedPage(t);e=this.willChangeToPage,t=o,e.pageX===t.pageX&&e.pageY===t.pageY||(this.willChangeToPage=o,this.scroll.trigger(this.scroll.eventTypes.slideWillChange,this.willChangeToPage))},He.prototype.registerHooks=function(t,e,o){t.on(e,o,this),this.hooksFn.push([t,e,o])},He.prototype.destroy=function(){var t=this.scroll.scroller.content,e=this.options,o=e.loop,e=e.autoplay;o&&this.removeClonedSlidePage(t),e&&clearTimeout(this.autoplayTimer),this.hooksFn.forEach(function(t){var e=t[0],o=t[1],t=t[2];e.eventTypes[o]&&e.off(o,t)}),this.hooksFn.length=0},He.pluginName="slide",He);function He(t){this.scroll=t,this.cachedClonedPageDOM=[],this.resetLooping=!1,this.autoplayTimer=0,this.satisfyInitialization()&&this.init()}var Be=[{key:"wheelTo",name:"wheelTo"},{key:"getSelectedIndex",name:"getSelectedIndex"},{key:"restorePosition",name:"restorePosition"}].map(function(t){return{key:t.key,sourceKey:"plugins.wheel."+t.name}}),Ve="wheelIndexChanged",Ne=4,Mt=(ze.prototype.init=function(){this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.refreshBoundary(),this.setSelectedIndex(this.options.selectedIndex)},ze.prototype.handleBScroll=function(){this.scroll.proxy(Be),this.scroll.registerType([Ve])},ze.prototype.handleOptions=function(){var t=!0===this.scroll.options.wheel?{}:this.scroll.options.wheel;this.options=et({wheelWrapperClass:"wheel-scroll",wheelItemClass:"wheel-item",rotate:25,adjustTime:400,selectedIndex:0,wheelDisabledItemClass:"wheel-disabled-item"},t)},ze.prototype.handleHooks=function(){var o=this,t=this.scroll,e=this.scroll.scroller,r=e.actionsHandler,n=e.scrollBehaviorX,i=e.scrollBehaviorY,a=e.animater,s=e.content;t.on(t.eventTypes.scrollEnd,function(t){t=o.findNearestValidWheel(t.y).index;if(e.animater.forceStopped&&!o.isAdjustingPosition)return o.target=o.items[t],!0;o.setSelectedIndex(t),o.isAdjustingPosition&&(o.isAdjustingPosition=!1)}),this.scroll.hooks.on(this.scroll.hooks.eventTypes.refresh,function(t){t!==s&&(s=t,o.setSelectedIndex(o.options.selectedIndex,!0)),o.rotateX(o.scroll.y),o.wheelTo(o.selectedIndex,0)}),this.scroll.hooks.on(this.scroll.hooks.eventTypes.beforeInitialScrollTo,function(t){t.x=0,t.y=-(o.selectedIndex*o.itemHeight)}),e.hooks.on(e.hooks.eventTypes.checkClick,function(){var t,t=(t=o.items,Array.prototype.slice.call(t,0).indexOf(o.target));return-1===t||o.wheelTo(t,o.options.adjustTime,Pt.swipe),!0}),e.hooks.on(e.hooks.eventTypes.scrollTo,function(t){t.y=o.findNearestValidWheel(t.y).y}),e.hooks.on(e.hooks.eventTypes.minDistanceScroll,function(){var t=e.animater;!0===t.forceStopped&&(t.forceStopped=!1)}),e.hooks.on(e.hooks.eventTypes.scrollToElement,function(t,e){return!xt(t,o.options.wheelItemClass)||void(e.top=o.findNearestValidWheel(e.top).y)}),r.hooks.on(r.hooks.eventTypes.beforeStart,function(t){o.target=t.target}),n.hooks.on(n.hooks.eventTypes.computeBoundary,function(t){t.maxScrollPos=0,t.minScrollPos=0}),i.hooks.on(i.hooks.eventTypes.computeBoundary,function(t){o.items=o.scroll.scroller.content.children,o.checkWheelAllDisabled(),o.itemHeight=0<o.items.length?i.contentSize/o.items.length:0,t.maxScrollPos=-o.itemHeight*(o.items.length-1),t.minScrollPos=0}),i.hooks.on(i.hooks.eventTypes.momentum,function(t){t.rate=Ne,t.destination=o.findNearestValidWheel(t.destination).y}),i.hooks.on(i.hooks.eventTypes.end,function(t){var e=o.findNearestValidWheel(i.currentPos);t.destination=e.y,t.duration=o.options.adjustTime}),a.hooks.on(a.hooks.eventTypes.time,function(t){o.transitionDuration(t)}),a.hooks.on(a.hooks.eventTypes.timeFunction,function(t){o.timeFunction(t)}),a.hooks.on(a.hooks.eventTypes.callStop,function(){var t=o.findNearestValidWheel(o.scroll.y).index;o.isAdjustingPosition=!0,o.wheelTo(t,0)}),a.translater.hooks.on(a.translater.hooks.eventTypes.translate,function(t){o.rotateX(t.y)})},ze.prototype.refreshBoundary=function(){var t=this.scroll.scroller,e=t.scrollBehaviorX,o=t.scrollBehaviorY,t=t.content;e.refresh(t),o.refresh(t)},ze.prototype.setSelectedIndex=function(t,e){void 0===e&&(e=!1),this.selectedIndex===(this.selectedIndex=t)||e||this.scroll.trigger(Ve,t)},ze.prototype.getSelectedIndex=function(){return this.selectedIndex},ze.prototype.wheelTo=function(t,e,o){t=-(t=void 0===t?0:t)*this.itemHeight;this.scroll.scrollTo(0,t,e=void 0===e?0:e,o)},ze.prototype.restorePosition=function(){var t;this.scroll.pending&&(t=this.getSelectedIndex(),this.scroll.scroller.animater.clearTimer(),this.wheelTo(t,0))},ze.prototype.transitionDuration=function(t){for(var e=0;e<this.items.length;e++)this.items[e].style[yt.transitionDuration]=t+"ms"},ze.prototype.timeFunction=function(t){for(var e=0;e<this.items.length;e++)this.items[e].style[yt.transitionTimingFunction]=t},ze.prototype.rotateX=function(t){for(var e=this.options.rotate,o=void 0===e?25:e,r=0;r<this.items.length;r++){var n=(o*(t/this.itemHeight+r)).toFixed(3);this.items[r].style[yt.transform]="rotateX("+n+"deg)"}},ze.prototype.findNearestValidWheel=function(t){t=0<t?0:t<this.scroll.maxScrollY?this.scroll.maxScrollY:t;for(var e=Math.abs(Math.round(-t/this.itemHeight)),t=e,o=this.items,r=this.options.wheelDisabledItemClass;0<=e&&xt(o[e],r);)e--;if(e<0)for(e=t;e<=o.length-1&&xt(o[e],r);)e++;return e===o.length&&(e=t),{index:this.wheelItemsAllDisabled?-1:e,y:-e*this.itemHeight}},ze.prototype.checkWheelAllDisabled=function(){var t=this.options.wheelDisabledItemClass,e=this.items;this.wheelItemsAllDisabled=!0;for(var o=0;o<e.length;o++)if(!xt(e[o],t)){this.wheelItemsAllDisabled=!1;break}},ze.pluginName="wheel",ze);function ze(t){this.scroll=t,this.init()}var Ue=[{key:"zoomTo",name:"zoomTo"}].map(function(t){return{key:t.key,sourceKey:"plugins.zoom."+t.name}}),Rt=(Ge.prototype.init=function(){this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.tryInitialZoomTo(this.zoomOpt)},Ge.prototype.zoomTo=function(t,e,o,r){o=this.resolveOrigin(e,o),o={x:o.originX,y:o.originY,baseScale:this.scale};this._doZoomTo(t,o,r,!0)},Ge.prototype.handleBScroll=function(){this.scroll.proxy(Ue),this.scroll.registerType(["beforeZoomStart","zoomStart","zooming","zoomEnd"])},Ge.prototype.handleOptions=function(){var t=!0===this.scroll.options.zoom?{}:this.scroll.options.zoom;this.zoomOpt=et({start:1,min:1,max:4,initialOrigin:[0,0],minimalZoomDistance:5,bounceTime:800},t)},Ge.prototype.handleHooks=function(){var o=this,t=this.scroll,e=this.scroll.scroller;this.wrapper=this.scroll.scroller.wrapper,this.setTransformOrigin(this.scroll.scroller.content);var r=e.scrollBehaviorX,n=e.scrollBehaviorY;this.hooksFn=[],this.registerHooks(t.hooks,t.hooks.eventTypes.contentChanged,function(t){o.setTransformOrigin(t),o.scale=1,o.tryInitialZoomTo(o.zoomOpt)}),this.registerHooks(t.hooks,t.hooks.eventTypes.beforeInitialScrollTo,function(){if(1!==o.zoomOpt.start)return!0}),this.registerHooks(r.hooks,r.hooks.eventTypes.beforeComputeBoundary,function(){var t=bt(o.scroll.scroller.content);r.contentSize=Math.floor(t.width*o.scale)}),this.registerHooks(n.hooks,n.hooks.eventTypes.beforeComputeBoundary,function(){var t=bt(o.scroll.scroller.content);n.contentSize=Math.floor(t.height*o.scale)}),this.registerHooks(e.actions.hooks,e.actions.hooks.eventTypes.start,function(t){var e=t.touches&&t.touches.length||0;o.fingersOperation(e),2===e&&o.zoomStart(t)}),this.registerHooks(e.actions.hooks,e.actions.hooks.eventTypes.beforeMove,function(t){var e=t.touches&&t.touches.length||0;if(o.fingersOperation(e),2===e)return o.zoom(t),!0}),this.registerHooks(e.actions.hooks,e.actions.hooks.eventTypes.beforeEnd,function(t){if(2===o.fingersOperation())return o.zoomEnd(),!0}),this.registerHooks(e.translater.hooks,e.translater.hooks.eventTypes.beforeTranslate,function(t,e){e=e.scale||o.prevScale;o.prevScale=e,t.push("scale("+e+")")}),this.registerHooks(e.hooks,e.hooks.eventTypes.scrollEnd,function(){2===o.fingersOperation()&&o.scroll.trigger(o.scroll.eventTypes.zoomEnd,{scale:o.scale})}),this.registerHooks(this.scroll.hooks,"destroy",this.destroy)},Ge.prototype.setTransformOrigin=function(t){t.style[yt.transformOrigin]="0 0"},Ge.prototype.tryInitialZoomTo=function(t){var e=t.start,o=t.initialOrigin,r=this.scroll.scroller,t=r.scrollBehaviorX,r=r.scrollBehaviorY;1!==e&&(this.resetBoundaries([t,r]),this.zoomTo(e,o[0],o[1],0))},Ge.prototype.fingersOperation=function(t){if("number"!=typeof t)return this.numberOfFingers;this.numberOfFingers=t},Ge.prototype._doZoomTo=function(t,e,o,r){var n=this;void 0===o&&(o=this.zoomOpt.bounceTime),void 0===r&&(r=!1);var i,a,s,l,h=this.zoomOpt,c=h.min,h=h.max,u=this.scale,p=rt(t,c,h);0!==o?0<o&&(a=tt(),s=a+o,(l=function(){var t=tt();if(s<=t)return n.scroll.trigger(n.scroll.eventTypes.zooming,{scale:p}),void kt(i);t=Pt.bounce.fn((t-a)/o);n.scroll.trigger(n.scroll.eventTypes.zooming,{scale:t*(p-u)+u}),i=Ct(l)})()):n.scroll.trigger(n.scroll.eventTypes.zooming,{scale:p}),this.fingersOperation(2),this._zoomTo(p,u,e,o,r)},Ge.prototype._zoomTo=function(t,e,o,r,n){void 0===n&&(n=!1);var i=t/o.baseScale;this.setScale(t);var a=this.scroll.scroller,s=a.scrollBehaviorX,l=a.scrollBehaviorY;this.resetBoundaries([s,l]);var h=this.getNewPos(o.x,i,s,!0,n),n=this.getNewPos(o.y,i,l,!0,n);s.currentPos===Math.round(h)&&l.currentPos===Math.round(n)&&t===e||a.scrollTo(h,n,r,Pt.bounce,{start:{scale:e},end:{scale:t}})},Ge.prototype.resolveOrigin=function(t,e){var o=this.scroll.scroller,r=o.scrollBehaviorX,n=o.scrollBehaviorY,o={left:function(){return 0},top:function(){return 0},right:function(){return r.contentSize},bottom:function(){return n.contentSize},center:function(t){return(0===t?r:n).contentSize/2}};return{originX:"number"==typeof t?t:o[t](0),originY:"number"==typeof e?e:o[e](1)}},Ge.prototype.zoomStart=function(t){var e=t.touches[0],o=t.touches[1];this.startDistance=this.getFingerDistance(t),this.startScale=this.scale;var r,t={left:-((r=(r=this.wrapper).getBoundingClientRect()).left+window.pageXOffset),top:-(r.top+window.pageYOffset)},r=t.left,t=t.top;this.origin={x:Math.abs(e.pageX+o.pageX)/2+r-this.scroll.x,y:Math.abs(e.pageY+o.pageY)/2+t-this.scroll.y,baseScale:this.startScale},this.scroll.trigger(this.scroll.eventTypes.beforeZoomStart)},Ge.prototype.zoom=function(t){var e,o,r,n=this.getFingerDistance(t);!this.zoomed&&Math.abs(n-this.startDistance)<this.zoomOpt.minimalZoomDistance||(o=(e=this.dampingScale(n/this.startDistance*this.startScale))/this.startScale,this.setScale(e),this.zoomed||(this.zoomed=!0,this.scroll.trigger(this.scroll.eventTypes.zoomStart)),t=(r=this.scroll.scroller).scrollBehaviorX,n=r.scrollBehaviorY,t=this.getNewPos(this.origin.x,o,t,!1,!1),n=this.getNewPos(this.origin.y,o,n,!1,!1),this.scroll.trigger(this.scroll.eventTypes.zooming,{scale:this.scale}),r.translater.translate({x:t,y:n,scale:e}))},Ge.prototype.zoomEnd=function(){this.zoomed&&(this.shouldRebound()?this._doZoomTo(this.scale,this.origin,this.zoomOpt.bounceTime):this.scroll.trigger(this.scroll.eventTypes.zoomEnd,{scale:this.scale}))},Ge.prototype.getFingerDistance=function(t){var e=t.touches[0],o=t.touches[1],t=Math.abs(e.pageX-o.pageX),o=Math.abs(e.pageY-o.pageY);return Math.sqrt(t*t+o*o)},Ge.prototype.shouldRebound=function(){var t=this.zoomOpt,e=t.min,o=t.max,t=this.scale;if(t!==rt(t,e,o))return!0;e=this.scroll.scroller,o=e.scrollBehaviorX,e=e.scrollBehaviorY;this.resetBoundaries([o,e]);e=o.checkInBoundary().inBoundary,o=o.checkInBoundary().inBoundary;return!(e&&o)},Ge.prototype.dampingScale=function(t){var e=this.zoomOpt,o=e.min,e=e.max;return t<o?t=.5*o*Math.pow(2,t/o):e<t&&(t=2*e*Math.pow(.5,e/t)),t},Ge.prototype.setScale=function(t){this.scale=t},Ge.prototype.resetBoundaries=function(t){t.forEach(function(t){return t.computeBoundary()})},Ge.prototype.getNewPos=function(t,e,o,r,n){n=t-t*e+((n=void 0===n?!1:n)?o.currentPos:o.startPos);return 0<(n=r?rt(n,o.maxScrollPos,o.minScrollPos):n)?Math.floor(n):Math.ceil(n)},Ge.prototype.registerHooks=function(t,e,o){t.on(e,o,this),this.hooksFn.push([t,e,o])},Ge.prototype.destroy=function(){this.hooksFn.forEach(function(t){var e=t[0],o=t[1],t=t[2];e.off(o,t)}),this.hooksFn.length=0},Ge.pluginName="zoom",Ge);function Ge(t){this.scroll=t,this.scale=1,this.prevScale=1,this.init()}var je=(Xe.create=function(t){return new Xe(t)},Xe.prototype.hasAncestors=function(e){return-1<nt(this.ancestors,function(t){return t[0]===e})},Xe.prototype.hasDescendants=function(e){return-1<nt(this.descendants,function(t){return t[0]===e})},Xe.prototype.addAncestor=function(t,e){var o=this.ancestors;o.push([t,e]),o.sort(function(t,e){return t[1]-e[1]})},Xe.prototype.addDescendant=function(t,e){var o=this.descendants;o.push([t,e]),o.sort(function(t,e){return t[1]-e[1]})},Xe.prototype.removeAncestor=function(e){var t=this.ancestors;if(t.length){var o=nt(this.ancestors,function(t){return t[0]===e});if(-1<o)return t.splice(o,1)}},Xe.prototype.removeDescendant=function(e){var t=this.descendants;if(t.length){var o=nt(this.descendants,function(t){return t[0]===e});if(-1<o)return t.splice(o,1)}},Xe.prototype.registerHooks=function(t,e,o){t.on(e,o),this.hooksManager.push([t,e,o])},Xe.prototype.setAnalyzed=function(t){this.analyzed=t=void 0===t?!1:t},Xe.prototype.purge=function(){var e=this;this.ancestors.forEach(function(t){t[0].removeDescendant(e)}),this.descendants.forEach(function(t){t[0].removeAncestor(e)}),this.hooksManager.forEach(function(t){var e=t[0],o=t[1],t=t[2];e.off(o,t)}),this.hooksManager=[]},Xe);function Xe(t){this.ancestors=[],this.descendants=[],this.hooksManager=[],this.analyzed=!1,this.selfScroll=t}function We(t){t.forEach(function(t){t.enable()})}function Ye(t,e){t.forEach(function(t){t.hasHorizontalScroll!==e.hasHorizontalScroll&&t.hasVerticalScroll!==e.hasVerticalScroll||t.disable()})}var Ke=[{key:"purgeNestedScroll",name:"purgeNestedScroll"}].map(function(t){return{key:t.key,sourceKey:"plugins.nestedScroll."+t.name}}),Xt=(qe.getAllNestedScrolls=function(){var e=qe.instancesMap;return Object.keys(e).map(function(t){return e[t]})},qe.purgeAllNestedScrolls=function(){qe.getAllNestedScrolls().forEach(function(t){return t.purgeNestedScroll()})},qe.prototype.handleOptions=function(t){t=!0===t.options.nestedScroll?{}:t.options.nestedScroll;this.options=et({groupId:"INTERNAL_NESTED_SCROLL"},t);t=typeof this.options.groupId;return"string"!=t&&"number"!=t&&X("groupId must be string or number for NestedScroll plugin"),this.options.groupId},qe.prototype.init=function(t){t.proxy(Ke),this.addBScroll(t),this.buildBScrollGraph(),this.analyzeBScrollGraph(),this.ensureEventInvokeSequence(),this.handleHooks(t)},qe.prototype.handleHooks=function(t){var e=this;this.registerHooks(t.hooks,t.hooks.eventTypes.destroy,function(){e.deleteScroll(t)})},qe.prototype.deleteScroll=function(e){e.wrapper.isBScrollContainer=void 0;var t=this.store,o=this.hooksFn,r=nt(t,function(t){return t.selfScroll===e});-1<r&&(t[r].purge(),t.splice(r,1));var n,i=nt(o,function(t){return t[0]===e.hooks});-1<i&&(t=(n=o[i])[0],r=n[1],n=n[2],t.off(r,n),o.splice(i,1))},qe.prototype.addBScroll=function(t){this.store.push(je.create(t))},qe.prototype.buildBScrollGraph=function(){for(var t,e=this.store,o=this.store.length,r=0;r<o;r++)for(var n,i=(n=e[r]).selfScroll.wrapper,a=0;a<o;a++){var s=(t=e[a]).selfScroll.wrapper;n!==t&&i.contains(s)&&(s=function(t,e){for(var o=0,r=t.parentNode;r&&r!==e;)o++,r=r.parentNode;return o}(s,i),n.hasDescendants(t)||n.addDescendant(t,s),t.hasAncestors(n)||t.addAncestor(n,s))}},qe.prototype.analyzeBScrollGraph=function(){this.store.forEach(function(t){var d,c,f,e;t.analyzed||(d=t.ancestors,c=t.descendants,f=t.selfScroll,t.registerHooks(f,f.eventTypes.beforeScrollStart,function(){var t,e,o,r,n,i,a,s,l=d.map(function(t){return t[0].selfScroll}),h=c.map(function(t){return t[0].selfScroll});G(l,h).forEach(function(t){t.pending&&(t.stop(),t.resetPosition())}),e=(t=f).hasHorizontalScroll,o=f.hasVerticalScroll,r=f.x,n=f.y,i=f.minScrollX,a=f.maxScrollX,s=f.minScrollY,h=f.maxScrollY,t=!1,o?t=s<n||n<h:e&&(t=i<r||r<a),t&&((t=f).scroller.reflow(),t.resetPosition(0)),l.forEach(function(t){var e=t.scroller,o=e.actions,t=e.scrollBehaviorX,e=e.scrollBehaviorY;o.fingerMoved=!0,o.contentMoved=!1,o.directionLockAction.reset(),t.start(),e.start(),t.resetStartPos(),e.resetStartPos(),o.startTime=+new Date}),Ye(l,f)}),t.registerHooks(f,f.eventTypes.touchEnd,function(){var t=d.map(function(t){return t[0].selfScroll}),e=c.map(function(t){return t[0].selfScroll});We(G(t,e))}),e=f.scroller.actions.hooks,t.registerHooks(e,e.eventTypes.detectMovingDirection,function(){var t,e,o,r,n,i,a,s,l=d.map(function(t){return t[0].selfScroll}),h=l[0],c=l.slice(1),u=f.scroller.actions.contentMoved,p=0===l.length;if(u)Ye(l,f);else if(!p&&(e=(t=f).hasHorizontalScroll,o=f.hasVerticalScroll,r=f.x,n=f.y,i=f.minScrollX,a=f.maxScrollX,s=f.minScrollY,u=f.maxScrollY,l=f.movingDirectionX,p=f.movingDirectionY,t=!1,o?t=s<=n&&-1===p||n<=u&&1===p:e&&(t=i<=r&&-1===l||r<=a&&1===l),t))return Ye([f],f),h&&We([h]),Ye(c,f),!0}),t.setAnalyzed(!0))})},qe.prototype.ensureEventInvokeSequence=function(){this.store.slice().sort(function(t,e){return t.descendants.length-e.descendants.length}).forEach(function(t){t.selfScroll.scroller.actionsHandler.rebindDOMEvents()})},qe.prototype.registerHooks=function(t,e,o){t.on(e,o,this),this.hooksFn.push([t,e,o])},qe.prototype.purgeNestedScroll=function(){var t=this.options.groupId;this.store.forEach(function(t){t.purge()}),this.store=[],this.hooksFn.forEach(function(t){var e=t[0],o=t[1],t=t[2];e.off(o,t)}),this.hooksFn=[],delete qe.instancesMap[t]},qe.pluginName="nestedScroll",qe.instancesMap={},qe);function qe(t){var e=this.handleOptions(t),o=qe.instancesMap[e];return o||((o=qe.instancesMap[e]=this).store=[],o.hooksFn=[]),o.init(t),o}var Ze=(Je.prototype.calculate=function(t,e){var o=t-this.lastPos;this.lastPos=t;var r=this.getDirection(o),o=this.calculateIndex(0,t,e),e=this.calculateIndex(o,t+this.wrapperHeight,e);return 1===r?(o-=10,e+=30):(o-=30,e+=10),{start:o=o<0?0:o,end:e}},Je.prototype.getDirection=function(t){var e;if(0<t)e=1;else{if(!(t<0))return this.lastDirection;e=0}return this.lastDirection=e},Je.prototype.calculateIndex=function(t,e,o){if(e<=0)return t;for(var r=t,n=o[r]&&-1!==o[r].pos?o[r].pos:0,t=0;r<o.length&&o[r].pos<e;)n=o[r].pos,r++;return r+=t=r===o.length?Math.floor((e-n)/this.tombstoneHeight):t},Je.prototype.resetState=function(){this.lastDirection=1,this.lastPos=0},Je);function Je(t,e){this.wrapperHeight=t,this.tombstoneHeight=e,this.lastDirection=1,this.lastPos=0}var Qe=function(){this.data=null,this.dom=null,this.tombstone=null,this.width=0,this.height=0,this.pos=0},$e=(to.prototype.update=function(o){return z(this,void 0,void 0,function(){var e;return U(this,function(t){return(o=!this.hasMore?Math.min(o,this.list.length):o)>this.list.length&&(e=o-this.list.length,this.addEmptyData(e)),[2,this.checkToFetch(o)]})})},to.prototype.add=function(t){for(var e=0;e<t.length;e++)this.list[this.loadedNum]?this.list[this.loadedNum]=N(N({},this.list[this.loadedNum]),{data:t[e]}):this.list[this.loadedNum]={data:t[e]},this.loadedNum++;return this.list},to.prototype.addEmptyData=function(t){for(var e=0;e<t;e++)this.list.push(new Qe);return this.list},to.prototype.fetch=function(o){return z(this,void 0,void 0,function(){var e;return U(this,function(t){switch(t.label){case 0:return this.fetching?[2,[]]:(this.fetching=!0,[4,this.fetchFn(o)]);case 1:return e=t.sent(),this.fetching=!1,[2,e]}})})},to.prototype.checkToFetch=function(r){return z(this,void 0,void 0,function(){var e,o;return U(this,function(t){switch(t.label){case 0:return this.hasMore?r<=this.loadedNum?[2]:(o=r-this.loadedNum,[4,this.fetch(o)]):[2];case 1:return(e=t.sent())instanceof Array&&e.length?(this.add(e),o=this.onFetchFinish(this.list,!0),[2,this.checkToFetch(o)]):("boolean"==typeof e&&!1===e&&(this.hasMore=!1,this.list.splice(this.loadedNum),this.onFetchFinish(this.list,!1)),[2])}})})},to.prototype.getList=function(){return this.list},to.prototype.resetState=function(){this.loadedNum=0,this.fetching=!1,this.hasMore=!0,this.list=[]},to);function to(t,e,o){this.fetchFn=e,this.onFetchFinish=o,this.loadedNum=0,this.fetching=!1,this.hasMore=!0,this.list=t||[]}var eo=(oo.isTombstone=function(t){return!(!t||!t.classList)&&t.classList.contains("tombstone")},oo.prototype.getSize=function(){var t;this.initialed||((t=this.create()).style.position="absolute",document.body.appendChild(t),t.style.display="",this.height=t.offsetHeight,this.width=t.offsetWidth,document.body.removeChild(t),this.cached.push(t))},oo.prototype.getOne=function(){var t=this.cached.pop();if(t){var e=t.style;return e.display="",e.opacity="1",e[yt.transform]="",e[yt.transition]="",t}return this.create()},oo.prototype.recycle=function(t){for(var e=0,o=t;e<o.length;e++){var r=o[e];r.style.display="none",this.cached.push(r)}return this.cached},oo.prototype.recycleOne=function(t){return this.cached.push(t),this.cached},oo);function oo(t){this.create=t,this.cached=[],this.width=0,this.height=0,this.initialed=!1,this.getSize()}var ro=(no.prototype.update=function(t,e,o){e>=t.length&&(e=t.length-1),o>t.length&&(o=t.length),this.collectUnusedDom(t,e,o),this.createDom(t,e,o),this.cacheHeight(t,e,o);t=this.positionDom(t,e,o);return{start:e,startPos:t.startPos,startDelta:t.startDelta,end:o,endPos:t.endPos}},no.prototype.collectUnusedDom=function(t,e,o){for(var r,n=0;n<t.length;n++)n!==e?t[n].dom&&(r=t[n].dom,eo.isTombstone(r)?(this.tombstone.recycleOne(r),r.style.display="none"):this.unusedDom.push(r),t[n].dom=null):n=o-1;return t},no.prototype.createDom=function(t,e,o){for(var r=e;r<o;r++){var n=t[r].dom,i=t[r].data;if(n){if(!eo.isTombstone(n)||!i)continue;t[r].tombstone=n,t[r].dom=null}(n=i?this.renderFn(i,this.unusedDom.pop()):this.tombstone.getOne()).style.position="absolute",t[r].dom=n,t[r].pos=-1,this.content.appendChild(n)}},no.prototype.cacheHeight=function(t,e,o){for(var r=e;r<o;r++)t[r].data&&!t[r].height&&(t[r].height=t[r].dom.offsetHeight)},no.prototype.positionDom=function(t,e,o){for(var r=this,n=[],i=this.getStartPos(t,e,o),a=i.start,i=i.delta,s=a,l=e;l<o;l++){var h,c=t[l].tombstone;c&&((h=c.style)[yt.transition]=pt+"transform 200ms, opacity 200ms",h[yt.transform]="translateY("+s+"px)",h.opacity="0",t[l].tombstone=null,n.push(c)),t[l].dom&&t[l].pos!==s&&(t[l].dom.style[yt.transform]="translateY("+s+"px)",t[l].pos=s),s+=t[l].height||this.tombstone.height}e=window.setTimeout(function(){r.tombstone.recycle(n)},200);return this.timers.push(e),{startPos:a,startDelta:i,endPos:s}},no.prototype.getStartPos=function(t,e,o){if(t[e]&&-1!==t[e].pos)return{start:t[e].pos,delta:0};for(var r=-1===t[0].pos?0:t[0].pos,n=0;n<e;n++)r+=t[n].height||this.tombstone.height;for(var i=r,a=e;a<o;a++)if(!eo.isTombstone(t[a].dom)&&-1!==t[a].pos){r=t[a].pos;break}var s=a;if(s<o)for(;e<s;)r-=t[s-1].height,s--;return{start:r,delta:i-r}},no.prototype.removeTombstone=function(){for(var t=this.content.querySelectorAll(".tombstone"),e=t.length-1;0<=e;e--)this.content.removeChild(t[e])},no.prototype.setContent=function(t){t!==this.content&&(this.content=t)},no.prototype.destroy=function(){this.removeTombstone(),this.timers.forEach(function(t){clearTimeout(t)})},no.prototype.resetState=function(){this.destroy(),this.timers=[],this.unusedDom=[]},no);function no(t,e,o){this.renderFn=e,this.tombstone=o,this.unusedDom=[],this.timers=[],this.setContent(t)}var io=(ao.prototype.init=function(){var e=this;this.handleOptions();var t=this.options,o=t.fetch,r=t.render,t=t.createTombstone;this.tombstone=new eo(t),this.indexCalculator=new Ze(this.scroll.scroller.scrollBehaviorY.wrapperSize,this.tombstone.height),this.domManager=new ro(this.scroll.scroller.content,r,this.tombstone),this.dataManager=new $e([],o,this.onFetchFinish.bind(this)),this.scroll.on(this.scroll.eventTypes.destroy,this.destroy,this),this.scroll.on(this.scroll.eventTypes.scroll,this.update,this),this.scroll.on(this.scroll.eventTypes.contentChanged,function(t){e.domManager.setContent(t),e.indexCalculator.resetState(),e.domManager.resetState(),e.dataManager.resetState(),e.update({y:0})});o=this.scroll.scroller.scrollBehaviorY;o.hooks.on(o.hooks.eventTypes.computeBoundary,this.modifyBoundary,this),this.update({y:0})},ao.prototype.modifyBoundary=function(t){t.maxScrollPos=-2e3},ao.prototype.handleOptions=function(){var t=this.scroll.options.infinity;t&&("function"!=typeof t.fetch&&X("Infinity plugin need fetch Function to new data."),"function"!=typeof t.render&&X("Infinity plugin need render Function to render each item."),"function"!=typeof t.render&&X("Infinity plugin need createTombstone Function to create tombstone."),this.options=t),this.scroll.options.probeType=3},ao.prototype.update=function(t){var e=Math.round(-t.y),t=this.indexCalculator.calculate(e,this.dataManager.getList()),e=t.start,t=t.end;this.start=e,this.end=t,this.dataManager.update(t),this.updateDom(this.dataManager.getList())},ao.prototype.onFetchFinish=function(t,e){t=this.updateDom(t).end;return e||(this.domManager.removeTombstone(),this.scroll.scroller.animater.stop(),this.scroll.resetPosition()),t},ao.prototype.updateDom=function(t){var e=this.domManager.update(t,this.start,this.end),o=e.end,r=e.startPos,t=e.endPos,e=e.startDelta;return e&&(this.scroll.minScrollY=e),t>this.scroll.maxScrollY&&(this.scroll.maxScrollY=-(t-this.scroll.scroller.scrollBehaviorY.wrapperSize)),{end:o,startPos:r,endPos:t}},ao.prototype.destroy=function(){for(var t=this.scroll.scroller,e=t.content,t=t.scrollBehaviorY;e.firstChild;)e.removeChild(e.firstChild);this.domManager.destroy(),this.scroll.off("scroll",this.update),this.scroll.off("destroy",this.destroy),t.hooks.off(t.hooks.eventTypes.computeBoundary)},ao.pluginName="infinity",ao);function ao(t){this.scroll=t,this.start=0,this.end=0,this.init()}var so=[{key:"putAt",name:"putAt"}].map(function(t){return{key:t.key,sourceKey:"plugins.movable."+t.name}}),n=(lo.prototype.handleBScroll=function(){this.scroll.proxy(so)},lo.prototype.handleHooks=function(){var t=this;this.hooksFn=[];function e(t,e){0<t.maxScrollPos&&(t.minScrollPos=e.wrapperSize-e.contentSize,t.maxScrollPos=0)}var o=this.scroll.scroller,r=o.scrollBehaviorX,n=o.scrollBehaviorY;this.registerHooks(r.hooks,r.hooks.eventTypes.ignoreHasScroll,function(){return!0}),this.registerHooks(r.hooks,r.hooks.eventTypes.computeBoundary,function(t){e(t,r)}),this.registerHooks(n.hooks,n.hooks.eventTypes.ignoreHasScroll,function(){return!0}),this.registerHooks(n.hooks,n.hooks.eventTypes.computeBoundary,function(t){e(t,n)}),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.destroy,function(){t.destroy()})},lo.prototype.putAt=function(t,e,o,r){void 0===o&&(o=this.scroll.options.bounceTime),void 0===r&&(r=Pt.bounce);e=this.resolvePostion(t,e);this.scroll.scrollTo(e.x,e.y,o,r)},lo.prototype.resolvePostion=function(t,e){var o=this.scroll.scroller,r=o.scrollBehaviorX,n=o.scrollBehaviorY,o={left:function(){return 0},top:function(){return 0},right:function(){return r.minScrollPos},bottom:function(){return n.minScrollPos},center:function(t){return(0===t?r:n).minScrollPos/2}};return{x:"number"==typeof t?t:o[t](0),y:"number"==typeof e?e:o[e](1)}},lo.prototype.destroy=function(){this.hooksFn.forEach(function(t){var e=t[0],o=t[1],t=t[2];e.off(o,t)}),this.hooksFn.length=0},lo.prototype.registerHooks=function(t,e,o){t.on(e,o,this),this.hooksFn.push([t,e,o])},lo.pluginName="movable",lo.applyOrder="pre",lo);function lo(t){this.scroll=t,this.handleBScroll(),this.handleHooks()}ho.prototype.init=function(){this.handleOptions(this.scroll.options.observeImage),this.bindEventsToWrapper()},ho.prototype.handleOptions=function(t){this.options=et({debounceTime:100},t=!0===(t=void 0===t?{}:t)?{}:t)},ho.prototype.bindEventsToWrapper=function(){var t=this.scroll.scroller.wrapper;this.imageLoadEventRegister=new Ot(t,[{name:"load",handler:this.load.bind(this),capture:!0}]),this.imageErrorEventRegister=new Ot(t,[{name:"error",handler:this.load.bind(this),capture:!0}])},ho.prototype.load=function(t){var e=this,o=t.target,t=this.options.debounceTime;o&&"img"===o.tagName.toLowerCase()&&(0===t?this.scroll.refresh():(clearTimeout(this.refreshTimer),this.refreshTimer=window.setTimeout(function(){e.scroll.refresh()},this.options.debounceTime)))},ho.pluginName="observeImage",i=ho;function ho(t){this.scroll=t,this.refreshTimer=0,this.init()}function co(t){t.preventDefault(),t.stopPropagation()}var uo=(po.prototype.handleDOM=function(){var t=this.options,e=t.relationElement,t=t.relationElementHandleElementIndex,t=void 0===t?0:t;this.wrapper=e,this.indicatorEl=this.wrapper.children[t]},po.prototype.handleHooks=function(){var e=this,t=this.scroll,o=t.hooks,r=t.scroller.translater.hooks,t=t.scroller.animater.hooks;this.registerHooks(o,o.eventTypes.refresh,this.refresh),this.registerHooks(r,r.eventTypes.translate,function(t){e.updatePosition(t)}),this.registerHooks(t,t.eventTypes.time,this.transitionTime),this.registerHooks(t,t.eventTypes.timeFunction,this.transitionTimingFunction)},po.prototype.transitionTime=function(t){this.indicatorEl.style[yt.transitionDuration]=(t=void 0===t?0:t)+"ms"},po.prototype.transitionTimingFunction=function(t){this.indicatorEl.style[yt.transitionTimingFunction]=t},po.prototype.handleInteractive=function(){!1!==this.options.interactive&&this.registerEvents()},po.prototype.registerHooks=function(t,e,o){t.on(e,o,this),this.hooksFn.push([t,e,o])},po.prototype.registerEvents=function(){var t=this.scroll.options,e=t.disableMouse,o=t.disableTouch,r=[],n=[],t=[];e||(r.push({name:"mousedown",handler:this.start.bind(this)}),n.push({name:"mousemove",handler:this.move.bind(this)}),t.push({name:"mouseup",handler:this.end.bind(this)})),o||(r.push({name:"touchstart",handler:this.start.bind(this)}),n.push({name:"touchmove",handler:this.move.bind(this)}),t.push({name:"touchend",handler:this.end.bind(this)},{name:"touchcancel",handler:this.end.bind(this)})),this.startEventRegister=new Ot(this.indicatorEl,r),this.moveEventRegister=new Ot(window,n),this.endEventRegister=new Ot(window,t)},po.prototype.refresh=function(){var t=this.scroll,e=t.x,o=t.y,r=t.hasHorizontalScroll,n=t.hasVerticalScroll,i=t.maxScrollX,a=t.maxScrollY,s=(c=this.options.ratio,u={ratioX:0,ratioY:0},c&&("number"==typeof c?u.ratioX=u.ratioY=c:"object"==typeof c&&c&&(u.ratioX=c.x||0,u.ratioY=c.y||0)),u),l=s.ratioX,h=s.ratioY,c={width:(t=this.wrapper).clientWidth,height:t.clientHeight},u=c.width,s=c.height,t=bt(this.indicatorEl),c=t.width,t=t.height;r&&(this.maxScrollX=u-c,this.translateXSign=0<this.maxScrollX?-1:1,this.minScrollX=0,this.ratioX=l||Math.abs(this.maxScrollX/i)),n&&(this.maxScrollY=s-t,this.translateYSign=0<this.maxScrollY?-1:1,this.minScrollY=0,this.ratioY=h||Math.abs(this.maxScrollY/a)),this.updatePosition({x:e,y:o})},po.prototype.start=function(t){var e;this.BScrollIsDisabled()||(e=t.touches?t.touches[0]:t,co(t),this.initiated=!0,this.moved=!1,this.lastPointX=e.pageX,this.lastPointY=e.pageY,this.startTime=tt(),this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.beforeScrollStart))},po.prototype.BScrollIsDisabled=function(){return!this.scroll.enabled},po.prototype.move=function(t){var e,o,r;this.initiated&&(e=(r=t.touches?t.touches[0]:t).pageX,o=r.pageY,co(t),r=e-this.lastPointX,t=o-this.lastPointY,this.lastPointX=e,this.lastPointY=o,this.moved||this.indicatorNotMoved(r,t)||(this.moved=!0,this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollStart)),this.moved&&(t=this.getBScrollPosByRatio(this.currentPos,r,t),this.syncBScroll(t)))},po.prototype.end=function(t){var e;this.initiated&&(this.initiated=!1,co(t),this.moved&&(t=(e=this.scroll).x,e=e.y,this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollEnd,{x:t,y:e})))},po.prototype.getBScrollPosByRatio=function(t,e,o){var r=t.x,n=t.y,i=this.scroll,a=i.hasHorizontalScroll,s=i.hasVerticalScroll,l=i.minScrollX,h=i.maxScrollX,c=i.minScrollY,u=i.maxScrollY,t=this.scroll,i=t.x,t=t.y;return a&&(e=rt(r+e,Math.min(this.minScrollX,this.maxScrollX),Math.max(this.minScrollX,this.maxScrollX)),i=rt(Math.round(e/this.ratioX*this.translateXSign),h,l)),s&&(o=rt(n+o,Math.min(this.minScrollY,this.maxScrollY),Math.max(this.minScrollY,this.maxScrollY)),t=rt(Math.round(o/this.ratioY*this.translateYSign),u,c)),{x:i,y:t}},po.prototype.indicatorNotMoved=function(t,e){var o=this.currentPos,r=o.x,o=o.y,t=r===this.minScrollX&&t<=0||r===this.maxScrollX&&0<=t,e=o===this.minScrollY&&e<=0||o===this.maxScrollY&&0<=e;return t&&e},po.prototype.syncBScroll=function(t){var e=tt(),o=this.scroll,r=o.options,n=o.scroller,o=r.probeType,r=r.momentumLimitTime;n.translater.translate(t),e-this.startTime>r&&(this.startTime=e,1===o&&n.hooks.trigger(n.hooks.eventTypes.scroll,t)),1<o&&n.hooks.trigger(n.hooks.eventTypes.scroll,t)},po.prototype.updatePosition=function(t){t=this.getIndicatorPosByRatio(t);this.applyTransformProperty(t),this.currentPos=N({},t)},po.prototype.applyTransformProperty=function(t){var e=this.scroll.options.translateZ,e=["translateX("+t.x+"px)","translateY("+t.y+"px)",""+e];this.indicatorEl.style[yt.transform]=e.join(" ")},po.prototype.getIndicatorPosByRatio=function(t){var e=t.x,o=t.y,r=this.scroll,n=r.hasHorizontalScroll,t=r.hasVerticalScroll,r=N({},this.currentPos);return n&&(e=Math.round(this.ratioX*e*this.translateXSign),r.x=rt(e,Math.min(this.minScrollX,this.maxScrollX),Math.max(this.minScrollX,this.maxScrollX))),t&&(o=Math.round(this.ratioY*o*this.translateYSign),r.y=rt(o,Math.min(this.minScrollY,this.maxScrollY),Math.max(this.minScrollY,this.maxScrollY))),r},po.prototype.destroy=function(){!1!==this.options.interactive&&(this.startEventRegister.destroy(),this.moveEventRegister.destroy(),this.endEventRegister.destroy()),this.hooksFn.forEach(function(t){var e=t[0],o=t[1],t=t[2];e.off(o,t)}),this.hooksFn.length=0},po);function po(t,e){this.scroll=t,this.options=e,this.currentPos={x:0,y:0},this.hooksFn=[],this.handleDOM(),this.handleHooks(),this.handleInteractive()}fo.prototype.handleOptions=function(){var t=this.scroll.options.indicators;W(Array.isArray(t),"'indicators' must be an array.");for(var e=0,o=t;e<o.length;e++){var r=o[e];W(!!r.relationElement,"'relationElement' must be a HTMLElement."),this.createIndicators(r)}},fo.prototype.createIndicators=function(t){this.indicators.push(new uo(this.scroll,t))},fo.prototype.handleHooks=function(){var o=this,t=this.scroll.hooks;t.on(t.eventTypes.destroy,function(){for(var t=0,e=o.indicators;t<e.length;t++)e[t].destroy();o.indicators=[]})},fo.pluginName="indicators",e=fo;function fo(t){this.scroll=t,this.options=[],this.indicators=[],this.handleOptions(),this.handleHooks()}a.use(s).use(L).use($).use(q).use(dt).use(ft).use(Mt).use(Rt).use(Xt).use(io).use(n).use(i).use(e);var mo=a,go={container:null,renderer:null,scene:null,size:null,rendererMap:{},getRenderer:null,makeRenderer:null};function vo(t){var r,a=t.camera,n=t.domElement,o=t.PanoramaParams,e=t.MIN_PANO_ANGLE,i=o.minFov,s=(o.clickMaxFovLimit,o.zoomSteps,o.maxFovLimit),t=o.minFovLimit,l={enabled:!0,isAutoPlay:!1,isAutoPlayWhenIdle:!0};l.autoPlayTime=o.autoPlayTime,l.autoRotateSpeed=o.autoRotateSpeed,l.speed=o.speed,l.minPolarAngle=THREE.Math.degToRad(e||o.minPloarAngle),l.maxPolarAngle=THREE.Math.degToRad(o.maxPloarAngle),l.zoomSpeed=.8,l.enableInertia=!0,l.inertiaMovingFactor=o.inertiaMovingFactor,l.inertiaFactor=o.inertiaFactor,l.touchMovingSensitive=.01,l.hasTriggerOnFovLimitExceed=!1;var h=l;l.maxFovLimit=s,l.minFovLimit=t;var c,u,p=!1,d=new THREE.Vector2,f=!1,m=-1,g=-1,v=0,y=0,S=0,b=0,E=[],w={theta:0,phi:0},T=new THREE.Spherical;function x(t,e){l.onControl&&l.onControlEnd&&l.onControlEnd(),p=!0,l.onControl=!0,v=t,y=e,S=a.rotation.y,b=a.rotation.x,w.theta=a.rotation.y,w.phi=a.rotation.x,E.splice(0,E.length),T.theta=0,T.phi=0,h.isAutoPlay=!1,h.autoPlayTimeout&&clearTimeout(h.autoPlayTimeout)}function P(t,e){p&&h.enabled&&(t=(t-v)*h.speed*.003+S,e=(e-y)*h.speed*.003+b,e=Math.max(h.minPolarAngle,Math.min(h.maxPolarAngle,e)),T.theta+=.6*(t-w.theta),T.phi+=.6*(e-w.phi),w.theta=t,w.phi=e)}function M(){p=!1,D()}function D(t){o.isAutoRotate&&(h.autoPlayTimeout&&clearTimeout(h.autoPlayTimeout),h.autoPlayTimeout=setTimeout(function(){h.isAutoPlay=!0,h.autoPlayTimeout=void 0,listener.dispatch("toDoAutoPlayCb","roomRender")},t||h.autoPlayTime))}l.autoPlayTimeout=void 0,l.timeoutId=null,l.noOperateAutoPlay=D.bind(h);var C=!1;function k(){return h.speed*(a.fov/100)*(1e3/n.clientWidth)}function R(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.rotation.y,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a.rotation.x,o=2<arguments.length?arguments[2]:void 0,e=Math.max(h.minPolarAngle,Math.min(h.maxPolarAngle,e)),r=l.minLookPolar,n=l.maxLookPolar,i=a.fov;r&&(e=Math.max(e,r+Math.radians(i)/2)),n&&(e=Math.min(e,n-Math.radians(i)/2)),a.rotation.x===e&&a.rotation.y===t||(a.rotation.x=e,a.rotation.y=t,l.onUpdate&&l.onUpdate(o))}return l.onTouchDown=function(t){switch(t.preventDefault(),t.stopPropagation(),t.touches.length){case 1:x(t.touches[0].pageX*k(),t.touches[0].pageY*k()),d.set(t.touches[0].pageX,t.touches[0].pageY),C=f=!1;break;case 2:d.set(t.touches[0].pageX,t.touches[0].pageY);var e=new THREE.Vector2(t.touches[1].pageX,t.touches[1].pageY);m=d.distanceTo(e),g=a.fov,C=!0}},l.onTouchMove=function(t){if(h.enabled)switch(t.touches.length){case 1:f||(e=(t.touches[0].pageX-d.x)/n.clientWidth,o=(t.touches[0].pageY-d.y)/n.clientHeight,(Math.abs(e)>h.touchMovingSensitive||Math.abs(o)>h.touchMovingSensitive)&&(f=!0)),f&&P(t.touches[0].pageX*k(),t.touches[0].pageY*k());break;case 2:var e=new THREE.Vector2(t.touches[0].pageX,t.touches[0].pageY),o=new THREE.Vector2(t.touches[1].pageX,t.touches[1].pageY),e=e.distanceTo(o),o=1+(o=m/e-1)*h.zoomSpeed,o=g*o;o>=h.maxFovLimit?"3D"===RENDERS.room.type&&(h.onFovLimitExceed&&h.onFovLimitExceed(!0),r=!1):o<=h.minFovLimit&&"3D"===RENDERS.room.type&&(h.onFovLimitExceed&&h.onFovLimitExceed(!1),r=!1);o<=h.maxFovLimit+15&&(a.fov=o,R(),a.updateProjectionMatrix()),void 0===r&&(r=!0);try{touchTwoFingerMove&&touchTwoFingerMove(o)}catch(t){console.log(t.message)}(o<=h.minFovLimit||o>=h.maxFovLimit)&&(g=o,m=e)}},l.onTouchUp=function(t){t.preventDefault(),t.stopPropagation(),M(),C=!1;t=a.fov;t>o.maxFov?(h.onMaxLimitToNormal&&h.onMaxLimitToNormal(),t=o.maxFov):t<i&&(h.onMinLimitToNormal&&h.onMinLimitToNormal(),t=i),f=!1},l.onMouseDown=function(t){x(t.clientX*k(),t.clientY*k())},l.onMouseMove=function(t){h.enabled&&P(t.clientX*k(),t.clientY*k())},l.onMouseUp=function(t){M()},l.onMouseWheel=function(t){var e;h.enabled&&(e=void(e=0)===n.onmousewheel?0<t.deltaY?120:-120:t.deltaY,e=a.fov+.05*e,(e=Math.max(i,Math.min("3d"===RENDERS.room.type?h.maxFovLimit:o.maxFov,e)))>=h.maxFovLimit&&h.onFovLimitExceed?h.onFovLimitExceed():(a.fov=e,R(),a.updateProjectionMatrix(),whellCallBack&&whellCallBack(),h.onFovChanged&&h.onFovChanged(e)),"3d"===RENDERS.room.type&&h.onCameraRotate&&h.onCameraRotate())},l.update=function(t){var e,o;h.enabled&&(e=0,C||(a.fov>h.maxFovLimit?e=-1:a.fov<h.minFovLimit&&(e=1)),a.fov+=e*t*.2,!h.enableInertia||0===T.theta&&0===T.phi?l.onControl&&!p&&0===T.theta&&0===T.phi&&(l.onControlEnd&&l.onControlEnd(),l.onControl=!1):(o=p?h.inertiaMovingFactor:h.inertiaFactor,0===T.theta&&0===T.phi||(T.theta*=o,T.phi*=o,Math.abs(T.theta)<1e-6&&(T.theta=0),Math.abs(T.phi)<1e-6&&(T.phi=0)),c=a.rotation.y+T.theta,u=a.rotation.x+T.phi,R(c,u),l.onControl=!0),h.isAutoPlay&&!p&&(o=.001*h.autoRotateSpeed,a.rotation.y-=o,l.autoRotateCB&&l.autoRotateCB(),0<a.rotation.x&&0<=a.rotation.x-o?a.rotation.x-=o:a.rotation.x<0&&a.rotation.x+o<=0?a.rotation.x+=o:a.rotation.x=0))},l.updateCameraRotation=R,l}function yo(t,e){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:t,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){},n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:128,i=Io[o];return i?r():(i=Io[o]=new THREE.SpriteTextureProgress({length:e,size:n}),yo.textureLoader.loadImg(t,function(t){i.build(t,function(){i.progress(0),r()})})),i}var So=function(t){return go.container=document.getElementById(t),go.container.style.backgroundColor="#333",(t=new THREE.WebGLRenderer({antialias:!0,alpha:!0})).setPixelRatio(window.devicePixelRatio),t.setSize(window.innerWidth,window.innerHeight),t.autoClear=!1,go.container.appendChild(t.domElement),go.renderer=t,go.rendererMap.main=t,(t=document.createElement("div")).className="wrap",t.setAttribute("style","position: absolute; top: 0; left: 0; z-index: 0; width: 100%; height: 100%; pointer-events: none;"),go.container.appendChild(t),go.wrap=t,go.size=new THREE.Vector2(window.innerWidth,window.innerHeight),go.resize=function(t,e,o){this.rendererMap[o=o||"main"].setSize(t,e),"main"===o&&go.size.set(t,e)},go.getRenderer=function(t){return go.rendererMap[t]},go.setRenderer=function(t,e){var o=new THREE.WebGLRenderer({antialias:!0,alpha:!0,canvas:e});return o.setPixelRatio(window.devicePixelRatio),o.setSize(e.clientWidth,e.clientHeight),o.autoClear=!1,go.rendererMap[t]=o},(t=document.createElement("canvas")).width=t.height=0,go.setRenderer("empty",t),go},n=u("lwsE"),bo=u.n(n),i=u("W8MJ"),Eo=u.n(i),e=u("PJYZ"),wo=u.n(e),a=u("iWIM"),To=u.n(a),n=u("7W2i"),xo=u.n(n),i=u("a1gu"),Po=u.n(i),e=u("Nsbk"),Mo=u.n(e),Do=u("7Qib"),a=function(){function r(t){var e;bo()(this,r),this.renderTool=t.renderTool,this.renderer=this.renderTool.renderer,this.textureLoader=t.textureLoader,this.listener=t.listener,this.frameManager=t.frameManager,this.config=t.config,this.PanoramaParams=t.PanoramaParams,this.AppParams=t.AppParams,this.HouseParams=t.HouseParams,this.houseData=t.houseData,this.controls=(e=new THREE.PerspectiveCamera(t.HouseParams.smallGuideFov,1,.5,1e4),t=(o=t).HouseParams,o=o.renderTool,(o=new THREE.OrbitControls(e,o.renderer.domElement,!1)).autoRotate=!1,o.autoRotateSpeed=t.largeViewAutoRotateSpeed,o.rotateSpeed=t.rotateSpeed,o.autoPlayTime=2e3,o.inertiaMovingFactor=.75,o.minZoom=1,o.maxZoom=5,o.enabled=!1,o.enablePan=!1,o.enableKeys=!1,o.limitInScreenPoint=new THREE.Vector3,o.enableZoom=!1,o.zoomSpeed=.8,o.maxPolarAngle=THREE.Math.degToRad(45),o.minPolarAngle=THREE.Math.degToRad(45),o);var o=this.renderTool.size;this.viewport=new THREE.Vector4(0,0,o.x,o.y)}return Eo()(r,[{key:"setViewport",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,o=2<arguments.length?arguments[2]:void 0,r=3<arguments.length?arguments[3]:void 0;o&&r?this.viewport.set(t,e,o,r):(r=this.renderTool.size,this.viewport.set(t,e,r.x,r.y))}},{key:"renderIn",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;this.root.visible=!0,this.frameManager.add(this.update,t),this.frameIndex=t,this.render()}},{key:"renderOut",value:function(){return this.root.visible=!1,this.frameIndex=0,this.frameManager.remove(this.update)}},{key:"render",value:function(){this.beforeRender&&this.beforeRender();var t=this.renderer,e=this.viewport.x,o=this.viewport.y,r=this.viewport.z,n=this.viewport.w;t.setScissorTest(!0),t.setScissor(e,o,r,n),t.setViewport(e,o,r,n),this.camera.aspect=r/n,this.camera.updateProjectionMatrix(),t.clearDepth(),RENDERS.room.vrControls.enabled&&window.orientation%180!=0?(RENDERS.vr.getVRIntetsectPoint(),RENDERS.room.effect.render(this.scene,this.camera)):t.render(this.scene,this.camera),t.setScissorTest(!1),this.afterRender&&this.afterRender()}},{key:"remove",value:function(){this.renderTool.scene.remove(this.root)}},{key:"update",value:function(t){this.render(),this.control.update()}},{key:"changeRenderer",value:function(t){this.renderer=this.renderTool.getRenderer(t||"main")}},{key:"getDefaultRadius",value:function(t,e,o,r){r=r||0;var n=20*window.devicePixelRatio,i=(e.x/2+r+n)/Math.tan(THREE.Math.degToRad(o/2)),o=(e.z/2+r+n)/Math.tan(THREE.Math.degToRad(o/2)),i=Math.max(i,o),o=this.renderTool.size,o=t?o.x/o.y:1;return(o=this.AppParams.isMobile&&1<=o?1/o:o)<1&&(i/=o),i}},{key:"setControlDistance",value:function(){var t=this.houseData,e=this.HouseParams,o=this.renderTool.size,r=t.houseSize,n=t.margin||0,n=(r.x+r.z)/2-n;this.controls.minDistance=n*e.orbitControlsMinDistance,this.controls.maxDistance=this.getDefaultRadius(!0,r,e.fullScreenFov,o.x/o.y,t.margin)}},{key:"changeCamera",value:function(t){var e=t.rotation,o=t.fov,t=t.position;this.camera.rotation.copy(e),t&&this.camera.position.copy(t),this.camera.fov=o,this.camera.updateProjectionMatrix()}},{key:"screen2World",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.camera,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:this.viewport;if(!this.camera)return null;if(t=t.clone(),e){var n=r.z,i=r.w/2,e=t.z,r=o.position;return t.x=t.x/(n/2)-1,t.y=t.y/-i+1,t.z=1,t.unproject(o),t.sub(r).normalize().multiplyScalar(e).add(r)}return t.unproject(o)}},{key:"world2Screen",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(!this.camera)return null;var o=t.clone().project(this.camera);if(e){t=this.viewport,e=t.z/2,t=t.w/2;return o.multiplyScalar(o.z),o.x*=e,o.y*=t,new THREE.Vector2(e+o.x,t-o.y)}return o}},{key:"screenshot",value:function(t,e,o,r,n,i,a,s,l){this.beforeScreenshot&&this.beforeScreenshot();var h=this.viewport.clone(),c=this.renderer.getSize();i=i||c.x,a=a||c.y,this.renderer.setSize(i,a),this.setViewport(0,0,i,a),this.render();var u=this.renderer.domElement,i=this.renderer.getPixelRatio(),p=document.createElement("canvas"),a=p.getContext("2d");return s||l||(s=o*i,l=r*i),p.width=s,p.height=l,a.drawImage(u,t*i,e*i,o*i,r*i,0,0,s,l),this.renderer.setSize(c.x,c.y),this.setViewport(h.x,h.y,h.z,h.w),this.afterScreenshot&&this.afterScreenshot(),(window.screenshot=p).toBlob(function(t){n(t,p)})}},{key:"release",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.root;t&&function t(e){var o;e.children&&e.children.length?e.children.forEach(t):"Mesh"!==e.type&&"Sprite"!==e.type||(o=e.material,e=e.geometry,o&&o.dispose(),o.map&&o.map.dispose(),e&&e.dispose())}(t)}}]),r}(),Co=function(){function S(t){bo()(this,S);var e=t.NEW_HOUSE_SPOTS_STYLE,o=t.textFillStyle,r=void 0===o?"rgba(255, 255, 255, 1)":o,n=t.fontSize,i=void 0===n?16:n,a=t.fontface,s=void 0===a?"Arial":a,l=(t.anisotropy,t.backgroundFillStyle),h=void 0===l?"rgba(0, 0, 0, 0.4)":l,c=t.margin,u=t.padding,p=void 0===u?24:u,d=t.textStrokeStyle,f=void 0===d?"rgba(0, 0, 0, 0)":d,m=t.borderThickness,g=void 0===m?0:m,v=t.borderStrokeStyle,o=void 0===v?"rgba(0, 0, 0, 0)":v,n=t.textAlign,a=void 0===n?"center":n,y=t.fontWeight,l=void 0===y?"normal":y,u=t.renderOrder,d=void 0===u?1:u,m=t.isMultiLine,v=void 0!==m&&m,n=t.cornerWidth,y=t.center,u=void 0===y?{x:.5,y:.5}:y,m=t.spriteScale,y=void 0===m?.5:m,m=t.rotation,m=void 0===m?0:m,t=t.name,t=void 0===t?"text":t;this.margin=void 0===c?24:c,this.padding=p,this.backgroundFillStyle=h,this.borderStrokeStyle=o,this.fontSize=i,this.fontface=s,this.fontWeight=l,this.borderThickness=g,this.cornerWidth=n,this.textFillStyle=r,this.textStrokeStyle=f,this.textAlign=a,this.isMultiLine=v,this.center=u,this.renderOrder=d,this.spriteScale=y,this.rotation=m,this.name=t,this.canvas2img=!1,this.NEW_HOUSE_SPOTS_STYLE=e,this.tagOnLoadCbList=[],this.loadImgSrc=["./tag_left_878ece77.png","./tag_con_6852556f.png","./tag_right_ccda744f.png"],this.loadTagImg(this.loadImgSrc)}return Eo()(S,[{key:"loadTagImg",value:function(t){var e=this;this.loadImgList=[];for(var o=this.progress=0;o<t.length;o++){var r=document.createElement("img");r.crossOrigin="",r.src=t[o],this.loadImgList.push(r),r.onload=function(){++e.progress>=t.length&&(e.progress="finish",e.tagImgOnLoad())}}}},{key:"tagImgOnLoad",value:function(){0<this.tagOnLoadCbList.length&&(this.tagOnLoadCbList=this.tagOnLoadCbList.filter(function(t){t()}))}},{key:"createCanvas",value:function(o){var t,e,r=this,n=document.createElement("canvas"),i=n.getContext("2d"),a=this.fontSize,s=this.margin,l=(this.padding,this.fontface),h=this.textAlign,c=this.isMultiLine,u=this.cornerType,p=void 0===u?0:u,d=this.cornerWidth,f=a+14,m=o.split("\n"),g=m.length,v=0;for(e in i.font="normal "+a+"px "+l,m)v<(t=i.measureText(m[e]).width)&&(v=t);u=v+2*s,l=g*a+10*(g-1)+s;n.width="left"!==h||c?u:2*u,n.height=c?s+f*g:l,n.lineHeight=10,this.NEW_HOUSE_SPOTS_STYLE||(i.fillStyle=this.backgroundFillStyle),i.strokeStyle=this.borderStrokeStyle,i.font="normal "+this.fontWeight+" "+a+"px "+this.fontface,i.textBaseline="middle",i.textAlign=h,i.lineWidth=this.borderThickness;function y(){for(var t in i.fillStyle=r.textFillStyle,i.strokeStyle=r.textStrokeStyle,m){var e=c?a+5+t*f:n.height/2+2+(n.lineHeight+a)*(t-(m.length-1)/2);i.fillText(m[t],c?s:n.width/2,e),i.strokeText(m[t],c?s:n.width/2,e)}n.text=o}return d&&(d=1===p?d/a*n.height:d/2,this.NEW_HOUSE_SPOTS_STYLE?this.roundRectImg(i,0,0,n.width,n.height,this.backgroundFillStyle,function(){y()}):this.roundRect(i,0,0,n.width,n.height,d)),y(),n}},{key:"createTexture",value:function(n){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){},a=n;n.toBlob&&this.canvas2img?((a=document.createElement("img")).width=n.width,a.height=n.height,a.loaded=!1,n.toBlob(function(t){a.onload=function(){a.loaded=!0,s.image=a,s.needsUpdate=!0,i(a);var t=n.getContext("2d");n.width=n.height=0,t.fillRect(0,0,0,0),n=null};var e=n,o=e.text,r=e.width,e=e.height;t?a.src=URL.createObjectURL(t):(a.loaded=!0,a.error=!0,s.image=void 0,i(void 0),console.error(n,t,o,": ",r,e))})):(a.loaded=!0,i(n));var s=new THREE.Texture(a.loaded?a:n);return s.minFilter=THREE.LinearFilter,s.magFilter=THREE.LinearFilter,s.needsUpdate=!0,s.matrixAutoUpdate=!1,s.scaleX=n.width,s.scaleY=n.height,s.needsUpdate=!1,s}},{key:"draw",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=2<arguments.length?arguments[2]:void 0,r=3<arguments.length?arguments[3]:void 0;Object.assign(this,e);t=this.createCanvas(t),t=this.createTexture(t,r),r=new THREE.SpriteMaterial({map:t,depthWrite:!1,depthTest:!1}),r=new THREE.Sprite(r);return r.matrixAutoUpdate=!1,o&&r.position.set(o.x,o.y,o.z),r.rotation.reorder("YXZ"),r.material.rotation=this.rotation,this.center&&(r.center.x=this.center.x,r.center.y=this.center.y),r.scale.set(t.scaleX*this.spriteScale,t.scaleY*this.spriteScale,1),r.defaultScale=(new THREE.Vector3).copy(r.scale),r.renderOrder=this.renderOrder,r.name=this.name,r.updateMatrix(),r}},{key:"roundRect",value:function(t,e,o,r,n,i){t.beginPath(),t.moveTo(e+i,o),t.lineTo(e+r-i,o),t.quadraticCurveTo(e+r,o,e+r,o+i),t.lineTo(e+r,o+n-i),t.quadraticCurveTo(e+r,o+n,e+r-i,o+n),t.lineTo(e+i,o+n),t.quadraticCurveTo(e,o+n,e,o+n-i),t.lineTo(e,o+i),t.quadraticCurveTo(e,o,e+i,o),t.closePath(),t.fill(),t.stroke()}},{key:"roundRectTag",value:function(t,e,o,r,n,i){var a=n/4;t.beginPath(),t.arc(e+a,o+a,a,-Math.PI,-Math.PI/2,!1),t.lineTo(e+r-a,o),t.arc(e+r-a,o+a,a,-Math.PI/2,0,!1),t.lineTo(e+r,o+n-a),t.arc(e+r-a,o+n-a,a,0,Math.PI/2,!1),t.lineTo(e+a,o+n),t.arc(e+a,o+n-a,a,Math.PI/2,Math.PI,!1),t.lineTo(e,o+a),t.closePath(),t.fillStyle=i||"rgba(0,0,0,0.6)",t.fill(),"hotspot-text-current"!==this.name&&(t.beginPath(),t.arc(e+r-a,o+n-a,a,0,Math.PI/2,!1),t.moveTo(e+r-a,o+n),t.lineTo(e+a,o+n),t.arc(e+a,o+n-a,a,Math.PI/2,-Math.PI,!1),t.strokeStyle="rgba(255,255,255,1)",t.stroke(),t.closePath(),t.beginPath(),t.moveTo(e,o+n-a),t.lineTo(e,o+a),(i=t.createLinearGradient(e,o+n-a,e,o+a)).addColorStop(0,"rgba(255,255,255,1)"),i.addColorStop(1,"rgba(255,255,255,0)"),t.strokeStyle=i,t.stroke(),t.moveTo(e+r,o+n-a),t.lineTo(e+r,o+a),(a=t.createLinearGradient(e+r,o+n-a,e+r,o+a)).addColorStop(0,"rgba(255,255,255,1)"),a.addColorStop(1,"rgba(255,255,255,0)"),t.strokeStyle=a,t.stroke(),t.closePath())}},{key:"roundRectImg",value:function(n,i,a,s,l,t,h){var e,c=this;"hotspot-text-current"===this.name?(e=l/4,n.beginPath(),n.arc(i+e,a+e,e,-Math.PI,-Math.PI/2,!1),n.lineTo(i+s-e,a),n.arc(i+s-e,a+e,e,-Math.PI/2,0,!1),n.lineTo(i+s,a+l-e),n.arc(i+s-e,a+l-e,e,0,Math.PI/2,!1),n.lineTo(i+e,a+l),n.arc(i+e,a+l-e,e,Math.PI/2,Math.PI,!1),n.lineTo(i,a+e),n.closePath(),n.fillStyle=t,n.fill()):(t=function(){var t=c.loadImgList[0],e=c.loadImgList[1],o=c.loadImgList[2],r=t.width/t.height;n.drawImage(t,0,0,t.width,t.height,i,a,r*l,l),i+=r*l,n.drawImage(e,0,0,e.width,e.height,i,a,s-2*r*l,l),i+=s-2*r*l,n.drawImage(o,0,0,o.width,o.height,i,a,r*l,l),h()},"finish"===this.progress?t():this.tagOnLoadCbList.push(t))}},{key:"hover",value:function(t){this.color=t?"orange":"white",this.label.draw()}},{key:"hide",value:function(t){this.root.visible=!t}}]),S}(),ko="https://img.58cdn.com.cn/git/teg-app-fe/vr-house-viewer-V5-test/static/v5.5.7-1/loc_sprite_60page_556_d00c8bea.png",Ro=new Co({fontSize:40,margin:40}),Io={},n=function(){function n(t){var e=t.textureLoader,o=t.listener,r=t.frameManager,t=t.AppParams;bo()(this,n),this.AppParams=t,this.textureLoader=yo.textureLoader=e,this.listener=o,this.frameManager=r,this.bgTexture=e.load("./pano_visible_hotspot_bg_87c356e9.png"),this.bgTexture.minFilter=THREE.LinearFilter,this.type=null,this.root=null,this.repeatTexture=null,this.T=1e3,this.progressAnimation=this.progressAnimation.bind(this),this.fontsize=t.isMobile?40:50,this.scaleSize=t.isMobile?60:80,this.margin=t.isMobile?40:50,this.centerYMap=[.2,.4,.5,.6,.7,.9],this.TypeTextureMap={1:"https://img.58cdn.com.cn/git/teg-app-fe/vr-house-viewer-V5-test/static/v5.5.7-1/sprite_arrow_foward_6c254d78.png",2:"https://img.58cdn.com.cn/git/teg-app-fe/vr-house-viewer-V5-test/static/v5.5.7-1/sprite_arrow_left_rear_8a4e4dfb.png",3:"https://img.58cdn.com.cn/git/teg-app-fe/vr-house-viewer-V5-test/static/v5.5.7-1/sprite_arrow_right_rear_7dde75c4.png",4:"https://img.58cdn.com.cn/git/teg-app-fe/vr-house-viewer-V5-test/static/v5.5.7-1/sprite_arrow_left_bda863c8.png",5:"https://img.58cdn.com.cn/git/teg-app-fe/vr-house-viewer-V5-test/static/v5.5.7-1/sprite_arrow_right_31ddab18.png",6:"https://img.58cdn.com.cn/git/teg-app-fe/vr-house-viewer-V5-test/static/v5.5.7-1/sprite_text_dot_6fb9bfb3.png"},this.TEXT_RENDER=new Co({fontsize:this.fontsize,spriteScale:1,margin:this.margin,renderOrder:3,cornerWidth:this.fontsize/2,textFillStyle:"rgba(255, 255, 255, 0.6)",backgroundFillStyle:"rgba(0, 0, 0, 0.6)"})}return Eo()(n,[{key:"setVisible",value:function(t){this.isVisible=t,(this.root.visible=t)?"visible"===this.type&&this.animation(!0):this.animation(!1)}},{key:"renderCurrentRoomHotSpot",value:function(){}},{key:"renderVisibleHotspotBg",value:function(t,e){var o=new THREE.SpriteMaterial({map:this.bgTexture,blending:1,alphaTest:.1}),r=new THREE.Sprite(o);return r.renderOrder=2,r.scale.set(80<t?t:80,e,1),r.name="panorama-visible-hotspot-bg",this.progressProgress=yo("https://img.58cdn.com.cn/git/teg-app-fe/vr-house-viewer-V5-test/static/v5.5.7-1/pano_visible_hotspot_loading_3e0b4760.png",50),this.progressMaterial=o,r}},{key:"renderVisibleHotSpotArrow",value:function(){this.repeatProgress=yo("./pano_visible_hotspot_arrow_3f7309d8.png",25);var t=new THREE.SpriteMaterial({map:this.repeatProgress.texture,transparent:!0,alphaTest:.1,opacity:.9});this.repeatProgressMaterial=t;var e=this.AppParams.isMobile?80:90,t=new THREE.Sprite(t);return t.scale.set(e,45/65*e,1),t.center.y=.6,t.name="panorama-visible-hotspot-arrow",t.renderOrder=3,t}},{key:"renderMarkHotSpot",value:function(t,e){var o=new THREE.Group,r=t.IconType,n=t.Text;t.Position;return o.name="mark-hotspot",o.add(this.createHotspotIcon(r)),"6"!==r&&o.add(this.createHotspotName(n)),"6"===r&&o.add(this.renderHotspotText(n)),this.type="visible",o.userData=e,this.root=o}},{key:"createHotspotIcon",value:function(t){this.repeatProgress=yo(this.TypeTextureMap[t],25);t=new THREE.SpriteMaterial({map:this.repeatProgress.texture,transparent:!0,blending:1,alphaTest:1e-4,opacity:.9});this.repeatProgressMaterial=t;t=new THREE.Sprite(t);return t.renderOrder=3,t.center.y=-.7,t.scale.set(this.scaleSize,this.scaleSize,1),t.name="mark-hotspot-icon",t}},{key:"createHotspotName",value:function(t){t=this.TEXT_RENDER.draw(t,{fontSize:this.fontsize,spriteScale:.5,margin:this.margin,renderOrder:3,cornerWidth:this.fontsize/2,textFillStyle:"rgba(255, 255, 255, 0.6)",backgroundFillStyle:"rgba(0, 0, 0, 0.6)",textAlign:"center",isMultiLine:!1,cornerType:0});return t.name="mark-hotspot-name",t.center.y=0,t}},{key:"renderHotspotText",value:function(t){var e=this.insertReplace2d(t,16),t=e.result,e=e.count,t=this.TEXT_RENDER.draw(t,{fontSize:this.fontsize,margin:this.margin,renderOrder:3,cornerWidth:10-e,textFillStyle:"rgba(255, 255, 255, 0.6)",backgroundFillStyle:"rgba(0, 0, 0, 0.6)",isMultiLine:!0,multiLineHeight:1,textAlign:"left",cornerType:1,spriteScale:.5});return t.name="mark-hotspot-text",t.center.y=this.centerYMap[e-1],t.visible=!1,t}},{key:"getMarkHotspotPos",value:function(t){t=new THREE.Vector3(t.x,t.y,t.z);return t.normalize().multiplyScalar(600),t}},{key:"insertReplace",value:function(t,e){var o="",r=1;if(t.slice(0).replace(/[^\x00-\xff]/g,"01").length<2*e)return{result:t,count:r};for(var n=0,i=e+1;i<t.length;i++)Math.abs(t.slice(n,i).replace(/[^\x00-\xff]/g,"01").length)>2*e&&(o=o+t.slice(n,i)+"\n",n=i,r++);return{result:o+=t.slice(n),count:r}}},{key:"insertReplace2d",value:function(t,e){var o="",r=0;if(t.slice(0).replace(/[^\x00-\xff]/g,"01").length<2*e)return{result:t,count:++r};for(var n=0,i=t.split("\n"),a=0;a<i.length;a++){for(var s=i[a],l=e+1;l<s.length;l++)Math.abs(t.slice(n,l).replace(/[^\x00-\xff]/g,"01").length)>2*e&&(o=o+t.slice(n,l)+"\n",n=l,r++);r++}return{result:o+=t.slice(n),count:r}}},{key:"getSingleHotspotText",value:function(t){t=Ro.draw("\n"+t);return t.name="text",t.renderOrder=3,t}},{key:"renderSingleHotspot",value:function(t,e){var o=new THREE.Group;o.name="panorama-visible-hotspot",o.matrixAutoUpdate=!1,o.rotation.reorder("YXZ");t=this.getSingleHotspotText(t.Name);return o.add(this.renderVisibleHotspotBg(t.scale.x,t.scale.y)),o.add(this.renderVisibleHotSpotArrow()),o.add(t),o.updateMatrix(),o.userData=e,this.type="visible",this.root=o}},{key:"setSingleHotspotText",value:function(t,e){var o=t.getObjectByName("panorama-visible-hotspot-bg"),r=t.getObjectByName("panorama-visible-hotspot-arrow"),n=t.getObjectByName("text");o.material.dispose(),n.geometry.dispose(),n.material.map.dispose(),n.material.dispose(),t.remove(o),t.remove(r),t.remove(n),n=this.getSingleHotspotText(e),o=this.renderVisibleHotspotBg(n.scale.x,n.scale.y),t.add(o),t.add(r),t.add(n),t.updateMatrix()}},{key:"renderInnerHotspotMesh",value:function(t,e){var o=15;4!==e&&(o=(o=t.Position.y/6)<=0?10:12<o?12:o<8?8:o),this.repeatProgress=yo(ko,60,ko,function(){},256),this.repeatProgress.texture.minFilter=THREE.LinearFilter,this.repeatProgress.texture.magFilter=THREE.LinearFilter;t=new THREE.PlaneBufferGeometry(o,o,1,1),o=new THREE.MeshBasicMaterial({map:this.repeatProgress.texture,transparent:!0,color:16777215,alphaTest:1e-8,opacity:0,depthWrite:!0,side:THREE.DoubleSide});this.repeatProgressMaterial=o,this.progressProgress=yo("https://img.58cdn.com.cn/git/teg-app-fe/vr-house-viewer-V5-test/static/v5.5.7-1/loading_sprite_60page556_5b043326.png",60),this.progressMaterial=o,this.T=2800;o=new THREE.Mesh(t,o);return o.matrixAutoUpdate=!1,o.rotation.x=Math.PI/2,o.updateMatrix(),o}},{key:"renderSingleInnerHoutspot",value:function(t,e){var o=new THREE.Group;return o.name="panorama-inner-visible-hotspot",o.matrixAutoUpdate=!1,o.rotation.reorder("YXZ"),o.is=t.ID,o.add(this.renderInnerHotspotMesh(t,e)),o.updateMatrix(),this.type="inner",this.root=o}},{key:"getVisibleHotSpotsPos",value:function(t,e){var o=e.subVectors(e,t);return o.normalize().multiplyScalar(600),e=e.addVectors(t,o)}},{key:"renderInnerGuide",value:function(){this.type="guide";var t=new THREE.Group;t.name="panorama-inner-guide",t.matrixAutoUpdate=!1,t.rotation.reorder("YXZ"),this.repeatProgress=yo("https://img.58cdn.com.cn/git/teg-app-fe/vr-house-viewer-V5-test/static/v5.5.7-1/guide_sprite_26page_7788a3ae.png",26);var e=new THREE.MeshBasicMaterial({map:this.repeatProgress.texture,transparent:!0,alphaTest:.1,opacity:.9});this.repeatProgressMaterial=e,this.T=2e3;var o=new THREE.PlaneBufferGeometry(30,27,1,1),e=new THREE.Mesh(o,e);return e.position.y=20,e.renderOrder=3,t.add(e),t.updateMatrix(),this.root=t}},{key:"progressAnimation",value:function(t){var e=this.progressP,o=this.progressT,e=e+t/50*(o-e);this.progressP=e=o<e?o:e,this.progressMaterial.map=this.progressProgress.progress(e),this.progressMaterial.needsUpdate=!0}},{key:"startProgress",value:function(){"inner"===this.type&&(this.isInProgress=!0,this.animation(!1)),this.originalTexture=this.progressMaterial.map,this.progressMaterial.map=this.progressProgress.progress(0),this.progressMaterial.needsUpdate=!0,this.progressP=0,this.progressT=0,this.frameManager.remove(this.progressAnimation),this.frameManager.add(this.progressAnimation),this.isStartedProgress=!0}},{key:"updateProgress",value:function(t){this.progressT=t}},{key:"endProgress",value:function(){"inner"===this.type&&(this.isInProgress=!1),this.progressMaterial.map=this.originalTexture,this.progressMaterial.needsUpdate=!0,this.frameManager.remove(this.progressAnimation),this.isStartedProgress=!1}},{key:"update",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new THREE.Vector3;this.repeatProgressMaterial.map=this.repeatProgress.progress(t),this.repeatProgressMaterial.needsUpdate=!0,"guide"===this.type&&this.root.children[0].lookAt(e)}},{key:"animation",value:function(t,e,o){var r=this;this.isAnimation=t&&!this.isInProgress;t=this.frameManager;this.target=e,void 0!==o&&(this.p=o),this.animationUpdate||(this.p=0,this.animationUpdate=function(t){r.update(r.p/r.T,r.target),r.p+=t,r.p%=r.T}),"inner"!==this.type||this.isInProgress||(this.isAnimation?this.repeatProgressMaterial.map=this.repeatProgress.texture:((o=yo(ko,60,"inner_static",function(){},128)).texture.minFilter=THREE.LinearFilter,o.texture.magFilter=THREE.LinearFilter,this.repeatProgressMaterial.map=o.texture)),this.isAnimation?(t.remove(this.animationUpdate),t.add(this.animationUpdate)):t.remove(this.animationUpdate)}}]),n}(),Ao=Object(Do.h)();n.preload=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};yo.textureLoader=t;t=Object(Do.g)(function(){e(),Ao.finish()});t.add(),t.pass()},n.onPreload=function(t){Ao.on(t)};var _o=n;var i=u("cDf5"),Fo=u.n(i),Oo=function(){function n(t,e,o){var r=t.size,t=t.offY;bo()(this,n),this.textureLoader=e,this.textData=o.textData,this.config=o.config,this.room=o.room,this.listener=o.listener,this.AppParams=o.AppParams,this.frameManager=o.frameManager,this.option=o,this.houseData=o.houseData||{},this.root=new THREE.Group,this.root.name="plate",r/=5,t/=5;e=new THREE.PlaneBufferGeometry(r,r);e.rotateX(-Math.PI/2);o=new THREE.MeshBasicMaterial({transparent:!0,alphaTest:1e-8,blending:1,side:THREE.FrontSide});this.back=new THREE.Mesh(e,o),this.back.name="back",this.back.position.y=t,this.back.renderOrder=-1,this.back.rotation.reorder("YXZ"),this.root.add(this.back),this.root.visible=!1,this.size=r,this.offY=t,this.infor={},console.log(VRHOUSE_SPACE.compare,"window.compare===========>>>>>"),this.initListener()}return Eo()(n,[{key:"initListener",value:function(){this.listener.add("init","compare",function(){})}},{key:"setPlaneRotate",value:function(e){var t,o,r,n,i,a=(this.option.houseData.spots.find(function(t){return t.ID===e})||{}).Rotation;a&&(t=THREE.Math.degToRad(a.x),o=THREE.Math.degToRad(a.z),r=new THREE.Euler(THREE.Math.degToRad(a.z),THREE.Math.degToRad(180-a.y),THREE.Math.degToRad(a.x),"YXZ"),n=Math.tan(t)*this.offY,i=Math.tan(o)*this.offY,console.log(a.x,n,t,"newRotation========》》》》》》"),console.log(a.z,i,o,"newRotationzzzzz========》》》》》》"),console.log(r,"eulers========》》》》》》"),this.root.setRotationFromEuler(r))}},{key:"setPosition",value:function(t){this.root.position.set(t.x,t.y,t.z)}},{key:"setRotation",value:function(t){}},{key:"getStrArr",value:function(t){var r=[];return t.split("\n").forEach(function(t){for(var e=t.length/10,o=0;o<e;o++)r.push(t.slice(10*o,10*(o+1)))}),r}},{key:"hide",value:function(t){this.isHide=t,this.root.visible=!this.isHide}},{key:"setVisible",value:function(t){this.isHide||(this.root.visible=!!t)}},{key:"opacityAnimation",value:function(){var o=this;if(this.infor.visible)return this.animation&&this.animation.stop(),this.setVisible(!1),this.animation=this.frameManager.animation({duration:500,update:function(t,e){o.root.children.forEach(function(t){t.material.opacity=e.toFixed(2)}),o.setVisible(!0)},final:function(t){o.animation=null}})}},{key:"set",value:function(){var t,e,o,r,n,i=this,a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},s=1<arguments.length?arguments[1]:void 0,l=2<arguments.length?arguments[2]:void 0;this.isHide||(t=void 0===(r=(o=Object.assign(this.infor,a)).text)?"":r,e=o.img,a=o.visible,[].concat(this.root.children).forEach(function(t){"back"!==t.name&&"paste"!==t.name&&i.root.remove(t)}),this.root.visible=!1,(void 0===(r=this.config.LANGUAGE)?{}:r).dataUrl,a=(o=this.AppParams).isPortrait,r=o.isMobile,n=null,o=(this.room||{}).plate,n=void 0===o||o,!a()&&r&&(r=(this.room.inLandscape||{}).plate,n=void 0===r?n:r),n="object"===Fo()(n)?n.visible:n,this.textureLoader.load(this.getLogoImg(e,s,l,t),function(t){!1!==n&&(i.root.visible=!0);var e=i.back.material;e.map=t,e.needsUpdate=!0}),e||(this.createAnnulus(t,s&&l?-135:-90),l=(s=this.houseData).type,s=(void 0===(s=s.Info)?{}:s).Rotation,"2D"!==l&&(this.root.rotation.y=Math.PI-THREE.Math.degToRad(s||0)+Math.PI)))}},{key:"createPaste",value:function(){var t=new THREE.PlaneBufferGeometry(this.size,this.size);t.rotateX(-Math.PI/2);var e=new THREE.MeshBasicMaterial({transparent:!0,alphaTest:1e-8,blending:1,side:THREE.BackSide});this.paste=new THREE.Mesh(t,e),this.paste.name="paste",this.paste.position.y=this.offY,this.root.add(this.paste)}},{key:"createAnnulus",value:function(t){var e=this.config.LANGUAGE,o=((void 0===e?{}:e).dataUrl,{x:this.size/2,y:this.size/2,radius:.418*this.size}),e=Math.PI*(1<arguments.length&&void 0!==arguments[1]?arguments[1]:-90)/180,e=this.drawCircularText(o,t,null,null,e,this.size/28,2<arguments.length?arguments[2]:void 0,null);this.createTextTexture(e)}},{key:"createDirection",value:function(){var t={x:this.size/2,y:this.size/2,radius:.418*this.size},e=-90*Math.PI/180,o=180*Math.PI/180,r=this.textData.campass,n=r.east,i=r.south,a=r.west,r=r.north,o=this.drawCircularText(t,""+r+n+i+a,e,o);this.createTextTexture(o)}},{key:"createTextTexture",value:function(t){var e=new THREE.CircleGeometry(this.size/2,100);e.rotateX(-Math.PI/2);t=new THREE.MeshBasicMaterial({color:16777215,side:THREE.FrontSide,transparent:!0,alphaTest:1e-8,map:new THREE.CanvasTexture(t)});t.map.magFilter=THREE.LinearFilter,t.map.minFilter=THREE.LinearFilter;t=new THREE.Mesh(e,t);t.position.y=this.offY+100,this.root.add(t)}},{key:"drawCircularText",value:function(t,e,o,r,n,i,a,s){var l=this.createCanvas(t,i),h=l.canvas,l=l.ctx,c=(e.length,i||h.width/10*.5),u=s||c;if(n){for(var p,d=[],f=0,m=0;m<e.length;m++){var g=1;/[a-z]/.test(e[m])&&(g=.55),/[A-Z]/.test(e[m])&&(g=.8);g=Math.PI*(g*(c+u)/(2*Math.PI*t.radius));if(d.push({s:e[m],len:g}),1<(f+=g)){m<e.length-1&&(p=!0),e=e.slice(0,m+1);break}}if(p){e+="...";for(var v=0;v<3;v++){var y=Math.PI*(.4*(c+u)/(2*Math.PI*t.radius));f+=y,d.push({s:".",len:y})}}o=n-f/2,r=n+f/2}else r=r||o+Math.PI*(e.length*(c+u)/(2*Math.PI*t.radius));r=(o-r)/(e.length-1),o=parseFloat(o),o=this.renderText(l,t,e,o,r,d);return l.restore(),h}},{key:"createCanvas",value:function(t,e){var o=document.createElement("canvas");o.width=2*t.x,o.height=2*t.y;var r=o.width,n=o.height,t=e||o.width/10*.5,e=o.getContext("2d");return e.save(),e.clearRect(0,0,r,n),e.fillStyle="rgba(255,255,255,0.6)",e.textAlign="center",e.textBaseline="middle",e.font="".concat(t,"px sans-serif"),{canvas:o,ctx:e}}},{key:"renderText",value:function(t,e,o,r,n,i){for(var a,s=e.radius,l=0;l<o.length;)a=o.charAt(l),console.log(/[]/.test(a)),t.save(),t.beginPath(),t.translate(e.x+Math.cos(r)*s,e.y+Math.sin(r)*s),t.rotate(Math.PI/2+r),t.shadowBlur=4,t.shadowColor="rgba(0,0,0,0.1)",t.shadowOffsetX=4,t.shadowOffsetY=-3,t.fillText(a,0,0),r-=i?-i[l].len:n,l++,t.restore();return r}},{key:"getLogoImg",value:function(t,e,o,r){return t||(e&&o&&this.createDirection(),e&&o?"https://img.58cdn.com.cn/git/teg-app-fe/vr-house-viewer-V5-test/static/v5.5.7-1/plate_bg@2x_d6b523d3.png":"https://img.58cdn.com.cn/git/teg-app-fe/vr-house-viewer-V5-test/static/v5.5.7-1/plate_bg_2d@2x_6795dc74.png")}}]),n}();function Lo(o){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=Mo()(o);return e=r?(t=Mo()(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),Po()(this,e)}}var Ho=function(t){xo()(n,t);var r=Lo(n);function n(t){var e;bo()(this,n),(e=r.call(this,t)).logFn=t.logFn,e.textData=t.textData,e.room=t.room,e.canvasStepper=t.canvasStepper,e.root=null,e.buildRoom();var o=e.renderTool.renderer;return e.PanoramaParams=t.PanoramaParams,e.controls=new vo({PanoramaParams:t.PanoramaParams,camera:e.camera,domElement:o.domElement,AppParams:t.AppParams,MIN_PANO_ANGLE:e.room.MIN_PANO_ANGLE}),e.vrControls=new THREE.VRPanoramaControls(wo()(e),e.camera,o.domElement),e.effect=new THREE.StereoEffect(o),e.setRoomControl(),e.enabled=!1,e.update=e.update.bind(wo()(e)),e.updateHotspot=e.updateHotspot.bind(wo()(e)),e.HotspotMap=null,e.endObj={},e.setControls(),e.isShowGuide=!0,e.initListener(),e.start=null,e.end=null,e.type="3D",e.cubeTexture1=new THREE.CubeTexture,e.cubeTexture2=new THREE.CubeTexture,e.cameraTransformAnimation=null,e.cameraStopTime=0,e.noSeePlate=!1,e.canvasStepper.add([function(t){_o.preload(e.textureLoader,t)},function(){}]),e}return Eo()(n,[{key:"afterPrepareSpots",value:function(t){_o.onPreload(t)}},{key:"initListener",value:function(){function s(t,e){var o=t+(e?"_"+e:""),n=c.HotspotMap[o];return{id:t,type:e,moveTo:function(t){var e=t.x,o=t.y,r=t.z,t=n.root;t.userData.data.Position={x:e,y:o,z:r},t.position.copy(n.getMarkHotspotPos({x:e,y:o,z:r})),t.updateMatrix()},setName:function(t){n.setSingleHotspotText(n.root,t)},setTargetHotSpotID:function(t){n.root.userData.data.TargetHotSpotID=t},hide:function(){n.root.visible=!(!(0<arguments.length&&void 0!==arguments[0])||arguments[0])},getPosition:function(){var t=n.root.userData.data.Position,e=t.x,o=t.y,t=t.z;return new THREE.Vector3(e,o,t)},remove:function(){c.scene.remove(n.root),delete c.HotspotMap[o],o=n=null}}}var c=this;this.listener.addWithMap({roomRender:{toDoCameraTransformStart:function(t,e){e.origin,(e.starter=c).listener.dispatch("cameraTransformStart","roomRender",t,e)},toDoCameraTransform:function(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!r.origin||(i=r.origin.panoCamera)&&(t.rotation=i.rotation,t.fov=i.fov),r.starter=c;function o(t){var e=t.rotation,o=t.fov;(t=t.position)&&c.camera.position.set(t.x,t.y,t.z),e&&c.camera.rotation.set(e.x,e.y,e.z),o&&(c.camera.fov=o),c.camera.updateMatrix(),c.controls.updateCameraRotation(void 0,void 0,r),c.listener.dispatch("cameraTransform","roomRender",{position:c.camera.position,rotation:c.camera.rotation,fov:c.camera.fov},r),c.cameraStopTime=0}var e,n,i,a,s,l,h;r.duration?(h=function(t,e){for(;e-t>Math.PI;)e-=2*Math.PI;for(;e-t<-Math.PI;)e+=2*Math.PI;return e},e=t.position,n=t.rotation,i=t.fov,a={position:c.camera.position.clone(),rotation:c.camera.rotation.toVector3(),fov:c.camera.fov},(s={position:e?new THREE.Vector3(e.x,e.y,e.z):null,rotation:n?new THREE.Vector3(n.x,n.y,n.z):null,fov:i||null}).rotation&&a.rotation&&(s.rotation.x=h(a.rotation.x,s.rotation.x),s.rotation.y=h(a.rotation.y,s.rotation.y),s.rotation.z=h(a.rotation.z,s.rotation.z)),l=Object.assign({position:1,rotation:1,fov:1},r.factor),h={duration:r.duration,update:function(t,e){o({position:s.position&&a.position.clone().lerp(s.position,Math.pow(e,l.position)),rotation:s.rotation&&a.rotation.clone().lerp(s.rotation,Math.pow(e,l.rotation)),fov:s.fov&&THREE.Math.lerp(a.fov,s.fov,Math.pow(e,l.fov))})},final:function(){}},c.cameraTransformAnimation?c.cameraTransformAnimation.start(h):c.cameraTransformAnimation=c.frameManager.animation(h,!0)):o(t),c.controls.isAutoPlay=!1,c.controls.autoPlayTimeout&&clearTimeout(c.controls.autoPlayTimeout)},toDoCameraTransformEnd:function(t,e){e.origin,(e.starter=c).listener.dispatch("cameraTransformEnd","roomRender",t,e)},toDoGetSpotOprator:function(t){var e=t.id,o=t.get,t=t.type;o(s(e,t))},toDoAddSpot:function(t){var e=t.spot,o=t.type,r=t.get,n=e.Position,i=n.x,a=n.y,t=n.z,n=null;"mark"===o&&(n=c.addMark(e)).root.position.copy(n.getMarkHotspotPos({x:i,y:a,z:t})),n.root.updateMatrix(),n.root.visible=!0,r(s(e.ID,o))},toDoGetCamera:function(t){t&&t(c.camera)}},render:{release:function(){c.release()}},roomModule:{toDoSetDataId:function(t,e){c.isInAnimation=!0},setedDataId:function(){c.isInAnimation=!1}}})}},{key:"setControls",value:function(){var o=this,r=this.listener,e=this.controls,n=this.PanoramaParams;r.add("autoPlayTime","roomRender",function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:n.autoPlayTime;e.autoPlayTime=t}),r.add("rotateSpeed","roomRender",function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:n.autoRotateSpeed;e.autoRotateSpeed=t}),r.add("isAutoPlay","roomRender",function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!window.VRHOUSE_CONFIG.NO_PANO_AUTOPLAY;(n.isAutoRotate=t)?e.noOperateAutoPlay():(window.clearTimeout(e.autoPlayTimeout),e.isAutoPlay=t)}),r.add("isEnabled","roomRender",function(){e.enabled=!(0<arguments.length&&void 0!==arguments[0])||arguments[0]}),r.add("isPlay","roomRender",function(t){t?e.noOperateAutoPlay():(window.clearTimeout(e.autoPlayTimeout),e.isAutoPlay=t)}),r.add("noOperateAutoPlay","roomRender",function(t){e.noOperateAutoPlay(t)}),r.add("toDoGetCurrentHotSpot","roomModule",function(t){var e="2D"===o.houseData.type?"room2DModule":"roomModule";r.dispatch("getCurrentHotSpot",e,t)}),r.dispatch("toDoAddCall","statusPipe",{key:"getCurrentHotSpotDetail",call:function(){var e=null;return r.dispatch("toDoGetCurrentHotSpot","roomModule",function(t){e=t}),e}})}},{key:"buildRoom",value:function(){var e=this,t=this.renderTool.size;this.camera=new THREE.PerspectiveCamera(90,t.x/t.y,1,1e4),this.camera.rotation.reorder("YXZ"),this.scene=new THREE.Scene;var o=new THREE.ShaderMaterial({uniforms:{fromPanoramaCube:{type:"samplerCube",value:void 0},panoramaCube:{type:"samplerCube",value:void 0},panoramaPos:{type:"vec3",value:new THREE.Vector3},fromPanoramaPos:{type:"vec3",value:new THREE.Vector3},panoramaMatrix:{type:"mat4",value:new THREE.Matrix4},fromPanoramaMatrix:{type:"mat4",value:new THREE.Matrix4},p:{type:"float",value:1},isMirrored:{type:"bool",value:!1},isFixed:{type:"bool",value:!1},fromMatrixInverse:{type:"mat4",value:new THREE.Matrix4}},vertexShader:"\n    precision highp float;\n    precision highp int;\n    uniform mat4 panoramaMatrix;\n    uniform mat4 fromPanoramaMatrix;\n    uniform vec3 panoramaPos;\n    uniform vec3 fromPanoramaPos;\n    uniform bool isMirrored;\n\n    uniform bool isFixed;\n    uniform mat4 fromMatrixInverse;\n\n    varying vec3 dir;\n    varying vec3 fromDir;\n\n    void main() {\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n      vec3 vPosition = (modelMatrix * vec4( position, 1.0 )).xyz;\n      \n      vec3 vFromPosition = isFixed\n        ? (fromMatrixInverse * gl_Position).xyz\n        : vPosition;\n\n      dir = vPosition - panoramaPos;\n      fromDir = vFromPosition - fromPanoramaPos;\n\n\n      if(isMirrored){\n        dir.x = -dir.x;\n        fromDir.x = -fromDir.x;\n      }\n\n      vec3 n = normalize(mat3(modelMatrix) * normal);\n      if(dot(n, vPosition-cameraPosition) < 0.0 && dot(n, dir) > 0.0 && length(n) > 0.0){\n        dir = dir - n*dot(n, dir)*2.0;\n      }\n      \n      dir.x = -dir.x;\n      dir = mat3(panoramaMatrix) * dir;\n\n      fromDir.x = -fromDir.x;\n      fromDir = mat3(fromPanoramaMatrix) * fromDir;\n    }\n  ",fragmentShader:"\n    precision highp float;\n    precision highp int;\n    uniform samplerCube panoramaCube;\n    uniform samplerCube fromPanoramaCube;\n    uniform float p;\n    varying vec3 dir;\n    varying vec3 fromDir;\n\n    void main() {\n      gl_FragColor = mix(\n        textureCube(fromPanoramaCube, normalize(fromDir)),\n        textureCube(panoramaCube, normalize(dir)),\n        p\n      );\n    }\n    "});this.root=new THREE.Mesh(new THREE.BoxBufferGeometry(10240,10240,10240),o),this.root.name="room",this.root.renderOrder=-1,this.root.rotation.reorder("YXZ"),this.root.geometry.scale(-1,1,1),this.root.visible=!1,this.root.renderOrder=-1,this.shaderMaterial=this.root.material,this.scene.add(this.root);t=this.room.plate,o=void 0===t?{}:t,t=o.size,o=o.img;this.plate=new Oo({size:o?void 0===t?3800:t:3800,opacity:1,offY:-4700},this.textureLoader,this),this.root.add(this.plate.root),console.log(this.root,"this.root=======>>>>>>"),listener.dispatch("toDoAddCall","statusPipe",{key:"hideRoomPlate",call:function(t){e.plate.root.visible=!t}})}},{key:"set2DBestViewFromSpot",value:function(e,t){var o=this.houseData.spots.filter(function(t){return""+t.ID==""+e}),o=T()(o,1)[0];o&&(o.BestCameraView=t)}},{key:"getBestViewFromSpot",value:function(t){var e,o=this.houseData,r=o.defaultView,n=o.type,o=new THREE.Vector3;return"3D"===n?r?o.y=THREE.Math.degToRad(-t.BestCameraView.y-(t.Rotation.y-(t.CorrectRotation?t.CorrectRotation.y:0))):(o.z=this.camera.rotation.z,0===t.BestCameraView.x&&((e=0)<(r=-t.Rotation.x)&&r<=10?e=r:350<r&&r<=360&&(e=r-360),o.x=THREE.Math.degToRad(e)),o.y=THREE.Math.degToRad(t.BestCameraView.y-t.Rotation.y)):"2D"!==n||(e=t.BestCameraView)&&(n=e.x,t=e.y,e=e.z,o.set(n,t,e)),o}},{key:"setPano2BestViewAfterLoading",value:function(t){var e=this.houseData;e.defaultView,e.type;this.camera.rotation.setFromVector3(this.getBestViewFromSpot(t))}},{key:"setCameraRotation",value:function(t){var e=this.camera;e.rotation.x=0,e.rotation.y=t.y,e.rotation.z=t.z}},{key:"addMark",value:function(t){var r=this,n=new _o(this),i=Object.assign({},t);return n.renderSingleHotspot({Name:t.Text,Position:t.Position}),n.root.name="mark-hotspot",n.root.userData={pointScreenDistance:60,pointDown:function(){},pointUp:function(){},pointClick:function(){var t,e,o=!1;return r.listener.dispatch("click2DMark","roomRender",{data:i,preventDefault:function(){o=!0}}),o||("6"===i.IconType?n.root.children[1].visible=!n.root.children[1].visible:n.isStartedProgress||n.root.userData.isInClick?console.log("重复点击"):(t=function(){n.endProgress(),n.root.userData.isInClick=!1,r.listener.removeWithMap(e)},r.listener.addWithMap(e={room2DModule:{startChangeId:function(){n.root.userData.isInClick?t():(n.startProgress(),n.root.userData.isInClick=!0)},changeIdProgress:function(t){var e=t.step,t=t.sum;e<=t-1&&n.updateProgress(e/(t-1))},changedId:function(){t()}}}),r.listener.dispatch("toDoSetDataId","room2DModule",i.TargetHotSpotID,{type:"fade",from:"room2DModule",isSync:!0}))),!0},data:i},this.HotspotMap[t.ID+"_mark"]=n,this.scene.add(n.root),n.setVisible(this.houseData.defaultSpotId===t._sceneId),n}},{key:"addSpot",value:function(o){var r=this,n=new _o(this);return n.renderSingleHotspot(o),n.root.userData={pointDown:function(){},pointUp:function(){},pointClick:function(){var t,e;return n.isStartedProgress||n.root.userData.isInClick?console.log("重复点击"):(t=function(){n.endProgress(),n.root.userData.isInClick=!1,r.listener.removeWithMap(e)},r.listener.addWithMap(e={roomModule:{startChangeId:function(){n.root.userData.isInClick?t():(n.startProgress(),n.root.userData.isInClick=!0)},changeIdProgress:function(t){var e=t.step,t=t.sum;e<=t-1&&n.updateProgress(e/(t-1))},changedId:function(){t()}}}),r.listener.dispatch("toDoSetDataId","roomModule",o.ID,{type:"roam",from:"hotSpot",source:"hotSpot",origin:{id:o.ID,from:"panorama3D"}})),!0},data:{ID:o.ID,Position:o.Position}},n.setVisible(!1),this.HotspotMap[o.ID]=n,this.scene.add(n.root),n}},{key:"addInner",value:function(o){var r=this,t=this.houseData.originData,t=(void 0===t?{}:t).AppInfo,t=(void 0===t?{}:t).Source,n=new _o(this);n.renderSingleInnerHoutspot(o,t),this.HotspotMap[o.ID+"_inner"]=n;function i(t){return[(t=t.targetTouches&&t.targetTouches[0]||t).clientX,t.clientY]}var a=0,s=null,l=null,h=null,c=null;return n.root.userData={pointDistance:2.5,pointDown:function(t){a=(new Date).getTime();var e=(e=i(t),t=T()(e,2),s=t[0],l=t[1],e),e=T()(e,2);h=e[0],c=e[1]},pointUp:function(){},pointMove:function(t){t=i(t),t=T()(t,2);h=t[0],c=t[1]},pointClick:function(){var t,e;if(!(a&&500<(new Date).getTime()-a||Math.pow(h-s,2)+Math.pow(c-l,2)>Math.pow(5,2)))return n.isStartedProgress||n.root.userData.isInClick?console.log("重复点击"):(r.isShowGuide=!1,r.guideInner.visible=!1,t=function(){n.endProgress(),n.root.userData.isInClick=!1,r.listener.removeWithMap(e)},r.listener.addWithMap(e={roomModule:{startChangeId:function(){n.root.userData.isInClick?t():(n.startProgress(),n.root.userData.isInClick=!0)},changeIdProgress:function(t){var e=t.step,t=t.sum;e<=t-1&&n.updateProgress(e/(t-1))},changedId:function(){t()}}}),r.logFn&&r.logFn({clickInnerHotSpot:!0}),r.listener.dispatch("toDoSetDataId","roomModule",o.ID,{type:"roam",from:"innerHotSpot",origin:{id:o.ID,from:"InnerRam3D"}})),!0},data:{ID:o.ID,Position:o.Position}},n.setVisible(!1),this.scene.add(n.root),n}},{key:"renderAllRoomHotSpots",value:function(){var r=this;if("2D"!==this.houseData.type){if(this.HotspotMap)for(var t in this.HotspotMap){t=this.HotspotMap[t];this.scene.remove(t.root)}this.HotspotMap={},this.houseData.spots.forEach(function(t,e,o){t.IsDefault,r.houseData.isHasVisibleInnerShootSpots&&!t.isHide&&r.addInner(t)}),this.guideInner&&this.scene.remove(this.guideInner.root);var e=new _o(this);e.renderInnerGuide(),e.setVisible(!1),this.scene.add(e.root),this.guideInner=e,this.guideMap=e}else{if(this.HotspotMap)for(var o in this.HotspotMap){o=this.HotspotMap[o];this.scene.remove(o.root)}this.HotspotMap={};var n=["1","2","3","4","5"];this.houseData.markSpots.forEach(function(t){n.includes(""+t.IconType)&&r.addMark(t)})}}},{key:"removeAllHotSpots",value:function(){if(this.HotspotMap)for(var t in this.HotspotMap){t=this.HotspotMap[t];this.scene.remove(t.root)}this.guideInner&&this.scene.remove(this.guideInner.root)}},{key:"hideHotSpots",value:function(){var t,e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];for(t in this.HotspotMap)this.HotspotMap[t].setVisible(!e)}},{key:"renderRoomHotSpot",value:function(t,e){var o,r,n,i=this;t&&(n=t.VisibleShootSpotIds,r=t.VisibleInnerShootSpots,o=void 0===r?[]:r,r=void 0===(r=t.VisibleMarkShootSpots)?[]:r,(void 0===n?[]:n).forEach(function(t){-1===o.indexOf(t)&&i.HotspotMap[t]&&(i.HotspotMap[t].setVisible(!1),i.release(i.HotspotMap[t].root),i.HotspotMap[t].animation(!1))}),o.forEach(function(t){i.HotspotMap[t+"_inner"]&&(i.HotspotMap[t+"_inner"].setVisible(!1),i.release(i.HotspotMap[t+"_inner"].root))}),r.forEach(function(t){i.HotspotMap[t+"_mark"]&&(i.HotspotMap[t+"_mark"].setVisible(!1),i.release(i.HotspotMap[t+"_mark"].root))})),e&&(n=e.VisibleShootSpotIds,r=e.VisibleInnerShootSpots,n=void 0===(n=e.VisibleMarkShootSpots)?[]:n,e.ID,this.houseData.isHasVisibleInnerShootSpots,(r=void 0===r?[]:r).forEach(function(t){var e,o,r;i.HotspotMap[t+"_inner"]&&(o=(e=i.HotspotMap[t+"_inner"]).root.userData.data.Position,t=(r=i.houseData).originData,r=r.useModel,r=1===(void 0===(t=(void 0===t?{}:t).AppInfo)?{}:t).Source&&r?-6:-2,"3d"===i.houseData.type.toLowerCase()?(r=new THREE.Vector3(o.x,o.y-(i.houseData.cameraHeight+r),-o.z),e.root.position.copy(r)):e.root.position.copy(o),e.root.updateMatrix(),e.setVisible(!0))}),n.forEach(function(t){var e;i.HotspotMap[t+"_mark"]&&(t=(e=i.HotspotMap[t+"_mark"]).root.userData.data.Position,e.getVisibleHotSpotsPos(i.camera.position,new THREE.Vector3(t.x,t.y,-t.z)),t=e.getMarkHotspotPos(t),e.root.position.copy(t),e.root.updateMatrix(),e.setVisible(!0))}),r&&0!==r.length||(this.isShowGuide=!1))}},{key:"getSeePlateMaxPolarAngle",value:function(){var t=this.plate,e=t.size,t=t.offY;return-(Math.PI/2-Math.atan2(e/2,Math.abs(t)))}},{key:"setNoSeePlate",value:function(t){this.noSeePlate=t,this.noSeePlate?this.controls.minLookPolar=this.getSeePlateMaxPolarAngle():this.controls.minLookPolar=null}},{key:"setRoomControl",value:function(){function o(t){return[(t=t.targetTouches&&t.targetTouches[0]||t).clientX,t.clientY]}var n=this,r=this.listener,e=this.frameManager,i=null,a=null,s=0,l=null,h=null,c=null,u=null;this.root.userData={pointDown:function(t){"touchstart"===t.type?n.controls.onTouchDown(t):n.controls.onMouseDown(t),r.dispatch("pano-camera-start","syncToVrChat",{}),r.dispatch("cameraTransformStart","roomRender",{},{origin:{}}),r.dispatch("onTouchDown","roomRender",{}),s=(new Date).getTime();var e=(e=o(t),t=T()(e,2),l=t[0],h=t[1],e),e=T()(e,2);c=e[0],u=e[1]},pointMove:function(t){"touchmove"===t.type?n.controls.onTouchMove(t):n.controls.onMouseMove(t),r.dispatch("pano-camera-change","syncToVrChat",{panoCamera:{rotation:n.camera.rotation,fov:n.camera.fov}});t=o(t),t=T()(t,2);c=t[0],u=t[1]},pointUp:function(t){"touchend"===t.type?n.controls.onTouchUp(t):n.controls.onMouseUp(t)},pointClick:function(t){s&&(new Date).getTime()-s<500&&Math.pow(c-l,2)+Math.pow(u-h,2)<Math.pow(5,2)&&(n.isInAnimation||i||(a=n.camera.fov,i=e.animation({duration:100,update:function(t,e){},final:function(t){t&&(i=e.animation({duration:400,update:function(t,e){n.camera.fov=a+(Math.cos(2*e*Math.PI)-1)/2*2.5,n.camera.updateMatrix()},final:function(t){t&&(i=a=null)}},!0))}},!0)),r.dispatch("onPointClick","roomRender",t,n))},pointOut:function(t){"touchend"===t.type?n.controls.onTouchUp(t):n.controls.onMouseUp(t)},pointDblclick:function(){var t;return i&&(i.stop(),t=90<a?-10:10,i&&i.stop(),r.dispatch("toDoCameraTransform","roomRender",{fov:a+t},{duration:300,factor:{fov:.5}}),i=a=null),!0}},this.controls.onUpdate=function(t){var e=n.camera,o=e.rotation,r=e.position,e=e.fov;n.listener.dispatch("cameraTransform","roomRender",{rotation:o,position:r,fov:e},{starter:n,origin:{panoCamera:{rotation:{x:o.x,y:o.y,z:o.z},fov:e}}},t),n.cameraStopTime=0},this.controls.autoRotateCB=function(){var t=n.camera,e=t.rotation,o=t.position,t=t.fov;r.dispatch("cameraAutoTransform","roomRender",{rotation:e,position:o,fov:t},{starter:n,origin:{panoCamera:{rotation:{x:e.x,y:e.y,z:e.z},fov:t},fov:t}})},this.controls.onControlEnd=function(){r.dispatch("pano-camera-end","syncToVrChat",{}),r.dispatch("cameraTransformEnd","roomRender",{},{origin:{}})}}},{key:"renderIn",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;this.root.visible=!0,this.frameManager.remove(this.update),this.frameManager.add(this.update,t),this.frameIndex=t,this.render()}},{key:"renderOut",value:function(){this.root.visible=!1,this.frameManager.remove(this.update),this.frameIndex=0,this.aniInnerSpot&&this.aniInnerSpot.animation(!1),this.guideInner&&this.guideInner.animation(!1),this.guideInner&&this.guideInner.setVisible(!1)}},{key:"getMatrixFromRotaion",value:function(t){var e=new THREE.Quaternion;return e.setFromEuler(new THREE.Euler(THREE.Math.degToRad(t.z),THREE.Math.degToRad(180-t.y),THREE.Math.degToRad(t.x),"YXZ")),e.y=-e.y,e.w=-e.w,e.z=-e.z,(new THREE.Matrix4).makeRotationFromQuaternion(e)}},{key:"getFreeCubTexture",value:function(){var t=this.cubeTexture1;return t=this.start&&this.start.cubeTexture&&this.start.cubeTexture===t?this.cubeTexture2:t}},{key:"ready",value:function(c,u,p,n){var d=this,f=c.Position,m=c.Rotation,g=c.ID,v=c.PanoImagesUrl,t=c.PanoBlurImagesUrl,o=p||t||v;return this.PanoImagesUrl=o,n||this.listener.dispatch("imgsLoading","roomRender",{ID:g,loading:0,sum:o.length,url:p},this),this.stopLastReady&&this.stopLastReady(),new Promise(function(h,e){d.stopLastReady=d.textureLoader.loadCubeTexture(o,function(t,e){if(e===d.PanoImagesUrl){d.root.visible=!0,t.magFilter=THREE.LinearFilter,t.minFilter=THREE.LinearFilter,console.log("1111---------》",m,d.root,"his.getMatrixFromRotaion(Rotation)"),d.end={spot:c,cubeTexture:t,matrix:d.getMatrixFromRotaion(m),oriPos:f,pos:new THREE.Vector3(f.x,f.y,-f.z),data:{ID:g}};for(var o=d.root,r=d.end,n=d.camera,t=d.plate,i=o.geometry,a=i.parameters,s=t.size,l=r.pos;a.width/2-Math.max(Math.abs(l.x),Math.abs(l.z))<s/2;)i.scale(2,2,2),a.width*=2,a.height*=2,a.depth*=2;for(;o.geometry.parameters.width/2*Math.sqrt(3)+r.pos.length()>n.far;)n.far*=2;d.type!==u&&(d.start=null,d.type=u),d.stopLastReady=null,h(),d.listener.dispatch("imgsLoading","roomRender",{ID:g,loading:v.length,sum:v.length,url:p},d)}},function(t,e,o,r){r!==d.PanoImagesUrl||n||t<v.length&&d.listener.dispatch("imgsLoading","roomRender",{ID:g,loading:t,sum:v.length,url:p},d)},function(t){throw e(new Error("texures加载出错")),t},d.getFreeCubTexture(),d.AppParams.isMobile?window.innerHeight:null,null,!0)})}},{key:"setShaderMaterial",value:function(t,e){var o=this.shaderMaterial;o.uniforms.panoramaMatrix.value=t.matrix,o.uniforms.panoramaCube.value=t.cubeTexture,o.uniforms.panoramaPos.value=t.pos,o.uniforms.p.value=1,this.start=t,e?(o.uniforms.fromPanoramaMatrix.value=e.matrix,o.uniforms.fromPanoramaCube.value=e.cubeTexture,o.uniforms.fromPanoramaPos.value=e.pos):(o.uniforms.fromPanoramaMatrix.value=t.matrix,o.uniforms.fromPanoramaCube.value=t.cubeTexture,o.uniforms.fromPanoramaPos.value=t.pos)}},{key:"cut",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){},e=this.start,o=this.end;this.camera.position.copy(o.pos);var r=this.plate.opacityAnimation();r&&r.start(),this.plate.setPosition(o.pos),this.renderRoomHotSpot(e&&e.spot,o.spot),this.setShaderMaterial(o),t()}},{key:"fade",value:function(t){var o=this,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=this.start,i=this.end,a=this.shaderMaterial.uniforms,s=a.fromPanoramaMatrix,l=a.fromPanoramaCube,h=a.fromPanoramaPos,c=a.isFixed,u=a.fromMatrixInverse,p=a.panoramaMatrix,d=a.panoramaCube,f=a.panoramaPos,m=a.p;s.value=n.matrix,l.value=n.cubeTexture,h.value=n.pos,c.value=!0;s=this.root,l=s.modelViewMatrix,h=s.matrixWorld,s=this.camera.projectionMatrixInverse.clone(),l=l.clone().getInverse(l),h=h.clone();u.value=h.multiply(l).multiply(s),p.value=i.matrix,d.value=i.cubeTexture,f.value=i.pos,m.value=0,t=this.getBestViewFromSpot(i.spot),this.camera.rotation.set(t.x,t.y,t.z),this.plate.setPosition(i.pos),this.renderRoomHotSpot(n&&n.spot,null),this.fade.animation&&this.fade.animation.stop(),this.playStartTime=(new Date).getTime(),this.updateNum=0,this.render(),this.fade.animation=this.frameManager.animation({duration:1e3,update:function(t,e){m.value=o.moveEase(e,"easeInOut2"),o.camera.position.set(THREE.Math.lerp(n.pos.x,i.pos.x,e),THREE.Math.lerp(n.pos.y,i.pos.y,e),THREE.Math.lerp(n.pos.z,i.pos.z,e)),o.updateNum++},final:function(t){t&&(c.value=!1,m.value=1,o.isInAnimation=!1,o.setShaderMaterial(i),o.renderRoomHotSpot(null,i.spot),o.fade.animation=null,e(),window.Stats&&window.Stats.update(),t=(new Date).getTime()-o.playStartTime,o.logFn({FPS:Math.round(1e3*o.updateNum/t),MS:Math.round(t/o.updateNum),clickRoomLoadedTime:(new Date).getTime()-r}))}}),window.setTimeout(function(){window.setTimeout(function(){return o.fade.animation.start()},0)},0),this.isInAnimation=!0}},{key:"moveEase",value:function(t,e){switch(e){case"easeInOut":return(t/=.5)<1?.5*Math.pow(t,2):-.5*((t-=2)*t-2);case"easeInOut1":return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2);case"easeInOut2":return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2);case"easeOut":return-(Math.pow(t-1,2)-1);case"easeIn":return Math.pow(t,2);default:return t}}},{key:"setPlate",value:function(t){var e=this.houseData.originData.HouseData;this.plate.set(t,e&&void 0!==e.Info.Rotation,!1!==this.config.IS_SHOW_COMPASS_DIRECTION)}},{key:"setFov",value:function(t){function e(t,e){o.controls.minFovLimit=e[0]||o.controls.minFovLimit,o.controls.maxFovLimit=e[1]||o.controls.maxFovLimit,t=Math.min(o.controls.maxFovLimit,Math.max(t,o.controls.minFovLimit)),o.camera.fov=t}var o=this,r=t.fov,n=void 0===r?this.camera.fov:r,r=t.fovLimit,i=void 0===r?[]:r,r=t.landscapeFov,a=void 0===r?this.camera.fov:r,t=t.landscapeFovLimit,s=void 0===t?[]:t;this.AppParams.isMobile&&Object(Do.o)()?e(n,i):e(a,s),this.controls.onOrientationchange&&this.listener.remove("orientationChange","window",this.controls.onOrientationchange),this.controls.onOrientationchange=function(t){t.isPortrait?e(n,i):e(a,s)},this.listener.add("orientationChange","window",this.controls.onOrientationchange)}},{key:"updateHotspot",value:function(t){this.cameraStopTime+=t;var e=Number.POSITIVE_INFINITY,o=null;if(this.HotspotMap)if("2d"!==this.houseData.type.toLowerCase()){for(var r in this.HotspotMap){var n,i,a=this.HotspotMap[r];a.root.visible&&"panorama-inner-visible-hotspot"===a.root.name&&(r=(n=a.root.position.clone()).clone().project(this.camera),i=n.distanceTo(this.camera.position),Math.abs(r.x)<1&&Math.abs(r.y)<1&&Math.abs(r.z)<1&&i<e&&(e=i,o=a),s=a.root.children[0],h=void 0,l=10<(h=.02*(l=i))?1:h/10,s.material.opacity=THREE.Math.lerp(.5,.1,l),a.root.scale.set(.8,.8,1),a.root.updateMatrix(),a.animation(!1))}var s,l,h,c,u,p,d=this.guideInner,t=this.isShowGuide;o&&((c=o.root.children[0]).material.opacity=1,c.scale.set(1.25,1.25,1),c.updateMatrix(),this.arrowId=o.root.uuid,(u=(this.aniInnerSpot&&this.aniInnerSpot.root||{}).uuid)&&u!==this.arrowId?o.animation(!0,null,0):o.animation(!0),this.aniInnerSpot=o),t&&o?(c=o.root.position,u=d.root.position,t=(t=o.root.children[0]).geometry.parameters.width/25*t.scale.x,d.root.scale.set(t,t,t),1500<=this.cameraStopTime&&(0<(new THREE.Vector3).subVectors(c,u).length()||!1===d.root.visible)&&(d.root.position.copy(c),d.p=0,d.animation(!0,this.camera.position),d.setVisible(!0),(p=d.root.children[0].material).opacity=0,this.frameManager.animation({duration:500,update:function(t,e){p.opacity=e,p.needsUpdate=!0},final:function(){p.opacity=1,p.needsUpdate=!0}},!0)),d.root.updateMatrix()):(d.setVisible(!1),d.animation(!1))}else{for(var f in this.HotspotMap){var m,g=this.HotspotMap[f];g.root.visible&&(f=(m=g.root.position.clone()).clone().project(this.camera),m=m.distanceTo(this.camera.position),Math.abs(f.x)<1&&Math.abs(f.y)<1&&Math.abs(f.z)<1&&m<e&&(e=m,o=g),g.animation(!1))}o&&o.animation(!0)}}},{key:"update",value:function(t){this.updateHotspot(t),this.render(),this.vrControls&&this.vrControls.enabled?window.orientation%180!=0&&listener.dispatch("toDoResize","roomModule",RENDERS.room.effect.viewportL):this.controls.update(t)}},{key:"switchVr",value:function(t){t?(this.controls.enabled=!1,this.vrControls.enabled=!0):(this.controls.enabled=!0,this.vrControls.enabled=!1),listener.dispatch("todoSetIswitchVR","vrRender"),RENDERS.vr.checkToVR()}},{key:"beforeScreenshot",value:function(){var e=this.scene,t=this.root,o=e.children.slice(0);(this.beforeScreenshot.array=o).forEach(function(t){return e.remove(t)}),e.add(t)}},{key:"afterScreenshot",value:function(){var t=this.beforeScreenshot.array,e=this.scene,o=this.root;e.remove(o),t.forEach(function(t){e.add(t)})}},{key:"release",value:function(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"all";if("start"!==e&&"all"!==e||(t=this.root.material.uniforms.fromPanoramaCube).value&&t.value.dispose(),"end"!==e&&"all"!==e||(t=this.root.material.uniforms.panoramaCube).value&&t.value.dispose(),"all"===e){this.root.material.dispose();var o,r=this.HotspotMap;for(o in r)To()(Mo()(n.prototype),"release",this).call(this,r[o].root)}}},{key:"setIsMirrored",value:function(){this.shaderMaterial.uniforms.isMirrored.value=0<arguments.length&&void 0!==arguments[0]&&arguments[0]}}]),n}(a),e=u("RIqP"),Bo=u.n(e),Vo="./stereo_hotspot_light_696ac6bf.png",No=function(){function r(t,e){bo()(this,r),this.config=e.config,this.renderTool=e.renderTool,this.isMobile=e.AppParams.isMobile;var o=t.textureLoader;this.houseRender=t,this.feetTexture=o.load("./stereo_hotspot_feet_ef0fdfdb.png"),this.houseConfig=e.config.MODULE.find(function(t){return"house"===t.key}),this.NEW_HOUSE_SPOTS_STYLE=e.houseData.originData.AppInfo&&4==e.houseData.originData.AppInfo.Source||!(this.houseConfig&&this.houseConfig.CYLI_HOUSE_SPOTS_STYLE);this.lightTexture=o.load("./stereo_hotspot_light_696ac6bf.png"),this.lineHeight=50,this.houseHotSpot=new Co(t.config.IS_WHITE_STYLE?{NEW_HOUSE_SPOTS_STYLE:this.NEW_HOUSE_SPOTS_STYLE,cornerWidth:14,borderThickness:6,borderStrokeStyle:"rgba(255, 255, 255, 1)",center:{x:.5,y:0}}:{NEW_HOUSE_SPOTS_STYLE:this.NEW_HOUSE_SPOTS_STYLE,cornerWidth:2,borderThickness:6,borderStrokeStyle:"rgba(255, 255, 255, 0.9)",center:{x:.5,y:0}}),this.linear=new THREE.CanvasTexture(this.createLinearCanvas()),this.linearCurrent=new THREE.CanvasTexture(this.createCurrentLinearCanvas())}return Eo()(r,[{key:"setLineHeight",value:function(){var t=this.renderTool.getRenderer("main"),e=this.isMobile?20:25;this.lineHeight=t.getSize().y/e}},{key:"renderSingleHotSpot",value:function(t,e){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},r=this.config.STYLE_COLOR,n=new THREE.Group,i=Object(Do.g)(o);n.matrixAutoUpdate=!1,n.name="hotspot",n.rotation.reorder("YXZ"),n.add(this.createLightObj(e)),i.add(1);o=this.houseHotSpot.draw(t,{backgroundFillStyle:!0===this.houseRender.config.IS_WHITE_STYLE?"rgba(230, 230, 230, 0.8)":"rgba(51, 51, 51, 0.6)",name:"hotspot-text",fontSize:this.lineHeight,margin:this.lineHeight,textFillStyle:!0===this.houseRender.config.IS_WHITE_STYLE?"rgba(0, 0, 0, 1)":"rgba(255, 255, 255, 1)"},new THREE.Vector3(0,e,0),function(){i.pass(1)});o.userData={originPos:o.position.clone()},n.add(o),i.add(1);e=this.houseHotSpot.draw(t,{backgroundFillStyle:r||"rgba(11,15,18,1)",name:"hotspot-text-current",fontSize:this.lineHeight,margin:this.lineHeight,textFillStyle:"rgba(255, 255, 255, 1)"},new THREE.Vector3(0,e,0),function(){i.pass(1)});return e.userData={originPos:o.position.clone()},e.visible=!1,n.add(e),n.add(this.createFeetObj()),n.updateMatrix(),n}},{key:"createLinearCanvas",value:function(){var t=document.createElement("canvas");t.width=1,t.height=100;var e=t.getContext("2d"),o=e.createLinearGradient(0,0,2,100);return o.addColorStop(0,"rgba(255,255,255,0.8)"),o.addColorStop(.5,"rgba(255,255,255,0.3)"),o.addColorStop(1,"rgba(255,255,255,0)"),e.fillStyle=o,e.fillRect(0,0,2,100),t}},{key:"createCurrentLinearCanvas",value:function(){var t=[],t="anjuke"===this.config.STYLE_ICON?[35,201,147]:[255,170,46],e=document.createElement("canvas");e.width=2,e.height=100;var o=e.getContext("2d"),r=o.createLinearGradient(0,0,2,100);return r.addColorStop(0,"rgba("+t+",0.8)"),r.addColorStop(.5,"rgba("+t+",0.3)"),r.addColorStop(1,"rgba("+t+",0)"),o.fillStyle=r,o.fillRect(0,0,2,100),e}},{key:"createLightObj",value:function(t){var e=this.NEW_HOUSE_SPOTS_STYLE?1:12,o=this.NEW_HOUSE_SPOTS_STYLE?e/2:e,e=new THREE.CylinderBufferGeometry(e,o,t,20,1,!0),o=this.NEW_HOUSE_SPOTS_STYLE?this.linear:this.lightTexture,o=new THREE.MeshBasicMaterial({map:o,transparent:!0,depthWrite:!1,alphaTest:1e-5,side:THREE.DoubleSide}),o=new THREE.Mesh(e,o);return o.name="hotspot-light",o.matrixAutoUpdate=!1,o.rotation.reorder("YXZ"),o.position.set(0,t/2,0),o.renderOrder=1,o.updateMatrix(),o}},{key:"createFeetObj",value:function(){var t=new THREE.PlaneBufferGeometry(12,12,1,1),e=new THREE.MeshBasicMaterial({map:this.feetTexture,alphaTest:.15,side:THREE.DoubleSide}),e=new THREE.Mesh(t,e);return e.name="hotspot-feet",e.matrixAutoUpdate=!1,e.rotation.reorder("YXZ"),e.rotation.x=THREE.Math.degToRad(270),e.updateMatrix(),e.visible=!this.NEW_HOUSE_SPOTS_STYLE,e}},{key:"hover",value:function(t){this.color=t?"orange":"white",this.label.draw()}},{key:"hide",value:function(t){this.root.visible=!t}},{key:"dispose",value:function(){this.label.dispose()}}]),r}();function zo(){return new THREE.ShaderMaterial({uniforms:{panoramaCube:{type:"samplerCube",value:void 0},panoramaPos:{type:"vec3",value:new THREE.Vector3},u_texture:{type:"sampler2D",value:void 0},panoramaMatrix:{type:"mat4",value:new THREE.Matrix4},p:{type:"float",value:1}},vertexShader:"\n    precision highp float;\n    precision highp int;\n    uniform mat4 panoramaMatrix;\n    uniform vec3 panoramaPos;\n\n\n    varying vec3 dir;\n\n    varying vec2 v_texcoord;\n  \n\n    void main() {\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n      vec3 vPosition = (modelMatrix * vec4( position, 1.0 )).xyz;\n      \n     \n      dir = vPosition - panoramaPos;\n      \n\n\n      \n      dir.x = -dir.x;\n      dir = mat3(panoramaMatrix) * dir;\n      v_texcoord = uv;\n      \n    }\n  ",fragmentShader:"\n    precision highp float;\n    precision highp int;\n    uniform samplerCube panoramaCube;\n    uniform float p;\n    varying vec3 dir;\n    uniform sampler2D u_texture;\n    varying vec2 v_texcoord;\n\n    void main() {\n\n      vec4 color = texture2D(u_texture, v_texcoord);\n      \n      if (color.a == 0.0) {\n        discard;\n      } else {\n        gl_FragColor = mix(\n          texture2D(u_texture, v_texcoord),\n          textureCube(panoramaCube, normalize(dir)),\n          p\n        );\n      }\n\n    }\n    "})}var Uo=function(){function e(t){bo()(this,e),this.textData=t.textData,this.houseRender=t,this.textRender=new Co({}),this.PIN_TEXT_CONFIG={fontsize:t.AppParams.isMobile?60:38,margin:t.AppParams.isMobile?55:32,backgroundFillStyle:"rgba(51, 51, 51, 0.6)",cornerWidth:2,borderThickness:6,borderStrokeStyle:"rgba(255, 255, 255, 0.9)",center:{x:.5,y:0}},this.PIN_TEXT_CONFIG_WHITE={fontsize:t.AppParams.isMobile?50:30,margin:40,backgroundFillStyle:"rgba(230, 230, 230, 0.8)",cornerWidth:14,borderThickness:6,borderStrokeStyle:"rgba(255, 255, 255, 1)",textFillStyle:"rgba(0, 0, 0, 1)",center:{x:.5,y:0}},this.houseHotSpot=new Co(t.config.IS_WHITE_STYLE?{cornerWidth:14,borderThickness:6,borderStrokeStyle:"rgba(255, 255, 255, 1)",center:{x:.5,y:0}}:{cornerWidth:2,borderThickness:6,borderStrokeStyle:"rgba(255, 255, 255, 0.9)",center:{x:.5,y:0}}),this.isAnimation=!1,this.progress=0,this.timeInterval=1667}return Eo()(e,[{key:"render",value:function(){var t=this.houseRender.houseData.Entrance,e=t.ExistEntrance,o=t.Rotation,r=t.NoRotationPosition,t=null;return e?void 0!==o?(t=this.renderStereoEntranceWithDirection(),this.renderType="hasEntranceWithDirection"):void 0!==r&&(t=this.renderEntranceNoDirectionText(),this.renderType="noEntranceWithDirection"):t=null,this.isRender=!1==!t,t}},{key:"renderEntranceNoDirectionText",value:function(){var t=this.houseRender.houseData,e=t.Entrance,o=t.floorsInfo,r=e.NoRotationPosition,t=o[0].FloorHeight,e=1===o.length?t-(this.houseRender.AppParams.isMobile?35:15):t-60,o=new THREE.Group;o.name="entrance-hotspot",o.matrixAutoUpdate=!1,o.rotation.reorder("YXZ"),o.position.set(r.x,r.y+4.5-this.houseRender.houseData.cameraHeight,-r.z),o.add(this.createLightObj(e));t=this.houseRender.config.IS_WHITE_STYLE?this.PIN_TEXT_CONFIG_WHITE:this.PIN_TEXT_CONFIG,r=this.houseRender.camera.position.y;return t.fontsize=r/30,t.margin=t.fontsize,o.add(this.textRender.draw("入口",t,new THREE.Vector3(0,e,0))),o.updateMatrix(),o}},{key:"createLightObj",value:function(t){var e=new THREE.CylinderBufferGeometry(12,12,t,20,1,!0),o=new THREE.MeshBasicMaterial({map:this.houseRender.textureLoader.load(Vo),transparent:!0,depthWrite:!1,alphaTest:.01,side:THREE.DoubleSide}),o=new THREE.Mesh(e,o);return o.name="hotspot-light",o.matrixAutoUpdate=!1,o.position.set(0,t/2,0),o.renderOrder=1,o.updateMatrix(),o}},{key:"renderStereoEntranceWithDirection",value:function(){var t=this.houseRender.houseData.originData.HouseData.Entrance.Position,e=this.houseRender.houseData.originData.HouseData.Entrance.Rotation.y,o=new THREE.Group;o.matrixAutoUpdate=!1,o.name="entrance-door",o.add(this.renderEntranceStatic());var r=this.textRender.draw(this.textData.entrance,{fontSize:40,cornerWidth:0,textFillStyle:this.houseRender.AppParams.textFillColor,fontface:"sans-serif"},new THREE.Vector3(0,-10,0));return r.material.depthTest=!0,o.add(r),o.position.set(t.x,t.y,-t.z),o.rotation.reorder("YXZ"),o.rotation.set(Math.PI/2,THREE.Math.degToRad(e),2*-Math.PI),o.updateMatrix(),o}},{key:"renderEntranceWithDirectionArrow",value:function(){var e=this;this.repeatProgress=new THREE.SpriteTextureProgress({length:50}),this.houseRender.textureLoader.loadImg(this.houseRender.config.IS_WHITE_STYLE?"https://img.58cdn.com.cn/git/teg-app-fe/vr-house-viewer-V5-test/static/v5.5.7-1/white-arrow-sprite_b9b2017e.png":"https://img.58cdn.com.cn/git/teg-app-fe/vr-house-viewer-V5-test/static/v5.5.7-1/stereo_entrance_door_shadow_dfcbe2ff.png",function(t){e.repeatProgress.build(t),e.repeatProgressMaterial.map=e.repeatProgress.progress(0),e.repeatProgressMaterial.needsUpdate=!0});var t=new THREE.PlaneBufferGeometry(60,60,1,1),o=this.repeatProgressMaterial=new THREE.MeshBasicMaterial({map:this.repeatProgress.texture,transparent:!0,alphaTest:.1,opacity:.8,side:THREE.DoubleSide}),o=new THREE.Mesh(t,o);return o.matrixAutoUpdate=!1,o.rotation.reorder("YXZ"),o.name="entrance-door-arrow",o.updateMatrix(),o}},{key:"renderEntranceStatic",value:function(){var t=new THREE.PlaneBufferGeometry(23,41,1,1),e=this.repeatProgressMaterial=new THREE.MeshBasicMaterial({map:(new THREE.TextureLoader).load("anjuke"===this.houseRender.config.STYLE_ICON?"./stereo_entrance_door_shadow_ajk_a033e9f8.png":"./stereo_entrance_door_shadow_new_13c7ed3c.png"),transparent:!0,alphaTest:.1,opacity:.8,side:THREE.DoubleSide}),t=new THREE.Mesh(t,e);t.matrixAutoUpdate=!1,t.rotation.reorder("YXZ"),t.name="entrance-door-arrow";e=new THREE.Vector3(0,-60,0);return t.position.set(e.x,e.y,e.z),t.updateMatrix(),t}},{key:"animation",value:function(t){var e=this;this.houseRender.houseData.Entrance.ExistEntrance&&this.isRender&&"hasEntranceWithDirection"===this.renderType&&(this.isAnimation=t,this.animationUpdate||(this.animationUpdate=function(t){e.repeatProgress&&(e.repeatProgressMaterial.map=e.repeatProgress.progress(e.progress/e.timeInterval),e.repeatProgressMaterial.needsUpdate=!0),e.progress+=t,e.progress%=e.timeInterval}),t?(this.houseRender.frameManager.remove(this.animationUpdate),this.houseRender.frameManager.add(this.animationUpdate)):this.houseRender.frameManager.remove(this.animationUpdate))}}]),e}();function Go(t,e){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function(t,e){if(t){if("string"==typeof t)return jo(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(o="Object"===o&&t.constructor?t.constructor.name:o)||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?jo(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i=!0,a=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return i=t.done,t},e:function(t){a=!0,n=t},f:function(){try{i||null==o.return||o.return()}finally{if(a)throw n}}}}function jo(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,r=new Array(e);o<e;o++)r[o]=t[o];return r}function Xo(o){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=Mo()(o);return e=r?(t=Mo()(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),Po()(this,e)}}var Wo=function(t){xo()(a,t);var r=Xo(a);function a(t){bo()(this,a);var e=r.call(this,t),o=window.THREE;return e.canvasStepper=t.canvasStepper,e.WALL_GEOMETRY=new o.PlaneBufferGeometry(1,1,1,1),e.BASIC_MATERIAL=new o.MeshBasicMaterial({color:0,transparent:!0,blending:o.NormalBlending,alphaTest:1e-7,side:o.BackSide,opacity:0}),e.textData=t.textData,e.houseData=t.houseData,e.logFn=t.logFn,e.isGuideFullScreen=!1,e.setCamera(),e.scene=new o.Scene,e.update=e.update.bind(wo()(e)),e.floorsData=null,e.houtSpotIns=new No(wo()(e),t),e.entranceIns=new Uo(wo()(e)),e.materials=[],e.initListener(),e.DOORS_MAP={},e.houseMaterial={},e.isInAnimation=!1,e.syncRotateAnimation=null,e.modelLoaded=!1,e.modelMap={},e.spotMap={},e.houseConfig=t.config.MODULE.find(function(t){return"house"===t.key})||{},e.NEW_HOUSE_SPOTS_STYLE=t.houseData.originData.AppInfo&&4==t.houseData.originData.AppInfo.Source||!e.houseConfig.CYLI_HOUSE_SPOTS_STYLE,e.roomMoveTo=!1,e.controls.enableDamping=!0,e.controls.dampingFactor=.15,e.controls.maxZoom=2,e.controls.minDistance=200,e.controls.maxDistance=500,e.enablePan=!1,e.cScale=1,e}return Eo()(a,[{key:"prepareSpots",value:function(){var l=this,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){},t=1<arguments.length?arguments[1]:void 0;this.canvasStepper.add([function(t){l.spotMap={};var e=l.houseData,i=e.floors,o=e.floorRooms,a=e.rooms,s=(e.cameraHeight,Object(Do.g)(t));i.forEach(function(t,n){t=t.ID;o[t].forEach(function(t){var e=a[t],o=e.Info,r=o.Name,o=o.RoomHeight,e=o?.5*o:0<e.Walls.length?e.Walls[0].Start.Up.Position.y-e.Walls[0].Start.Down.Position.y:120,e=0===n&&1===i.length?20+e:e-60;s.add(1);e=l.houtSpotIns.renderSingleHotSpot(r,e,function(){s.pass(1)});l.spotMap[t]=e})}),r()},function(){t&&t()}])}},{key:"initListener",value:function(){var r,n=this;this.listener.addWithMap({houseRender:{toDoCameraTransformStart:function(t,e){e.origin,(e.starter=n).listener.dispatch("cameraTransformStart","houseRender",t,e)},toDoCameraTransform:function(t){var e,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!o.origin||(e=o.origin.stereoCamera)&&(t.position=e.position,t.rotation=o.origin.stereoCamera.rotation,t.fov=e.fov),o.starter=n,t.position=t.position?new THREE.Vector3(t.position.x,t.position.y,t.position.z):n.camera.position.clone(),t.rotation=t.rotation?new THREE.Euler(t.rotation.x,t.rotation.y,t.rotation.z):n.camera.rotation.clone(),t.fov=t.fov||n.camera.fov,o.duration?"vrchat"===o.type?n.rotateTo(t,o):n.moveTo({end:t},function(){},o.duration,function(){n.listener.dispatch("cameraTransform","houseRender",{position:n.camera.position,rotation:n.camera.rotation,fov:n.camera.fov},o)}):(n.camera.position.set(t.position.x,t.position.y,t.position.z),t.rotation&&n.camera.rotation.set(t.rotation.x,t.rotation.y,t.rotation.z),n.camera.fov=t.fov,n.camera.updateMatrix(),n.listener.dispatch("cameraTransform","houseRender",{position:n.camera.position,rotation:n.camera.rotation,fov:n.camera.fov},o))},toDoCameraTransformEnd:function(t,e){e.origin,(e.starter=n).listener.dispatch("cameraTransformEnd","houseRender",t,e)}},render:{release:function(){n.release()}}}),this.inControls=!1,this.controlsStart=function(){n.inControls=!0,n.listener.dispatch("cameraTransformStart","houseRender",{},{origin:{}})},this.controlsChange=function(){var t,e,o;n.inControls&&(t=(o=n.camera).position,e=o.rotation,o=o.fov,n.listener.dispatch("cameraTransform","houseRender",{position:t,rotation:e,fov:o},{starter:n,origin:{stereoCamera:{position:{x:t.x,y:t.y,z:t.z},rotation:{x:e.x,y:e.y,z:e.z},fov:o}}}))},this.controlsEnd=function(){n.inControls=!1,n.listener.dispatch("cameraTransformEnd","houseRender",{},{origin:{}})},this.controlsEndForce=function(){n.inControls&&n.controlsEnd()},this.controlsWheel=function(){n.scaleSpots()},this.controlsTouchStart=function(t){r={x:t.touches[0].pageX,y:t.touches[0].pageY}},this.controlsTouchMove=function(t){var e=r.x-t.touches[0].pageX,o=r.y-t.touches[0].pageY;switch(t.touches.length){case 1:0==e&&0==o||(n.hideSpots(!0,"cut"),c());break;case 2:n.scaleSpots()}};var i,a,s,l,h,c=(i=function(){n.hideSpots(!1,"fade"),n.setShowSpot()},a=300,h=s?0:Date.now(),function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];var r=Date.now();r-h<a?clearTimeout(l):s&&i.apply(void 0,e),l=setTimeout(function(){i.apply(void 0,e)},a),h=r});this.controlsMouseMove=function(){n.hideSpots(!0,"cut"),c()},this.addMouseMove=function(){n.controls.domElement.addEventListener("mousemove",n.controlsMouseMove)},this.removeMouseMove=function(){n.controls.domElement.removeEventListener("mousemove",n.controlsMouseMove)},this.controls.domElement.addEventListener("wheel",this.controlsWheel),this.controls.domElement.addEventListener("touchstart",this.controlsTouchStart),this.controls.domElement.addEventListener("touchmove",this.controlsTouchMove),this.controls.domElement.addEventListener("touchend",this.controlsTouchEnd),this.controls.domElement.addEventListener("mousedown",this.addMouseMove),window.addEventListener("mouseup",this.removeMouseMove),this.controls.addEventListener("start",this.controlsStart),this.controls.addEventListener("change",this.controlsChange),this.controls.addEventListener("end",this.controlsEnd),this.listener.add("todoGetIsGuideFullScreen","houseRender",function(t){t&&t(n.isGuideFullScreen)}),this.listener.add("changHouseControl","houseControl",function(t){n.controls.enabled=t.use})}},{key:"scaleSpots",value:function(){var t,e,o,n;this.hotSpotsGroup&&this.NEW_HOUSE_SPOTS_STYLE&&(e=this.getStereoCameraPosition().vector3,t=this.camera.position,o=this.hotSpotsGroup.getWorldPosition(this.hotSpotsGroup.position.clone()),e=e.distanceTo(o),o=t.distanceTo(o),n=this.cScale=.5<o/e?o/e:.5,this.hotSpotsGroup.children.forEach(function(t){var e=t.children[1].defaultScale,o=e.x,r=e.y,e=e.z,r=new THREE.Vector3(o*n,r*n,e*n),e=n<1?n:1;t.children[0].scale.set(e,e,e),t.children[1].scale.set(r.x,r.y,r.z),t.children[2].scale.set(r.x,r.y,r.z);r=t.children[1].userData.originPos;t.children[0].position.set(r.x,r.y*e/2,r.z),t.children[1].position.set(r.x,r.y*e,r.z),t.children[2].position.set(r.x,r.y*e,r.z),t.children[0].updateMatrix(),t.children[1].updateMatrix(),t.children[2].updateMatrix()}))}},{key:"setControlDistance",value:function(){var t=this.houseData,e=this.HouseParams,o=this.renderTool.size,r=t.houseSize,n=t.margin||0,t=(r.x,r.z,this.getDefaultRadius(!0,r,e.fullScreenFov,o.x/o.y,t.margin));this.controls.minDistance=t/2,this.controls.maxDistance=2*t}},{key:"setShowSpot",value:function(){var t,e,o,r=this;!this.houseConfig.SHOW_NO_SEE_SPOTS&&this.hotSpotsGroup&&(t=(o=this.camera.position).x,e=o.y,o=o.z,e=new THREE.Vector3(t,e,o),o=new THREE.Vector3(t,0,o),new THREE.Vector3(t,0,0),o=e.angleTo(o)/Math.PI*180,this.houseData.floorRooms[this.currentFloorID],o<30?(this.hotSpotsGroup.children.forEach(function(t){"all"!==r.currentFloorID&&t.userData.floorID!==r.currentFloorID||(t.visible=r.getShortest(t),t.visible&&(t.visible=r.getTextShortest(t)))}),this.entranceGroup&&(this.entranceGroup.visible=this.getShortest(this.entranceGroup))):(this.hotSpotsGroup.children.forEach(function(t){"all"!==r.currentFloorID&&t.userData.floorID!==r.currentFloorID||("all"===r.currentFloorID?t.visible=r.houseData.floors[r.houseData.floors.length-1].ID===t.userData.floorID:t.visible=!0)}),this.entranceGroup&&(this.entranceGroup.visible=!0)))}},{key:"hideSpots",value:function(a){var r,s=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"fade",e=2<arguments.length?arguments[2]:void 0;this.hotSpotsGroup&&(r=this.spotItemList,a||this.scaleSpots(),this.roomMoveTo&&!a||("fade"===t?this.spotHideAnimation=this.frameManager.animation({duration:500,update:function(t,n){var i=s.moveEase(n,"easeInOut2");s.hotSpotsGroup.children.forEach(function(r){r.children.forEach(function(t){t.material.opacity=a?1-i:i;var e,o=s.cScale<1?s.cScale:1;switch(t.name){case"hotspot-text":case"hotspot-text-current":t.position.y=t.userData.originPos.y*n*o;break;case"hotspot-light":s.NEW_HOUSE_SPOTS_STYLE&&(e=r.children[1].userData.originPos,t.scale.y=n*o,r.children[0].position.y=n*e.y*o/2)}t.updateMatrix()})})},final:function(t){s.spotHideAnimation=null,e&&e()}},!0):this.hotSpotsGroup.children.forEach(function(t){t.children.forEach(function(t){var e,o=Go(r);try{for(o.s();!(e=o.n()).done;)e.value.material.opacity=a?0:1}catch(t){o.e(t)}finally{o.f()}})})))}},{key:"setCamera",value:function(){var t=this.HouseParams,e=this.AppParams,t=this.camera=new THREE.PerspectiveCamera(t.smallGuideFov,1,5,1e4);t.name="house-camera",t.rotation.reorder("YXZ"),t.aspect=e.miniGuideWidth/e.miniGuideHeight,t.updateProjectionMatrix(),this.controls.setObject(t)}},{key:"getStereoCameraPosition",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=this.HouseParams,o=t.isGuideFullScreen,r=void 0===o?this.isGuideFullScreen:o,n=t.fov,i=void 0===n?this.isGuideFullScreen?e.fullScreenFov:e.smallGuideFov:n,a=t.theta,o=t.coefficient,e=this.houseData.houseSize;if(null===e)return null;n=THREE.Math.degToRad(45),t=THREE.Math.degToRad(0);this.camera.fov=i;i=this.getDefaultRadius(r,e,i,this.houseData.margin)*(o||(!this.AppParams.isMobile||Object(Do.o)()?1:.5)),o={vector3:(new THREE.Vector3).setFromSpherical(new THREE.Spherical(i,n,t)),spherical:new THREE.Spherical(i,n,t)};if("number"!=typeof a)return o;t=i*Math.sin(n)*Math.sin(a),o=i*Math.cos(n),a=i*Math.sin(n)*Math.cos(a);return{vector3:new THREE.Vector3(t,o,a)}}},{key:"getShortest",value:function(o){var t=new THREE.Vector3(o.position.x,o.position.y/3,o.position.z),e=o.getWorldPosition(t.clone()),t=e.clone().sub(this.camera.position.clone()).normalize(),t=new THREE.Raycaster(this.camera.position.clone(),t).intersectObjects(this.scene.children[0].children,!0),r=e.distanceTo(this.camera.position);return!t.some(function(t){var e=t.object.userData.FixInfo?-1<t.object.userData.FixInfo.rooms.indexOf(o.userData.roomID):!!t.object.userData.roomId&&t.object.userData.roomId===o.userData.roomID;if(!e&&.1!==t.object.material.opacity)return t.distance<r})}},{key:"getTextShortest",value:function(e){var r=this,t=new THREE.Raycaster,o=e.children[1].getWorldPosition(e.children[1].position.clone()),n=o.distanceTo(this.camera.position),o=this.getScrrenPos(o),o={x:o.x/window.innerWidth*2-1,y:2*-(o.y/window.innerHeight)+1};t.setFromCamera(o,this.camera);var i=t.ray;return!this.scene.getObjectByName("hotSpots").children.filter(function(t){return t.visible}).map(function(t){return t.children[1]}).filter(function(t){var e=t.getWorldPosition(t.position.clone()),o=new THREE.Plane,t=new THREE.Vector3;o.normal=i.direction.clone(),o.constant=0,i.intersectPlane(o,t);e=r.getScrrenPos(e),t=r.getScrrenPos(t);return e.distanceTo(t)<30*r.cScale}).map(function(t){return{distance:t.getWorldPosition(t.position.clone()).distanceTo(r.camera.position),object:t}}).some(function(t){if(t.object.parent.uuid!==e.uuid)return t.distance<n})}},{key:"updateControlsState",value:function(){var t=this.HouseParams;0<arguments.length&&void 0!==arguments[0]&&arguments[0]?(this.controls.maxPolarAngle=THREE.Math.degToRad(90),this.controls.minPolarAngle=THREE.Math.degToRad(10),this.controls.enableZoom=!0,this.controls.enablePan=!1,this.controls.rotateSpeed=t.largeRotateSpeed):(this.controls.maxPolarAngle=THREE.Math.degToRad(45),this.controls.minPolarAngle=THREE.Math.degToRad(45),this.controls.enableZoom=!1,this.controls.enablePan=!1,this.controls.rotateSpeed=t.rotateSpeed)}},{key:"getScrrenPos",value:function(t){var e=t.clone().project(this.camera),o=window.innerWidth/2,r=window.innerHeight/2,t=new THREE.Vector2;return t.x=Math.round(e.x*o+o),t.y=Math.round(-e.y*r+r),t}},{key:"renderIn",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;this.root.visible=!0,this.controls.enabled=!0,this.frameManager.add(this.update,t),this.frameIndex=t,this.entranceIns.animation(!0),this.render()}},{key:"renderOut",value:function(){this.root.visible=!1,this.controls.enabled=!0;var t=this.frameManager.remove(this.update);return this.frameIndex=0,this.controlsEndForce(),this.entranceIns.animation(!1),this.rotationAnimation&&this.rotationAnimation.stop(),this.moveAnimation&&this.moveAnimation.stop(),t}},{key:"setStereoCameraPosition",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=this.getStereoCameraPosition(t),o=this.camera;o.position.copy(e.vector3),t.aspect&&(o.aspect=t.aspect),o.lookAt(new THREE.Vector3(0,0,0)),o.updateProjectionMatrix()}},{key:"renderByDoors",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.BASIC_MATERIAL,o=t.Start.Down.Position,r=t.Start.Up.Position,n=t.End.Down.Position,i=new THREE.Vector3(o.x,o.y,o.z).distanceTo(new THREE.Vector3(n.x,n.y,n.z)),a=new THREE.Vector3(o.x,o.y,o.z).distanceTo(new THREE.Vector3(r.x,r.y,r.z)),s=(o.x+n.x)/2,l=(o.y+r.y)/2,r=(o.z+n.z)/2,a=new THREE.PlaneBufferGeometry(i,a),a=new THREE.Mesh(a,e),r=new THREE.Vector3(s,l,-r).applyAxisAngle(new THREE.Vector3(0,1,0),-Math.PI);a.position.set(r.x,r.y,r.z),a.name="house-doors";o=Math.atan2(n.z-o.z,n.x-o.x);return a.rotation.y=o,a.userData={ID:t.ID,defaultMaterial:e},a.visible=!1,a}},{key:"renderDoorFaceGroup",value:function(e,o){var r=this;void 0!==e.DoorFaces&&e.DoorFaces?e.DoorFaces.forEach(function(t){o.add(r.renderByDoorFace(t,e.Info))}):e.Doors.forEach(function(t){"Door"===t.Type&&o.add(r.renderByDoors(t))})}},{key:"renderByDoorFace",value:function(t,e){var o=new THREE.PlaneBufferGeometry(t.Width,t.Height),r=new THREE.Mesh(o,this.BASIC_MATERIAL);r.name="house-doors",r.matrixAutoUpdate=!1,r.rotation.reorder("YXZ");var n=t.Position,i=t.Rotation;r.position.set(-n.x,n.y,n.z),r.rotation.set(THREE.Math.degToRad(i.x),THREE.Math.degToRad(i.y+180),THREE.Math.degToRad(i.z)),r.updateMatrix();var a=o.attributes.position.array,o=this.getRotatePosition(n,i,{x:a[6],y:a[7],z:a[8]},e),e=this.getRotatePosition(n,i,{x:a[9],y:a[10],z:a[11]},e);return this.DOORS_MAP[t.ID]={start:o,end:e},r.visible=!1,r.userData={defaultMaterial:this.BASIC_MATERIAL,ID:t.ID},r}},{key:"getRotatePosition",value:function(t,e,o,r){o=new THREE.Vector3(o.x,o.y,-o.z);return o.applyAxisAngle(new THREE.Vector3(0,1,0).normalize(),THREE.Math.degToRad(e.y+180)),o.add(new THREE.Vector3(-t.x,t.y,t.z)),o.applyAxisAngle(new THREE.Vector3(0,1,0),Math.PI-THREE.Math.degToRad(r.Rotation)),o.add(new THREE.Vector3(r.Position.x,r.Position.y,-r.Position.z)),o}},{key:"getRoomFace",value:function(t,e,o,r,n){var i=this,a=new THREE.MeshBasicMaterial({transparent:!0,blending:THREE.NormalBlending,alphaTest:1e-7,depthTest:!1,color:16777215,opacity:0,depthWrite:!(5<arguments.length&&void 0!==arguments[5])||arguments[5],polygonOffset:!0,polygonOffsetFactor:r,polygonOffsetUnits:n}),s=t.Width,l=t.Height,h=t.ImageUrl,r=t.Position,n=t.Rotation,c=(t.Name,new THREE.Mesh(this.WALL_GEOMETRY,a));return this.materials.push(a),c.position.set(-r.x,r.y+0,r.z),c.rotation.reorder("YXZ"),c.rotation.set(THREE.Math.degToRad(n.x),THREE.Math.degToRad(n.y+180),THREE.Math.degToRad(n.z)),c.scale.set(s,l,1),0===s||0===l?null:(c.updateMatrix(),this.textureLoader.idleLoad([{url:h,prefix:o,onLoaded:function(t){t.minFilter=THREE.LinearFilter,a.map=t,a.color=new THREE.Color(16777215),a.opacity=0===a.opacity?1:a.opacity,a.depthTest=!0,a.needsUpdate=!0}}]),c.name="house-wall",c.userData=Object.assign({"pre-pointDown":function(){},defaultMaterial:a},this.setEvent(null,null,function(){if(1===c.material.opacity&&!e.isHide)return i.houseClickCB(e.Info,"houseRender"),!0})),c)}},{key:"getFloor",value:function(t,a){var s=this,l=new THREE.Group,h=this.floorsData[t],c=1,t=function t(e){var o=new THREE.Group,r=h[e],n=r.StereoTextures,i=r.Info,r=i.Position,i=i.Rotation;o.name="house-floor-room",o.ID=h[e].Info.ShootSpotIds[0],o.rotation.reorder("YXZ"),o.position.set(r.x,r.y,-r.z),o.rotation.y=Math.PI-THREE.Math.degToRad(i.y),l.add(o),n.forEach(function(t){t=t&&t.Name&&0<=t.Name.indexOf("_down")?s.getRoomFace(t,h[e],a,0,0,!1):(c+=1,s.getRoomFace(t,h[e],a,.9,c%6));t&&o.add(t)}),s.renderDoorFaceGroup(h[e],o),h[++e]&&t(e)};return 0<h.length&&t(0),l.name="house-floor",l.userData={floorId:h.floorId},l}},{key:"translateData",value:function(t,e,o){var r,n=[];for(r in o){var i,a=[],s=Go(o[r]);try{for(s.s();!(i=s.n()).done;){var l=i.value;a.push(e[l])}}catch(t){s.e(t)}finally{s.f()}a.floorId=r,n.push(a)}return console.log(n),n}},{key:"getPointPosition",value:function(t){t=t.targetTouches&&t.targetTouches[0]||t;return[t.clientX,t.clientY]}},{key:"setEvent",value:function(o,r,n){var i=this,a=0,s=null,l=null,h=null,c=null;return{pointDown:function(t){a=(new Date).getTime();var e=(e=i.getPointPosition(t),t=T()(e,2),s=t[0],l=t[1],e),e=T()(e,2);h=e[0],c=e[1],o&&o(h)},pointMove:function(t){var e=i.getPointPosition(t),e=T()(e,2);h=e[0],c=e[1],r&&pointClpointMoveFnickFn(t)},pointClick:function(t,e,o,r){if(!(a&&500<(new Date).getTime()-a||Math.pow(h-s,2)+Math.pow(c-l,2)>Math.pow(5,2)))return!!n&&n(t,e,o,r)}}}},{key:"buildModel",value:function(){var t,e,a=this,o=this.houseData.modelInfo,r=new window.GLTFLoader,n=o.ModelUrl;if(n.match("^http|https")||(t=this.textureLoader,e=this.AppParams,n=(this.houseData.dataFrom.prefix||t.prefix||e.routerMatch.roomDir)+o.ModelUrl),console.log("this.modelUrl=======",this.modelUrl),this.modelUrl&&this.modelUrl===n)this.modelLoaded=!0;else{if(this.modelUrl=n,console.log("this.modelMap======",this.modelMap),this.root=new THREE.Group,this.root.visible=!1,this.root.name="house",this.modelMap[n])return this.houseModel=this.modelMap[n],this.root.add(this.houseModel),this.scene.add(this.root),this.modelUrl="",void(this.modelLoaded=!0);this.root.visible=!1,this.scene.add(this.root),this.modelLoaded=!1;r.load(n,function(t){var e;e=t,t=n,a.modelUrl===t&&(e=e.scene.children[0],a.houseModel=e,a.root.add(e),function t(i){var e;"Mesh"===i.type?(Object.assign(i.userData,a.setEvent(null,null,function(t,e,o,r){var n=a.houseData.rooms[r.roomId];if(!n&&r.FixInfo&&(n=a.houseData.rooms[r.FixInfo.default]),1===i.material.opacity&&n&&!n.isHide)return a.houseClickCB(n.Info),!0})),i.material.alphaTest=.09,i.material.transparent=!0,i.material.polygonOffset=!1,i.material.polygonOffsetFactor=1,i.material.polygonOffsetUnits=1,0<=(e=i.name.toLowerCase()).indexOf("brush_")&&(i.material.polygonOffset=!0,i.material.polygonOffsetFactor=1,i.material.polygonOffsetUnits=2),(0<=e.indexOf("outlinedown")||0<=e.indexOf("sidewall"))&&(i.material.polygonOffset=!0,i.material.polygonOffsetFactor=1,i.material.polygonOffsetUnits=99),i.material.needsUpdate=!0):("Object3D"===i.type&&(i.type="Group"),i.children&&i.children.forEach(t))}(e),a.modelLoaded=!0,a.listener.dispatch("modelLoaded","houseRender",null,a),a.modelMap[t]=a.houseModel,a.modelUrl="")}),console.log("this.root======",this.root)}}},{key:"buildHouse",value:function(t,e,o,r){var n=this;if(!this.floorsData){if(this.floorsData=this.translateData(t,e,o),this.listener.dispatch("toDoGetCamera","roomRender",function(t){t=(t||{}).rotation;n.setStereoCameraPosition({coefficient:1,theta:(void 0===t?{}:t).y})}),this.houtSpotIns.setLineHeight(),this.modelLoaded=!1,this.houseData.useModel)this.buildModel();else{this.root=new THREE.Group,this.root.name="house",this.root.visible=!1,this.scene.add(this.root),this.modelLoaded=!0;for(var i=0;i<this.floorsData.length;i++)this.root.add(this.getFloor(i,r))}console.log("this.scene=====",this.scene)}}},{key:"reBuildHouse",value:function(t,e,o,r){t!==this.floors&&(this.materials.forEach(function(t){return t.dispose()}),this.materials=[],this.floorsData=null,this.scene.remove(this.root),this.scene.remove(this.entranceGroup),this.buildHouse(t,e,o,r))}},{key:"houseClickCB",value:function(t,e){if(!this.disChangeSpot)return this.listener.dispatch("toDoToRoom","houseModule",t,{from:e,origin:{from:"stereo",id:t.ShootSpotIds[0]}}),!0}},{key:"setCurrentHotspots",value:function(r,t){var n=this;this.hotSpots||this.buildHotSpots(),this.hotSpots.forEach(function(t,e,o){t.userData.ID===r||t.userData.ShootSpotIds.find(function(t){return t===r})?(t.children[2].visible=!0,t.children[1].visible=!1,n.NEW_HOUSE_SPOTS_STYLE&&(t.children[0].material.map=n.houtSpotIns.linearCurrent)):(t.children[2].visible=!1,t.children[1].visible=!0,n.NEW_HOUSE_SPOTS_STYLE&&(t.children[0].material.map=n.houtSpotIns.linear))}),t&&this.setHouseOpacity(t),this.setCurrentHotspotsId=r}},{key:"setHouseOpacity",value:function(r){var e=this,o=this.houseData.floorRooms[r];this.hotSpots.forEach(function(t){t.visible="all"===r||o.includes(t.userData.roomID)}),this.houseData.isMultiFloor&&(this.houseData.useModel?function t(e){var o;e.children&&e.children.length?e.children.forEach(t):"Mesh"===e.type&&(o=e.material,"all"===r||r===e.userData.floorId?(o.opacity=1,o.depthWrite=!0):(o.opacity=.1,o.depthWrite=!1))}(this.root):this.root.children.forEach(function(t){e.setFloorOpacity(t,t.userData.floorId===r||"all"===r?1:.1)})),this.currentFloorID=r,this.setShowSpot()}},{key:"setFloorOpacity",value:function(t,r){t.children.forEach(function(t,e,o){t.children.forEach(function(t,e,o){t.material.opacity=r})})}},{key:"buildHotSpots",value:function(){var h,c=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){},e=this.houseData,o=e.spots,u=e.floors,r=e.floorRooms,p=e.rooms,d=e.cameraHeight;this.hotSpots||((e=this.entranceIns.render())&&this.scene.add(e),this.entranceGroup=e,this.hotSpotsData=o,h=new THREE.Group,this.hotSpots=[],this.prepareSpots(function(){u.forEach(function(t,s){var l=t.ID;r[l].forEach(function(t){var e=p[t],o=e.Info,r=o.Name,n=o.Position,i=o.ShootSpotIds,a=o.RoomHeight;e.isHide||((o=c.spotMap[t])||(a=a?.5*a:0<e.Walls.length?e.Walls[0].Start.Up.Position.y-e.Walls[0].Start.Down.Position.y:120,a=0===s&&1===u.length?20+a:a-60,o=c.houtSpotIns.renderSingleHotSpot(r,a)),c.hotSpots.push(o),o.position.set(n.x,4.5+n.y-d,-n.z),h.name="hotSpots",o.updateMatrix(),h.add(o),o.userData=Object.assign({"pre-pointMove":function(){},roomID:t,Name:r,ID:i[0],floorID:l,ShootSpotIds:i},c.setEvent(null,null,function(){return console.log(l),c.houseClickCB(e.Info,"houseRender"),!0})))})})},t),this.scene.add(h),this.hotSpotsGroup=h,this.spotItemList=[],this.hotSpotsGroup.children.forEach(function(t){var e;(e=c.spotItemList).push.apply(e,Bo()(t.children))}))}},{key:"reBuildHotSpots",value:function(){this.hotSpotsData=null,this.entranceGroup&&this.scene.remove(this.entranceGroup),this.hotSpots&&this.hotSpots.forEach(function(t){t.children.forEach(function(t){var e=t.geometry,t=t.material;e&&e.dispose(),t&&t.dispose()})}),this.hotSpots=null,this.scene.remove(this.hotSpotsGroup),this.buildHotSpots()}},{key:"hotSpotsHide",value:function(t){this.hotSpotsGroup.visible=!t}},{key:"moveTo",value:function(o,r){var a=this,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1e3,s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){};"toRoom"===o.from&&(this.roomMoveTo=!0);var e=this.camera.position.clone(),n=this.camera.rotation.clone(),i=this.camera.fov,l=o.start,h=void 0===l?{position:e,rotation:n,fov:i}:l,c=o.end,u=o.spotHide,l=o.factor,p=void 0===l?{position:1,rotation:1,fov:1}:l,d=o.from;o.targetMaterial;function f(t,e){for(;e-t>Math.PI;)e-=2*Math.PI;for(;e-t<-Math.PI;)e+=2*Math.PI;return e}!c.rotation&&c.position&&(this.camera.position.copy(c.position),this.camera.lookAt(this.controls.target),c.rotation=this.camera.rotation.clone()),c.rotation.x=f(h.rotation.x,c.rotation.x),c.rotation.y=f(h.rotation.y,c.rotation.y),c.rotation.z=f(h.rotation.z,c.rotation.z),this.playStartTime=(new Date).getTime(),this.updateNum=0,this.isSetHouseMaterial=!0,this.startChangeProgress=.3;this.hideSpots(!0,"cut"),this.moveAnimation=this.frameManager.animation({duration:t,update:function(t,o){.5<(o=1<o?1:o)&&"boolean"==typeof u&&(a.hotSpotsHide(u),a.entranceGroup&&(a.entranceGroup.visible=!u));var e=h.position.clone(),r=h.rotation.toVector3(),n=h.fov,i=a.moveEase(o,"easeInOut");c.fov&&(a.camera.fov=THREE.Math.lerp(n,c.fov,Math.pow(i,p.fov))),c.rotation&&(r=r.lerp(c.rotation.toVector3(),Math.pow(i,p.rotation)),a.camera.rotation.setFromVector3(r)),c.position&&(e=e.lerp(c.position,Math.pow(i,p.position)),a.camera.position.copy(e)),"toRoom"!==d&&"toHouse"!==d||!o||Object.values(a.houseMaterial).forEach(function(t){var e=1/(1-a.startChangeProgress)*(o-a.startChangeProgress),e=e<0?0:e;t.uniforms.p.value="toRoom"===d?e:1-e}),s(),a.updateNum++},final:function(e){setTimeout(function(){a.moveAnimation=null,a.isInAnimation=!1,e&&r&&r(),a.setHouseMaterial(),"3D"===o.floorplan_default&&a.hideSpots(!1,"fade"),"toRoom"===d&&(a.roomMoveTo=!1),window.Stats&&window.Stats.update();var t=(new Date).getTime()-a.playStartTime;a.logFn({FPS:Math.round(1e3*a.updateNum/t),MS:Math.round(t/a.updateNum)})},16)}},!0),this.isInAnimation=!0}},{key:"setUniforms",value:function(e,o){var r=this;Object.values(this.houseMaterial).forEach(function(t){r.setShaderMaterial(t,e,null,o)})}},{key:"moveEase",value:function(t,e){switch(e){case"easeInOut":return(t/=.5)<1?.5*Math.pow(t,2):-.5*((t-=2)*t-2);case"easeInOut1":return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2);case"easeInOut2":return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2);case"easeOut":return-(Math.pow(t-1,2)-1);case"easeIn":return Math.pow(t,2);default:return t}}},{key:"rotateTo",value:function(t,r){var n=this;this.hideSpots(!0,"cut");var i=new THREE.Spherical;i.setFromVector3(new THREE.Vector3(t.position.x,t.position.y,t.position.z)),i.radius=this.getStereoCameraPosition(t.fov).spherical.radius;var a=new THREE.Spherical;a.setFromVector3(this.camera.position.clone());var s=this.camera.fov,l=t.fov,e=i.theta>=a.theta,o=i.theta-a.theta,t=o/(2*Math.PI);o-=(t=0<t?Math.floor(t):-Math.floor(-t))*(2*Math.PI),e?o>1.5*Math.PI?a.theta=i.theta+2*Math.PI-o:a.theta=i.theta-o:o<-1.5*Math.PI?a.theta=i.theta-(2*Math.PI+o):a.theta=i.theta-o;o={duration:r.duration,update:function(t,e){var o=new THREE.Vector3;o.setFromSpherical({theta:THREE.Math.lerp(a.theta,i.theta,e),phi:THREE.Math.lerp(a.phi,i.phi,e),radius:THREE.Math.lerp(a.radius,i.radius,e)}),n.camera.position.copy(o),n.camera.lookAt(0,0,0),s!==l&&(n.camera.fov=THREE.Math.lerp(s,l,e),n.camera.updateProjectionMatrix()),n.listener.dispatch("cameraTransform","houseRender",{position:n.camera.position,rotation:n.camera.rotation,fov:n.camera.fov},r)},final:function(){n.hideSpots(!1,"fade"),n.setShowSpot()}};this.syncRotateAnimation?this.syncRotateAnimation.start(o):this.syncRotateAnimation=this.frameManager.animation(o,!0)}},{key:"rotationTo",value:function(t,e){var i=this,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1e3,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){},s=t.start,l=t.end,r=t.type,n=t.factor,h=void 0===n?{phi:1,theta:1,radius:1}:n;t.targetMaterial,(new Date).getTime();"2D"===r&&this.hideSpots(!0,"cut"),s=s||this.getStereoCameraPosition().spherical,this.rotationAnimation=this.frameManager.animation({duration:o,update:function(t,e){var o=i.moveEase(e),r=THREE.Math.lerp(s.phi,l.phi,Math.pow(o,h.phi)),n=THREE.Math.lerp(s.theta,l.theta,Math.pow(o,h.theta)),o=THREE.Math.lerp(s.radius,l.radius,Math.pow(o,h.radius));i.camera.position.copy((new THREE.Vector3).setFromSpherical(new THREE.Spherical(o,r,n))),i.controls.update(),a(e)},final:function(t){r&&i.hideSpots("2D"===r,"fade"),i.rotationAnimation=null,i.isInAnimation=!1,t&&e&&e()}},!0),this.isInAnimation=!0}},{key:"setModelMaterail",value:function(t,e){!function e(t,o){t&&("Mesh"!==t.type||t.children&&0!==t.children.length||(o?(t.defaultMaterial||(t.defaultMaterial=t.material),t.material=o):"dispose"===o?(t.material.texture.dispose(),t.material.dispose()):t.material=t.defaultMaterial),t.children&&t.children.forEach(function(t){return e(t,o)}))}(t,e)}},{key:"changeRenderNormal",value:function(){this.houseData.useModel?this.setModelMaterail(this.houseModel):this.root.children.forEach(function(t,e){t.children.forEach(function(t,e){t.children.forEach(function(t){("house-wall"===t.name||"house-doors"===t.name)&&(t.material=t.userData.defaultMaterial)})})})}},{key:"isDoorCanSee",value:function(t,e,o){var r=t.getWorldDirection(new THREE.Vector3),t=t.getWorldPosition(new THREE.Vector3),e=new THREE.Vector3(e.x-t.x,0,e.z-t.z),t=new THREE.Vector3(o.x-t.x,0,o.z-t.z),e=r.dot(e),t=r.dot(t);return 0<e&&0<t}},{key:"getMeshWithDoor",value:function(o){var r=this,t=null,n=[];return this.houseData.useModel?(t=this.houseModel.clone(),this.setModelMaterail(t,o)):(t=this.root.clone()).children.forEach(function(t,e){t.children.forEach(function(t,e){t.children.forEach(function(t){"house-wall"===t.name?t.material=o:"house-doors"===t.name&&(t.material=o,t.visible=!0,n.push(t))})})}),t.openDoor=function(e,o){n.forEach(function(t){t.visible=r.isDoorCanSee(t,e,o)})},t}},{key:"setHouseMaterial",value:function(i,a){var s=this,t=null,r=[];if(this.houseData.useModel){if(!(t=this.houseModel))return;this.setMoveModelMaterail(t,i)}else(t=this.root).children.forEach(function(t,e){t.children.forEach(function(n,t){n.children.forEach(function(t,e){var o,r;i?"house-wall"===t.name&&.1!==t.material.opacity&&(s.houseMaterial[n.ID+(e+=.05)]||(s.houseMaterial[n.ID+e]=zo()),(o=t.userData.defaultMaterial).polygonOffsetFactor,r=o.polygonOffsetUnits,o.alphaTest,o.transparent,s.houseMaterial[n.ID+e].polygonOffset=!0,s.houseMaterial[n.ID+e].polygonOffsetFactor=e,s.houseMaterial[n.ID+e].polygonOffsetUnits=r,s.houseMaterial[n.ID+e].transparent=!0,s.setShaderMaterial(s.houseMaterial[n.ID+e],i,{texture:t.material.map},a),t.material=s.houseMaterial[n.ID+e]):-1!==["house-wall","house-doors"].indexOf(t.name)&&(t.material=t.userData.defaultMaterial)})})});return i&&t&&t.openDoor&&(t.openDoor=function(e,o){r.forEach(function(t){t.visible=s.isDoorCanSee(t,e,o)})}),t}},{key:"setMoveModelMaterail",value:function(t,e,s){var l=this;!function e(t,o){if(t){if("Mesh"===t.type&&(!t.children||0===t.children.length))if(o){var r,n,i;t.defaultMaterial||(t.defaultMaterial=t.material),.1!==t.material.opacity&&(a=(void 0===(i=t.userData)?{}:i).roomId,l.houseMaterial[a+""+t.id]||(l.houseMaterial[a+""+t.id]=zo()),l.setShaderMaterial(l.houseMaterial[a+""+t.id],o,{texture:t.material.map},s),n=(r=t.material).polygonOffsetFactor,i=r.polygonOffsetUnits,r.alphaTest,r.transparent,0<=t.name.toLowerCase().indexOf("brush_")&&(l.houseMaterial[a+""+t.id].polygonOffset=!0,l.houseMaterial[a+""+t.id].polygonOffsetFactor=n,l.houseMaterial[a+""+t.id].polygonOffsetUnits=i),t.material=l.houseMaterial[a+""+t.id],t.defaultMaterial.map&&t.defaultMaterial.map.dispose(),t.defaultMaterial&&t.defaultMaterial.dispose())}else{if(!t.defaultMaterial)return;var a=(void 0===(a=t.userData)?{}:a).roomId;t.material=t.defaultMaterial,l.houseMaterial[a+""+t.id]&&l.houseMaterial[a+""+t.id].dispose()}t.children&&t.children.forEach(function(t){return e(t,o)})}}(t,e)}},{key:"setShaderMaterial",value:function(t,e,o){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;t.uniforms.panoramaMatrix.value=e.matrix,t.uniforms.panoramaCube.value=e.cubeTexture,t.uniforms.panoramaPos.value=e.pos,t.uniforms.p.value=r,console.log("p========>",r),o&&(t.uniforms.u_texture.value=o.texture)}},{key:"render",value:function(){var t,e,o,r,n=this.hotSpotsGroup,i=this.root;this.houseData.useModel?(t=i.visible,e=n.visible,o=(r=this.renderer).gammaFactor,r=r.gammaOutput,this.renderer.gammaFactor=2.2,this.renderer.gammaOutput=!0,n.visible=!1,To()(Mo()(a.prototype),"render",this).call(this),this.renderer.gammaFactor=o,this.renderer.gammaOutput=r,n.visible=e,To()(Mo()(a.prototype),"render",this).call(this),i.visible=t):To()(Mo()(a.prototype),"render",this).call(this)}},{key:"update",value:function(t){this.isInAnimation||this.controls.update(),this.render()}},{key:"release",value:function(){To()(Mo()(a.prototype),"release",this).call(this,this.root),To()(Mo()(a.prototype),"release",this).call(this,this.hotSpotsGroup),this.entranceGroup&&To()(Mo()(a.prototype),"release",this).call(this,this.entranceGroup)}}]),a}(a);u("eLYw");var Yo=function(t){function v(e,t){var o,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(t&&(e.innerHTML="",o=function(t,e){null==e||("string"==typeof e?t.innerHTML=e:e instanceof window.Element&&t.appendChild(e))},t instanceof Array?t.forEach(function(t){o(e,t)}):o(e,t)),r)for(var i in r)e.setAttribute(i,r[i]);if(n)for(var a in n)e.addEventListener(a,n[a]);return e}function r(t,e){t&&t.classList&&t.classList.add(e)}function n(t,e){t&&t.classList&&t.classList.remove(e)}function i(t,e){return t&&t.classList&&t.classList.contains(e)}function a(t,e,o){((o=void 0===o?!i(t,e):o)?r:n)(t,e)}var y=document.querySelector("#".concat(t)),S=null;return{root:y,setElement:v,createElement:function(t,e,o,r){t=document.createElement(t);return v(t,e,o,r),t},addClass:r,removeClass:n,hasClass:i,toggleClass:a,setClass:function(t,e){for(var o in e){var r=e[o];a(t,o,r)}},drag:function(n){function r(t){return[(t=t.touches?t.touches[0]:t).clientX,t.clientY]}function t(t){l()||function(t){for(var e,o=!1,r=t.target;r&&r!==n;r=r.parentElement)if(""===(e=r).getAttribute("disdrag")||"true"===e.getAttribute("disdrag")){o=!0;break}return o}(t)||(n.isPointDown||(c=n.getAttribute("style")),u=r(t),h=window.getComputedStyle(n).transform,n.style.userSelect="none",n.style.transition="none",n.isPointDown=!0,document.addEventListener("visibilitychange",o))}function e(t){var e,o;null===u||S&&S!==n||(p=!0,t.preventDefault(),d=r(t),null===f&&(f=Math.abs(d[1]-u[1])>Math.abs(d[0]-u[0])),m=[d[0]-u[0],d[1]-u[1]],o=[i[0],i[1]],"function"==typeof i[0]&&(o[0]=i[0](t,u,d,f,function(t){S=t})),"function"==typeof i[1]&&(o[1]=i[1](t,u,d,f,function(t){S=t})),null!==o[0]&&(t=d[0]-u[0],Math.abs(t)>o[0]&&(d[0]=u[0]+t/Math.abs(t)*o[0])),null!==o[1]&&(e=d[1]-u[1],Math.abs(u[1]-d[1])>o[1]&&(d[1]=u[1]+e/Math.abs(e)*o[1])),e=d[0]-u[0],o=d[1]-u[1],o=0==e&&0==o?"":"translate(".concat(e,"px, ").concat(o,"px)"),n.style.transform=("none"===h?"":h)+" "+o)}function o(){document.hidden&&g()}var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[null,null],a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:y,l=4<arguments.length&&void 0!==arguments[4]?arguments[4]:function(){return!1},h=null,c=null,u=null,p=!1,d=null,f=null,m=null,g=function(t){var e;u&&(n.setAttribute("style",c),p&&(e=[d[0]-u[0],d[1]-u[1]],p=!1,a(e,f,m),f=null),S=u=null,document.removeEventListener("visibilitychange",o),n.isPointDown=!1)};v(n,null,null,{mousedown:t,touchstart:t}),v(s,null,null,{mousemove:e,touchmove:e,mouseup:g,touchend:g})}}},n=u("ZDp4"),Ko=u.n(n),i=function(){function e(t){bo()(this,e),this.domTool=t.domTool,this.listener=t.listener,this.collectManager=t.collectManager,this.jsonLoader=t.jsonLoader,this.jsLoader=t.jsLoader,this.RENDERS=t.RENDERS,this.DOMS=t.DOMS,this.PANELS=t.PANELS,this.raycasterManager=t.raycasterManager,this.config=t.config,this.map={},this.mapStatus={}}return Eo()(e,[{key:"setAllDisabled",value:function(t){this.domTool.root.style.pointerEvents=t?"none":""}},{key:"setUnabled",value:function(t){var e,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};for(e in this.map){var r=this.map[e],n=t;!!o[e]&&(n=!n),"function"==typeof r.unable?r.unable(n,"1.0"):r instanceof Element&&(r.style.pointerEvents=n?"none":"")}}},{key:"saveMapStatus",value:function(t){var o=this;t.forEach(function(t){var e;o.map[t]&&(e="none"!==o.getDom(o.map[t]).style.display,o.mapStatus[t]=e)})}},{key:"getMapStatus",value:function(){}},{key:"getDom",value:function(t){return t.root||t}}]),e}();u("3O7/");function qo(e,t){var o,r=Object.keys(e);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(e),t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)),r}function Zo(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?qo(Object(o),!0).forEach(function(t){S()(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):qo(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function Jo(t,e){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function(t,e){if(t){if("string"==typeof t)return Qo(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(o="Object"===o&&t.constructor?t.constructor.name:o)||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Qo(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i=!0,a=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return i=t.done,t},e:function(t){a=!0,n=t},f:function(){try{i||null==o.return||o.return()}finally{if(a)throw n}}}}function Qo(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,r=new Array(e);o<e;o++)r[o]=t[o];return r}function $o(o){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=Mo()(o);return e=r?(t=Mo()(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),Po()(this,e)}}var tr={InnerRam3D:{name:"innerHotSpot",type:"roam"},panorama3D:{name:"hotSpot",type:"roam"},floorPlan:{name:"floorPlanRender",type:"cut"},stereo:{name:"houseRender",type:"cut"},thumbnail:{name:"hotSpotDom",type:"fade"}},er=function(t){xo()(y,t);var r=$o(y);function y(t,e){var o;return bo()(this,y),(o=r.call(this,t)).AppParams=t.AppParams,o.progress=t.progressManager.buildProgress("roomModule",["readyChangeId","startChangeId","changeIdProgress","changedId","stopChangeId"],["toDoWaitingChangeId","toDoWaitedChangeId"]),o.roomConfig=t.roomConfig,o.logFn=t.logFn,o.ToolbarData=t.ToolbarData,o.PanoramaParams=t.PanoramaParams,o.currentSpotId=null,o.moduleConfig=e,o.guideMapShow=!0,o.isIn=!1,o.currentSpotDetail=null,o.floorIndex=null,o.floorId=null,o.dataIdQueue={},o.CommonParams=t.CommonParams,o.map.render=o.RENDERS.room.renderTool.renderer.domElement,o.canvasStepper=t.canvasStepper,o}return Eo()(y,[{key:"init",value:function(){return this.initListener(),this.initMap(),this.setGuideMapShow(),this.initApi()}},{key:"loadData",value:function(t){var e,o=this,r="3D"===t.type;this.initStatus(r),r?(r=void 0===this.houseData,this.houseData=t,r&&this.initFirst(),this.idleLoading=!0,(e=this.RENDERS.room).houseData=t,e.camera.fov=t.cameraFov,e.cameraStopTime=0,e.isShowGuide=!1,this.canvasStepper.add([function(t){e.renderAllRoomHotSpots(),t()},function(){}]),window.vrChatConnectorConfig||(window.vrChatConnectorConfig={}),window.vrChatConnectorConfig&&(window.vrChatConnectorConfig.syncFrameCb=function(t){t=t.Rotation;var e=o.RENDERS.room.camera;e.rotation.x=THREE.Math.degToRad(t.x),e.rotation.y=THREE.Math.degToRad(t.y),e.updateMatrix(),listener.dispatch("cameraTransform","roomRender",{position:e.position,rotation:e.rotation,fov:e.fov},{}),setTimeout(function(){window.vrChatConnectorApi.outputNativeLog((new Date).getTime()),window.vrChatConnectorApi.syncFrame(),listener.dispatch("autoPlayStartTime","roomRender")},5)})):this.houseData=null}},{key:"update",value:function(){var t,e,o,r,n,i,a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.moduleConfig;this.houseData&&(void 0===this.moduleConfig.guide&&(a.guide=!1===a.IS_SHOW_FLOORPLAN?null:"3D"===this.config.MINI_STEREO_FLOORPLAN_DEFAULT?"model":"plane"),this.DOMS.guideMap,t=(i=this.RENDERS).room,i.house,i.floorPlan,this.isIn&&this.setGuide(!1),this.moduleConfig=Object.assign(this.moduleConfig,a),this.setVisibleHotSpot(),o=(e=this.moduleConfig).plate,r=e.fov,n=e.fovLimit,i=e.landscapeFov,a=e.landscapeFovLimit,e.guide,t.setPlate(o),t.setFov({fov:r,fovLimit:n,landscapeFov:i,landscapeFovLimit:a}),this.CommonParams.vrType,this.isIn&&this.setGuide(!0))}},{key:"destroy",value:function(){}},{key:"initFirst",value:function(){var e=this,o=this.listener,r=this.config,n=this.logFn,i={firstScreen:{enter:function(){o.dispatch("toDoSetDataId","roomModule",null,{type:"cut",from:"firstRender"})},leave:function(){o.removeWithMap(i),o.dispatch("toDoRenderIn","roomModule",null,null);var t=r.loadStartTime,e=r.preloadInfo,e=void 0===e?{}:e;n({firstLoadTime:(new Date).getTime()-t,isPreload:!!e.preloadId})}},roomModule:{startChangeId:function(t){t=t.sum;o.dispatch("toDoWaitingLoad","firstScreen",t,e)},changeIdProgress:function(t){t=t.stepNum;o.dispatch("toDoWaitedLoad","firstScreen",t,e)}}};o.addWithMap(i)}},{key:"initListener",value:function(){var A=this,_=this.listener,F=this.progress,t=this.roomConfig,e=this.PanoramaParams,o=this.AppParams,O=this.logFn,L=t.THUMBNAIL_ITEM_CALLBACK,r=e.zoomMinFov,n=o.isMobile,o=this.RENDERS,H=o.room,B=o.house,V=o.floorPlan,o=this.config,N=o.CLICK_CB,i=o.MINI_STEREO_FLOORPLAN_DEFAULT,z=!0,U=!0;_.add("toDoSetDataId","roomModule",function(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{type:"cut",from:null,isSync:!1,isBestRotation:!1},o=A.houseData,e=A.RENDERS,r=A.roomConfig,i=t.type,a=t.from,s=t.origin,l=t.cb,h=t.isSync,c=t.isBestRotation,u=t.clickType,p=A.currentSpotDetail?A.currentSpotDetail.ID:null,d=e.room.textureLoader,f=o.isContinuousRoaming,e=r.IS_ROAM_LAZYLOADING,m=void 0===e||e;if((A.isContinuousRoaming=f,A.IS_ROAM_LAZYLOADING=m,A.changeRoomfrom=a,d.clientGPU=0,n=s&&s.id?s.id:n)&&o.spots.filter(function(t){return t.ID===n})[0].isHide)return;s&&s.from&&(a=tr[s.from].name,i=tr[s.from].type);s=A.isdataId();if(Ko()(s),"roam"===i&&f&&!1!==m){if(n&&(A.dataIdQueue[n]={id:n,typeFrom:t}),A.roaming)return;A.roaming=!0}A.startSetDataIdTime=(new Date).getTime(),A.progress.isCompleted()||A.progress.stop(),A.removeChangeListenerMap&&A.removeChangeListenerMap();function g(e){if(e){var t=o.spots.filter(function(t){return t.ID===e})[0];return t&&t.isHide}}t=function t(e){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return g(e[o].ID)?t(e,o+1):e[o].ID};n=n||(!o.defaultSpotId||g(o.defaultSpotId)?t(o.spots):o.defaultSpotId),F.spotId=n;var v=o.spots.filter(function(t){return t.ID===n})[0];L&&L(v);var y,S=o.floors,b=o.floorRooms,E=o.roomSpots,w=A.RENDERS.house.isGuideFullScreen;for(y in b){var T,x=Jo(b[y]);try{for(x.s();!(T=x.n()).done;)E[T.value].includes(n)&&(A.floorId&&y!==A.floorId&&!w&&("3D"===A.config.MINI_STEREO_FLOORPLAN_DEFAULT?_.dispatch("toDoSetFloor","houseModule",{id:y,isSync:h}):_.dispatch("toDoSetGuideMapFloor","roomModule",{id:y,isSync:h})),A.floorId=y)}catch(t){x.e(t)}finally{x.f()}}for(var P=0;P<S.length;P++)S[P].ID===A.floorId&&(A.floorIndex=P);var M={roomRender:{imgsLoading:function(t){var e=t.loading,t=(t.sum,t.ID);0===e||String(t)!==String(n)||F.run(1)}}};A.removeChangeListenerMap=function(){_.removeWithMap(M),A.removeChangeListenerMap=null},F.onComplete=function(){A.removeChangeListenerMap&&A.removeChangeListenerMap();var t,e=null;for(t in tr)tr[t].name===a&&(e=t);var o={from:e,id:v.ID};_.dispatch("setedDataId","roomModule",v.ID,{from:a,lastId:p,type:i,origin:o,isSync:h,clickType:u,isFirst:z,isInit:U}),U=z=!1,F.spotId="",_.dispatch("isPlay","roomRender",!0)},_.addWithMap(M),A.roam.animation&&A.roam.animation.stop(),H.animation&&H.animation.stop();t=r.firstLoading||{},r=t.ID,t=t.PanoImagesUrl,r&&v.ID,r=function t(e){var o,r=e.step,e=e.sum;r===e-1&&0<e&&(r=H.start,e=H.end,H.hideHotSpots(),f&&!1!==m&&"roam"===i&&H.renderRoomHotSpot(r&&r.spot,e.spot),o=function(){var t,e;v.ID===F.spotId&&(A.currentSpotDetail=v,"hotSpotDom"!=a&&"firstRender"!=a&&!c||H.setPano2BestViewAfterLoading(v),"floorPlanRender"!=a&&"houseRender"!=a||(!1!==A.roomConfig.IS_BEST_VIEW_ANIMATION?H.setPano2BestViewAfterLoading(v):H.setCameraRotation(B.camera.rotation.clone())),t=(e=(new Date).getTime())-A.playStartTime,t="roam"===i?{changeRoomId:v.RoomDetail.ID,spotId:n,changeRoomType:a,FPS:Math.round(1e3*A.updateNum/t),MS:Math.round(t/A.updateNum),clickInnerHotSpotLoadedTime:e-A.startSetDataIdTime}:{changeRoomType:a},O(t),H.release("start"),F.run(1),V.changeCurrent(v),!1!==m&&(A.roaming=!1,"roam"===i?(delete A.dataIdQueue[n],t=(e=A.isdataId()).isEmpty,e=e.idArr,t?H.ready(v,"3D",v.PanoImagesUrl,!0).then(function(t){v.ID===n&&H.setShaderMaterial(H.end)},function(t){console.log("图片加载异常111111",t)}):(e=A.dataIdQueue[e[0]],_.dispatch("toDoSetDataId","roomModule",e.id,e.typeFrom))):A.dataIdQueue={}))},A.roam.animation&&A.roam.animation.stop(),H.animation&&H.animation.stop(),"cut"===i?"floorPlanRender"===a||"houseRender"==a?H.cut(o):window.setTimeout(function(){return H.cut(o)},0):"roam"===i?A.roam(o):"fade"===i&&H.fade(null,o,A.startSetDataIdTime),_.remove("changeIdProgress","roomModule",t))};_.add("changeIdProgress","roomModule",r);var D,C,k,R,I;A.currentSpotDetail=v,console.log("afterToDoSetDataId"),l&&l(v),_.add("toDoSetDataId","roomModule",function(){_.dispatch("isPlay","roomRender",!1),F.start(7),H.ready(v,"3D","roam"===i&&m?null:v.PanoImagesUrl).then(function(t){v.ID,F.spotId},function(t){console.log("图片加载异常111111",t),A.listener.dispatch("imgLoadError","firstScreen",t)})})(),"hotSpot"===a&&N&&N({type:"click_visible_hotspot"}),console.log("资源加载完了========》"),_.add("readyChangeId","roomModule",function(){var t;B.modelLoaded||"roam"!==i||(_.dispatch("toDoWaitingChangeId","roomModule",1),t=function t(){_.dispatch("toDoWaitedChangeId","roomModule",1),_.remove("modelLoaded","houseRender",t)},_.add("modelLoaded","houseRender",t))})(),A.idleLoading&&(t=A.houseData,r=A.RENDERS,l=A.roomConfig.IS_ROAM_LAZYLOADING,D=void 0===l||l,C=t.spots,k=r.room.textureLoader,R=null,I=Date.now(),window.setTimeout(function(){C.forEach(function(t,e){var o=t.PanoImagesUrl,t=t.PanoBlurImagesUrl,t=!1!==D?[{url:t,onStart:function(){0===e&&(R=Date.now())},onLoaded:function(){}}]:[];t.push({url:o,onStart:function(){0===e&&(R=R||Date.now())},onLoaded:function(){var t;e===C.length-1&&(t=Date.now()-R,console.log("startTime: ",t,Date.now()-I),A.logFn({preLoadTime:t}))}}),k.idleLoad(t)})},1e3),A.idleLoading=!1)}),_.add("toDoGetDataIdQueue","roomModule",function(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){})(A.isdataId())});function a(t){var e=t.rotation,t=t.position;B.setStereoCameraPosition({theta:e.y,coefficient:1}),V.changeCurrentSmall({x:t.x,y:t.y,z:-t.z})}function s(){H.setViewport()}function l(t){(A.roomConfig||{}).IS_SHOW_FLOORPLAN,t.preventDefault();var e=t.wheelDeltaY,o=H.controls.maxFovLimit,t=H.controls.minFovLimit,e=H.camera.fov+-.01*e;o<e&&h?e=o:(e<t&&(e=t),_.dispatch("toDoCameraTransform","roomRender",{fov:e=!n&&e<r?r:e}))}var h=!0;_.add("toDoSetWheelToHouse","roomModule",function(t){h=t});function c(){var t=A.moduleConfig.onClickInBackgroundForClear;(void 0===t?function(t,e){return t&&!e}:t)(A.AppParams.isMobile,Object(Do.o)())&&(p=!p,_.dispatch("toDoClearRoom","roomModule",p,A))}function u(t){var o=A.moduleConfig,r=A.ToolbarData.configMap,n={},i=Object(Do.o)()?o:o.inLandscape||{};d(t),Object.keys(r).forEach(function(t){var e=r[t];"boolean"==typeof i[e.configName]?(n[t]=i[e.configName],"decorationStyleList"===e.configName&&(n[t]=i[e.configName]&&o.decorationStyleList&&1<o.decorationStyleList.length)):Array.isArray(i[e.configName])&&(n[t]=!(i[e.configName].length<e.lenghtMin))}),console.log(2222222222,n),A.listener.dispatch("resetToolbar","toolbar",n)}var p=!1,d=function(t){var e=t.isPortrait;p=!1,_.dispatch("toDoClearRoom","roomModule",p,A);var o=A.moduleConfig,r=A.DOMS,n=null,i=null,a=null,s=null,l=null,h=null,c=o||{};n=c.IS_SHOW_FLOORPLAN,i=c.thumbnail,a=c.plate;t=c.IS_SHOW_VR_BTN;s=void 0===t||t,l=c.decorationStyleList;c=c.isShowHotSpotList;h=void 0===c||c,!e&&A.AppParams.isMobile&&(n=void 0===(o=(u=o.inLandscape||{}).IS_SHOW_FLOORPLAN)?n:o,i=void 0===(o=u.thumbnail)?i:o,a=void 0===(o=u.plate)?a:o,s=void 0===(o=u.IS_SHOW_VR_BTN)?s:o,l=void 0===(s=u.decorationStyleList)?l:s,h=void 0===(u=u.isShowHotSpotList)?h:u);var u;Object.assign({},A.normalStatus,A.mapStatus);null!==n&&A.guideMapShow&&(r.guideMap.hide(!(n=void 0===n?!0:n)),u=r.guideMap.getBoundingClientRect(),(n="3D"===A.config.MINI_STEREO_FLOORPLAN_DEFAULT?B:V).renderOut(),r.guideMap.isHide||(n.changeRenderer(r.guideMap.rendererKey),n.setViewport(0,0,u.width,u.height),n.renderIn())),null!==a&&("object"===Fo()(a)?A.RENDERS.room.plate.setVisible(a.visible):A.RENDERS.room.plate.setVisible(a)),_.dispatch("toDoUpdatePullHead","pullHead",{thumbnail:!i,spot:!h})};_.add("toDoRenderIn","roomModule",function(){console.log("toDoRenderIn------------"),s();A.houseData;var t=A.roomConfig,e=A.DOMS,o=A.RENDERS,o=(o.floorPlan,o.house,o.room);e.guideMap,t.isShowFeedback;A.isIn=!0,o.changeRenderer(),o.renderIn(1);Object.assign({},A.normalStatus,A.mapStatus);A.setGuide(!0),A.raycasterManager.set(o.camera,o.scene,o.viewport),d({isPortrait:Object(Do.o)()}),_.add("resize","window",s),_.add("cameraTransform","roomRender",a),_.add("cameraAutoTransform","roomRender",a),_.add("onPointClick","roomRender",c),_.add("orientationChange","window",u),o.renderTool.renderer.domElement.addEventListener("wheel",l)}),_.add("toDoRenderOut","roomModule",function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};A.isIn&&(A.isIn=!1,To()(Mo()(y.prototype),"saveMapStatus",A).call(A,A.mapArr),A.setGuide(!1),A.raycasterManager.set(),_.remove("resize","window",s),_.remove("cameraTransform","roomRender",a),_.remove("cameraAutoTransform","roomRender",a),_.remove("onPointClick","roomRender",c),_.remove("orientationChange","window",u),t=t.from,H.renderOut(),"toHouse"!==t&&H.release(),H.renderTool.renderer.domElement.removeEventListener("wheel",l))}),_.add("toDoClearRoom","roomModule",function(){var e,t,o=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];A.isIn&&(t=A.moduleConfig,e=t.IS_SHOW_FLOORPLAN,t=t.inLandscape,["guideMap"].forEach(function(t){"guideMap"!==t?A.DOMS[t].hide(o):!1!==e&&A.DOMS.guideMap.hide(o)}),p=o)}),_.dispatch("toDoAddCall","statusPipe",{key:"clearRoom",call:function(){_.dispatch("toDoClearRoom","roomModule",!(0<arguments.length&&void 0!==arguments[0])||arguments[0],null)}}),_.add("toDoChangeModule","module",function(t,e){var o=t.from,r=t.to,n=e.origin,t=e.type,e=e.isSync;("roomModule"===o&&"houseModule"===r||2===n)&&(B.setHouseOpacity(A.floorId),B.setHouseMaterial(H.end,1),_.dispatch("toDoRenderOut","roomModule",{from:"toHouse"},A),_.dispatch("toDoRenderIn","houseModule",{type:t,ID:A.currentSpotDetail.ID},{isSync:e}),t||_.dispatch("change-current-fullscreen","syncToVrChat","3D"!==A.config.MINI_STEREO_FLOORPLAN_DEFAULT?"2":"1"))}),_.add("toDoToHouse","roomModule",function(t,e){e=e.isSync;_.dispatch("toDoChangeModule","module",{from:"roomModule",to:"houseModule"},{origin:2,type:t,isSync:void 0!==e&&e})}),_.add("toDoToRoom","roomModule",function(){V.renderOut(),B.renderOut(),_.dispatch("toDoRenderIn","roomModule",null,A),_.dispatch("isToRoom","roomModule",!1)}),_.add("toDoReset","module",function(t,e){console.log(t,e,"houseData, starter=====>"),z=!0,A.reset(t,e)}),_.add("resetError","system",function(t){A.reset(A.houseData)});var f=DOMS.guideMap,m=B.houseData.floors;_.add("toDoSetGuideMapFloor","roomModule",function(t){console.log("设置2d户型图floor=====",A.floorId);var e=t||{},t=e.id,t=void 0===t?A.floorId:t;e.index;V.renderFloorPlan(t,!1),"3D"===i&&(B.renderOut(),A.guideMapShow&&(t=A.DOMS.guideMap.getBoundingClientRect(),V.changeRenderer(A.DOMS.guideMap.rendererKey),V.setViewport(0,0,t.width,t.height),V.renderOut(),V.renderIn()))}),_.add("toDoIsShowHotspotSmall","roomModule",function(t){V.setVisible("current-hotspot-small",t)}),_.add("toDoIsShowInfo","roomModule",function(){V.setVisible("floor-info-group-small",0<arguments.length&&void 0!==arguments[0]&&arguments[0])}),_.add("renderGuideMapToHouse","roomModule",function(){V.renderOut(),B.renderIn()}),_.add("toDoIsShowInfo","roomModule",function(){V.setVisible("floor-info-group-small",0<arguments.length&&void 0!==arguments[0]&&arguments[0])}),_.add("toDoResetFloorPlan","roomModule",function(t){var e=t.w,t=t.h;V.setViewport(0,0,e,t)}),_.add("toDoCreateFloorDom","roomModule",function(t){var e=t=t||{},t=e.floorsArr,e=e.floorId,e=void 0===e?m[0].ID:e;f.createFloorDom(void 0===t?m:t,e)}),_.add("toDoSetFloorActiveName","roomModule",function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:m[0].ID;f.setFloorActiveName(t)}),_.add("toDoSetUnabled","roomModule",function(t,e){A.setUnabled(t,e)}),_.add("getCurrentHotSpot","roomModule",function(t){t&&t(A.currentSpotDetail)});function g(t,e){v(t,e)}var v=function(t,e){};_.add("startLoad","firstScreen",function(){return g(function(t){_.dispatch("toDoWaitingLoad","firstScreen",t,A)},function(t){_.dispatch("toDoWaitedLoad","firstScreen",t,A)})}),_.add("startReset","system",function(){return g(function(t){_.dispatch("toDoWaitingReset","system",t,A)},function(t){_.dispatch("toDoWaitedReset","system",t,A)})})}},{key:"initMap",value:function(){var e=this;this.mapArr=["guideMap"],this.normalStatus={},this.mapArr.forEach(function(t){e.normalStatus[t]=!0})}},{key:"setGuideMapShow",value:function(){var t=this.roomConfig.IS_SHOW_FLOORPLAN;this.AppParams.isMobile||(this.guideMapShow=!1!==t)}},{key:"initMenu",value:function(){this.PANELS.menu;var t=this.DOMS;t.pullHead,t.hotSpot,t.guideMap,t.toolbar,t.houseList,t.feedback,t.thumbnail,this.roomConfig.IS_SHOW_FLOORPLAN}},{key:"initApi",value:function(){function e(t,e){return r.set(t,e),e}function o(t){var e=r.get(t);return r.delete(t),e}var i=this,r=new Map,a=!1,t={system:{readyReset:function(){a=!0},reseted:function(){a=!1}},firstScreen:{enter:function(){a=!0},leave:function(){a=!1}}};return listener.addWithMap(t),{renderIn:function(){listener.dispatch("toDoRenderIn","roomModule",null,"api")},renderOut:function(){listener.dispatch("toDoRenderOut","roomModule",null,"api")},update:function(t){i.update(t)},setUnabled:function(t){i.setUnabled(t)},changeSpot:function(t,e,o){listener.dispatch("toDoSetDataId","roomModule",t,Zo(Zo({type:e},o),{},{from:"api",origin:{from:{fade:"thumbnail",cut:"floorPlan",roam:"InnerRam3D"}[e]||"thumbnail",id:t}}))},getCurrentSpot:function(){return i.currentSpotDetail},setFov:function(t){listener.dispatch("toDoCameraTransform","roomRender",{fov:t},{from:"api"})},getFov:function(){return RENDERS.room.camera.fov},addCameraChangeListener:function(n){function t(t){var e=t.fov,o=(r=t.rotation).x,t=r.y,r=r.z;i.isIn&&!a&&n({fov:e,rotation:{x:o,y:t,z:r}})}r.set(n,t),i.listener.add("cameraTransform","roomRender",t)},removeCameraChangeListener:function(t){var e=r.get(t);r.delete(t),i.listener.remove("cameraTransform","roomRender",e)},addGuideClickListener:function(t){function e(){t()}r.set(t,e),i.listener.add("click","guidemap",e)},removeGuideClickListener:function(t){var e=r.get(t);r.delete(t),i.listener.remove("click","guidemap",e)},toHouse:function(t){var e,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};i.isIn&&(e=function t(){listener.remove("switchTypeEnd","houseModule",t),o()},listener.add("switchTypeEnd","houseModule",e),listener.dispatch("toDoToHouse","roomModule",null,"api"))},toVr:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};i.isIn&&(listener.dispatch("toDoVrMode","vrModule",null,"api"),e())},addChangedSpotListener:function(t){i.listener.add("setedDataId","roomModule",e(t,function(){a||t()}))},removeChangedSpotListener:function(t){i.listener.remove("setedDataId","roomModule",o(t))},addChangeSpotProgressListener:function(o){var t=e(o,function(t){var e=t.step,t=t.sum;a||o({sum:t,num:void 0===e?0:e})});i.listener.add("startChangeId","roomModule",t),i.listener.add("changeIdProgress","roomModule",t)},removeChangeSpotProgressListener:function(t){t=o(t);i.listener.remove("startChangeId","roomModule",t),i.listener.remove("changeIdProgress","roomModule",t)},addStopChangeSpotListener:function(t){i.listener.add("stopChangeId","roomModule",e(t,function(){a||t()}))},removeStopChangeSpotListener:function(t){i.listener.remove("stopChangeId","roomModule",o(t))},toDoIsClick:function(t){i.listener.dispatch("toDoIsClick","roomModule",t)},addRoomRenderInListener:function(t,e){i.listener.add("toDoAnimateToRoom","houseModule",t),e&&i.listener.add("toDoRenderIn","roomModule",e)},removeRoomRenderInListener:function(t,e){i.listener.remove("toDoAnimateToRoom","houseModule",t),e&&i.listener.remove("toDoRenderIn","roomModule",e)},setRoomViewport:function(){i.RENDERS.room.setViewport(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,2<arguments.length?arguments[2]:void 0,3<arguments.length?arguments[3]:void 0)}}}},{key:"initStatus",value:function(t){var l=this;t?listener.dispatch("toDoRegister","statusPipe",{key:"roomModule",getter:function(){var t=l.RENDERS.room,e=t.camera,o=t.houseData,r=e.position,n=e.rotation,i=e.fov,a=e.theta,s=l.isIn,t=l.floorIndex,e=l.floorId;return{spotId:l.currentSpotDetail.ID,camera:{position:{x:r.x,y:r.y,z:r.z},rotation:{x:n.x,y:n.y,z:n.z},fov:i,theta:a,isIn:s},floor:{index:t,id:e},type:o.type}},setter:function(t,e){var o=t.spotId,r=t.camera,n=r.position,i=r.rotation,t=r.fov,r=(r.theta,l.RENDERS.room),e=e.isSync,e=void 0===e||e;r.camera.position.set(n.x,n.y,n.z),r.camera.rotation.set(i.x,i.y,i.z),r.camera.fov=t,r.camera.updateMatrix(),o!==l.currentSpotDetail.ID&&listener.dispatch("toDoSetDataId","roomModule",o,{type:"cut",from:"roomModule",isSync:e})}}):listener.dispatch("toDoCancel","statusPipe",{key:"roomModule"})}},{key:"resetMenu",value:function(){var t=this.AppParams,e=t.isPortrait,o=t.isMobile,t=null;t=this.moduleConfig.IS_SHOW_FLOORPLAN,!e()&&o&&(t=void 0===(o=(this.moduleConfig.inLandscape||{}).IS_SHOW_FLOORPLAN)?t:o),this.guideMapShow&&this.DOMS.guideMap.hide(!1===t)}},{key:"setVisibleHotSpot",value:function(){this.DOMS.VisibleHotSpotDom.resetData(this.houseData)}},{key:"setGuide",value:function(t){var e=this.DOMS,o=this.RENDERS,r=e.guideMap,n=o.house,i=o.floorPlan,e=o.room,o=this.moduleConfig.guide;o?(o="model"===o?n:i,t?(t=!1===this.moduleConfig.IS_SHOW_FLOORPLAN,r.hide(t),r.resizeMap(),n.setStereoCameraPosition({theta:e.camera.rotation.y,coefficient:1}),n.hotSpotsHide(!0),n.setHouseOpacity(this.floorId),i.buildFloorPlan(this.floorId),i=r.getBoundingClientRect(),o.changeRenderer(r.rendererKey),o.setViewport(0,0,i.width,i.height),o.renderIn()):(o.renderOut(),r.hide(!0))):r.hide(!0)}},{key:"setUnabled",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};To()(Mo()(y.prototype),"setUnabled",this).call(this,t,e)}},{key:"isInAnimation",value:function(){var t=this.RENDERS,e=t.house,t=t.room;return e.isRoam||t.isInAnimation}},{key:"isdataId",value:function(){var t=Object.keys(this.dataIdQueue);return{idArr:t,isEmpty:0===t.length,len:t.length}}},{key:"roam",value:function(e){var a=this,t=this.RENDERS,s=t.room,o=t.house,r=s.frameManager,l=s.start,h=s.end,n=s.camera;console.log("roam",l,h,n.position,s),this.roamMesh||(this.roamMesh=o.getMeshWithDoor(s.shaderMaterial),s.scene.add(this.roamMesh));function i(t){t?(a.roamMesh.visible=!0,a.roamMesh.openDoor(l.pos,h.pos)):a.roamMesh.visible=!1}i(!0);var t=(new THREE.Vector3).subVectors(h.pos,n.position).length(),c=n.rotation.clone(),u=function(){var t=h.pos,e=t.x,o=t.y,t=t.z;n.lookAt(new THREE.Vector3(e,o,t)),n.updateMatrix();t=n.rotation.clone();function r(t,e){for(;e-t>Math.PI;)e-=2*Math.PI;for(;e-t<-Math.PI;)e+=2*Math.PI;return e}return n.rotation.copy(c),n.updateMatrix(),t.x=r(c.x,t.x),t.y=r(c.y,t.y),t.z=r(c.z,t.z),t}();this.playStartTime=(new Date).getTime(),this.updateNum=0,s.setShaderMaterial(s.end,s.start),s.shaderMaterial.uniforms.p.value=0,s.render();t=2e3<(t=1e3*Math.pow(t/100,.5))?2e3:0===t?1e3:t;this.roam.animation=r.animation({duration:t-300,update:function(t,e){var o=null,o=Math.atan(3.4*(e-.25))/1.9+.38;s.shaderMaterial.uniforms.p.value=o=1<o?1:o;var r=new THREE.Euler(THREE.Math.lerp(c.x,u.x,o),THREE.Math.lerp(c.y,u.y,o),THREE.Math.lerp(c.z,u.z,o),c.order),n=r.clone();n.x=n.z=0,r.x=c.x,r.z=c.z;var i=h.pos.y-l.pos.y,e=new THREE.Vector3(h.pos.x-l.pos.x,0,h.pos.z-l.pos.z).length(),e=new THREE.Vector3(l.pos.x,l.pos.y,l.pos.z).add(new THREE.Vector3(0,0,-1).applyEuler(n).multiplyScalar(e*o));e.y+=i*o,a.listener.dispatch("toDoCameraTransform","roomRender",{position:e,rotation:r},{from:"spotRoam"}),a.updateNum++},final:function(t){if(i(!1),a.roam.animation=null,o.isRoam=!1,1<a.isdataId().len&&a.isContinuousRoaming&&!1!==a.IS_ROAM_LAZYLOADING)e();else{if(!t)return;s.cut(t?e:function(){})}window.Stats&&window.Stats.update()}}),o.isRoam=!0,window.setTimeout(function(){window.setTimeout(function(){a.roam&&a.roam.animation&&a.roam.animation.start(),a.t=(new Date).getTime()},0)},0)}},{key:"reset",value:function(t,e){var o=this.RENDERS,r=o.room,o=o.house;this.roamMesh&&(o.release(this.roamMesh),this.roamMesh=null),r.removeAllHotSpots(),"3D"===t.type&&(this.loadData(t),this.update())}}]),y}(i);function or(e,t){var o,r=Object.keys(e);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(e),t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)),r}function rr(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?or(Object(o),!0).forEach(function(t){S()(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):or(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function nr(t,e){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function(t,e){if(t){if("string"==typeof t)return ir(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(o="Object"===o&&t.constructor?t.constructor.name:o)||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?ir(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i=!0,a=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return i=t.done,t},e:function(t){a=!0,n=t},f:function(){try{i||null==o.return||o.return()}finally{if(a)throw n}}}}function ir(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,r=new Array(e);o<e;o++)r[o]=t[o];return r}function ar(o){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=Mo()(o);return e=r?(t=Mo()(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),Po()(this,e)}}var sr={InnerRam3D:{name:"innerHotSpot",type:"roam"},panorama3D:{name:"hotSpot",type:"roam"},floorPlan:{name:"floorPlanRender",type:"cut"},stereo:{name:"houseRender",type:"cut"},thumbnail:{name:"hotSpotDom",type:"fade"}},lr=function(t){xo()(n,t);var r=ar(n);function n(t,e){var o;return bo()(this,n),(o=r.call(this,t)).AppParams=t.AppParams,o.progress=t.progressManager.buildProgress("room2DModule",["readyChangeId","startChangeId","changeIdProgress","changedId","stopChangeId"],["toDoWaitingChangeId","toDoWaitedChangeId"]),o.logFn=t.logFn,o.roomConfig=t.roomConfig,o.PanoramaParams=t.PanoramaParams,o.currentSpotId=null,o.moduleConfig=e,o.isIn=!1,o.currentSpotDetail=null,o.floorIndex=null,o.floorId=null,o.map.render=o.RENDERS.room.renderTool.renderer.domElement,o}return Eo()(n,[{key:"init",value:function(){return this.initMap(),this.initListener(),this.initApi()}},{key:"loadData",value:function(t){var o=this,e="2D"===t.type;this.initStatus(e),e?(e=void 0===this.houseData,this.houseData=t,e&&this.initFirst(),this.idleLoading=!0,this.RENDERS.room.houseData=t,window.vrChatConnectorConfig||(window.vrChatConnectorConfig={}),window.vrChatConnectorConfig&&(window.vrChatConnectorConfig.syncFrameCb=function(t){t=t.Rotation;var e=o.RENDERS.room.camera;e.rotation.x=THREE.Math.degToRad(t.x),e.rotation.y=THREE.Math.degToRad(t.y),e.updateMatrix(),listener.dispatch("cameraTransform","roomRender",{position:e.position,rotation:e.rotation,fov:e.fov},{}),setTimeout(function(){window.vrChatConnectorApi.outputNativeLog((new Date).getTime()),window.vrChatConnectorApi.syncFrame(),listener.dispatch("autoPlayStartTime","roomRender")},5)})):this.houseData=null}},{key:"update",value:function(){var t,e,o,r,n,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.moduleConfig;this.houseData&&(this.moduleConfig=Object.assign(this.moduleConfig,i),t=this.RENDERS.room,e=(n=this.moduleConfig).plate,o=n.fov,r=n.fovLimit,i=n.landscapeFov,n=n.landscapeFovLimit,t.setPlate(e),t.setFov({fov:o,fovLimit:r,landscapeFov:i,landscapeFovLimit:n}),t.renderAllRoomHotSpots())}},{key:"destroy",value:function(){}},{key:"initFirst",value:function(){var e=this,o=this.listener,r=this.config,n=this.logFn,i={firstScreen:{enter:function(){o.dispatch("toDoSetDataId","room2DModule",null,{type:"cut",from:"firstRender"})},leave:function(){o.removeWithMap(i),o.dispatch("toDoRenderIn","room2DModule",null,null);var t=r.loadStartTime,e=r.preloadInfo,e=void 0===e?{}:e;n({firstLoadTime:(new Date).getTime()-t,isPreload:!!e.preloadId})}},room2DModule:{startChangeId:function(t){t=t.sum;o.dispatch("toDoWaitingLoad","firstScreen",t,e)},changeIdProgress:function(t){t=t.stepNum;o.dispatch("toDoWaitedLoad","firstScreen",t,e)}}};o.addWithMap(i)}},{key:"initListener",value:function(){var b=this,E=this.listener,w=this.progress,T=this.roomConfig,t=this.PanoramaParams,e=this.AppParams,o=t.zoomMinFov,r=e.isMobile,x=this.RENDERS.room;E.add("toDoSetDataId","room2DModule",function(o){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{type:"cut",from:null,isSync:!1};b.startSetDataIdTime=(new Date).getTime(),b.progress.isCompleted()||b.progress.stop(),b.removeChangeListenerMap&&b.removeChangeListenerMap();var r=b.houseData,n=b.currentSpotDetail?b.currentSpotDetail.ID:null,i=t.type,a=t.from,e=t.origin,s=t.isSync;if((e&&e.id&&(o=e.id),e&&e.from&&(a=sr[e.from].name,i=sr[e.from].type),o)&&r.spots.filter(function(t){return t.ID===o})[0].isHide)return;function l(e){if(e){var t=r.spots.filter(function(t){return t.ID===e})[0];return t&&t.isHide}}t="roam"===i?1:"cut"===i?2:3,e=function t(e){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return l(e[o].ID)?t(e,o+1):e[o].ID};o=o||(!r.defaultSpotId||l(r.defaultSpotId)?e(r.spots):r.defaultSpotId);var h,c=r.spots.filter(function(t){return""+t.ID==""+o})[0],u=r.floors,p=r.floorRooms,d=r.roomSpots;for(h in p){var f,m=nr(p[h]);try{for(m.s();!(f=m.n()).done;)d[f.value].includes(o)&&(b.floorId=h)}catch(t){m.e(t)}finally{m.f()}}for(var g=0;u&&g<u.length;g++)u[g].ID===b.floorId&&(b.floorIndex=g);var v=rr({roomRender:{imgsLoading:function(t){var e=t.loading,t=(t.sum,t.ID);0===e||String(o)!==String(t)||w.run(1)}}},1==t?{houseModule:{toDoRoamAnimateOut:function(){w.run(1)}}}:{});b.removeChangeListenerMap=function(){E.removeWithMap(v),b.removeChangeListenerMap=null},w.onComplete=function(){b.removeChangeListenerMap&&b.removeChangeListenerMap();var t,e=null;for(t in sr)sr[t].name===a&&(e=t);var o={from:e,id:c.ID};E.dispatch("setedDataId","room2DModule",c.ID,{from:a,lastId:n,type:i,origin:o,isSync:s}),E.dispatch("isPlay","roomRender",!0)},E.addWithMap(v),w.start(7),x.fade.animation&&x.fade.animation.stop();var y,e=T.firstLoading||{},t=e.ID,e=e.PanoImagesUrl,S=t&&t===c.ID&&e&&"firstRender"===a?e:"",t=function t(e){var o,r=e.step,e=e.sum;r===e-1&&0<e&&(x.fade.animation&&x.fade.animation.stop(),o=function(){x.renderRoomHotSpot(b.currentSpotDetail,c),b.currentSpotDetail=c,E.dispatch("currentSpotChange","room2DModule",c,b),"firstRender"===a&&x.setPano2BestViewAfterLoading(c),w.run(1)},"cut"===i?window.setTimeout(function(){return x.cut(o)},0):"fade"===i&&x.fade(null,o,b.startSetDataIdTime),S&&x.ready(c,"2D",null,!0).then(function(t){x.cut()},function(t){console.log("图片加载异常111111",t)}),E.remove("changeIdProgress","room2DModule",t))};E.add("changeIdProgress","room2DModule",t),E.dispatch("isPlay","roomRender",!1),x.ready(c,"2D",S).then(function(t){},function(t){console.log("图片加载异常111111",t),b.listener.dispatch("imgLoadError","firstScreen",t)}),b.currentSpotDetail=c,b.idleLoading&&(e=b.houseData,t=b.RENDERS,e=e.spots,y=t.room.textureLoader,e.forEach(function(t){t=t.PanoImagesUrl;y.idleLoad([t])}),b.idleLoading=!1)});function n(){b.RENDERS.room.setViewport()}function i(t){t.preventDefault(),t=t.wheelDeltaY,120<(t=x.camera.fov+-.01*t)?t=120:(t<60&&(t=60),E.dispatch("toDoCameraTransform","roomRender",{fov:t=!r&&t<o?o:t}))}function a(){var t=b.moduleConfig.onClickInBackgroundForClear;(void 0===t?function(t,e){return t&&!e}:t)(b.AppParams.isMobile,Object(Do.o)())&&(l=!l,E.dispatch("toDoClearRoom","room2DModule",l,b))}function s(t){var e=t.isPortrait;l=!1,E.dispatch("toDoClearRoom","room2DModule",l,b);var o,r=null,n=null,t=null;e?((o=b.moduleConfig||{}).IS_SHOW_FLOORPLAN,r=o.thumbnail,n=o.plate,t=void 0===(o=o.isShowHotSpotList)||o):b.moduleConfig.inLandscape&&b.AppParams.isMobile&&((o=b.moduleConfig.inLandscape||{}).IS_SHOW_FLOORPLAN,r=o.thumbnail,n=o.plate,t=void 0===(o=o.isShowHotSpotList)?isShowHotSpotLis:o),Object.assign({},b.normalStatus,b.mapStatus),null!==n&&("object"===Fo()(n)?b.RENDERS.room.plate.setVisible(n.visible):b.RENDERS.room.plate.setVisible(n)),DOMS.guideMap.hide(!0),E.dispatch("toDoUpdatePullHead","pullHead",{thumbnail:!r,spot:!t})}var l=!1;E.add("toDoRenderIn","room2DModule",function(){console.log("toDoRenderIn121212111"),n(),s({isPortrait:Object(Do.o)()}),b.isIn=!0;var t=b.houseData,e=b.RENDERS,o=e.room;e.house,e.floorPlan;o.setIsMirrored(t.originData.isImageMirrored),o.changeRenderer(),o.renderIn(1);Object.assign({},b.normalStatus,b.mapStatus);b.raycasterManager.set(o.camera,o.scene,o.viewport),o.camera.fov=o.houseData.cameraFov||90,E.add("onPointClick","roomRender",a),E.add("orientationChange","window",s),E.add("resize","window",n),o.renderTool.renderer.domElement.addEventListener("wheel",i)}),E.add("toDoRenderOut","room2DModule",function(t,e){var o,r;b.isIn&&(b.isIn=!1,r=(o=b.RENDERS).room,o.house,r.renderOut(),b.raycasterManager.set(),E.remove("onPointClick","roomRender",a),E.remove("orientationChange","window",s),E.remove("resize","window",n),r.renderTool.renderer.domElement.removeEventListener("wheel",i))}),E.add("toDoClearRoom","room2DModule",function(){b.isIn&&(l=!(0<arguments.length&&void 0!==arguments[0])||arguments[0])}),E.dispatch("toDoAddCall","statusPipe",{key:"clear2DRoom",call:function(){E.dispatch("toDoClearRoom","room2DModule",!(0<arguments.length&&void 0!==arguments[0])||arguments[0],null)}}),E.add("toDoReset","module",function(t,e){b.reset(t)}),E.add("getCurrentHotSpot","room2DModule",function(t){t&&t(b.currentSpotDetail)}),E.add("toDoAddSpot","roomRender",function(t){var e=t.spot;"mark"===t.type&&(b.currentSpotDetail.VisibleMarkShootSpots||(b.currentSpotDetail.VisibleMarkShootSpots=[]),b.currentSpotDetail.VisibleMarkShootSpots.push(e.ID))})}},{key:"initMap",value:function(){var e=this;this.mapArr=["pullHead","feedback","hotSpot","houseList","toolbar","thumbnail","guideMap"],this.normalStatus={},this.mapArr.forEach(function(t){e.normalStatus[t]=!0})}},{key:"initMenu",value:function(){}},{key:"initApi",value:function(){var i=this,r=this.listener,t=this.RENDERS,a=!1,e={system:{readyReset:function(){a=!0},reseted:function(){a=!1}},firstScreen:{enter:function(){a=!0},leave:function(){a=!1}}};r.addWithMap(e);var s=new Map;return{renderIn:function(){r.dispatch("toDoRenderIn","room2DModule",null,"api")},renderOut:function(){r.dispatch("toDoRenderOut","room2DModule",null,"api")},update:function(t){i.update(t)},setUnabled:function(t){i.setUnabled(t)},changeSpot:function(t,e,o){r.dispatch("toDoSetDataId","room2DModule",t,rr(rr({type:e},o),{},{from:"api",origin:{from:{fade:"thumbnail",cut:"floorPlan",roam:"InnerRam3D"}[e]||"thumbnail",id:t}}))},getCurrentSpot:function(){return i.currentSpotDetail},setFov:function(t){r.dispatch("toDoCameraTransform","roomRender",{fov:t},{from:"api"})},getFov:function(){return t.room.camera.fov},addCameraChangeListener:function(n){function t(t){var e=t.fov,o=(r=t.rotation).x,t=r.y,r=r.z;i.isIn&&!a&&n({fov:e,rotation:{x:o,y:t,z:r}})}s.set(n,t),i.listener.add("cameraTransform","roomRender",t)},removeCameraChangeListener:function(t){var e=s.get(t);s.delete(t),i.listener.remove("cameraTransform","roomRender",e)},addChangedSpotListener:function(t){function e(){a||t()}s.set(t,e),i.listener.add("setedDataId","room2DModule",e)},removeChangedSpotListener:function(t){var e=s.get(t);s.delete(t),i.listener.remove("setedDataId","room2DModule",e)},addChangeSpotProgressListener:function(o){function t(t){var e=t.sum,t=t.step;a||o({sum:e,num:void 0===t?0:t})}s.set(o,t),i.listener.add("startChangeId","room2DModule",t),i.listener.add("changeIdProgress","room2DModule",t)},removeChangeSpotProgressListener:function(t){var e=s.get(t);s.delete(t),i.listener.remove("startChangeId","room2DModule",e),i.listener.remove("changeIdProgress","room2DModule",e)},addStopChangeSpotListener:function(t){function e(){a||t()}s.set(t,e),i.listener.add("stopChangeId","room2DModule",e)},removeStopChangeSpotListener:function(t){var e=s.get(t);s.delete(t),i.listener.remove("stopChangeId","room2DModule",e)},addRoom2DRenderInListener:function(t){i.listener.add("toDoRenderIn","roomModule",t)},removeRoom2DRenderInListener:function(t){i.listener.remove("toDoRenderIn","roomModule",t)}}}},{key:"initStatus",value:function(t){var l=this;t?listener.dispatch("toDoRegister","statusPipe",{key:"room2DModule",getter:function(){var t=l.RENDERS.room,e=t.camera,o=t.houseData,r=e.position,n=e.rotation,i=e.fov,a=e.theta,s=l.isIn,t=l.floorIndex,e=l.floorId;return{spotId:l.currentSpotDetail.ID,camera:{position:{x:r.x,y:r.y,z:r.z},rotation:{x:n.x,y:n.y,z:n.z},fov:i,theta:a},floor:{index:t,id:e},isIn:s,type:o.type}},setter:function(t,e){var o=t.spotId,r=t.camera,n=r.position,i=r.rotation,t=r.fov,r=(r.theta,l.RENDERS.room),e=e.isSync,e=void 0===e||e;r.camera.position.set(n.x,n.y,n.z),r.camera.rotation.set(i.x,i.y,i.z),r.camera.fov=t,r.camera.updateMatrix(),o!==l.currentSpotDetail.ID&&l.listener.dispatch("toDoSetDataId","room2DModule",o,{type:"cut",from:"room2DModule",isSync:e})}}):listener.dispatch("toDoCancel","statusPipe",{key:"room2DModule"})}},{key:"changeRoom",value:function(t,e){var o=this.RENDERS.room;console.log(t,e),o.changeRoom(t,e),console.log("changeRoom")}},{key:"setRoomData",value:function(t,e){return this.RENDERS.room.refresh(t,e)}},{key:"reset",value:function(t,e){"2D"===t.type&&(this.loadData(t),this.update())}}]),n}(i);function hr(o){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=Mo()(o);return e=r?(t=Mo()(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),Po()(this,e)}}var cr=function(t){xo()(n,t);var r=hr(n);function n(t,e){var o;return bo()(this,n),(o=r.call(this,t)).AppParams=t.AppParams,o.isIn=!1,o.floorIndex=null,o.floorId=null,o.logFn=t.logFn,o.isPortrait=Object(Do.o)(),o.roomConfig=t.roomConfig||{},o.houseConfig=t.houseConfig||{},o.moduleConfig=e,o}return Eo()(n,[{key:"init",value:function(){return this.initListener(),this.initControlerHandler(),this.initApi()}},{key:"loadData",value:function(t){var e,o,r,n,i,a="3D"===t.type;this.initStatus(a),a?(this.houseData=t,this.houseData=t,e=(i=this.RENDERS).house,o=i.floorPlan,r=i.compass,n=t.floors,a=t.rooms,i=t.floorRooms,e.houseData=t,o.houseData=t,e.floorsData?(e.reBuildHouse(n,a,i),e.reBuildHotSpots(),e.hotSpotsHide(!0),o.reset(n),"3D"===this.config.MINI_STEREO_FLOORPLAN_DEFAULT&&(e.root.visible=!0)):(e.buildHouse(n,a,i),e.buildHotSpots(),e.setControlDistance()),o.prepareSpots(),r.buildCompass(t.compassDirection)):this.houseData=null}},{key:"update",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.moduleConfig;this.houseData&&(this.moduleConfig=Object.assign(this.moduleConfig,t))}},{key:"destroy",value:function(){}},{key:"initListener",value:function(){function g(t){var e,o,r,n=t.isPortrait;t.isEnd,t.type,t.check&&v.isPortrait===n||(t=(r=v.moduleConfig).inLandscape,n?e=r.IS_SHOW_BIG_GUIDE_TAB:!t||void 0===(o=t.IS_SHOW_BIG_GUIDE_TAB)&&r.IS_SHOW_BIG_GUIDE_TAB,v.AppParams.isMobile&&(e=c.controls,t=c.camera,r=e.maxDistance,o=t.position.clone(),c.setStereoCameraPosition(),r=e.maxDistance/r,t.position.copy(o.multiplyScalar(r))))}var v=this,y=this.listener,S=this.RENDERS,r=this.raycasterManager,b=this.DOMS,t=this.config,c=S.house,u=S.room,p=S.floorPlan,E=t.CLICK_CB,w=t.MINI_STEREO_FLOORPLAN_DEFAULT,T=function(){var t=S.house;t.setViewport(),r.set(t.camera,t.scene)},n=b.houseLoading,x={roomModule:{toDoSetDataId:function(t){n.hide(!1),n.startProgress()},changeIdProgress:function(t){var e=t.step,t=t.sum;n.progress(e/t)},setedDataId:function(e,t){var o=t.from,r=t.isSync;n.hide(!0),n.endProgress();t=v.houseData.spots.filter(function(t){t=t.ID;return e===t})[0];v.isSync=r,c.setCurrentHotspots(e),p.changeCurrent(t),y.dispatch("prepared","houseModule",{from:o},null)}}};y.add("toDoRenderIn","houseModule",function(t,e){var o=t.type,r=t.ID;v.isIn=!0,v.startTime=(new Date).getTime(),console.warn(v.startTime);var n,i,a,s,l=v.houseData,h=(b.houseCompass,S.house),c=S.room,u=S.floorPlan,p=(S.compass,l.floors,l.rooms,l.floorRooms),d=l.roomSpots,f=(l.spots,e.isSync),t=void 0!==f&&f;for(i in c.renderOut(),u.renderOut(),d)if(d[i].includes(r)){n=i;break}for(s in p)if(p[s].includes(n)){a=s;break}v.listener.dispatch("toDoSetFloor","houseModule",{id:a,index:null},{origin:{ID:a,index:null},isSync:t}),u.cameraInFloorId=a;l=c.camera,e=l.position.clone(),f=l.rotation.clone(),t=l.fov,u=h.HouseParams.fullScreenFov;h.camera.rotation.clone().y=f.y,h.camera.position.copy(e),h.camera.fov=t,h.camera.rotation.copy(f),h.camera.updateProjectionMatrix();var l=h.getStereoCameraPosition({isGuideFullScreen:!0,theta:l.rotation.y,fov:u}).vector3,m=!1;h.moveTo({start:{position:c.camera.position.clone(),rotation:c.camera.rotation.clone(),fov:c.camera.fov},end:{position:l,rotation:null,fov:u},factor:{position:2,rotation:2,fov:2},spotHide:!1,from:"toHouse",targetMaterial:c.end,floorplan_default:"3D"!==v.config.MINI_STEREO_FLOORPLAN_DEFAULT||"2"==o?"2D":"3D"},function(){h.controls.enabled=!0,h.isGuideFullScreen=!0,h.updateControlsState(!0),h.setCurrentHotspots(r,a),h.hotSpotsHide(!1),"3D"!==v.config.MINI_STEREO_FLOORPLAN_DEFAULT||"2"==o?y.dispatch("switchType","houseModule","2D",{isRenderIn:!0,type:"roam"}):(g({isPortrait:Object(Do.o)()}),y.dispatch("switchType","houseModule","3D",{type:"cut",isRenderIn:!0})),y.addWithMap(x),c.release()},1e3,function(){m||(h.root.visible=!0,h.renderIn(),h.changeRenderer(),h.controls.enabled=!1,h.controls.target.set(0,0,0),m=!0)}),y.dispatch("toDoHideDecorateList","compareListRender",!0),y.add("resize","window",T),T(),y.add("orientationChange","window",g),E&&E({type:"3D"===w?"show_3d":"show_2d"}),v.logFn({click2dFloorPlans:!0})}),y.add("toDoRenderOut","houseModule",function(t,e){n.hide(!0);var o=(new Date).getTime();v.logFn({planType:v.type,duration:o-v.startTime});var o=v.houseData||{},i=o.floorRooms,a=o.roomSpots,e=e.isSync;if(v.isIn=!1,r.set(),c.controls.enabled=!1,!t)return c.hotSpotsHide(!0),c.renderOut(),void v.compassHide(!0);c.renderOut(),c.release(),p.updateControlsState(!1),p.release(),y.removeWithMap(x),y.remove("resize","window",T),y.remove("orientationChange","window",g),y.dispatch("getCurrentHotSpot","roomModule",function(t){var e,o,r,n=t.ID;for(o in a)if(a[o].includes(n)){e=o;break}for(r in i)if(i[r].includes(e)){0;break}})}),y.add("toDoClearHouse","houseModule",function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];v.isIn&&[].forEach(function(t){return b[t].hide(e)})}),y.dispatch("toDoAddCall","statusPipe",{key:"clearHouse",call:function(){y.dispatch("toDoClearHouse","module",!(0<arguments.length&&void 0!==arguments[0])||arguments[0],null)}}),y.add("toDoReset","module",function(t,e){v.reset(t)}),y.add("switchType","houseModule",function(e){var t,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{type:"roam"};c.isGuideFullScreen&&(y.dispatch("isSwitchType","houseModule",!0,null),y.dispatch("toDoSetType","fullScreenGuild",e,o),v.type=e,t=function(){var t=(new Date).getTime();"2D"==e?(c.renderOut(),setTimeout(function(){v.floorPlanHide(!1,!0),p.controls.enabled=!0,p.updateControlsState(!0),v.compassHide(!0)},0),o.isRenderIn||(v.logFn({floolPlanClick:e,planDuration3D:t-v.startTime}),v.startTime=t)):(c.root.visible||c.renderIn(),v.floorPlanHide(!0,!0,!1),v.compassHide(!1),T(),o.isRenderIn||(v.logFn({floolPlanClick:e,planDuration2D:t-v.startTime}),v.startTime=t)),y.dispatch("switchTypeEnd","houseModule",e,o),y.dispatch("isSwitchType","houseModule",!1,null),g({isPortrait:Object(Do.o)(),check:!0})},"cut"===o.type?t():v.swithTypeByAnimation(e,t))});function d(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=v.houseConfig.CLOSE_HOUSE_CB;e&&e(),c.controls.enabled=!0,c.isGuideFullScreen=!1,c.updateControlsState(!1),c.hotSpotsHide(!0),v.compassHide(!0),v.floorPlanHide(!0),y.remove("resize","window",T),y.dispatch("toDoRenderOut","houseModule",!0,{isSync:t}),y.dispatch("toDoRenderIn","roomModule",!0,v),i=null,y.dispatch("toDoHideDecorateList","compareListRender",!1),y.dispatch("toRoomEnd","roomModule")}y.add("toDoChangeModule","module",function(t,e){var o=t.from,r=t.to,n=e.origin,t=(e.isSync,e.type),t=void 0===t?"cut":t,e=e.callback,i=void 0===e?function(){}:e;("houseModule"===o&&"roomModule"===r||1===n)&&(1!==n&&c.setHouseMaterial(u.end,0),"cut"===(t=1===n?"cut":t)?(y.dispatch("toDoAnimateToRoom","houseModule","cut",{}),i()):(t=function t(){y.remove("toRoomEnd","roomModule",t),i()},y.add("toRoomEnd","roomModule",t),y.dispatch("toDoAnimateToRoom","houseModule","roam",{from:p.root.visible?"floorPlanRender":"houseRender"})))}),y.add("toDoAnimateToRoom","houseModule",function(t){var e=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).from,o=v.roomConfig.IS_BEST_VIEW_ANIMATION,r=u.camera.rotation.clone(),n=c.camera.rotation.clone();n.x=r.x;function i(){c.moveTo({start:{position:c.camera.position.clone(),rotation:c.camera.rotation.clone(),fov:c.camera.fov},end:{position:u.camera.position.clone(),rotation:h,fov:u.camera.fov},factor:{position:.5,rotation:5,fov:3},spotHide:!0,from:"toRoom",targetMaterial:u.end},function(){d()},1500)}var a,s,l,h=!1!==o?r:n;"cut"===t?d():"floorPlanRender"===e?(console.log("rotation 位置----------》",p.camera.position.clone()),(t=p.camera.position.clone()).x=0,t.z=0,a=(new THREE.Spherical).setFromVector3(t),s=c.getStereoCameraPosition().spherical,c.renderIn(),p.renderOut(),l=function(){var t=v.houseConfig.ROTATION_TIME;c.rotationTo({start:a,end:s,targetMaterial:u.end},function(){i()},t||1e3,function(){0})},v.isSync?(setTimeout(function(){l()},5),v.isSync=!1):l()):"houseRender"===e&&setTimeout(function(){i()},300)});var i=null;y.add("toDoToRoom","houseModule",function(t,e){var o=e.from,r=e.origin,e=(e.isPrepared,e.isSync);i!==t.ShootSpotIds[0]?v.isInAnimation()?console.log("动画中"):(y.dispatch("isToRoom","roomModule",!0),i=t.ShootSpotIds[0],y.dispatch("toDoSetDataId","roomModule",i,{type:"cut",from:o,origin:r,isSync:e})):console.log("重复点击")}),y.add("toDoSetFloor","houseModule",function(t,e){var o;v.isIn&&(e&&e.origin&&((o=e.origin).ID?t.id=o.ID:void 0!==o.index&&(t.id=v.houseData.floors[o.index].ID)),o=v.RENDERS.floorPlan,"all"!==t.id&&o.setFloorPlan(t.id,!0),c.setHouseOpacity(t.id),v.floorId=t.id)});function e(t,e){o(t,e)}var o=function(t,e){};y.add("startLoad","firstScreen",function(){return e(function(t){y.dispatch("toDoWaitingLoad","firstScreen",t,v)},function(t){y.dispatch("toDoWaitedLoad","firstScreen",t,v)})}),y.add("startReset","system",function(){return e(function(t){y.dispatch("toDoWaitingReset","system",t,v)},function(t){y.dispatch("toDoWaitedReset","system",t,v)})})}},{key:"initControlerHandler",value:function(){var r,n,i=this,a=!1,s=10,l=40,h=window.innerWidth/4,o=0,t=this.RENDERS,e=t.floorPlan,c=(t.house,e.controls);c.domElement.addEventListener("mousedown",function(t){r={x:t.clientX,y:t.clientY}}),c.domElement.addEventListener("mousemove",function(t){}),c.domElement.addEventListener("mouseup",function(t){0}),c.domElement.addEventListener("touchstart",function(t){switch(console.log(t),r={x:t.touches[0].pageX,y:t.touches[0].pageY},n=null,o=t.timeStamp,t.touches.length){case 1:c.enablePan||"2D"!==i.type||(a=!0);break;case 2:"2D"===i.type&&listener.dispatch("changHouseControl","houseControl",{use:!1}),a=!1}}),c.domElement.addEventListener("touchmove",function(t){switch(t.touches.length){case 1:n={x:t.touches[0].pageX,y:t.touches[0].pageY};var e=Math.abs(r.x-n.x),o=Math.abs(r.y-n.y);!c.enablePan&&(e<h&&s<e||l<o)&&"2D"===i.type&&a?(a=!0,listener.dispatch("switchType","houseModule","3D",{type:"cut",origin:{type:"3D"}})):!c.enablePan&&h<=e&&(a=!1);break;case 2:a=!1}}),c.domElement.addEventListener("touchend",function(t){listener.dispatch("changHouseControl","houseControl",{use:!0});var e=t.timeStamp-o;console.log("timeDistimeDistimeDistimeDistimeDis",e),n&&100<e&&(t=Math.abs(r.x-n.x),e=Math.abs(r.y-n.y),!c.enablePan&&h<=t&&"2D"===i.type&&a?listener.dispatch("switchType","houseModule","3D",{type:"roam",origin:{type:"3D"}}):a&&(s<t||l<e)&&listener.dispatch("switchType","houseModule","2D",{type:"roam",origin:{type:"2D"}})),a=!1})}},{key:"initApi",value:function(){var o=this,i=this.listener,t=this.RENDERS,r=(t.floorPlan,t.house,new Map);return{renderIn:function(){i.dispatch("toDoRenderIn","houseModule",null,"api")},renderOut:function(){i.dispatch("toDoRenderOut","houseModule",null,"api")},update:function(t){o.update(t)},setUnabled:function(t){o.setUnabled(t)},toRoom:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"cut";i.dispatch("toDoChangeModule","module",{from:"houseModule",to:"roomModule"},{type:t,callback:1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){},origin:"cut"===t?1:null})},setFloor:function(t){i.dispatch("toDoSetFloor","houseModule",{id:t},{from:"api",origin:{ID:t}})},switchType:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){},o=t.split("-"),r=T()(o,2),n=r[0],o=r[1],r=function t(){i.remove("switchTypeEnd","houseModule",t),e()};i.add("switchTypeEnd","houseModule",r),i.dispatch("switchType","houseModule",t="model"===n?"3D":"2D",{type:o?"roam":"cut",origin:{type:t}})},addSpotPreparedListener:function(e){function t(t){e()}r.set(e,t),o.listener.add("prepared","houseModule",t)},removeSpotPreparedListener:function(t){var e=r.get(t);r.delete(t),o.listener.remove("prepared","houseModule",e)},addHouseRenderInListener:function(t,e){o.listener.add("toDoRenderIn","houseModule",t),e&&o.listener.add("switchTypeEnd","houseModule",e)},removeHouseRenderInListener:function(t,e){o.listener.remove("toDoRenderIn","houseModule",t),e&&o.listener.remove("switchTypeEnd","houseModule",e)},addToDoSetFloorListener:function(t){o.listener.add("toDoSetFloor","houseModule",t)},removeToDoSetFloorListener:function(t){o.listener.remove("toDoSetFloor","houseModule",t)},addSwitchTypeListener:function(t){o.listener.add("switchTypeEnd","houseModule",t)},removeSwitchTypeListener:function(t){o.listener.remove("switchTypeEnd","houseModule",t)},addToRoomListener:function(t,e){i.add("toDoAnimateToRoom","houseModule",t),i.add("toRoomEnd","roomModule",e)},removeToRoomListener:function(t,e){i.remove("toDoAnimateToRoom","houseModule",t),i.remove("toRoomEnd","roomModule",e)}}}},{key:"initStatus",value:function(t){var l=this,h=this;t?listener.dispatch("toDoRegister","statusPipe",{key:"houseModule",getter:function(){var t=l.RENDERS.house.camera,e=t.position,o=t.rotation,r=t.fov,n=t.theta,i=l.isIn,t=(l.floorIndex,l.floorId,l.DOMS,l.RENDERS,l.RENDERS.house.isGuideFullScreen);return{camera:{position:{x:e.x,y:e.y,z:e.z},rotation:{x:o.x,y:o.y,z:o.z},fov:r,theta:n,isIn:i},floor:{index:l.floorIndex,id:l.floorId},isGuideFullScreen:t,currentGuideTab:l.type||l.config.MINI_STEREO_FLOORPLAN_DEFAULT}},setter:function(t,e){var o=t.camera,r=t.isGuideFullScreen,n=t.currentGuideTab,i=o.position,a=o.rotation,s=o.fov,o=(o.theta,l.DOMS,l.RENDERS.house);r!==o.isGuideFullScreen?r?(listener.dispatch("toDoToHouse","roomModule",n,e),n!==h.type&&listener.dispatch("switchType","houseModule",n,e)):(listener.dispatch("toDoRenderOut","houseModule",null,e),listener.dispatch("toDoToRoom","roomModule",null,e),listener.dispatch("toDoChangeModule","module",{from:"houseModule",to:"roomModule"},Object.assign({origin:1},e)),listener.dispatch("toDoHideDecorateList","compareListRender",!1,e)):r&&(o.camera.position.set(i.x,i.y,i.z),o.camera.rotation.set(a.x,a.y,0),o.camera.fov=s,o.camera.updateMatrix(),vrChatStatus.listener.dispatch("toDoCameraTransformStart","houseRender",{},{origin:t,isSync:!0}),vrChatStatus.listener.dispatch("toDoCameraTransform","houseRender",{},{origin:t,isSync:!0,type:"vrchat"}),vrChatStatus.listener.dispatch("toDoCameraTransformEnd","houseRender",{},{origin:t,isSync:!0}),n!==h.type&&listener.dispatch("switchType","houseModule",n,e))}}):listener.dispatch("toDoCancel","statusPipe",{key:"houseModule"})}},{key:"compassHide",value:function(t){var e=DOMS.houseCompass,o=RENDERS,r=o.house,n=o.compass,o=this.config.IS_SHOW_COMPASS_DIRECTION;e&&(e.hide(t=!1===o||t),this.compassChange||(this.compassChange=function(){n.changeCompass(r.camera.position)}),t?(n.renderOut(),n.release(),r.controls.removeEventListener("change",this.compassChange)):(e.resizeCompass(),n.setViewport(0,0,e.width,e.height),n.changeRenderer("compass"),n.changeCompass(r.camera.position),r.controls.addEventListener("change",this.compassChange),n.renderIn()))}},{key:"floorPlanHide",value:function(t,e){var o=this,r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],n=this.listener,i=this.RENDERS,a=this.raycasterManager,s=this.houseData,l=i.floorPlan,i=i.room,i=void 0===i?{}:i;s.floors;this.floorPlanResize||(this.floorPlanResize=function(){l.setViewport(),l.resetCamera(!0),a.set(l.camera,l.scene)},this.floorPlanListenerMap={window:{resize:function(){return o.floorPlanResize()}},canvas:{pointDown:function(t){l.pointDown(t)},pointMove:function(t){l.pointMove(t)},pointUp:function(t){l.pointUp(t)}}}),t?(l.renderOut(),a.set(),r&&l.release(),n.removeWithMap(this.floorPlanListenerMap)):(l.houseData=s,l.changeRenderer(),l.buildFloorPlan(this.floorId,e,e?i.camera&&i.camera.rotation:null),l.renderIn(),l.setCenter(),n.addWithMap(this.floorPlanListenerMap),this.floorPlanResize())}},{key:"isInAnimation",value:function(){return this.RENDERS.house.isInAnimation}},{key:"swithTypeByAnimation",value:function(t,e){var o,r,n=this.RENDERS,i=n.house,a=n.floorPlan,n=(n.room,this.DOMS.floorSelector,this.houseConfig.ROTATION_TIME),s=a.getDefaultCameraPosition(!0);"2D"===t?(o=(new THREE.Spherical).setFromVector3(i.camera.position.clone()),r=(new THREE.Spherical).setFromVector3(s)):(o=(new THREE.Spherical).setFromVector3(a.camera.position.clone()),r=i.getStereoCameraPosition().spherical,i.renderIn(),setTimeout(function(){a.renderOut()},10)),i.rotationTo({start:o,end:r,type:t},function(){a.camera.position.copy(s),setTimeout(function(){e&&e()},16)},n||500)}},{key:"reset",value:function(t){var e=this.RENDERS;e.floorPlan,e.compass;this.loadData(t),this.update()}}]),n}(i),ur=function(){function e(t){bo()(this,e),this.root={},this.bubbling=t,this.intercept=null}return Eo()(e,[{key:"add",value:function(t,e,o){var r=this;this.root[e]||(this.root[e]={}),this.root[e][t]||(this.root[e][t]=[]),this.root[e][t].push(o);function n(){r.remove(t,e,o),r.remove(t,e,n)}return function(){return r.add(t,e,n)}}},{key:"remove",value:function(t,e,o){this.root[e][t]&&(this.root[e][t]=this.root[e][t].filter(function(t){return t!==o}))}},{key:"addWithMap",value:function(t){for(var e in t)for(var o in t[e])this.add(o,e,t[e][o])}},{key:"removeWithMap",value:function(t){for(var e in t)for(var o in t[e])this.remove(o,e,t[e][o])}},{key:"dispatch",value:function(n,i,a,s){var l=this;(this.intercept||function(t,e){e()})({name:n,starterId:i,data:a,starter:s},function(){for(var t=l.root[i]&&l.root[i][n]||[],e=!1,o=!0,r=0;r<t.length;r++){try{if(t[r](a,s)){e=!0;break}}catch(t){console.error(t,"<--- listener[".concat(i,", ").concat(n,"]")),window.dispatchEvent(Object(Do.d)(t))}o=!1}!e&&l.bubbling&&l.bubbling(n,i,a,s,o)})}},{key:"clear",value:function(){this.root={}}}]),e}(),pr=function(){function r(t,e,o){bo()(this,r),this.next=t,this.timeOut=e,this.final=o,this.todo=this.todo.bind(this)}return Eo()(r,[{key:"todo",value:function(t,e){e>=this.timeOut&&(this.next(),this.final&&this.final())}}]),r}(),dr=function(){function n(t,e,o,r){bo()(this,n),this.t=0,this.duration=t,this.toDoUpdate=e,this.final=o,this.frameManager=r,this.update=this.update.bind(this),this.isAdd=!1}return Eo()(n,[{key:"start",value:function(t){this.isAdd||(this.frameManager.add(this.update),this.isAdd=!0),this.t=0,t&&t.duration&&(this.duration=t.duration),t&&t.update&&(this.toDoUpdate=t.update)}},{key:"stop",value:function(){this.isAdd&&(this.frameManager.remove(this.update),this.final(this.duration<=this.t),this.t=0,this.isAdd=!1)}},{key:"update",value:function(t){this.t+=t,this.toDoUpdate(t,Math.min(this.t/this.duration,1)),this.t>=this.duration&&this.stop()}}]),n}(),e=function(){function t(){bo()(this,t),this.root=null,this.lastT=0,this.frame(0)}return Eo()(t,[{key:"traverse",value:function(t,e){for(var o=null,r=this.root;null!==r&&!t(o,r);r=r.next)o=r;o&&null===o.next&&e&&e(o)}},{key:"add",value:function(o){var r,n=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=!1;this.traverse(function(t,e){e.updater===o&&(i=!0)}),i?console.error("重复updater",o):(r={updater:o,order:t,start:this.lastT,next:null},null===this.root?this.root=r:this.traverse(function(t,e){var o=r.order>e.order;return o&&(t?t.next=r:n.root=r,r.next=e),o},function(t){t.next=r}))}},{key:"remove",value:function(o){var r=this,n=!1;return this.traverse(function(t,e){if(e.updater===o)return null===t?r.root=e.next:t.next=e.next,n=!0}),n}},{key:"frame",value:function(o){var r=this;this.traverse(function(t,e){try{e.updater(o-r.lastT,o-e.start,o)}catch(t){console.error(t,"<--- frame"),window.dispatchEvent(Object(Do.d)(t))}}),this.lastT=o,window.requestAnimationFrame(function(t){r.frame(t)})}},{key:"next",value:function(t){var e=this,o=new pr(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,function(){e.remove(o.todo)});this.add(o.todo)}},{key:"animation",value:function(t,e){var o=t.duration,r=t.update,t=t.final;o||console.error("FrameManager.animation: duration为空"),r||console.error("FrameManager.animation: update为空");var n=new dr(o,r,t=t||function(){},this);return e&&n.start(),n}}]),t}(),fr=null,mr=function(){function a(t,e,o,r,n){var i=this;bo()(this,a),fr=t,this.raycaster=new fr.Raycaster,this.listener=o,this.size=e.size,this.isMobile=Object(Do.b)(),n.forEach(function(n){o.add(n,r,function(t,e){var o,r;t&&(o=(r=Object(Do.j)(t)).x,r=r.y,i.intersect(o,r,n,t,e))})}),this.lastTypeUserData=null,this.lastPointDown={},this.extra=[],this.currIntersects=[]}return Eo()(a,[{key:"set",value:function(t,e){var o=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new fr.Vector4(0,0,this.size.x,this.size.y);this.camera=t,this.scene=e,this.viewPort=r;var n,r=this.viewPort;r.x,r.y,r.width,r.height;for(n in this.lastTypeUserData)!function(e){o.lastTypeUserData[e].forEach(function(t){t["pre-"+e]&&t["pre-"+e]()})}(n);this.lastTypeUserData=null}},{key:"intersectDistance",value:function(t,e,o,u){var h=this,r=this.viewPort,c=this.camera,p=r.width,d=r.height,f=new fr.Vector2(t-r.x,e-r.y),r=null;1===u.length&&"room"===u[0].object.name&&(r=u[0],u.splice(0,1));var m=function(t,e,o,r){for(var n=u.length,i=!1,a=0,s=!1,l=o||e,h=o?"pointDistance":"distance",c=0;c<u.length;c++)(u[c][h]&&u[c][h]>l||u[c].isInCenter)&&n===u.length&&(o&&r?0!==(n=c)&&u[c-1][h]===u[c][h]&&u[c-1].angle>u[c].angle&&(n=c-1):u[c].pointDistance||(n=c)),u[c]===t&&(i=!0),u[c].isNear&&0===a&&(s=!(u[c].isInCenter&&u[c].pointDistance>o),a=c);if(!i)return o&&!r?0===a?s||u.unshift({object:t,pointDistance:o,distance:e,isNear:!0,isInCenter:!0}):0<a&&u[a].pointDistance>o&&u.splice(a,1,{object:t,distance:e,isNear:!0,isInCenter:!0}):u.splice(n,0,{object:t,distance:e,pointDistance:o,angle:r,isNear:!0}),!0},n=function(t){var e,o,r,n,i,a,s=t.userData.pointScreenDistance||t.parent.userData.pointScreenDistance,l=t.userData.pointDistance||t.parent.userData.pointDistance;t.geometry&&t.material&&s?(i=t.position,r=h.raycaster.ray,e=(n=t.getWorldPosition(i.clone())).clone().project(c),o=new fr.Vector2(e.x*p/2+p/2,e.y*-d/2+d/2),Math.abs(e.x)<1&&Math.abs(e.y)<1&&Math.abs(e.z)<1&&o.distanceTo(f)<s&&m(t,r.origin.distanceTo(n))):t.geometry&&t.material&&l&&fr.Math.radToDeg(c.rotation.x)<20&&(i=t.position,e=h.raycaster.ray,s=(o=t.getWorldPosition(i.clone())).clone().project(c),r=new fr.Vector3,n=new fr.Vector3(o.x,o.y,o.z).sub(e.origin),(i=new fr.Plane).normal=new fr.Vector3(0,e.direction.y<0?-1:1,0),i.constant=o.y,e.intersectPlane(i,r),i=r.distanceTo(o)/50,Math.abs(s.x)<1&&Math.abs(s.y)<1&&Math.abs(s.z)<1&&i<l&&(a=r.sub(e.origin),m(t,e.origin.distanceTo(o),i,n.angleTo(a))),a=h.isMobile?.5:.3,Math.abs(s.x)<a&&Math.abs(s.y)<1&&Math.abs(s.z)<1&&m(t,e.origin.distanceTo(o),i))};return function e(t){Array.isArray(t)?t.forEach(function(t){e(t)}):t&&t.visible&&(e(t.children),n(t))}(o),r&&u.push(r),u}},{key:"intersect",value:function(n,i,a,s,l){var h=this,t=5<arguments.length&&void 0!==arguments[5]&&arguments[5],e=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0;if(this.camera&&this.scene){var o=this.size,r=this.viewPort,c=new fr.Vector2((n-r.x)/r.z*2-1,(o.y-i-r.y)/r.w*2-1),u=[];(-1<=c.x&&c.x<=1&&-1<=c.y&&c.y<=1||"pointOut"===a)&&"pointMove"!==a?(this.camera.aspect=r.z/r.w,this.camera.updateProjectionMatrix(),this.raycaster.setFromCamera(c,this.camera),u=this.raycaster.intersectObjects(this.scene.children,!0),u=this.intersectDistance(n,i,this.scene.children,u),"pointDown"===a&&(this.currIntersects=u.concat()),["pointOut","pointUp"].includes(a)&&(this.currIntersects=[])):"pointMove"!==a&&(this.lastPointDown[e]=[]);var p=null,d={};"pointMove"===a&&(u=this.currIntersects.concat());for(var f,m,g=0;g<u.length;g++){var v=!1;if((p=u[g].object.userData[a]||u[g].object.parent.userData[a])&&(v=p(s,l,{e:s,mouse:c,ray:this.raycaster.ray},u[g].object.userData)),d[a]||(d[a]=[]),d[a].push(u[g].object.userData),v)break}if("pointDown"===a?this.lastPointDown[e]=u.map(function(t){return t.object}):"pointUp"===a&&(f=!1,u.forEach(function(t){t=t.object;f||h.lastPointDown[e]&&h.lastPointDown[e].includes(t)&&(m=t.userData.pointClick||t.parent.userData.pointClick)&&(f=m(s,l,{e:s,mouse:c,ray:h.raycaster.ray},t.userData))}),delete this.lastPointDown[e]),this.lastTypeUserData)for(var y in d)!function(e){h.lastTypeUserData[e]&&h.lastTypeUserData[e].forEach(function(t){d[e].includes(t)||t["pre-"+e]&&t["pre-"+e]()}),h.lastTypeUserData[e]=d[e]}(y);else this.lastTypeUserData=d;t||(o=this.camera,r=this.scene,t=this.viewPort,this.extra.forEach(function(t,e){var o,r;t&&(o=t.camera,r=t.scene,t=t.viewPort,h.set(o,r,t),h.intersect(n,i,a,s,l,!0,e+1))}),this.set(o,r,t))}}},{key:"appendExtra",value:function(t,e,o){for(var o={camera:t,scene:e,viewPort:o},r=0;r<this.extra.length&&this.extra[r];r++);return this.extra[r]=o,r}},{key:"setExtra",value:function(t,e,o,r){t=this.extra[t];t?(t.camera=e,t.scene=o,t.viewPort=r):console.error("RaycasterManager: 无此额外组合")}},{key:"removeExtra",value:function(t){this.extra[t]=null}}]),a}(),gr=function(){function o(t,e){bo()(this,o),this.sum=0,this.step=0,this.listener=t,this.frameManager=e}return Eo()(o,[{key:"init",value:function(o,t,e){var r=this,t=T()(t,5),n=t[0],i=t[1],a=t[2],s=t[3],l=t[4],e=T()(e,2),h=e[0],c=e[1],e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:["step","sum"],e=T()(e,2),u=e[0],p=e[1],d=this.listener;this.ready=function(t){d.dispatch(n,o,S()({},p,t),null),d.dispatch(i,o,S()({},p,r.sum),null)},this.next=function(t){var e;d.dispatch(a,o,(e={},S()(e,u,r.step),S()(e,p,r.sum),S()(e,"stepNum",t),e))},this.final=function(){var t;d.dispatch(s,o,(t={},S()(t,u,r.step),S()(t,p,r.sum),t))},this.end=function(){var t;r.step=0,r.sum=0,l&&d.dispatch(l,o,(t={},S()(t,u,r.step),S()(t,p,r.sum),t))};function f(t){r.appendSum(t)}function m(t){r.run(t)}d.add(h,o,f),d.add(c,o,m),this.release=function(){d.remove(h,o,f),d.remove(c,o,m)}}},{key:"start",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;this.step=0,this.sum=t,this.ready&&this.ready(t)}},{key:"stop",value:function(){this.end()}},{key:"appendSum",value:function(){this.sum+=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1}},{key:"run",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;this.step+=t;var e=this.step,o=this.sum;console.log(e,o),this.stepped(t),o<=e&&this.step>=this.sum&&(this.complete(),this.sum=0,this.step=0)}},{key:"stepped",value:function(t){this.next&&this.next(t)}},{key:"isCompleted",value:function(){return this.step>=this.sum}},{key:"complete",value:function(){this.onComplete&&this.onComplete(),this.final&&this.final()}},{key:"close",value:function(){this.ready=null,this.next=null,this.final=null,this.release&&this.release(),this.release=null}}]),o}(),vr=function(){function o(t,e){bo()(this,o),this.listener=t,this.frameManager=e}return Eo()(o,[{key:"buildProgress",value:function(t,e,o){var r=new gr(this.listener,this.frameManager);return r.init(t,e,o),r}}]),o}(),yr=u("7Pct");function Sr(e,t){var o,r=Object.keys(e);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(e),t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)),r}function br(t){var e=null;return(e=document.createElement("img")).width=1,e.height=1,e.onload=e.onerror=e.onabort=function(){return e.onload=null,e.onerror=null,e.onabort=null},e.src=t}var Er=function(){function r(t,e,o){bo()(this,r),this.category=t,this.type=e,this.url=o,this.map={},this.t=0}return Eo()(r,[{key:"getPostInfor",value:function(){var t=window.VRHOUSE_CONFIG,e=t.CUSTOMER,o=t.BUSINESS,r=t.STATUS_ISONLINE,n=o||{},i=n.id,t=void 0===i?"-1":i,o=n.type,i=n.dataId,n=yr.a.getConfig;return{environment:!1!==r?"on line":"test",sdkVersion:"5.5.7-1",isIntegrate:!(!window.environment||-1==["integrate","dev"].indexOf(window.environment)),isCompareMode:!!n(e,"compare"),isCompare:!1,businessId:t,businessType:o,dataId:i}}},{key:"post",value:function(t){var e=Object.assign(this.getPostInfor(),t),o=this.url,r=this.category,t=this.type;br("".concat(o,"?category=").concat(r,"&type=").concat(t,"&data=").concat(encodeURIComponent(JSON.stringify(e)),"&t=").concat((new Date).getTime()))}}]),r}(),n=function(){function r(t,e,o){bo()(this,r),this.frameManager=t,this.fingerprint=e,this.pageId=o,this.map={},this.loops=0,this.startTime=(new Date).getTime(),this.census={css:{size:0},js:{size:0},html:{size:0},version:window.__SDK_VERSION__||"1.0.0",startTime:(new Date).getTime(),endTime:(new Date).getTime(),loadingTime:0,renderTimes:0}}return Eo()(r,[{key:"init",value:function(t,o,r,e){var n=this,i=this.census;this.BUSINESS=e||{},t.census=i,Object.keys(o).map(function(t){var e=o[t];i[t]={duration:e.loadTime}}),Object.keys(r).map(function(t){var e=r[t];i[t]={duration:e.loadTime}}),i.panoImgSize=RENDERS.room.cubeTexture1.image[0].naturalWidth,i.panoImgGpuSize=RENDERS.room.houseData.spots.length*RENDERS.room.cubeTexture1.image[0].naturalWidth*RENDERS.room.cubeTexture1.image[0].naturalWidth*4*1.33/1048576,this.start(),t.getCensus=function(){var t=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Sr(Object(o),!0).forEach(function(t){S()(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Sr(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}({},i);t.GPU=RENDERS.room.textureLoader.clientGPU;var e=(new Date).getTime()-i.startTime;return t.FPS=Math.round(n.loops/e*1e3),t.memory=(window.performance.memory.usedJSHeapSize/1048576).toFixed(2),t},this.frameManager.add(this.update.bind(this)),window.removeEventListener("onbeforeunload",this.end),window.addEventListener("onbeforeunload",this.end)}},{key:"reset",value:function(t,e){var o,r,n,i=t||this.BUSINESS.dataId;o={category:"",panoDuration:(new Date).getTime-this.startTime,dataId:t,pageId:this.pageId},r=o.category,n=o.type,o=o.logParams,o=JSON.stringify(o),br("./log?category=".concat(r,"&type=").concat(n,"&data=").concat(encodeURIComponent(o),"&t=").concat(new Date)),t&&(this.BUSINESS.dataId=i,this.startTime=(new Date).getTime())}},{key:"update",value:function(){this.loops++}},{key:"start",value:function(t){var o;window.performance.getEntries&&(o=this.census,window.performance.getEntries().map(function(t){var e;switch(t.initiatorType){case"script":/static\/js\/main|static\/js\/lib'/.test(t.name)&&(e=(e=(e=t.name.split("/"))[e.length-1].split(".")[0]).split("_")[0],console.log(e),o.js.size+=t.encodedBodySize,o.js[e]={duration:t.duration,size:t.encodedBodySize,startTime:t.startTime});break;case"link":(0<t.name.indexOf("static/js/main")||0<t.name.indexOf("static/js/lib"))&&(e=(e=(e=t.name.split("/"))[e.length-1].split(".")[0])[e.length-1].split("_")[0],console.log(e),o.css.size+=t.encodedBodySize,o.css[e]={duration:t.duration,size:t.encodedBodySize,startTime:t.startTime});break;case"navigation":o.html.size+=t.encodedBodySize,o.html.duration=t.duration}}))}},{key:"end",value:function(){var t=this.census;t.endTime=(new Date).getTime(),t.times=t.endTime-t.startTime,t.FPS=Math.round(this.loops/t.duration*1e3),this.reset()}},{key:"applySpace",value:function(t,e){var o=this.map[t]&&this.map[t][e];return o||(o=new Er(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:"./log",3<arguments.length&&void 0!==arguments[3]?arguments[3]:5e3),this.map[t]||(this.map[t]={}),this.map[t][e]=o)}},{key:"clear",value:function(){for(var t in this.map)for(var e in this.map[t]){e=this.map[t][e];e.post(),this.frameManager.remove(e.update)}this.map={}}}]),r}(),wr=function(){function e(t){bo()(this,e),this.floorRender=t,this.textRender=new Co({cornerWidth:0,textFillStyle:"#333333",fontface:"sans-serif",fontWeight:"700",textAlign:"left"})}return Eo()(e,[{key:"draw",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},r=t.Name,n=t.Area,i=t.originArea,a=this.floorRender.AppParams.isMobile,s=(this.floorRender.sizeUnitType,a?13:8),l=new THREE.Group;l.matrixAutoUpdate=!1;var t=new RegExp("[\\u4E00-\\u9FFF]+","g").test(r)?r.replace(/[^\x00-\xff]/g,"01").length:1.3*r.length,h=Object(Do.g)(o);r&&(h.add(1),r=this.textRender.draw(r,{fontSize:a?38:28},{x:-t*(a?5:3.5),y:0,z:-(n?s:0)},function(){h.pass(1)}),l.add(r));var c,u=this.floorRender.roomConfig.SIZE_UNIT_TYPE||"m";return e&&n&&(c=i.toFixed(1)+u+"²",this.floorRender.AppParams.isDrawFloorPlan&&"m"!==u&&listener.dispatch("todoSizeTranslate","sizeTranslateDom",{translateType:this.floorRender.translateType,size:i,sizeType:"squarmeter",cb:function(t){c=t.toFixed(1)+u+"²"}}),h.add(1),(s=this.textRender.draw(c,{fontSize:a?34:24},{x:-t*(a?5:3.5),y:0,z:s},function(){h.pass(1)})).userData={value:n,originArea:i},l.add(s)),l}},{key:"renderTrangle",value:function(){var t=this.floorRender.textureLoader.load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAASCAYAAABvqT8MAAAAAXNSR0IArs4c6QAAAMpJREFUKBWNkkEOgjAQRTvExKSgNnTHEdh7FNe61kMp53Ett5CQAC4Z2yJpHQqlSZN2+n//y2RYLOQjyzLO1q74kGIi5CtJ03yNJ9IiRMyxh+dOyEvIZAxGhMh7xHsIETQS/RUAShbhqa2qkr7ZBOdlCdFrWEL0Ijlh5ugirjL8XB+Fc5tHojHDHTf++n91RGpU18IJAMWeb49ji+cTADTztanfRVfbRK/BRbDS4TRFIgjUwPRomC1kp4bvPBGQgkFaQiB6xkLTSQ1f79BWkKDbaYIAAAAASUVORK5CYII=");t.minFilter=THREE.LinearFilter;var e=new THREE.SpriteMaterial({map:t,alphaTest:.1}),t=new THREE.Sprite(e),e=this.floorRender.AppParams.isMobile?8:6;return t.scale.set(e,1.5*e,1),t}}]),e}(),Tr="https://img.58cdn.com.cn/git/teg-app-fe/vr-house-viewer-V5-test/static/v5.5.7-1/compass_2d556@3x_9da2ea87.png";function xr(o){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=Mo()(o);return e=r?(t=Mo()(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),Po()(this,e)}}function Pr(t,e){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,n=t.geometry,i=n.faces,a={x:1/0,y:1/0},s={x:-1/0,y:-1/0};n.faceVertexUvs[0]=[];for(var l,h,c,u=n.vertices,p=[],d=0;d<u.length;d++){var f=(l=u[d],h=o,c=r,void 0,(f={}).x=l.x*h+l.y*c,f.y=l.x*c+l.y*h,f);a.x=(a.x<=f.x?a:f).x,a.y=(a.y<=f.y?a:f).y,s.x=(s.x>=f.x?s:f).x,s.y=(s.y>=f.y?s:f).y,p.push(f)}for(var m=s.x-a.x,g=s.y-a.y,d=0;d<i.length;d++){var v=p[i[d].a],y=p[i[d].b],S=p[i[d].c];n.faceVertexUvs[0].push([new THREE.Vector2((v.x-a.x)/m,(v.y-a.y)/g),new THREE.Vector2((y.x-a.x)/m,(y.y-a.y)/g),new THREE.Vector2((S.x-a.x)/m,(S.y-a.y)/g)])}e&&(t.material.map.repeat={x:m/e.width,y:g/e.height}),n.uvsNeedUpdate=!0}var Mr=6,Dr=2,Cr=5.8,kr=7,Rr=6,Ir=7.5,Ar=5.5,_r=10,Fr=function(t){xo()(i,t);var n=xr(i);function i(t){bo()(this,i);var e=n.call(this,t),o=window.THREE;e.canvasStepper=t.canvasStepper,e.DEFAULT_GEOMETRY=new o.PlaneBufferGeometry(1,1,1,1),e.areaMaterial=new o.MeshBasicMaterial({color:16711680,side:o.DoubleSide,transparent:!0,opacity:0}),e.rulerGroup={},e.wallGroup=new o.Group,e.wallGroup.name="wall-group",e.windowGroup=new o.Group,e.windowGroup.name="window-group",e.FLOOR_INFO={},e.FLOOR_BACKGROUND={},e.FLOOR_AREA={},e.cameraPos={},e.scene=new o.Scene,e.setCamera(),e.controls.setObject(e.camera);var r=e.controls,o=r.getPolarAngle();r.minPolarAngle=o,r.maxPolarAngle=o,r.maxAzimuthAngle=o,r.minAzimuthAngle=o,e.update=e.update.bind(wo()(e)),e.initFloorPlan(),e.cameraInFloorId=null,e.floorHotspot=new wr(wo()(e));o=e.AppParams.isMobile;return e.initStatus(),e.loadingMark=0,e.loadStatus=0,e.textRenderX=new Co({fontface:"sans-serif",textAlign:"center",fontSize:o?38:34,textFillStyle:"rgba(92, 92, 92, 0.8)",backgroundFillStyle:"rgba(0, 0, 0, 0)"}),e.textRenderZ=new Co({fontface:"sans-serif",textAlign:"center",rotation:-Math.PI/2,fontSize:o?38:34,textFillStyle:"rgba(92, 92, 92, 0.8)",backgroundFillStyle:"rgba(0, 0, 0, 0)"}),e.progress=0,e.roomConfig=t.room,console.log("IS_SHOW_SIZE_UNIT_TYPE_BTN!!!"),listener.add("todoResetSize","sizeTranslateDom",function(t){e.resetSize(t)}),e.bigSpotMap={},e.spotMap={},e.initListener(),e}return Eo()(i,[{key:"initListener",value:function(){var e=this,o=this.AppParams.isMobile,r=this.controls,n=function(t){o&&(r.enablePan=1.1<e.camera.zoom)};r.domElement.addEventListener("wheel",n),r.domElement.addEventListener("touchmove",function(t){switch(t.touches.length){case 1:break;case 2:n()}}),r.domElement.addEventListener("touchstart",function(t){t.touches[0].pageX,t.touches[0].pageY}),r.domElement.addEventListener("touchend",function(){})}},{key:"prepareSpots",value:function(t){var a=this;this.sizeUnitType=this.roomConfig&&this.roomConfig.SIZE_UNIT_TYPE||"m",this.translateType="ft"===this.sizeUnitType?"mToFt":"ftToM";this.canvasStepper.add([function(t){a.bigSpotMap={},a.spotMap={};var e,o=Object(Do.g)(t),r=a.houseData.rooms;for(e in r){var n=r[e].Info,i=n.ShootSpotIds[0];a.bigSpotMap[i]||(o.add(1),a.bigSpotMap[i]=a.floorHotspot.draw(n,!0,function(){o.pass(1)})),a.spotMap[i]||(o.add(1),a.spotMap[i]=a.floorHotspot.draw(n,!1,function(){o.pass(1)}))}},function(){t&&t()}])}},{key:"getSpot",value:function(t,e){var o=e?this.bigSpotMap:this.spotMap,r=t.ID||t.ShootSpotIds[0];return o[r]?o[r].clone():(o[r]=this.floorHotspot.draw(t,e),o[r])}},{key:"initFloorPlan",value:function(){this.root=new THREE.Group,this.root.name="floor-plan",this.root.visible=!1,this.scene.add(this.root)}},{key:"reset",value:function(t){this.dispose(),this.loadingMark++,this.root.children=[],this.FLOOR_INFO=[],this.currentCompass={},this.loadStatus=0,this.loadingDataMark++,this.buildFloorPlan(t)}},{key:"loadSvgData",value:function(){var n=this,i=this.houseData,a=this.loadStatus,s=this.config,l=this.AppParams;return new Promise(function(o,e){var r,t;0===a?(n.loadingMark++,n.loadStatus=1,r=n.loadingMark,t=i.Info.SvgUrl,t=-1===["https:/","data:im","/static","http://"].indexOf(t.substring(0,7))?(i.dataFrom.prefix||s.dataFrom.prefix||l.routerMatch.roomDir)+t:t,s.jsonLoader(t).then(function(t){var e;r==n.loadingMark&&(n.loadStatus=2,e={},t.Floors.map(function(t){e[t.Infos.ID]=t}),e.default=t.Floors[0],i.svgData=e,o())}).catch(function(t){r==n.loadingMark&&(n.loadStatus=2,e())})):2===n.loadStatus&&o()})}},{key:"buildFloorPlan",value:function(e,o,r){var n,i=this;this.root.visible=!0,this.camera.position.copy(this.getDefaultCameraPosition(o)),this.camera.lookAt(new THREE.Vector3(0,0,0)),this.camera.updateProjectionMatrix(),this.inVisibleAll(),e instanceof Array?n=e[0].ID:e&&(n=e),this.roomConfig.IS_DRAW_FLOORPLAN&&this.houseData.Info.SvgUrl?this.loadSvgData().then(function(t){i.renderFloorPlan(n,o,r)}).catch(function(t){console.warn(t),i.houseData.Info.SvgUrl=null,i.reset(e)}):this.renderFloorPlan(n,o,r)}},{key:"inVisibleAll",value:function(){0<this.root.children.length&&this.root.children.forEach(function(t,e,o){t.visible=!1})}},{key:"setVisible",value:function(r,n){this.root.children.forEach(function(t,e,o){t.children.forEach(function(t,e,o){t.name===r&&(t.visible=n)})})}},{key:"setOpacity",value:function(r){this.root&&function t(e){var o;e&&(e.children&&e.children.length&&"room-area-group"!==e.name?e.children.forEach(t):"Mesh"===e.type&&(o=e.material,e=e.name,o.opacity=r,e.indexOf("room-single")))}(this.root.children[1])}},{key:"setOpacityAnimation",value:function(){var o=this;this.moveAnimation=this.frameManager.animation({duration:0<arguments.length&&void 0!==arguments[0]?arguments[0]:100,update:function(t,e){o.setOpacity(e<.3?.3:e)},final:function(t){o.moveAnimation=null}},!0)}},{key:"setCamera",value:function(){this.HouseParams;var t=window.innerWidth,e=window.innerHeight,e=this.camera=new THREE.OrthographicCamera(-t/2,t/2,e/2,-e/2,.5,1e4);e.name="floor-plan-camera",e.rotation.reorder("YXZ"),e.lookAt(new THREE.Vector3(0,0,0)),e.updateProjectionMatrix()}},{key:"resetCamera",value:function(t){this.HouseParams;var e,o,r,n=this.AppParams,i=this.houseData.houseSize,a=void 0===this.houseData.margin?51:0,n=n.miniGuideWidth/n.miniGuideHeight;t&&(n=(s=this.renderTool.size).x/s.y);var s=i.x/2+a+100,a=i.z/2+a+100,a=a<s/n?(r=(o=s)/n,(e=-s)/n):(e=-a*n,o=a*n,-(r=a));this.camera.left=e,this.camera.right=o,this.camera.top=r,this.camera.bottom=a,this.camera.updateProjectionMatrix()}},{key:"getDefaultCameraPosition",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=this.HouseParams,o=this.AppParams,r=this.houseData.houseSize,n=void 0===this.houseData.margin?51:0,i=o.miniGuideWidth/o.miniGuideHeight,a=e.smallGuideFov;this.resetCamera(t),t&&(i=(o=this.renderTool.size).x/o.y,a=e.fullScreenFov);i=(r.x/2+n+100)/(Math.tan(THREE.Math.degToRad(a/2))*i),a=(r.z/2+n+100)/Math.tan(THREE.Math.degToRad(a/2)),a=Math.max(i,a);t&&(this.controls.maxDistance=a);a=new THREE.Vector3(0,a,0);return this.cameraPos[t]=a}},{key:"updateControlsState",value:function(t){var e=this.AppParams.isMobile;this.controls.enabled=t,this.controls.enableZoom=t,this.controls.enablePan=e?t&&1.1<this.camera.zoom:t}},{key:"setFloorPlan",value:function(t){1!==this.loadStatus&&this.renderFloorPlan(t,1<arguments.length&&void 0!==arguments[1]&&arguments[1])}},{key:"renderFloorPlan",value:function(t){var e,o=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=2<arguments.length?arguments[2]:void 0,n=this.houseData,i=n.originData,a=n.Info,s=n.floorsPlan,l=n.dataFrom,h=n.floors,c=i.Has2DCompass,u=i.ProtocolVersion,n=(void 0===l?{}:l).house;(new Date).getTime();for(e in this.FLOOR_INFO)this.FLOOR_INFO[e].visible=!1;"all"===t&&(t=h[0].ID);var p,i=this.FLOOR_INFO[t+n+o],l=this.roomConfig&&this.roomConfig.SIZE_UNIT_TYPE||"m",h="ft"===l?"mToFt":"ftToM";return i&&this.sizeUnitType!==l&&this.resetSize({translateType:h,sizeUnitType:l}),this.sizeUnitType=l,this.translateType=h,i?(i.visible=!0,this.roomConfig.IS_DRAW_FLOORPLAN&&this.houseData.Info.SvgUrl?(this.FLOOR_BACKGROUND[t]||(this.FLOOR_BACKGROUND[t]=this.renderBackgroundBySvgData(t)),this.houseData.svgData&&i.add(this.FLOOR_BACKGROUND[t]),this.houseData.svgData&&i.add(this.createCompassBySvgData(i,o,t)),(p=this.renderFloorIntro(i,t,o)).visible=o,i.add(p)):((p=this.renderFloorIntro(i,t,o)).visible=o,void 0!==u&&i.add(p))):((i=new THREE.Group).name=t+o,i.matrixAutoUpdate=!1,i.__type=o,this.FLOOR_INFO[t+n+o]=i,this.root.add(i),this.roomConfig.IS_DRAW_FLOORPLAN&&this.houseData.Info.SvgUrl?(o?(i.add(this.renderFloorIntro(i,t,o)),!1!==this.config.IS_AREA_DISPLAY&&this.houseData.svgData&&i.add(this.renderFloorRuler(t))):((n=this.renderFloorIntro(i,t,o)).visible=!1,i.add(n)),this.FLOOR_BACKGROUND[t]||(this.FLOOR_BACKGROUND[t]=this.renderBackgroundBySvgData(t)),this.houseData.svgData&&i.add(this.FLOOR_BACKGROUND[t]),this.houseData.svgData&&i.add(this.createCompassBySvgData(i,o,t))):o?(i.add(this.renderBackground(t,!0)),void 0!==u&&i.add(this.renderFloorIntro(i,t,o)),i.add(this.createArea(t)),(void 0!==u&&!1===c||void 0===u&&void 0!==a.Description&&s[t]&&(!s[t].ThumbnailUrl||s[t].Margin))&&i.add(this.createCompass({x:-a.HouseSize.x/2,z:-a.HouseSize.z/2},a.Description||0,Tr))):(i.add(this.renderBackground(t,!1)),(a=this.renderFloorIntro(i,t,o)).visible=!1,void 0!==u&&i.add(a))),o?t===this.cameraInFloorId&&(t=this.renderCurrentHotspotBig(),r&&this.renderHotPotsControl(t,r),i.add(t)):i.add(this.renderCurrentHotspotSmall()),this.currentDetail&&this.changeCurrent(this.currentDetail),i}},{key:"createCompassBySvgData",value:function(t,e){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"default";if(this.houseData.svgData){var r=new THREE.Box3;if(this.currentCompass&&this.currentCompass[e]&&this.currentCompass[e].parent==t&&t.remove(this.currentCompass[e]),r.expandByObject(t),this.currentCompass&&this.currentCompass[e])return this.currentCompass[e].position.set(r.min.x,r.min.y,r.min.z),this.currentCompass[e];o=this.houseData.svgData[o].Infos,o=this.createCompass(r.min,o.CompassRotation||0,Tr);return o.name="compass-".concat(e?"big":"small"),o.matrixAutoUpdate=!0,this.currentCompass||(this.currentCompass={}),(this.currentCompass[e]=o).updateMatrix(),o}}},{key:"getVerticalAxis",value:function(t,e){var o,t=e.clone().sub(t);return 0==t.x?o=new THREE.Vector3(0<t.z?1:-1,0,0):0==t.z?o=new THREE.Vector3(0,0,t.x<0?1:-1):(o=new THREE.Vector3(1,0,-1/(t.z/t.x)).normalize(),t.z<0&&o.multiplyScalar(-1)),o}},{key:"getDoorObj",value:function(t){var o={};return t.forEach(function(e){e.Doors.forEach(function(t){"Door"!==t.Type&&"NormalDoor"!==t.Type&&"Entrances"!==t.Type||(o[t.ID]?(e.Doors.length<o[t.ID].roomDoorsNum&&(o[t.ID].roomID=e.Infos.ID,o[t.ID].roomDoorsNum=e.Doors.length),o[t.ID].cnt++):o[t.ID]={roomID:e.Infos.ID,roomDoorsNum:e.Doors.length,cnt:1})})}),o}},{key:"renderBackgroundBySvgData",value:function(){var T=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";if(this.houseData.svgData){var e=this.houseData.svgData[t],t=e.Rooms,n=e.Infos,e=new THREE.Group,f=new THREE.Group;f.name="wall-group";var m=new THREE.Group;m.name="window-group";var i=[],a=0;n.Contours.forEach(function(t,e){var o=new THREE.Vector3(t.Start.x,0,-t.Start.y),r=new THREE.Vector3(t.End.x,0,-t.End.y),t=n.Contours[(e+1)%n.Contours.length],t=new THREE.Vector3(t.Start.x,0,-t.Start.y);i[a]||(i[a]=[]),i[a].push(o),r.distanceTo(t)<=1?e===n.Contours.length-1&&(0!==a?(i[0]=i[a].concat(i[0]),i.splice(a,1)):i[a].push(r)):(i[a].push(r),a++)}),i.forEach(function(t,e){var o=new THREE.MeshLine;o.setPoints(t);o=new THREE.Mesh(o.geometry,new THREE.MeshLineMaterial({color:new THREE.Color(7238264),lineWidth:6,resolution:T.renderTool.size,side:THREE.DoubleSide}));o.position.y=Mr,f.add(o)});var g=new THREE.Group;g.name="room-group";var v=new THREE.Group;v.name="door-group";var x=new THREE.Group;x.name="stair-group";var P=this.getDoorObj(t);return t.forEach(function(y,e){var s,S,r,t,o,n,i,b,E,w,a,l,h,c,u,p;function d(t,e,o,r,n){var i=o.isIn,a=void 0!==i&&i,s=o.extend,l=e.clone().sub(t),i=(i=t,s=(o=e).clone().sub(i),o=new THREE.Vector3(0,-1,0),(i=new THREE.Vector3).crossVectors(s,o),i.normalize()),e=new THREE.PlaneGeometry(t.distanceTo(e)+6,a?6:9).rotateZ(-Math.atan2(l.z,l.x)).rotateX(-Math.PI/2).translate((t.x+e.x)/2,r,(t.z+e.z)/2),n=new THREE.Mesh(e,n);return a||n.translateOnAxis(i,1.5),n}y.Walls.length<1||((s=new THREE.Group).name="wall-in-group"+y.Infos.Name,y.Walls.forEach(function(t,e){var o,r,n,i=new THREE.Vector3(t.Start.x,0,-t.Start.y),a=new THREE.Vector3(t.End.x,0,-t.End.y),r=(o=i,r=a,t=Cr,a="number"==typeof(i=6)?n=i:(n=i.width,i.extend?i.width:0),i=r.clone().sub(o),o=new THREE.PlaneGeometry(o.distanceTo(r)+a,n).rotateZ(-Math.atan2(i.z,i.x)).rotateX(-Math.PI/2).translate((o.x+r.x)/2,t,(o.z+r.z)/2),r=new THREE.MeshBasicMaterial({color:7238264,side:THREE.DoubleSide}),(r=new THREE.Mesh(o,r)).matrixAutoUpdate=!0,r);s.add(r)}),f.add(s),S={},r=new THREE.Shape,y.Infos.Contours.forEach(function(t,e){S[t.ID]=t;var o=Object(Do.l)(t.Start,y.Infos.Center),t=Object(Do.l)(t.End,y.Infos.Center);0===e?r.moveTo(o.x,-o.y):r.lineTo(o.x,-o.y),r.lineTo(t.x,-t.y)}),n=y.Infos.Contours[0].Start,r.lineTo(n.x,-n.y),t=new THREE.ShapeGeometry(r),u=new THREE.MeshBasicMaterial({color:16777215,side:THREE.DoubleSide,transparent:!0,opacity:0}),o={width:20,height:20},o=-1!==y.Infos.Name.indexOf("卧")||-1!==y.Infos.Name.indexOf("保姆房")?(i="https://img.58cdn.com.cn/git/teg-app-fe/vr-house-viewer-V5-test/static/v5.5.7-1/bedroom_32fd5666.png",{width:450,height:450}):-1!==y.Infos.Name.indexOf("厅")?(i="https://img.58cdn.com.cn/git/teg-app-fe/vr-house-viewer-V5-test/static/v5.5.7-1/sittingroom_2f61e480.png",{width:150,height:150}):(i="https://img.58cdn.com.cn/git/teg-app-fe/vr-house-viewer-V5-test/static/v5.5.7-1/ketchen_5da8d7f2.png",{width:54,height:54}),n=new THREE.MeshBasicMaterial({side:THREE.DoubleSide,transparent:!1,opacity:1,depthWrite:!1}),u.name="opacity0",u=T.roomConfig.IS_DRAW_FLOORPLAN&&T.houseData.Info.SvgUrl?i?((i=T.textureLoader.load(i)).wrapT=THREE.RepeatWrapping,i.wrapS=THREE.RepeatWrapping,new THREE.MeshBasicMaterial({map:i,side:THREE.DoubleSide,depthWrite:!1})):n:u,(u=new THREE.Mesh(t,u)).matrixAutoUpdate=!0,u.rotation.x=Math.PI/2,u.position.y=Dr,u.name="room-single"+y.Infos.Name,u.userData={pointUp:function(){var t=T.houseData.spots,t=void 0===t?[]:t,e=y.Infos.ShootSpots.ShootSpotIds[0],t=t.filter(function(t){return t.ID===e}),t=0!==t.length&&t[0].isHide;return T.isClick()&&!t&&T.listener.dispatch("toDoToRoom","houseModule",y.Infos.ShootSpots,{from:"floorPlanRender",origin:{from:"floorPlan",id:y.Infos.ShootSpots.ShootSpotIds[0]}}),!0}},Pr(u,o),u.renderOrder=e,g.add(u),(b=new THREE.Group).name="door-single"+y.Infos.Name,E=new THREE.MeshBasicMaterial({map:T.textureLoader.load("https://img.58cdn.com.cn/git/teg-app-fe/vr-house-viewer-V5-test/static/v5.5.7-1/PlanDoor_a44fc728.png"),transparent:!0,side:THREE.DoubleSide}),w=new THREE.MeshBasicMaterial({map:T.textureLoader.load("https://img.58cdn.com.cn/git/teg-app-fe/vr-house-viewer-V5-test/static/v5.5.7-1/sliddoor_e05c1cd4.png"),transparent:!0}),y.Doors.forEach(function(t,e){var o,r,n,i,a,s,l,h,c,u,p,d,f,m,g,v;"Door"!==t.Type&&"Entrances"!==t.Type||!P||P[t.ID].roomID!==y.Infos.ID||(a=function(t,e,o){var r=e.clone().sub(t),t=new THREE.PlaneGeometry(t.distanceTo(e),o).rotateZ(-Math.atan2(r.z,r.x)).rotateX(-Math.PI/2).translate((t.x+e.x)/2,Rr,(t.z+e.z)/2),e=new THREE.MeshBasicMaterial({color:7238264,side:THREE.DoubleSide});return new THREE.Mesh(t,e)},c=new THREE.Vector3(t.Start.x,0,-t.Start.y),o=new THREE.Vector3(t.End.x,0,-t.End.y),r="Entrances"===t.Type,h=T.getVerticalAxis(c,o),1===P[t.ID].cnt?(n=a(c,o,9)).translateOnAxis(h,1.5):n=a(c,o,6),n.name="door-base",b.add(n),l=c.distanceTo(o),1!==P[t.ID].cnt||r?60<=l&&!r?(m=c,v=(g=o).clone().sub(m),g=new THREE.PlaneGeometry(m.distanceTo(g),6).rotateZ(-Math.atan2(v.z,v.x)).rotateX(-Math.PI/2).translate((m.x+g.x)/2,Ir,(m.z+g.z)/2),s=new THREE.Mesh(g,w),b.add(s)):(i=new THREE.PlaneGeometry(30,30),a=new THREE.Mesh(i,E),(l=S[t.ParentID])&&(s=new THREE.Vector3(l.Start.x,0,-l.Start.y),l=new THREE.Vector3(l.End.x,0,-l.End.y),c.distanceTo(s)<o.distanceTo(l)&&(u=new THREE.Vector2(0,0),p=new THREE.Vector2(1,0),d=new THREE.Vector2(1,1),f=new THREE.Vector2(0,1),i.faceVertexUvs[0]=[[d,p,f],[p,u,f]])),a.position.set((c.x+o.x)/2,Ir,(c.z+o.z)/2),r?a.translateOnAxis(h,12):a.translateOnAxis(h,-12),a.rotation.x=-Math.PI/2,a.userData.ID=t.ID,h=(new THREE.Vector3).subVectors(o,c),c=(new THREE.Spherical).setFromVector3(h),a.rotation.z=c.theta+Math.PI/2,r&&a.rotateOnWorldAxis(h.normalize(),Math.PI),a.position.y=Ir,b.add(a)):(console.log("舍弃门ID",t.ID),b.remove(n)))}),v.add(b),a=new THREE.MeshBasicMaterial({map:T.textureLoader.load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIEAAAAVCAYAAABhV40FAAAAAXNSR0IArs4c6QAAAMdJREFUaAXtmb0NwjAUhC+ISYJHiQjjIBpWI5FHcbJK8I9QCjf097my3N3dV7zzG56v9yGOtQPXoj7cRoUwWhvhKD6lXWnb1SDIAMz3ydEHc82xQnAxdwH52QEgAAMggAFpoB2AAe3AmAHagXH4p3TawemF+Y12YA5AkQ8EQAAEMKD2bVymRCnih5kDLfcfBHmJUBYJHE8H6j/BY55YIBnmv6xRnyUyExhm30mmHXSW+D0AgV/mneI6E9AOOl8sHmgHFjH/J/ILylQ2MwRAa7IAAAAASUVORK5CYII=")}),l=new THREE.MeshBasicMaterial({map:T.textureLoader.load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKUAAAASCAYAAAA65B4XAAAACXBIWXMAAAsSAAALEgHS3X78AAABl0lEQVRo3u2ZO6oCQRBFZxWTuwdD0UwwUYwEfzMiKi7BUDHwB8LgGmYdjpG4ABE/IPgJ3IAfhPvsAuG9cKYH3gT3wqGhKrsUVd3VBigqYjJ6vR5IMLrdLvr9PsbjMUajEQaDgcTojR4sSs2C7HQ6KJVKKJfLaDabEmNhahYlh4WezuczKpUKarUaptMpDQljfL/fbxD/vF4vMXCz2UiXtG0bw+FQYs/nkx5pYChziX9U4Smt12sUi0VUq1W5Uyo9Hg96pAHHt6Zutxvq9TparRZmsxkNCWN8JxIJkGAkk0nE43GYpinEYjGkUil6o4nxEQiJGDSBRIzFYgHin/l8juVyCdd1kU6nkclk0G63sVqtJEePgsOHjqau16vsKBuNBhzHoSFhPHS4ggiGWvt8V0LqR+f3Suh+v9MjroT+T8fjUYrSsixMJhMaEkan3O/3IP7Z7XY4nU7wPE/Gt9pVqn/vy+UiOXoUHCObzYL4J5fLyZnP56VTql+dQqHwJ0eCwU6pweFwkHO73QqqQ35jRKNT8gZDRU0/n8Ro9TVBoqwAAAAASUVORK5CYII=")}),h=new THREE.Group,y.Windows.forEach(function(t,e){new THREE.Geometry;t=d(new THREE.Vector3(t.Start.x,0,-t.Start.y),new THREE.Vector3(t.End.x,0,-t.End.y),{isIn:"Outside"!==t.Type,extend:0},kr,a);h.add(t)}),y.BayWindows.forEach(function(t,e){t.Windows.forEach(function(t,e){t=d(new THREE.Vector3(t.Start.x,0,-t.Start.y),new THREE.Vector3(t.End.x,0,-t.End.y),{isIn:!1,extend:0},kr,l);h.add(t)});var o=new THREE.Shape;t.Contours.forEach(function(t,e){0===e?o.moveTo(t.Start.x,-t.Start.y):o.lineTo(t.Start.x,-t.Start.y),o.lineTo(t.End.x,-t.End.y)});var r=t.Contours[0].Start;o.lineTo(r.x,-r.y);t=new THREE.ShapeGeometry(o),r=new THREE.MeshBasicMaterial({color:15721681,side:THREE.DoubleSide,transparent:!0,opacity:1}),r=new THREE.Mesh(t,r);r.matrixAutoUpdate=!0,r.rotation.x=Math.PI/2,r.position.y=Ar,r.name="room-single-baywindow",g.add(r)}),m.add(h),c=new THREE.Group,(u=T.textureLoader.load("https://img.58cdn.com.cn/git/teg-app-fe/vr-house-viewer-V5-test/static/v5.5.7-1/louti_1f9f26da.png")).wrapT=THREE.RepeatWrapping,u.wrapS=THREE.RepeatWrapping,u.repeat.y=-1,p=new THREE.MeshBasicMaterial({map:u,color:16777215,side:THREE.DoubleSide,depthWrite:!1}),y.Stairs&&y.Stairs.forEach(function(t){t.Contours&&0<t.Contours.length&&((t=T.renderStair(t,p,e)).name="stair",t.matrixAutoUpdate=!0,t.rotation.x=Math.PI/2,t.position.y=Dr,c.add(t))}),x.add(c))}),e.add(v),e.add(g),e.add(f),e.add(m),e.add(x),e}}},{key:"renderStair",value:function(t,e,o){if(!t.Contours||t.Contours.length<=0)return null;for(var r=new THREE.Group,n=0;n<t.Contours.length;){var i=[t.Contours[n],t.Contours[n+1],t.Contours[n+2],t.Contours[n+3]];n+=4,console.log(i);i=this.renderSingleStair(i,e);i.renderOrder=o,r.add(i)}return r}},{key:"renderSingleStair",value:function(t,e){if(!t||t.length<=0)return null;var o=t[1],r=o.Start,n=o.End,o=new THREE.Vector2(r.x,r.y),r=new THREE.Vector2(n.x,n.y),n=r.sub(o),o=o.distanceTo(r),r=n.x/o,n=n.y/o,i=new THREE.Shape,a=t[0].Start,s=t[0].End;i.moveTo(a.x,-a.y),i.lineTo(s.x,-s.y);for(var l=1;l<t.length;l++)a=t[l].Start,s=t[l].End,i.lineTo(a.x,-a.y),i.lineTo(s.x,-s.y);a=t[0].Start,i.lineTo(a.x,-a.y);o=new THREE.ShapeGeometry(i),e=new THREE.Mesh(o,e);return Pr(e,null,r,n),e}},{key:"renderFloorRuler",value:function(){var u=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";if(this.houseData.svgData){var e=this.houseData.svgData,o=(e[t].Rooms,e[t].Infos),r=new THREE.Group,n=o.Rulers,i=n.Up,a=n.Down,e=n.Left,t=n.Right,o=function(s,t){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:10,h=3<arguments.length&&void 0!==arguments[3]?arguments[3]:3,c=new THREE.Group;return c.name=s,t.forEach(function(t,e){var o=new THREE.Vector3(t.Start.x,_r,-t.Start.y+l),r=new THREE.Vector3(t.End.x,_r,-t.End.y+l),n=new THREE.PxLine(u.renderTool.size,new THREE.Color(6052956),o,r,1);n.opacity=.8;var i=new THREE.PxLine(u.renderTool.size,new THREE.Color(6052956),new THREE.Vector3(0,0,h).add(o),new THREE.Vector3(0,0,-h).add(o),1),t=new THREE.PxLine(u.renderTool.size,new THREE.Color(6052956),new THREE.Vector3(0,0,h).add(r),new THREE.Vector3(0,0,-h).add(r),1);i.opacity=.8,t.opacity=.8,n.name="ruler-mesh",c.add(n),c.add(i),c.add(t);var t=20*o.distanceTo(r),a=t;"m"!==u.sizeUnitType&&listener.dispatch("todoSizeTranslate","sizeTranslateDom",{translateType:u.translateType,size:t,sizeType:"millimeter",cb:function(t){a=t.toFixed(1)}});r="draw-Up"===s?new THREE.Vector3(0,0,0).addVectors(o,r).divideScalar(2).add(new THREE.Vector3(0,0,15)):new THREE.Vector3(0,0,0).addVectors(o,r).divideScalar(2).add(new THREE.Vector3(0,0,-15)),r=u.textRenderX.draw("".concat(a),null,r);r.userData={value:t,type:"textRenderX"},c.add(r)}),c},n=function(s,t){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:10,h=3<arguments.length&&void 0!==arguments[3]?arguments[3]:3,c=new THREE.Group;return c.name=s,t.forEach(function(t,e){var o=new THREE.Vector3(t.Start.x+l,_r,-t.Start.y),r=new THREE.Vector3(t.End.x+l,_r,-t.End.y),n=new THREE.PxLine(u.renderTool.size,new THREE.Color(6052956),o,r,1);n.opacity=.8;var i=new THREE.PxLine(u.renderTool.size,new THREE.Color(6052956),new THREE.Vector3(h,0,0).add(o),new THREE.Vector3(-h,0,0).add(o),1),t=new THREE.PxLine(u.renderTool.size,new THREE.Color(6052956),new THREE.Vector3(h,0,0).add(r),new THREE.Vector3(-h,0,0).add(r),1);i.opacity=.8,t.opacity=.8,n.name="ruler-mesh",c.add(n),c.add(i),c.add(t);var t=20*o.distanceTo(r),a=t;"m"!==u.sizeUnitType&&listener.dispatch("todoSizeTranslate","sizeTranslateDom",{translateType:u.translateType,size:t,sizeType:"millimeter",cb:function(t){a=t.toFixed(1)}});r="draw-Left"===s?new THREE.Vector3(0,0,0).addVectors(o,r).divideScalar(2).add(new THREE.Vector3(15,0,0)):new THREE.Vector3(0,0,0).addVectors(o,r).divideScalar(2).add(new THREE.Vector3(-15,0,0)),r=u.textRenderZ.draw("".concat(a),null,r);r.userData={value:t,type:"textRenderZ"},c.add(r)}),c};return r.name="ruler-group",this.rulerUpGroup=o("draw-Up",i,-35),this.rulerDownGroup=o("draw-Down",a,35),this.rulerLeftGroup=n("draw-Left",e,-35),this.rulerRightGroup=n("draw-Right",t,35),r.add(this.rulerUpGroup),r.add(this.rulerDownGroup),r.add(this.rulerLeftGroup),r.add(this.rulerRightGroup),r}}},{key:"renderEntrance",value:function(){var t=new THREE.Group;return t.name="panorama-inner-guide",t.matrixAutoUpdate=!1,t.rotation.reorder("YXZ"),sprite.position.y=20,sprite.renderOrder=2,t.add(sprite),t.updateMatrix(),this.root=t}},{key:"renderHotPotsControl",value:function(t,e){void 0!==e.y&&t&&(t.rotation.set(0,e.y+Math.PI/4,0),t.updateMatrix())}},{key:"renderCurrentHotspotBig",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{Position:{x:0,y:0,z:0},Rotation:{x:0,y:0,z:0}};if(this.currentHotSpotBig)return this.currentHotSpotBig;var e=new THREE.Group;e.name="hotSpot-group",e.matrixAutoUpdate=!1,e.position.set(t.Position.x,2,-t.Position.z);t=-Math.PI/2+t.Rotation.y/180*Math.PI;return e.rotation.set(0,t,0),e.add(this.createCircle(this.textureLoader.load("./floor_hotspot_circle_00caa384.png"),9,50)),e.add(this.createClircleSeg()),e.add(this.createCircle(this.textureLoader.load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAASpJREFUOBGtlEEOwiAQRUu7deHec/UGJh7Lm7gz6QW8RRcmumqT4nzk4zhANVESHObPn0dpia4pD1eWM9VbxTba3PpreQJrgF6zsaShlgA0UmMDI+vMGakzEsiY9JYrFQOk73s3TdPee3+WeY3zDA216GdU7U0DkRMbtOM47pZlOQmkOFCDB9442R820Ekru3drMO4AD7xrQOzWyZEObPoU4UWPgb4dtxPI8Amk6oMF8riiP8Fivsp6A+GLcXfObcWHrx2+eOkrf8GpW0rAS92eVTJvBpzn+Zi1VYSal+8R8a/XJgAB/fVi40BvT8knjXcS1+gW5wBNXWi8Mt0bEgIROWDCYHxmr1/+KTCy4nHLOWrNrOtoQagFzUJsriFr67RBDVDTLTSBWHgAz9hJG+zpV2EAAAAASUVORK5CYII="),21,15)),e.updateMatrix(),this.currentHotSpotBig=e}},{key:"changeCurrentBig",value:function(t){this.currentHotSpotBig||this.renderCurrentHotspotBig(t),this.currentHotSpotBig&&(this.currentHotSpotBig.position.set(t.Position.x,0,-t.Position.z),this.currentHotSpotBig.updateMatrix())}},{key:"renderCurrentHotspotSmall",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{x:0,y:0,z:0};if(this.currentHotspotSmall)return this.currentHotspotSmall;var e=new THREE.Group;return e.matrixAutoUpdate=!1,e.add(this.createCircle(null,8,40)),e.add(this.createCircle(null,9,30,this.config.STYLE_COLOR)),e.name="current-hotspot-small",e.position.set(t.x,0,-t.z),e.updateMatrix(),this.currentHotspotSmall=e}},{key:"changeCurrent",value:function(t){this.currentDetail=t,this.changeCurrentSmall(t.Position),this.changeCurrentBig(t)}},{key:"changeCurrentSmall",value:function(t){this.currentHotspotSmall&&(this.currentHotspotSmall.position.set(t.x,0,-t.z),this.currentHotspotSmall.updateMatrix())}},{key:"createClircleSeg",value:function(){var t=new THREE.CircleBufferGeometry(43,8,0,Math.PI/2),e=new THREE.MeshBasicMaterial({color:this.config.STYLE_COLOR,transparent:!0,opacity:.8}),e=new THREE.Mesh(t,e);return e.matrixAutoUpdate=!1,e.position.set(0,20,0),e.rotation.x=THREE.Math.degToRad(-90),e.updateMatrix(),e}},{key:"isClick",value:function(){if(this.mouse){var t=Math.pow(this.deltaX,2)+Math.pow(this.deltaY,2);return this.mouse=null,t<25}return!1}},{key:"renderFloorIntro",value:function(t,e,o){var n=this,r=this.houseData,i=r.floorRooms,a=r.rooms,s=r.spots,r=i[e],i=this.config,l=i.IS_AREA_DISPLAY,h=(i.FLOORPLAN_CLICK_CB,this.HouseParams.entry),e=o?"floor-info-group":"floor-info-group-small",i=t.getObjectByName(e);i&&t.remove(i);var c=new THREE.Group;return c.name=e,c.matrixAutoUpdate=!1,r.forEach(function(t){var e=a[t],r=e.Info;e.isHide||(t=r.RoomCenterPoint?{x:r.RoomCenterPoint.x,z:r.RoomCenterPoint.y}:r.Position,(e=n.getSpot(r,!1!==l)).position.set(t.x,0,-t.z),e.updateMatrix(),e.userData={},c.add(e),o?n.floorIntroBig=c:n.floorIntroSmall=c,1<r.ShootSpotIds.length&&r.ShootSpotIds.forEach(function(t,e){var o;0===e||(o=n.getHotSpotDetail(r.ShootSpotIds[e],s)).Name==(h||"玄关")&&o.Name!==r.Name&&(e=n.getSpot(o,!1),o=o.Position,e.position.set(o.x,0,-o.z),e.updateMatrix(),c.add(e))}))}),c.position.y=10,c.updateMatrix(),c}},{key:"getHotSpotDetail",value:function(e,t){return e?t.filter(function(t){return t.ID===e})[0]:{}}},{key:"createArea",value:function(t){var e=this,o=this.houseData,r=o.floorRooms,n=o.rooms,t=r[t],i=new THREE.Group;return i.name="room-area-group",t.forEach(function(t){t=n[t];1<t.Walls.length&&!t.isHide&&i.add(e.createSingleRoomArea(t))}),i}},{key:"createSingleRoomArea",value:function(t){var e=this,o=new THREE.Shape,r=t.Info;new THREE.Vector3;t.Walls.forEach(function(t,e){0===e?o.moveTo(-t.Start.Down.Position.x,t.Start.Down.Position.z):o.lineTo(-t.Start.Down.Position.x,t.Start.Down.Position.z),o.lineTo(-t.End.Down.Position.x,t.End.Down.Position.z)});var n=new THREE.MeshBasicMaterial({side:THREE.DoubleSide,transparent:!0,opacity:0}),t=t.Walls[0].Start.Down.Position;o.lineTo(-t.x,t.z);t=new THREE.ShapeGeometry(o),n=new THREE.Mesh(t,n);return n.matrixAutoUpdate=!0,n.position.set(r.Position.x,Dr,-r.Position.z),n.rotation.x=Math.PI/2,n.rotation.z=-Math.PI+THREE.Math.degToRad(r.Rotation.y),n.name="room-single"+r.Name,n.userData={pointUp:function(){return e.isClick()&&e.listener.dispatch("toDoToRoom","houseModule",r,{from:"floorPlanRender",origin:{from:"floorPlan",id:r.ShootSpotIds[0]}}),!0}},n}},{key:"createCompass",value:function(t,e,o){var r=new THREE.CircleBufferGeometry(26,32),n=new THREE.Group;n.matrixAutoUpdate=!1;o=new THREE.MeshBasicMaterial({map:this.textureLoader.load(o),transparent:!0,side:THREE.DoubleSide,depthWrite:!1}),o=new THREE.Mesh(r,o);return o.matrixAutoUpdate=!1,o.position.set(0,40,0),o.rotation.x=THREE.Math.degToRad(-90),o.updateMatrix(),n.add(o),n.name="floor-plan-compass",n.position.set(t.x-20,0,t.z-20),n.rotation.set(0,THREE.Math.degToRad(-e),0),n.updateMatrix(),n}},{key:"createCircle",value:function(t,e,o,r){o=new THREE.CircleBufferGeometry(o,16);console.log(r);r=new THREE.MeshBasicMaterial({map:t,transparent:!0,color:r||16777215,opacity:1}),r=new THREE.Mesh(o,r);return r.matrixAutoUpdate=!1,r.position.set(0,e,0),r.rotation.x=THREE.Math.degToRad(-90),r.updateMatrix(),r}},{key:"renderRoomArea",value:function(t){var o=new THREE.Shape;t.Walls.forEach(function(t,e){0===e?o.moveTo(-t.StartMarkPoint.DownPosition.x,t.StartMarkPoint.DownPosition.z):o.lineTo(-t.StartMarkPoint.DownPosition.x,t.StartMarkPoint.DownPosition.z),o.lineTo(-t.EndMarkPoint.DownPosition.x,t.EndMarkPoint.DownPosition.z)});var e=t.Walls[0].StartMarkPoint.DownPosition;o.lineTo(-e.x,e.z);e=new THREE.ShapeGeometry(o),e=new THREE.Mesh(e,areaMaterial);return e.matrixAutoUpdate=!1,e.position.set(t.Position.x,6,-t.Position.z),e.rotation.x=Math.PI/2,e.rotation.z=-Math.PI+THREE.Math.degToRad(t.Rotation),e.name="room-single",e.userData={ID:t.HotSpotIds[0],Name:t.Name},e.updateMatrix(),e}},{key:"resetSize",value:function(t){var i=this,a=t.translateType,s=t.sizeUnitType,l=this.listener;this.sizeUnitType=s,this.translateType=a;var h=function(t,e,o){o=t.createCanvas(o),o=t.createTexture(o);e.material.map=o},t=this.scene.getObjectByName("floor-plan").children,o=this.bigSpotMap;if(o)for(var e in o)(function(t){var e=o[t].children[1];if(!e||"text"!==e.name)return;i.AppParams.isDrawFloorPlan?"m"!==s?l.dispatch("todoSizeTranslate","sizeTranslateDom",{translateType:a,size:e.userData.originArea,sizeType:"squarmeter",cb:function(t){h(i.floorHotspot.textRender,e,"".concat(t.toFixed(1)).concat(s,"²"))}}):h(i.floorHotspot.textRender,e,"".concat(e.userData.originArea.toFixed(1)).concat(s,"²")):h(i.floorHotspot.textRender,e,"".concat(e.userData.originArea.toFixed(1),"m²"))})(e);t.map(function(t){if(t.__type)for(var e=(e=t.getObjectByName("ruler-group"))?e.children:[],o=0;o<e.length;o++)for(var r=e[o].children,n=0;n<r.length;n++)(function(t){var e=r[t];if("text"!==e.name)return;"m"===s?h(i[e.userData.type],e,"".concat(e.userData.value)):l.dispatch("todoSizeTranslate","sizeTranslateDom",{translateType:a,size:e.userData.value,sizeType:"millimeter",cb:function(t){h(i[e.userData.type],e,"".concat(t.toFixed(1)))}})})(n)})}},{key:"getRotatePosition",value:function(t,e,o){t=new THREE.Vector3(t.x,t.y,t.z);return t.applyAxisAngle(new THREE.Vector3(0,1,0),Math.PI-THREE.Math.degToRad(o)),t.add(new THREE.Vector3(e.x,e.y,-e.z)),t}},{key:"renderBackground",value:function(t,e){var o=this.houseData.floorsPlan[t];if(o){var r=this.houseData.houseSize,n=r.x,t=r.z,r=new THREE.MeshBasicMaterial({transparent:!0,side:THREE.FrontSide,depthWrite:!1});!1!==this.config.IS_AREA_DISPLAY&&e?r.map=this.textureLoader.load(o.ImageUrl):r.map=this.textureLoader.load(o.ThumbnailUrl||o.ImageUrl);r=new THREE.Mesh(this.DEFAULT_GEOMETRY,r);r.scale.set(n,t,1),r.matrixAutoUpdate=!1;o=o.Center;return r.position.set(o.x,0,-o.y),r.rotation.x=THREE.Math.degToRad(-90),r.name="2d-floor-diagram",r.updateMatrix(),r._vrSize={position:{x:o.x,y:1,z:-o.y}},r}}},{key:"entranceAnimation",value:function(t){var e=this;this.repeatProgress&&(this.isAnimation=t,this.timeInterval=1607,this.animationUpdate||(this.animationUpdate=function(t){e.repeatProgressMaterial.map=e.repeatProgress.progress(e.progress/e.timeInterval),e.repeatProgressMaterial.needsUpdate=!0,e.progress+=t,e.progress%=e.timeInterval}),t?(this.frameManager.remove(this.animationUpdate),this.frameManager.add(this.animationUpdate)):this.frameManager.remove(this.animationUpdate))}},{key:"update",value:function(t){this.render()}},{key:"renderIn",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;this.root.visible=!0,this.frameManager.add(this.update,t),this.frameIndex=t,this.camera.zoom=1}},{key:"renderOut",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;this.root.visible=!1,this.frameManager.remove(this.update),this.frameIndex=t,this.camera.zoom=1}},{key:"initStatus",value:function(){var n=this;this.listener.dispatch("toDoRegister","statusPipe",{key:"floorPlanRender",getter:function(){var t=n.camera,e=t.position,o=t.rotation,r=t.fov,t=t.theta;return{camera:{position:{x:e.x,y:e.y,z:e.z},rotation:{x:o.x,y:o.y,z:o.z},fov:r,theta:t}}},setter:function(t){var e=t.camera,o=t.isGuideFullScreen,r=e.position,t=e.rotation,e=e.fov;o&&(n.camera.position.set(r.x,r.y,r.z),n.camera.rotation.set(t.x,t.y,t.z),n.camera.fov=e,n.camera.updateMatrix())}})}},{key:"getMouse",value:function(t){var e={};return t.targetTouches?(e.x=t.targetTouches[0].clientX,e.y=t.targetTouches[0].clientY):(e.x=t.clientX,e.y=t.clientY),e}},{key:"pointDown",value:function(t){this.mouse=this.getMouse(t),this.isPointDown=!0,this.deltaX=0,this.deltaY=0}},{key:"pointMove",value:function(t){var e,o;this.isPointDown&&(o=-((e=this.getMouse(t)).x-this.mouse.x),t=-(e.y-this.mouse.y),this.deltaX+=o,this.deltaY+=t,this.mouse=e)}},{key:"pointUp",value:function(t){this.isPointDown=!1}},{key:"setCenter",value:function(){this.camera.position.x=this.camera.z=0,this.controls.target.x=this.controls.target.z=0}},{key:"dispose",value:function(){this.release(this.root)}}]),i}(a),Or=function(t){var a=t.listener,e=t.RENDERS,o=t.MODULES,s=t.DOMS,l=e.room,h=e.house,c=e.floorPlan,u=o.room,r=o.room2D;a.add("pano-camera-change","syncFromVrChat",function(t){l.isSyncChat&&(l.changeCamera(t),console.log("接收带看：pano-camera-change",t))}),a.add("pano-camera-start","syncFromVrChat",function(t){l.isSyncChat=!0,console.log("接收带看：pano-camera-start",t)}),a.add("pano-camera-end","syncFromVrChat",function(t){l.isSyncChat=!1,console.log("接收带看：pano-camera-end",t)}),a.add("set-guide-tab","syncFromVrChat",function(t){console.log("接收带看：set-guide-tab",t),a.dispatch("switchType","houseModule",t.type)}),a.add("change-current-fullscreen","syncFromVrChat",function(t){a.dispatch("toDoToHouse","roomModule",t),console.log("接收带看：change-current-fullscreen",t)}),a.add("change-hotspot","syncFromVrChat",function(t){console.log("接收带看：change-hotspot",t)}),a.add("stereo-camera-start","syncFromVrChat",function(t){console.log("接收带看：stereo-camera-start",t)}),a.add("stereo-camera-change","syncFromVrChat",function(t){console.log("接收带看：stereo-camera-change",t)}),a.add("stereo-camera-end","syncFromVrChat",function(t){console.log("接收带看：stereo-camera-end",t)}),a.add("pano-wheel","syncFromVrChat",function(t){console.log("接收带看：pano-wheel",t)}),Object.assign(window.VRHOUSE_API,{getSceneStatus:function(){return"2D"==l.houseData.type?{type:l.houseData.type,currentHotSpotID:r.currentSpotDetail.ID,pano2DCamera:{position:l.camera.position.clone(),rotation:l.camera.rotation.clone(),fov:l.camera.fov}}:{type:l.houseData.type,currentHotSpotID:u.currentSpotDetail.ID,currentGuideTab:s.fullScreenGuide.currentType,isGuideFullScreen:h.isGuideFullScreen,panoCamera:{position:l.camera.position.clone(),rotation:l.camera.rotation.clone(),fov:l.camera.fov},stereoCamera:{position:h.camera.position.clone(),rotation:h.camera.rotation.clone(),fov:h.camera.fov},floorCamera:{position:c.camera.position.clone(),rotation:c.camera.rotation.clone(),fov:c.camera.fov}}},setSceneStatus:function(t){var e,o,r,n,i;"2D"===t.type||(e=t.currentHotSpotID,o=t.currentGuideTab,r=t.isGuideFullScreen,n=t.panoCamera,i=t.stereoCamera,t=t.floorCamera,e!==u.currentSpotDetail.ID&&(a.dispatch("toDoSetDataId","roomModule",e),l.changeCamera(n)),r!==h.isGuideFullScreen?r&&a.dispatch("toDoToHouse","roomModule",o):(h.changeCamera(i),c.changeCamera(t),o!==s.fullScreenGuide.currentType&&a.dispatch("switchType","houseModule",o)))}})};function Lr(e,t){var o,r=Object.keys(e);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(e),t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)),r}function Hr(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Lr(Object(o),!0).forEach(function(t){S()(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Lr(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function Br(o){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=Mo()(o);return e=r?(t=Mo()(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),Po()(this,e)}}var Vr=function(t){xo()(r,t);var o=Br(r);function r(t){var e;return bo()(this,r),(e=o.call(this,t)).initScene(),e.update=e.update.bind(wo()(e)),e.textData=t.textData,e}return Eo()(r,[{key:"initScene",value:function(){this.scene=new THREE.Scene,this.scene.add(this.setCamera(100,100)),this.setLight()}},{key:"buildCompass",value:function(t){this.root&&(this.release(),this.scene.remove(this.root)),this.root=this.renderCompassMesh(THREE.Math.degToRad(-t)),this.scene.add(this.root)}},{key:"renderCompassMesh",value:function(t){var e=this.AppParams,o=new THREE.Group;o.name="stereo-compass",o.rotation.reorder("YXZ"),o.matrixAutoUpdate=!1;var r=new THREE.ConeGeometry(8,20,4),n=new THREE.ConeGeometry(8,20,4);r.depthTest=!1;var i={transparent:!(n.depthTest=!1),alphaTest:.1,side:THREE.DoubleSide},a=e.isMobileVivo?THREE.MeshBasicMaterial:THREE.MeshLambertMaterial,s=new a(Hr({color:this.config.STYLE_COLOR||StaticData.styleColor},i)),i=new a(Hr({color:"rgba(255, 255, 255, 1)"},i)),s=new THREE.Mesh(r,s),i=new THREE.Mesh(n,i);return s.rotation.reorder("YXZ"),i.rotation.reorder("YXZ"),s.matrixAutoUpdate=!1,i.matrixAutoUpdate=!1,s.position.z=-10,i.position.z=10,s.rotation.x=-Math.PI/2,i.rotation.x=Math.PI/2,s.updateMatrix(),i.updateMatrix(),o.add(new Co(Object.assign({},{cornerWidth:0,fontSize:e.isMobile?32:35,textFillStyle:e.textFillColor})).draw("".concat(this.textData.campass&&this.textData.campass.north),null,new THREE.Vector3(0,0,-34))),o.add(s),o.add(i),o.rotation.y=t,o.updateMatrix(),o.userData={direction:t},o}},{key:"setLight",value:function(){var t=new THREE.PointLight(16777215,.6,0);t.position.set(0,0,0),this.camera.add(t);t=new THREE.AmbientLight(12763071);this.scene.add(t)}},{key:"setCamera",value:function(t,e){var o=this.AppParams.isMobile?2/3:.5,o=this.camera=new THREE.OrthographicCamera(-t*o,t*o,e*o,-e*o,1,1e4);return o.rotation.reorder("YXZ"),o.name="compass-camera",o.aspect=t/e,o.lookAt(new THREE.Vector3(0,0,0)),o.updateProjectionMatrix(),o}},{key:"changeCompass",value:function(t){this.root&&(t=(new THREE.Vector3).copy(t).normalize().multiplyScalar(30),this.camera.position.copy(t),this.camera.lookAt(this.root.position),this.camera.updateProjectionMatrix())}},{key:"update",value:function(t){this.render()}},{key:"renderIn",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;this.root.visible=!0,this.frameManager.add(this.update,t),this.frameIndex=t}},{key:"renderOut",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;this.root&&(this.root.visible=!1,this.frameManager.remove(this.update),this.frameIndex=t)}}]),r}(a);function Nr(o){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=Mo()(o);return e=r?(t=Mo()(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),Po()(this,e)}}var zr=function(t){xo()(r,t);var o=Nr(r);function r(t){var e;return bo()(this,r),(e=o.call(this,t)).bindOrientationChange(),e.isIn=!1,e.logFn=t.logFn,e.roomConfig=t.roomConfig,e.VisibleHotSpotDom=t.VisibleHotSpotDom,e.option=t,e.map.render=e.RENDERS.room.renderTool.renderer.domElement,e}return Eo()(r,[{key:"init",value:function(){return this.initListener(),this.initApi()}},{key:"initListener",value:function(){function o(){i.setViewport(),t.set(i.camera,i.scene)}var a=this,r=this.listener,n=this.RENDERS,t=this.raycasterManager,i=n.room,s={window:{resize:o}};r.add("toDoRenderIn","vrModule",function(t,e){i.switchVr(!0),a.isIn=!0,i.renderOut(),i.renderIn(),r.addWithMap(s),o()}),r.add("toDoRenderOut","vrModule",function(){a.isIn=!1,i.renderOut(),r.removeWithMap(s),i.switchVr(!1)}),r.add("toDoVrMode","vrModule",function(t,e){var o=a.listener,r=a.RENDERS,n=a.DOMS,i=a.VisibleHotSpotDom;o.dispatch("toDoRenderOut","roomModule",{from:"vrModule"},a),o.dispatch("toDoRenderIn","vrModule",null,a),a.visibleHotSpotDom||(a.visibleHotSpotViewProt=r.room.effect.viewportR,a.visibleHotSpotDom=new i(Object.assign({room:a.roomConfig},a.option),n,{RENDERS:r,id:"visibleHotSpotVr",resetEvent:"toDoResizeVr",context:a})),a.visibleHotSpotDom.resetData(r.room.houseData),window.orientation%180!=0&&o.dispatch("getCurrentHotSpot","roomModule",function(t){a.visibleHotSpotDom.empty(),a.visibleHotSpotIsRender(!0),a.visibleHotSpotDom.setSpotId(t.ID),o.dispatch("toDoResizeVr","roomModule",r.room.effect.viewportR),o.dispatch("updateCamera","visibleHotSpot",r.room.effect.stereoCamera),o.dispatch("toDoResize","visibleHotSpot",r.room.effect.viewportL)})}),r.add("toDoPanoMode","vrModule",function(t,e){r.dispatch("toDoRenderOut","vrModule",null,a),r.dispatch("toDoRenderIn","roomModule",{from:"vrModule"},a),a.visibleHotSpotDom.empty(),a.visibleHotSpotIsRender(!1),r.dispatch("toDoResize","roomModule"),r.dispatch("updateCamera","visibleHotSpot",n.room.camera),r.dispatch("toDoResize","visibleHotSpot",void 0)})}},{key:"initApi",value:function(){var e=this,o=this.listener;return{renderIn:function(){o.dispatch("toDoRenderIn","vrModule",null,"api")},renderOut:function(){o.dispatch("toDoRenderOut","vrModule",null,"api")},setUnabled:function(t){To()(Mo()(r.prototype),"setUnabled",e).call(e,t,{})},toRoom:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};o.dispatch("toDoPanoMode","vrModule",null,"api"),e()}}}},{key:"bindOrientationChange",value:function(){var e=this,t=RENDERS.house;window.addEventListener("orientationchange",function(){"2D"!==t.houseData.type&&(RENDERS.vr.checkVROperateRing(),RENDERS.vr.checkToVR(),RENDERS.room.vrControls.enabled&&(window.orientation%180!=0?setTimeout(function(){listener.dispatch("getCurrentHotSpot","roomModule",function(t){e.visibleHotSpotIsRender(!0),e.visibleHotSpotDom.empty(),e.visibleHotSpotDom.setSpotId(t.ID),listener.dispatch("toDoResizeVr","roomModule",RENDERS.room.effect.viewportR),listener.dispatch("updateCamera","visibleHotSpot",RENDERS.room.effect.stereoCamera)})},50):(e.visibleHotSpotIsRender(!1),listener.dispatch("updateCamera","visibleHotSpot",RENDERS.room.camera))))},!1)}},{key:"visibleHotSpotIsRender",value:function(t){var e;this.visibleHotSpotDom&&(e=t?"renderIn":"renderOut",this.visibleHotSpotDom.visibleHotSpotRender.hide(!t),this.visibleHotSpotDom.visibleHotSpotRender[e]())}}]),r}(i);function Ur(o){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=Mo()(o);return e=r?(t=Mo()(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),Po()(this,e)}}var Gr=function(t){xo()(r,t);var o=Ur(r);function r(t){bo()(this,r);var e=o.call(this,t),t=window.THREE;return e.vector=new t.Vector2,e.scene=RENDERS.room.scene,e.camera=RENDERS.room.camera,e.update=e.update.bind(wo()(e)),e.isVRCheck=!1,e.vector=new t.Vector3,e.viewProjectionMatrix=new t.Matrix4,e.viewMatrix=new t.Matrix4,e.initListener(),e}return Eo()(r,[{key:"initListener",value:function(){var e=this;this.listener.add("todoSetIswitchVR","vrRender",function(t){e.isVRCheck=!e.isVRCheck,e.checkVROperateRing(),e.update(),e.isVRCheck||(e.camera.rotation.x=0,e.camera.rotation.z=0),t&&t(e.isVRCheck)})}},{key:"checkToVR",value:function(t,e){}},{key:"isLandscape",value:function(){var t;return window.orientation%180==0?t=!1:90!==window.orientation&&-90!==window.orientation||(t=!0),t}},{key:"getVRIntetsectPoint",value:function(){var n=this,t=this;if(t.isLandscape()){var e=this.camera,o=this.scene,r=this.listener;r.dispatch("updateVisibleHotSpots","visibleHotSpot");var i=new THREE.Raycaster;i.setFromCamera(new THREE.Vector2,e);for(var a,s=i.intersectObjects(o.children,!0),l=0;l<s.length;l++){if("panorama-visible-hotspot"===s[l].object.name||"panorama-inner-visible-hotspot"===s[l].object.name){a=s[l].object;break}if("panorama-visible-hotspot"===s[l].object.parent.name||"panorama-inner-visible-hotspot"===s[l].object.parent.name){a=s[l].object.parent;break}}if(r.dispatch("getVisibleHotSpotsInfos","visibleHotSpot",function(t){var e=t.labelRendererHalfW,o=t.labelRendererHalfH,r=t.currVisibleHotSpots,t=t.visibleHotSpotRender;n.viewMatrix.copy(t.camera.matrixWorldInverse),n.viewProjectionMatrix.multiplyMatrices(t.camera.projectionMatrix,n.viewMatrix),n.getSceneObject(t.scene,e,o,r,function(t){a=t})}),t.crossHairRing||t.checkVROperateRing(),!a)return t.pauseTimeOut&&(clearTimeout(t.pauseTimeOut),t.pauseTimeOut=void 0),void(t.crossHairRing.material.color=new THREE.Color(16777215));t.crossHairRing.material.color=new THREE.Color(3257348),a.userData.ID===t.currObjID&&t.pauseTimeOut||(t.currObjID=a.userData.data.ID,t.pauseTimeOut=setTimeout(function(){if(t.pauseTimeOut){if(r.dispatch("toDoSetDataId","roomModule",t.currObjID,{type:"roam",from:"vrRender"}),localStorage&&"false"!==localStorage.getItem("tipsMVROperate")){try{localStorage&&localStorage.setItem("tipsMVROperate",!1)}catch(t){console.log(t)}r.dispatch("toDoShowGuideTips","guideTipsRender",null,null)}a=null,t.pauseTimeOut=void 0}},1e3))}}},{key:"getSceneObject",value:function(t,e,o,r,n){for(var i,a,s,l,h,c=0,u=t.children.length;c<u;c++)t.name&&-1==["anchor_visibleHotSpotVr","anchor_visibleHotSpot"].indexOf(t.name)&&(this.vector.setFromMatrixPosition(t.matrixWorld),this.vector.applyMatrix4(this.viewProjectionMatrix),i=this.vector.x*e+e,a=-this.vector.y*o+o,(h=r[t.name]).pos,s=h.domW,l=h.domH,h=h.data,e<i+s/2&&i-s/2<e&&o<a+l/2&&a-l/2<o&&Math.abs(this.vector.x)<1&&Math.abs(this.vector.y)<1&&Math.abs(this.vector.z)<1&&n({userData:{ID:h.ID,data:{ID:h.ID}}})),this.getSceneObject(t.children[c],e,o,r,n)}},{key:"createCrosshairRing",value:function(){var t=new THREE.Mesh(new THREE.RingGeometry(.02,.05,32),new THREE.MeshBasicMaterial({color:16777215,opacity:.5,transparent:!0}));return t.matrixAutoUpdate=!1,t.name="vr-ring",t.visible=!0,t.position.z=-2,t.updateMatrix(),this.crossHairRing=t}},{key:"checkVROperateRing",value:function(){this.isLandscape()&&this.isVRCheck?(this.crossHairRing||(this.crossHairRing=this.createCrosshairRing()),this.camera.add(this.crossHairRing),this.scene.add(this.camera)):(this.crossHairRing&&this.camera.remove(this.crossHairRing),this.scene.remove(this.camera),this.dispose(this.crossHairRing))}},{key:"dispose",value:function(t){t&&(t.geometry&&t.geometry.dispose(),t.dispose&&t.dispose(),t.material&&(t.material.length?t.material.forEach(function(t){t.map&&t.map.dispose(),t.dispose()}):(t.material.map&&t.material.map.dispose(),t.material.dispose())))}},{key:"update",value:function(){var t=this.renderer,e=this.scene,o=this.camera,r=t.getSize(this.vector);0!==window.orientation?(e.updateMatrixWorld(),null===o.parent&&o.updateMatrixWorld(),t.clear(),t.setScissorTest(!0),o.aspect=r.width/2/r.height,o.updateMatrixWorld(),t.setScissor(0,0,r.width/2,r.height),t.setViewport(0,0,r.width/2,r.height),t.render(e,o),t.setScissor(r.width/2,0,r.width/2,r.height),t.setViewport(r.width/2,0,r.width/2,r.height),t.render(e,o),t.setScissorTest(!1)):this.render()}}]),r}(a),jr=u("43Bq");a=function(){function e(t){bo()(this,e),this.renderTool=t.renderTool,this.domTool=t.domTool,this.listener=t.listener,this.config=t.config,this.frameManager=t.frameManager,this.AppParams=t.AppParams,this.textData=t.textData,this.isHide=!0}return Eo()(e,[{key:"hide",value:function(t){this.isHide=!!t,this.root.style.display=t?"none":this.display||"block",this.onHide&&this.onHide(t)}},{key:"unable",value:function(t){t?(this.root.style.opacity=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"0.4",this.root.style.pointerEvents="none"):(this.root.style.opacity="",this.root.style.pointerEvents="")}},{key:"getBoundingClientRect",value:function(){return this.root.getBoundingClientRect()}}]),e}(),u("ZByz");function Xr(o){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=Mo()(o);return e=r?(t=Mo()(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),Po()(this,e)}}var Wr=function(t){xo()(n,t);var r=Xr(n);function n(t,e){var o;return bo()(this,n),(o=r.call(this,t)).DOMS=e,o.safeTopHeight=t.safeTopHeight,o.logFn=t.logFn,o.top=o.AppParams.isMobile?t.AppParams.guideMarginM:t.AppParams.guideMarginPC,o.isVr=!0,o.roomConfig=t.room,o.init(),o.initListener(),o}return Eo()(n,[{key:"hide",value:function(t){To()(Mo()(n.prototype),"hide",this).call(this,t),t||this.width||(this.width=this.root.clientWidth,this.height=this.root.clientHeight)}},{key:"initListener",value:function(){var h=this,c=this.listener,u=this.config.MINI_STEREO_FLOORPLAN_DEFAULT;c.add("toDoSetGuideMap","roomModule",function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],o=h.width,r=h.height,n=t=t||{},i=n.w,a=n.h,s=n.t,l=n.l,n=n.c;h.setSize(i,a),h.setPosition(s,l),h.setColor(n),h.resizeMap({width:i||o,height:a||r}),c.dispatch("toDoResetFloorPlan","roomModule",{w:i||o,h:a||r}),h.isVr=e,t.w||"3D"!==u||c.dispatch("renderGuideMapToHouse","roomModule")}),c.add("toDoIsShowGuideMapBg","roomModule",function(){h.isNoBg(!(0<arguments.length&&void 0!==arguments[0])||arguments[0])}),c.add("toDoHideGuideMap","roomModule",function(t){h.hide(t)}),c.add("toDoHideFloorList","roomModule",function(){h.isHideFloorDom(!(0<arguments.length&&void 0!==arguments[0])||arguments[0])}),c.add("toDoIsClick","roomModule",function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];h.isClick=t,h.isNoBg(t)}),c.add("toDoReset","module",function(t,e){h.reset()})}},{key:"init",value:function(){var e=this,t=this.domTool,o=(t.root,t.createElement),t=(this.listener,this.AppParams,this.safeTopHeight,this.logFn,this.roomConfig.SMALL_FLOORPLAN_DOM);this.rendererKey="map",this.canvas=o("canvas","",{class:"mapRenderer"}),this.renderTool.setRenderer(this.rendererKey,this.canvas),this.isClick=!0,this.root=t||o("div",this.canvas,{class:"guidemap bg"},{click:function(){var t=window.VRHOUSE_SPACE.compare,t=(void 0===t?{}:t).getIsSwichAnimation;t&&!0===t()||e.isClick&&e.listener.dispatch("click","guidemap",null,e)}}),this.width=this.root.clientWidth,this.height=this.root.clientHeight,t&&(this.root.appendChild(this.canvas),this.root.addEventListener("click",function(){var t=window.VRHOUSE_SPACE.compare,t=(void 0===t?{}:t).getIsSwichAnimation;t&&!0===t()||e.isClick&&e.listener.dispatch("click","guidemap",null,e)})),this.root.style.display="none",t||(this.root.style.top=this.top+"px"),DOMS.safeBox.root.appendChild(this.root)}},{key:"isNoBg",value:function(t){var e=this.domTool,o=e.addClass,e=e.removeClass;this.roomConfig.SMALL_FLOORPLAN_DOM||(t?o:e)(this.root,"bg")}},{key:"setSize",value:function(t,e){var o=this.roomConfig.SMALL_FLOORPLAN_DOM;this.root.style.width=o&&!t?"":(t||100)+"px",this.root.style.height=o&&!e?"":(e||100)+"px"}},{key:"setPosition",value:function(t,e){var o=this.roomConfig.SMALL_FLOORPLAN_DOM;this.root.style.top=o&&!t?"":(t||this.top)+"px",this.root.style.left=o&&!e?"":(e||10)+"px"}},{key:"setColor",value:function(t){var e=this.roomConfig.SMALL_FLOORPLAN_DOM;this.root.style.backgroundColor=e&&!t?"":t||"rgba(6,6,6,0.2)"}},{key:"resizeMap",value:function(t){t=t||this.getBoundingClientRect();this.renderTool.resize(t.width||100,t.height||100,this.rendererKey)}},{key:"createFloorDom",value:function(t,e){var o;this.floorWrap||((o=this.domTool).root,o=o.createElement,this.maskLeft=o("div","",{class:"floorplan-name-mask floorplan-name-mask-left"}),this.maskRight=o("div","",{class:"floorplan-name-mask floorplan-name-mask-right"}),this.content=o("div","",{class:"floorplan-name-content",id:"floorplan-name-content"}),this.floorWrap=o("div",[this.maskLeft,this.maskRight,this.content],{class:"floorplan-name-wrap",id:"floorplan-name-wrap"}),this.rendFloorList(t,e),this.root.appendChild(this.floorWrap))}},{key:"isHideFloorDom",value:function(t){this.floorWrap.style.display=t?"none":"block"}},{key:"setFloorActiveName",value:function(e){var t=this.domTool,o=t.addClass,r=t.removeClass;document.querySelectorAll(".floorplan-name-item").forEach(function(t){r(t,"active"),t.dataset.id==e&&o(t,"active")})}},{key:"rendFloorList",value:function(t,e){var o=this,r=this.domTool,r=(r.root,r.createElement,r.setElement),n=[];t.forEach(function(t){n.push(o.createListItem(t,e))}),r(this.content,n),this.setFloorPosition()}},{key:"createListItem",value:function(t,e){var o=t.ID,r=t.Name,t=this.domTool.createElement,e=(this.config.STYLE_ICON,t("div","".concat(r),{class:"floorplan-name-item".concat(o===e?" active":""),id:"".concat(o===e?"floor-item-active":"")}));return e.setAttribute("data-id",o),e}},{key:"setFloorPosition",value:function(){var t=document.getElementById("floor-item-active"),e=document.querySelectorAll(".floorplan-name-item"),o=this.content,r=this.floorWrap,n=0;e.forEach(function(t){return n+=t.clientWidth}),t&&(t=(r.clientWidth-t.clientWidth)/2-t.offsetLeft,n-r.clientWidth<=0?o.style.transform="translateX(".concat((r.clientWidth-n)/2,"px)"):0<t?o.style.transform="translateX(20px)":n- -t<r.clientWidth?o.style.transform="translateX(".concat(-(n-r.clientWidth+20),"px)"):o.style.transform="translateX(".concat(t,"px)"))}},{key:"unable",value:function(t){t&&!0===this.isVr?(this.root.style.opacity=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"0.4",this.root.style.pointerEvents="none"):(this.root.style.opacity="",this.root.style.pointerEvents="")}},{key:"reset",value:function(){this.unable()}}]),n}(a);u("2JR3");function Yr(o){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=Mo()(o);return e=r?(t=Mo()(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),Po()(this,e)}}var Kr=function(t){xo()(n,t);var r=Yr(n);function n(t,e){bo()(this,n);var o=r.call(this,t),t=window.THREE;return o.CSS2DRenderer=t.CSS2DRenderer,o.CSS2DObject=t.CSS2DObject,o.update=o.update.bind(wo()(o)),o.group=new t.Group,o.group.name="anchor"+(e?"_"+e:""),o}return Eo()(n,[{key:"init",value:function(t,e,o,r){this.camera=t,this.scene=new THREE.Scene,this.labels={},this.labelRenderer=new this.CSS2DRenderer(r),this.labelRenderer.domElement.style.position="absolute",this.labelRenderer.domElement.style.top=0,this.labelRenderer.domElement.style.left=0,this.labelRenderer.domElement.id=o,this.root=this.labelRenderer.domElement,this.scene.add(this.group)}},{key:"add",value:function(t,e,o,r,n){var i=window.THREE;r.style.pointerEvents="all";var a=new this.CSS2DObject(r);a.position.set(0,0,0),this.labels[t]=a,n=n||new i.Mesh;var s=Math.abs(o.y-this.camera.position.y),i=o.y;return 200<s&&(i=o.y<this.camera.position.y?this.camera.position.y-200:this.camera.position.y+200),console.log(s,"position.y=============>>>>>>>"),o&&n.position.set(o.x,i,o.z),n.add(a),n.name=t,n.userData=e,this.group.add(n),r.mesh=n,a}},{key:"remove",value:function(t){var e=this,o=this.group.getObjectByName(t);this.group.remove(o);this.labels[t].element.parentNode&&(e.root.removeChild(e.labels[t].element),delete e.labels[t])}},{key:"empty",value:function(){for(var t in this.labels)this.remove(t)}},{key:"resize",value:function(t){this.root.style.right=null,this.root.style.left=t.x+"px",this.root.style.top=null,this.root.style.bottom=t.y+"px",this.labelRenderer.setSize(t.z,t.w),this.viewPort=t}},{key:"update",value:function(){var t,e=this.labelRenderer,o=this.scene,r=this.camera,n=this.viewPort;r.userData.noAspect||(n.x,n.y,t=n.width,n=n.height,r.aspect=t/n,r.updateProjectionMatrix()),e.render(o,r)}},{key:"renderIn",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;this.frameManager.add(this.update,t),this.frameIndex=t}},{key:"renderOut",value:function(){this.frameManager.remove(this.update),this.frameIndex=0}},{key:"openCheckOverlap",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];console.log("openCheckOverlap----------11111111"),this.labelRenderer.checkOverlapOption.isCheckOverlap=t}},{key:"updateCamera",value:function(t){this.camera=t}}]),n}(a),qr=function(){function e(t){bo()(this,e),this.option=t,this.index=0,this.renders=[]}return Eo()(e,[{key:"makeOne",value:function(t,e,o,r){var n=this.render=new Kr(this.option,o);return n.init(t,e,o,r),this.renders[this.index++]=n}},{key:"destroy",value:function(o){var r=this;this.renders.filter(function(t){var e=!0;return t===o&&(r.index--,e=!1),e})}}]),e}();u("QLe4");function Zr(o){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=Mo()(o);return e=r?(t=Mo()(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),Po()(this,e)}}var Jr=function(t){xo()(o,t);var e=Zr(o);function o(t){return bo()(this,o),(t=e.call(this,t)).initListener(),t.init(),t}return Eo()(o,[{key:"init",value:function(){var t=this.domTool,e=t.root,t=t.createElement;this.root=t("div","",{class:"safe-box"+(this.AppParams.isMobile?" mobile":"")}),e.appendChild(this.root),this.safeHeight=this.config.SAFE_TOP_HEIGHT,this.setPosition("top")}},{key:"initListener",value:function(){var e=this;this.listener.add("orientationChange","window",function(t){t.isPortrait;t=t.safeDir;e.setPosition(t)})}},{key:"setPosition",value:function(t){var e;this.AppParams.isMobile&&(this.root.setAttribute("style",""),e=this.root.style,"top"!==t?(e.left=e.right="40px",e.top="54px"):e.top=this.safeHeight+"px")}}]),o}(a);u("auqX");function Qr(o){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=Mo()(o);return e=r?(t=Mo()(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),Po()(this,e)}}var $r=function(t){xo()(n,t);var r=Qr(n);function n(t,e){var o;return bo()(this,n),(o=r.call(this,t)).DOMS=e,o.init(t.AppParams.isMobile,t.safeTopHeight),o}return Eo()(n,[{key:"init",value:function(t,e){var o=this.domTool,o=(o.root,o.createElement);this.rendererKey="compass",this.canvas=o("canvas","",{class:"compass-renderer"}),this.renderTool.setRenderer(this.rendererKey,this.canvas),this.root=o("div",this.canvas,{class:"house-compass "+(t?"is-mobile":"")}),this.root.style.display="none",this.DOMS.safeBox.root.appendChild(this.root)}},{key:"resizeCompass",value:function(){var t;this.width||(t=this.getBoundingClientRect(),this.width=t.width,this.height=t.height,this.renderTool.resize(t.width,t.height,this.rendererKey))}}]),n}(a);u("ZSil");function tn(o){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=Mo()(o);return e=r?(t=Mo()(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),Po()(this,e)}}var en=function(t){xo()(l,t);var s=tn(l);function l(t,e,o){var r=o.RENDERS,n=o.id,i=o.resetEvent,a=o.context;return bo()(this,l),(o=s.call(this,t)).DOMS=e,o.logFn=t.logFn,o.roomConfig=t.room,o.RENDERS=r,o.context=a,o.id=n||"visibleHotSpot",o.resetEvent=i||"toDoResize",o.statusMap={},o.visibleHotSpotMap={},o.CommonParams=t.CommonParams,o.camera=r.room.camera,o.init(),o.initListener(),o}return Eo()(l,[{key:"initListener",value:function(){var o=this,e=this.listener,t=(this.CommonParams,{roomModule:(t={},S()(t,this.resetEvent,function(t){o.resize(t)}),S()(t,"toDoRenderIn",function(t,e){"vrModule"!==(t||{}).from&&(o.visibleHotSpotRender.hide(!1),o.visibleHotSpotRender.renderIn())}),S()(t,"toDoRenderOut",function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=(t||{}).from;"vrModule"!==t&&(o.visibleHotSpotRender.renderOut(),"reLoad"!==t&&o.visibleHotSpotRender.hide(!0))}),S()(t,"setedDataId",function(t,e){o.empty(),o.setSpotId(t),o.isInAnimation=!1}),S()(t,"changeIdProgress",function(t){t.step===t.sum-1&&"cut"!==o.changeRoomType&&o.empty()}),S()(t,"toDoSetDataId",function(t){var e=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{type:"cut"}).type;o.isInAnimation=!0,o.changeRoomType=e}),t),room2DModule:{setedDataId:function(t,e){o.empty()}},module:{toDoReset:function(){}},roomRender:{cameraTransform:function(){o.setDirection()},cameraAutoTransform:function(){o.setDirection()}},system:{toDoReset:function(){o.loading=!0},reseted:function(t){t.step==t.sum&&(o.loading=!1)}},sdk:{},window:{resize:function(){setTimeout(function(){o.resize()},5)},orientationChange:function(){window.setTimeout(function(){return o.resize()},100)}},visibleHotSpot:{toDoSetDataId:function(t){o.clickEvent(t)},updateCamera:function(t){o.visibleHotSpotRender.updateCamera(t),o.camera=t},getVisibleHotSpotsInfos:function(t){t({labelRendererHalfW:o.visibleHotSpotRender.labelRenderer._widthHalf,labelRendererHalfH:o.visibleHotSpotRender.labelRenderer._heightHalf,currVisibleHotSpots:o.getCurrVisibleHotSpots(),visibleHotSpotRender:o.visibleHotSpotRender})},updateVisibleHotSpots:function(){o.setDirection(1)}}});e.addWithMap(t),window.addEventListener("orientationchange",function(){var t="3D"===o.CommonParams.dataType?"roomModule":"room2DModule";setTimeout(function(){e.dispatch("getCurrentHotSpot",t,function(t){o.empty(),o.setSpotId(t.ID)})},100)},!1)}},{key:"init",value:function(){this.domTool.createElement;var t=DOMS.anchorMaker,e=this.RENDERS.room,o=this.AppParams,r=o.isIPhoneXSMax,n=o.checkIsIosSafari,o=this.config.CUSTOMER.filter(function(t){return"compare"===t.key}),o=r()&&n(13)&&0!==o.length;this.visibleHotSpotRender=t.makeOne(e.camera,e.scene,this.id,{isTranslateToRound:o,isCheckOverlap:!0,size:10}),this.resize(),e.renderTool.wrap.appendChild(this.visibleHotSpotRender.root)}},{key:"setSpotId",value:function(e){var n,t,o,i,r,a,s,l=this;this.spots&&(this.currSpotId=e,t=void 0===(r=(void 0===(o=(n=this.RENDERS.room).houseData)?{}:o).floorRooms)?{}:r,r=(o=this.spots.filter(function(t){return t.ID===e})[0]).VisibleShootSpotIds,i=void 0===r?[]:r,r=o.VisibleInnerShootSpots,a=void 0===r?[]:r,s=o.ID,this.getIsOtherFloor(t,e,o),this.objMap=[],this.spots.forEach(function(t,e,o){var r=t.ID;!t.isHide&&t.IsDefault&&i&&-1<i.indexOf(r)&&r!==s&&(!l.isHasVisibleInnerShootSpots||l.isHasVisibleInnerShootSpots&&a&&-1===a.indexOf(r))&&(r=t.Position,r=l.getVisibleHotSpotsPos(n.camera.position,new THREE.Vector3(r.x,r.y,-r.z)),l.buildVisibleSpot(t,r,s))}),setTimeout(function(){l.setDirection()},0))}},{key:"getIsOtherFloor",value:function(r,t,e){var o=e.VisibleShootSpotIds,n=void 0===o?[]:o,o=e.VisibleInnerShootSpots,i=void 0===o?[]:o;e.ID;if(1<Object.keys(r).length){if(this.visibleHotSpotFloorMap&&this.visibleHotSpotFloorMap[t])return this.visibleHotSpotFloorMap[t].isHasOtherFloor;this.visibleHotSpotFloorMap||(this.visibleHotSpotFloorMap={});var a=n.concat(i).filter(function(t){return!i.includes(t)}),n=this.spots.filter(function(t){var e=t.ID,t=t.RoomDetail;return a.includes(e)&&t.ID}),s=this.getCurrFloor(t,e),n=n.find(function(t){var e=t.RoomDetail,o=t.isHide,t=t.IsDefault;return!r[s].includes(e.ID)&&!o&&t});return this.visibleHotSpotFloorMap[t]={isHasOtherFloor:!!n},!!n}return!1}},{key:"getCurrFloor",value:function(e,o){var t=this.RENDERS.room.houseData,t=(void 0===t?{}:t).floorRooms,r=void 0===t?{}:t,t=Object.keys(r);o||this.spots.filter(function(t){return t.ID===e})[0];return t.find(function(t){return r[t].find(function(t){return t===o.RoomDetail.ID})})}},{key:"checkOverlap",value:function(t,e,o,r){for(var n=this.RENDERS.room,i=r.ID,a=!1,s=o.clone().project(n.camera),l=this.visibleHotSpotRender.labelRenderer._widthHalf,h=this.visibleHotSpotRender.labelRenderer._heightHalf,c=s.x*l+l,u=-s.y*h+h,p=0;p<this.objMap.length;p++){var d=this.objMap[p],f=d.left,m=d.top,g=d.width,v=d.height,y=d.id,S=Math.min(f+(g+30)/2,c+t/2)-Math.max(f-(g+30)/2,c-t/2),b=Math.min(m+(v+30)/2,u+e/2)-Math.max(m-(v+30)/2,u-e/2),f=o.clone(),g=d.position.clone(),g=180*f.subVectors(f,n.camera.position).angleTo(g.subVectors(g,n.camera.position))/Math.PI;y===i?a=!0:(0<S&&0<b||g<5)&&(d.tail++,a=!0,u=m+(v+(c<-1e3?120:30))*d.tail,o=new THREE.Vector3((c-l)/l,-(u-h)/h,s.z).unproject(n.camera))}return a||this.objMap.push({id:i,left:c,top:u,width:t,height:e,tail:0,position:o,Name:r.Name}),o}},{key:"buildVisibleSpot",value:function(t,e,o){var r=t.ID,n=this.creatDoms(t);n.style.opacity=0,n.style.position="absolute",document.body.appendChild(n);var i=n.clientWidth,a=n.clientHeight,e=this.checkOverlap(i,a,e,t);document.body.removeChild(n),n.style.opacity=1,this.visibleHotSpotRender.add(r,t,e,n),this.visibleHotSpotMap[o]?this.visibleHotSpotMap[o][r]={ID:r,pos:e,domW:i,domH:a,data:t,dom:n}:this.visibleHotSpotMap[o]=S()({},r,{ID:r,pos:e,domW:i,domH:a,data:t,dom:n}),console.log("visibleHotSpotArr--------\x3e",this.visibleHotSpotMap)}},{key:"creatDoms",value:function(e){var o=this,t=this.RENDERS,r=t.house,n=(t.room,r.houseData),i=this.spots.find(function(t){return t.ID===o.currSpotId}),a=this.visibleHotSpotFloorMap&&this.visibleHotSpotFloorMap[this.currSpotId]&&this.visibleHotSpotFloorMap[this.currSpotId].isHasOtherFloor,s=Object.keys(n.floorsPlanRooms).find(function(t){return n.floorsPlanRooms[t].find(function(t){return t.ID===i.RoomDetail.ID})}),l=Object.keys(n.floorsPlanRooms).find(function(t){return n.floorsPlanRooms[t].find(function(t){return t.ID===e.RoomDetail.ID})}),t=n.floors.reduce(function(t,e){return e.ID===l?e.Name+"·":t},"");s!==l||a||(t="");var r=this.domTool.createElement,s=e.Name,h=e.ID,a=r("span","",{class:"visible-hotSpot-icon"},{}),s=r("span","".concat(t+s),{class:"visible-hotSpot-text"},{}),a=r("div",[a,s],{class:"visible-hotSpot-item"},{}),s=r("div","",{class:"loadding-bg",id:"b-".concat(this.id,"-").concat(h)},{}),a=r("div",[s,a],{class:"visible-hotSpot-wrap",id:"w-".concat(this.id,"-").concat(h)},{click:function(){o.loading||o.listener.dispatch("toDoSetDataId","visibleHotSpot",h)}});return this.statusMap[h]={},a}},{key:"setDirection",value:function(t){var l,h=this,e=this.getCurrVisibleHotSpots(),c=this.RENDERS.room,o=this.domTool,u=o.addClass,p=o.removeClass,o=this.visibleHotSpotRender.labelRenderer,d=o._widthHalf,f=o._heightHalf;e&&(l=this.spots.filter(function(t){return t.ID===h.currSpotId})[0].Position,Object.values(e).forEach(function(t){var e=t.pos,o=t.dom,r=e.clone().subVectors(e,h.camera.position),n=c.screen2World(new THREE.Vector3(d,f,600),!0,h.camera,h.viewport||h.RENDERS.room.viewport);n.y=e.y;var i=n.clone().subVectors(n,h.camera.position),a=0===Math.abs(i.x)&&0===Math.abs(i.y)&&0===Math.abs(i.z),s=(new THREE.Vector3).crossVectors(i,r),t=a?0:180*r.angleTo(i)/Math.PI,n=c.screen2World(new THREE.Vector3(0,f,600),!0,h.camera,h.viewport||h.RENDERS.room.viewport);n.y=e.y;r=n.clone().subVectors(n,h.camera.position),n=a?0:180*r.angleTo(i)/Math.PI,a=e.clone().project(h.camera),r=a.x*d+d,i=h.RENDERS.room.vrControls.enabled&&window.orientation%180!=0,o=o.querySelector(".visible-hotSpot-icon");(!i&&2*n/3<t||i&&(r<+d/3||5*d/3<r))&&Math.abs(l.y-e.y)<100&&a.x<1.1&&-1.1<a.x?(s=0<s.y?"left":"right",u(o,s)):(p(o,"left"),p(o,"right"))}))}},{key:"clickEvent",value:function(t){var o,r,e,n,i=this,a=this.visibleHotSpotRender.root,s=a.querySelector("#w-"+this.id+"-"+t);s&&(o=a.querySelector("#b-"+this.id+"-"+t),r=s.offsetWidth,e=function(){i.statusMap[t].isInClick=!1,i.listener.removeWithMap(n)},this.listener.addWithMap(n={roomModule:{startChangeId:function(){i.statusMap[t].isInClick?e():i.statusMap[t].isInClick=!0},changeIdProgress:function(t){var e=t.step,t=t.sum;e<=t-1&&(o.style.width=r*e/(t-1)+"px")},changedId:function(){e()}}}),this.isInAnimation||this.listener.dispatch("toDoSetDataId","roomModule",t,{type:"roam",from:"hotSpot",origin:{id:t,from:"panorama3D"}}))}},{key:"resetData",value:function(t){var e=t.spots,t=t.isHasVisibleInnerShootSpots;this.spots=e,this.isHasVisibleInnerShootSpots=t}},{key:"getVisibleHotSpotsPos",value:function(t,e){var o=e.subVectors(e,t);return o.normalize().multiplyScalar(600),e=e.addVectors(t,o)}},{key:"getCurrVisibleHotSpots",value:function(){var e=this,t=this.listener,o=this.RENDERS.room.type,r=null;return t.dispatch("getCurrentHotSpot","3D"===(void 0===o?"3D":o)?"roomModule":"room2DModule",function(t){t=t.ID;e.visibleHotSpotMap&&(r=e.visibleHotSpotMap[t])}),r}},{key:"getVisibleHotSpotsScreenPos",value:function(t){var e=this.visibleHotSpotRender.root.getBoundingClientRect(),o=e.left,r=e.top,n=e.width,e=e.height,t=t.getBoundingClientRect();return{x:(t.left-o)/n,y:(t.top-r)/e}}},{key:"resize",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.context&&this.context.visibleHotSpotViewProt?this.context.visibleHotSpotViewProt:RENDERS.room.vrControls.enabled&&window.orientation%180!=0&&this.RENDERS.room.effect.viewportL?"visibleHotSpotVr"===this.id?this.RENDERS.room.effect.viewportR:this.RENDERS.room.effect.viewportL:this.RENDERS.room.viewport;this.visibleHotSpotRender.resize(t),this.viewport=t}},{key:"empty",value:function(){this.visibleHotSpotRender.empty()}},{key:"hide",value:function(t){To()(Mo()(l.prototype),"hide",this).call(this,t)}},{key:"renderIn",value:function(){this.visibleHotSpotRender.renderIn()}},{key:"renderOut",value:function(){this.visibleHotSpotRender.renderOut()}}]),l}(a),on=(u("ngcb"),u("kLCe"));function rn(o){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=Mo()(o);return e=r?(t=Mo()(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),Po()(this,e)}}var nn=function(t){xo()(r,t);var o=rn(r);function r(t,e){return bo()(this,r),(t=o.call(this,t)).DOMS=e,t.init(),t}return Eo()(r,[{key:"init",value:function(){var t=this.domTool,e=t.createElement,o=t.root;this.top=(this.DOMS.guideMap.top||0)+100;var r=e("div","",{class:"circle left"}),n=e("div",r,{class:"progress-container left"}),i=e("div","",{class:"circle right"}),a=e("div",i,{class:"progress-container right"}),t=e("div","",{class:"loadAnimation-container"});this.root=e("div",[n,a,t],{class:"house-loading"}),this.root.style.top=this.top+"px",o.appendChild(this.root),this.leftBar=r,this.rightBar=i,window.Lottie.loadAnimation({container:t,renderer:"svg",loop:!0,autoplay:!0,animationData:on})}},{key:"startProgress",value:function(){this.leftBar.style.transform="",this.rightBar.style.transform="",this.rightBar.style.transition="",this.hide(!1)}},{key:"progress",value:function(t){t<0?t=0:1<t&&(t=1);.5<=t?(this.rightBar.style.transform="rotate(".concat(315,"deg)"),this.rightBar.style.transition="all 0s linear",this.leftBar.style.transform="rotate(".concat(135+180*(t-.5)*2,"deg)")):(this.rightBar.style.transform="rotate(".concat(135+180*t*2,"deg)"),this.leftBar.style.transform="")}},{key:"endProgress",value:function(){this.leftBar.style.transform="",this.rightBar.style.transform="",this.rightBar.style.transition="",this.hide(!0)}}]),r}(a);function an(t,e){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function(t,e){if(t){if("string"==typeof t)return sn(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(o="Object"===o&&t.constructor?t.constructor.name:o)||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?sn(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i=!0,a=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return i=t.done,t},e:function(t){a=!0,n=t},f:function(){try{i||null==o.return||o.return()}finally{if(a)throw n}}}}function sn(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,r=new Array(e);o<e;o++)r[o]=t[o];return r}!1!==(window.VRHOUSE_CONFIG.fills||{})["babel-polyfill"]&&u("201c"),window.Lottie=H.a;var a=u("DWN/"),ln=null,hn=null,cn=null,un=null,pn=null,dn=null,fn=null,mn=new e,gn=null,vn=function(t){var e=(Xn(window.VRHOUSE_CONFIG.MODULE,"room")||{}).isShowSwitchScreenButton;yr.a.isMobile&&!0===e&&Sn.dispatch("orientationChange","window",{isPortrait:Object(Do.o)(),safeDir:Object(Do.q)(),isEnd:t},window)},yn=function(t){Sn.dispatch("resize","window",t,window)},Sn=null;var bn=null;var En=null;var wn,Tn=gi(),xn=new n(mn,wn,Tn),Pn=(window.collectManager=xn).applySpace("vrhouse","log"),Mn=function(t){console.log(t),window.VRHOUSE_CONFIG.NO_CONSOLE_LOG||(t.fingerprint=wn,t.pageId=Tn,Pn.post(t))},Dn=Object(Do.m)(1,1),Cn={};window.RENDERS=Cn;var kn={};function Rn(){return(Rn=x()(P.a.mark(function t(e){var o,r,n;return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.STYLE_ICON=e.STYLE_ICON||yr.f.styleIcon,r=e.MODULE,e.isCompare,e.CUSTOMER,o=e.SAFE_TOP_HEIGHT,n=void 0===o?0:o,e.IS_SHOW_COMPASS_DIRECTION,o=Xn(r,"room"),r=Xn(r,"house"),o.IS_SHOW_FLOORPLAN,n=parseInt(n,10),n={renderTool:pn,domTool:dn,listener:Sn,config:e,frameManager:mn,AppParams:yr.a,PanoramaParams:yr.e,CommonParams:yr.b,FeaturesParams:yr.c,BScroll:mo,room:o,houseConfig:r,lottieAnimation:vi,safeTopHeight:n,textData:yr.g.textData,translateDataFn:$n,logFn:Mn,moduleConfig:An,houseData:fn,DOMS:kn,RENDERS:Cn},kn.safeBox=new Jr(n,kn),kn.guideMap=new Wr(n,kn),kn.anchorMaker=new qr(n,kn),kn.houseCompass=new $r(n,kn),kn.VisibleHotSpotDom=new en(n,kn,{RENDERS:Cn}),kn.houseLoading=new nn(n,kn),Sn.dispatch("toDoAddCall","statusPipe",{key:"hideDom",call:function(t,e){kn[t]&&kn[t].hide(e)}});case 14:case"end":return t.stop()}},t)}))).apply(this,arguments)}window.DOMS=kn;var In={},An={},_n={};function Fn(){return(Fn=x()(P.a.mark(function t(e){var o,r,n,i,a,s;return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o=e.MODULE,r=Xn(o,"room"),n=Xn(o,"house"),n={RENDERS:Cn,DOMS:kn,listener:Sn,domTool:dn,raycasterManager:bn,progressManager:En,collectManager:xn,jsonLoader:ln,jsLoader:hn,linkLoader:cn,config:e,AppParams:yr.a,PanoramaParams:yr.e,CommonParams:yr.b,roomConfig:r,houseConfig:n,logFn:Mn,ToolbarData:yr.h,canvasStepper:Dn},Sn.dispatch("loading","init",{sum:3,type:"module"},null),i=an(o);try{for(i.s();!(a=i.n()).done;)s=a.value,An[s.key]=s}catch(t){i.e(t)}finally{i.f()}Sn.dispatch("loadingOne","init",{name:"houseModule",type:"module",external:!1},null),In.house=new cr(n,An.house||{}),_n.houseModule=In.house.init(),Sn.dispatch("loadedOne","init",{name:"houseModule",type:"module",external:!1},null),Sn.dispatch("loadingOne","init",{name:"room2DModule",type:"module",external:!1},null),In.room2D=new lr(n,An.room||{}),_n.room2DModule=In.room2D.init(),Sn.dispatch("loadedOne","init",{name:"room2DModule",type:"module",external:!1},null),Sn.dispatch("loadingOne","init",{name:"roomModule",type:"module",external:!1},null),In.room=new er(n,An.room||{}),_n.roomModule=In.room.init(),Sn.dispatch("loadedOne","init",{name:"roomModule",type:"module",external:!1},null),yr.a.isMobile&&(n.VisibleHotSpotDom=en,In.vr=new zr(n),_n.vrModule=In.vr.init()),Sn.dispatch("loaded","init",{sum:3,type:"module"},null);case 21:case"end":return t.stop()}},t)}))).apply(this,arguments)}function On(t,e){var o,r,n,i=null,a=!1;return(t=t||[]).forEach(function(t){"ruler"===t.key&&(i=t,a=!0)}),i||(o=null,(e=e||[]).forEach(function(t){"room"===t.key&&(o=t)}),o&&(i={inLoadName:"ruler",key:"ruler"},n=(r=o).RULER_BTN_DEFAULT_VALUE,t=r.IS_SHOW_RULER_BTN,i.open=!1!==t&&(void 0===n||n),void 0!==t&&(i.buttonShow=t),o.inLandscape&&(i.inLandscape||(i.inLandscape={}),n=void 0===(r=(e=o.inLandscape).RULER_BTN_DEFAULT_VALUE)?n:r,void 0!==(t=void 0===(e=e.IS_SHOW_RULER_BTN)?t:e)&&(i.inLandscape.buttonShow=t,void 0!==n&&!1!==t&&(i.inLandscape.open=n))))),[i,a]}window.VRHOUSE_SPACE=_n;var Ln={},Hn=null;function Bn(){return(Bn=x()(P.a.mark(function t(e){var o,r,a,n;return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.MODULE,o=e.SDK,r=Xn(n,"room"),r.IS_SHOW_RULER_BTN,r.RULER_BTN_DEFAULT_VALUE,a={RENDERS:Cn,DOMS:kn,listener:Sn,raycasterManager:bn,progressManager:En,jsonLoader:ln,jsLoader:hn,linkLoader:cn,textureLoader:un,frameManager:mn,collectManager:xn,renderTool:pn,domTool:dn,config:e,AppParams:yr.a,houseData:fn,textData:yr.g.textData,logFn:Mn,roomConfig:r,canvasStepper:Dn},(o=o||[]).push(Object.assign({open:!0,buttonShow:!0},On(o,n)[0])),n=o.length,Sn.dispatch("loading","init",{sum:n,type:"sdk"},null),Hn=function(){var e=x()(P.a.mark(function t(n){var i,e,o,r=arguments;return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:1<r.length&&void 0!==r[1]||n.length,i=null,window.addSDK=function(t){i=t},e=P.a.mark(function t(e){var o,r;return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=window.performance.now(),(r=Object.assign({},n[e])).option&&(r.option=Object.assign({},r.option)),r.style&&cn.load({url:r.style}),Sn.dispatch("loadingOne","init",{name:r.inLoadName,type:"sdk",external:!0},null),r.url)return t.next=8,new Promise(function(t,e){cn.load,hn.load({url:r.url,onload:function(){i&&i(a,r),i=null,Ln[r.inLoadName]=r,o=window.performance.now()-o,r.loadTime=o,t()},onerror:function(){t()}})});t.next=10;break;case 8:t.next=13;break;case 10:if("ruler"===r.key)return t.next=13,u.e(4).then(u.bind(null,"kZhU")).then(function(t){t=t.init;r.style&&cn({url:r.style}),_n.ruler=t(a,r),Ln[r.inLoadName]=r,o=window.performance.now()-o,r.loadTime=o});t.next=13;break;case 13:Sn.dispatch("loadedOne","init",{name:r.inLoadName,type:"sdk",external:!0},null);case 14:case"end":return t.stop()}},t)}),o=0;case 5:if(o<n.length)return t.delegateYield(e(o),"t0",7);t.next=10;break;case 7:o++,t.next=5;break;case 10:delete window.addSDK;case 11:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),t.next=11,Hn(o,n);case 11:Sn.dispatch("loaded","init",{sum:n,type:"sdk"},null);case 12:case"end":return t.stop()}},t)}))).apply(this,arguments)}var Vn={},Nn={},zn=null,Un=null,Gn=null;function jn(){return(jn=x()(P.a.mark(function t(e){var s,o,l,a,h,c;return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s={RENDERS:Cn,DOMS:kn,MODULES:In,listener:Sn,raycasterManager:bn,progressManager:En,jsonLoader:ln,jsLoader:hn,linkLoader:cn,textureLoader:un,frameManager:mn,collectManager:xn,CommonParams:yr.b,renderTool:pn,domTool:dn,config:e,houseData:fn,AppParams:yr.a,textData:yr.g.textData,translationData:gn,dataLoadding:Wn,logFn:Mn,canvasStepper:Dn},o=e.CUSTOMER,l=e.MODULE,o=o||[],h=[],c=(a=[]).length+h.length,Sn.dispatch("loading","init",{sum:c,type:"customer"},null),Gn=function(){var o=x()(P.a.mark(function t(e,n){var i,o,a,r;return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i={compare:function(){return u.e(1).then(u.bind(null,"Ksw+"))}},o=an(e),t.prev=2,r=P.a.mark(function t(){var e,o,r;return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.value,o=e.key,r=e.inLoadName,Sn.dispatch("loadingOne","init",{name:r,type:"customer",external:!1},null),t.next=5,i[o]().then(function(t){t=t.init;if("compare"===o){s.lottieAnimation=vi,s.BScroll=mo,s.room=Xn(l,"room"),s.translateDataFn=$n,s.VisibleHotSpotDom=en;try{localStorage.pagecount=localStorage.pagecount?Number(localStorage.pagecount)+1:1}catch(t){console.log("不支持localStorage set")}}_n[o]=t(s,e,n),Vn[e.inLoadName]=e,Nn[o]=i[o]}).catch(function(t){console.error(t)});case 5:Sn.dispatch("loadedOne","init",{name:r,type:"customer",external:!1},null);case 6:case"end":return t.stop()}},t)}),o.s();case 5:if((a=o.n()).done){t.next=9;break}return t.delegateYield(r(),"t0",7);case 7:t.next=5;break;case 9:t.next=14;break;case 11:t.prev=11,t.t1=t.catch(2),o.e(t.t1);case 14:return t.prev=14,o.f(),t.finish(14);case 17:case"end":return t.stop()}},t,null,[[2,11,14,17]])}));return function(t,e){return o.apply(this,arguments)}}(),zn=function(){var e=x()(P.a.mark(function t(n){var i,e,o,r=arguments;return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:1<r.length&&void 0!==r[1]||n.length,i=null,window.addCUSTOMER=function(t){i=t},e=P.a.mark(function t(e){var o,r;return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=Object.assign({},n[e]),r=window.performance.now(),o.option&&(o.option=Object.assign({},o.option)),o.style&&cn.load({url:o.style}),Sn.dispatch("loadingOne","init",{name:o.inLoadName,type:"customer",external:!0},null),t.next=7,new Promise(function(t,e){hn.load({url:o.url,onload:function(){i&&i(s,o),i=null,Vn[o.inLoadName]=o,r=window.performance.now()-r,o.loadTime=r,t()},onerror:function(){t()}})});case 7:Sn.dispatch("loadedOne","init",{name:o.inLoadName,type:"customer",external:!0},null);case 8:case"end":return t.stop()}},t)}),o=0;case 5:if(o<n.length)return t.delegateYield(e(o),"t0",7);t.next=10;break;case 7:o++,t.next=5;break;case 10:delete window.addCUSTOMER;case 11:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),Un=function(){var o=x()(P.a.mark(function t(e,o){var r,n,i;return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=[],h=[],r=an(e);try{for(r.s();!(n=r.n()).done;)((i=n.value).url?a:h).push(i)}catch(t){r.e(t)}finally{r.f()}if(t.t0=0!==h.length,t.t0)return t.next=8,Gn(h,o);t.next=8;break;case 8:if(t.t1=0!==a.length,t.t1)return t.next=12,zn(a,c);t.next=12;break;case 12:case"end":return t.stop()}},t)}));return function(t,e){return o.apply(this,arguments)}}(),t.next=11,Un(o);case 11:Sn.dispatch("loaded","init",{sum:c,type:"customer"},null);case 12:case"end":return t.stop()}},t)}))).apply(this,arguments)}function Xn(t,e,o){var r,n=2<arguments.length&&void 0!==o?o:"key",i={},a=an(t);try{for(a.s();!(r=a.n()).done;){var s=r.value;i[s[n]]=s}}catch(t){a.e(t)}finally{a.f()}return i[e]}function Wn(e,o){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(t){throw t},r=3<arguments.length?arguments[3]:void 0,n=4<arguments.length?arguments[4]:void 0;console.log("dataLoadding======",r,e);var i,a=e&&e.house||function(){var t="",e="",o=window.VRHOUSE_CONFIG.STATUS_ISONLINE;switch(console.log("ROUTER_MATCH.roomDir======>",jr.a),jr.a.roomDir){case"/data/default123/":e=o?t+"/data/pano_3d.json":"/data/pano_3d.json";break;case"/data/zhaopin/":e=o?t+"/data/zhaopin.json":"/data/zhaopin.json";break;case"/data/first123/":e=o?t+"/data/first123.json":"/data/first123.json";break;case"/data/second123/":e=o?t+"/data/second123.json":"/data/second123.json";break;case"/data/three123/":e=o?t+"/data/three123.json":"/data/three123.json";break;case"/data/firstTeg/":e=o?t+"/data/firstTeg.json":"/data/firstTeg.json";break;case"/data/noicon/":e=o?t+"/data/data-2f-123.json":"/data/data-2f-123.json",window.VRHOUSE_CONFIG.THUMBNAIL_GROUP=[];break;case"/data/room123/":e=o?t+"/data/room123.json":"/data/room123.json",window.VRHOUSE_CONFIG.THUMBNAIL_GROUP=[];break;case"/data/roam/":e=o?t+"/data/roam.json":"/data/roam.json";break;default:e=jr.a.roomDir?jr.a.roomDir+"ViewData.txt":o?t+"/data/anchor/ViewData.txt":"/static/data/anchor/ViewData.txt"}return e}();!window.VRHOUSE_DATA_3D&&!window.VRHOUSE_DATA_2D||r?yr.a.routerMatch&&yr.a.routerMatch.isDomainCall?((i=new XMLHttpRequest).onreadystatechange=function(){4===i.readyState&&Kn(JSON.parse(decodeURIComponent(i.responseText)),e,o)},i.responseType="text",i.open("get",a,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),i.setRequestHeader("Accept","text/plain"),i.send()):"string"==typeof a?(r=[ln(a)],n&&n.dataUrl&&r.push(Yn(n)),Promise.all(r).then(function(t){console.log("=====>",t[0],t[1]),Kn(t[0],e,o)},t).catch(function(t){throw new Error(t)})):(a=a,console.log("=====>",a),n&&n.dataUrl?Yn(n).then(function(t){Kn(t,e,o)}):Kn(a,e,o)):(console.log("执行了window"),n&&n.dataUrl?Yn(n).then(function(t){Kn(window.VRHOUSE_DATA_3D||window.VRHOUSE_DATA_2D,e,o,!0)}):Kn(window.VRHOUSE_DATA_3D||window.VRHOUSE_DATA_2D,e,o,!0))}function Yn(i){if(i&&i.dataUrl)return new Promise(function(n){ln(i.dataUrl).then(function(t){var e=i.type||"CH",o=gn=t[e]||{},r=o.vr,e=o.compare,e=void 0===e?{}:e,o=o.OneButtonDecoration,o=void 0===o?{}:o;Object.assign(yr.g.textData,void 0===r?{}:r),Object.assign(yr.g.compareData,e,o),n(t)}).catch(function(t){throw new Error(t)})})}function Kn(n,i,a,t){var s=n;n.result&&n.result.vrdata&&(s=n.result.vrdata);var l,h,c,r,u,p,d,f,m=null;t&&(window.VRHOUSE_DATA_3D&&(m="3D"),window.VRHOUSE_DATA_2D&&(m="2D")),m=m||i.type||("2d"==yr.a.routerMatch.type?"2D":"3D"),l=i.markMd5||window.MarkMd5||yr.a.routerMatch.markMd5,h=i.markUrl,c=i.isMarkDataType||window.isMarkDataType||yr.a.routerMatch.isMarkDataType,qn={},Zn={},r=s,u=m,p=l,d=h,f=c,new Promise(function(e){var t,o;"2D"===u.toUpperCase()&&(p&&f||d)?(t="integrate"===window.environment?"//vrie.58.com/":"online"===window.environment?"//vr.58.com/":"http://rap2api.taobao.org/app/mock/232837/",(o=new FormData).append("md5",p),o.append("type",f),ln(d||t+"label/getLabel",{payload:o,method:"GET",type:"FormData"}).then(function(t){1===t.code&&t.data&&(t=JSON.parse(t.data),(r.markData=t).covers&&(r.GI.covers=t.covers),t.orders&&(r.orders=t.orders),t.titles&&(r.GI.titles=t.titles),e(r)),e(r)})):e(r)}).then(function(){var e=x()(P.a.mark(function t(e){var o,r;return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(o=function(t){var s=this,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"3D",o=2<arguments.length?arguments[2]:void 0,r=3<arguments.length?arguments[3]:void 0,n=4<arguments.length?arguments[4]:void 0;if("2D"===e)return yr.b.dataType="2D",function(n,t,e,o){var i={originData:n,spots:[],type:"2D",MarkMd5:t,markUrl:e,isMarkDataType:o};i.defaultSpotId=n.currentId&&0<=n.orders.indexOf(n.currentId)?n.currentId:n.orders[0];var r=window.VRHOUSE_CONFIG.preloadInfo,t=void 0===r?{}:r;n.CoverImageFOV=n.CoverImageFOV||90;e=t.preloadId?t.fov:yr.a.isMobile?n.CoverImageFOV:90!==n.CoverImageFOV?+n.CoverImageFOV:90,o=yr.e.maxFov;e=parseInt(e),i.cameraFov=e<=yr.e.maxFovLimit&&e>=yr.e.minFov&&e||o;var a=[],r=(n.markData||{}).rotations,s=void 0===r?{}:r;n.orders.forEach(function(e){var o=[],t=n.markData&&n.markData.HotSpots?n.markData.HotSpots[e]:[];n.markData&&n.markData.HotSpots[e]&&n.markData.HotSpots[e].map(function(t){n.markData.Marks[t]&&(n.markData.Marks[t]._sceneId=e)&&o.push(n.markData.Marks[t])&&a.push(n.markData.Marks[t])});var r=!1;Jn(n.GI.titles[e])&&(r=!0),i.spots.push({ID:e+"",Name:gn?Qn(n.GI.titles[e]):n.GI.titles[e],Position:{x:0,y:0,z:0},BestCameraView:s[e],Rotation:{x:0,y:0,z:0},ThumbnailUrl:n.GI.covers[e],PanoImagesUrl:[n.GI.URLs[e].right,n.GI.URLs[e].left,n.GI.URLs[e].top,n.GI.URLs[e].bottom,n.GI.URLs[e].front,n.GI.URLs[e].back],marks:o,VisibleMarkShootSpots:t,isHide:r})}),i.markSpots=a,n.markData&&(t=n.markData,e=t.defaultId,o=t.fov,r=t.covers,e&&(i.defaultSpotId=e),r&&(i.Info||(i.Info={}),i.Info.CoverBgUrl=r[i.defaultSpotId]),o&&(i.cameraFov=Number(o)),i.originMarkData=t);gn&&i.spots.map(function(t){var e=t.Name,o=e.replace(/[0-9]/gi,"");t.Name=qn[o]&&1<qn[o].length?e:o});return i}(t,o,r,n);yr.b.dataType="3D";var l=Xn(window.VRHOUSE_CONFIG.MODULE,"room"),n=l.SIZE_UNIT_TYPE,h=t.HouseData;h.ShootSpots.forEach(function(t){Jn(t.Name)&&(t.isHide=!0)});var n=t.AppInfo,n=(void 0===n?{}:n).Source,e={Entrance:h.Entrance||{},originData:t,spots:h.ShootSpots,type:e,defaultSpotId:h.Info.DefaultShootSpotId,defaultView:t.AppInfo&&t.AppInfo.DefaultView,isContinuousRoaming:-1!==[1,4].indexOf(n)&&h.UseModel},n=window.VRHOUSE_CONFIG.preloadInfo,c=void 0===n?{}:n;t.CoverImageFOV=t.CoverImageFOV||90;n=c.preloadId?c.fov:yr.a.isMobile?t.CoverImageFOV:90!==t.CoverImageFOV?+t.CoverImageFOV:90,t=yr.e.maxFov;n=parseInt(n),e.cameraFov=n<=yr.e.maxFovLimit&&n>=yr.e.minFov&&n||t;var u={},p={},d={},f=[],m={},g={};yr.a.isDrawFloorPlan=!(!yr.a.IS_DRAW_FLOORPLAN||!h.Info.SvgUrl),h.Floors.forEach(function(i,t,e){var a=[];i.Rooms.forEach(function(r,t,e){var o;if(Jn(r.Info.Name)&&(r.isHide=!0,r.Info.ShootSpotIds.forEach(function(t){ti.call(s,t,h).isHide=!0})),gn&&(o=(void 0===(o=r.Info)?{}:o).Name,r.Info.Name=Qn(o)),0===t){var n=r.Info.RoomHeight;try{i.FloorHeight=n?.5*n:0<r.Walls.length?r.Walls[0].Start.Up.Position.y-r.Walls[0].Start.Down.Position.y:120}catch(t){throw i.FloorHeight=120,t}}a.push(r.ID),p[r.ID]=r.Info.ShootSpotIds,(d[r.ID]=r).Info.ShootSpotIds.forEach(function(t,e){var o=ti.call(s,t,h);c.preloadId===o.ID&&c.preloadScheme&&(o.PanoImagesUrl=o.PanoImagesUrl.map(function(t){return"".concat(c.preloadScheme).concat(t.substring(t.indexOf(":")))})),!gn||0!==e&&"玄关"!==o.Name||(t=o.Name,o.Name=Qn(t,Zn)),Object.assign(o,{RoomDetail:r,IsDefault:0===e})}),r.Info.originArea=r.Info.Area,yr.a.isDrawFloorPlan?"ft"===yr.a.SIZE_UNIT_TYPE&&(n=yr.a.sizeTranslate,r.Info.Area=n({size:r.Info.Area,sizeType:"squarmeter"})):(l.SIZE_UNIT_TYPE="m",l.IS_SHOW_SIZE_UNIT_TYPE_BTN=!1)});var o=gn?$n(i.Info.Name,gn.vr.floors):i.Info.Name;f.push({ID:i.ID,Name:o}),u[i.ID]=a,m[i.ID]=i.Plan,g[i.ID]=i.Rooms}),gn&&(Object.values(d).map(function(t){var e=t.Info,o=(void 0===e?{}:e).Name,e=o.replace(/[0-9]/gi,"");t.Info.Name=qn[e]&&1<qn[e].length?o:e}),e.spots.map(function(t){var e,o=t.Name;/.*[\u4e00-\u9fa5]+.*$/.test(o)||(e=o.replace(/[0-9]/gi,""),t.Name=qn[e]&&1<qn[e].length?o:e)}));Object.assign(e,{floorRooms:u,roomSpots:p,rooms:d,floors:f,houseSize:h.Info.HouseSize,margin:h.Info.Margin,Info:h.Info,cameraHeight:h.CameraHeight,floorsPlan:m,floorsPlanRooms:g,compassDirection:h.Info.Rotation,useModel:h.UseModel,modelInfo:h.ModelInfo,floorsInfo:h.Floors}),e.isMultiFloor=1<h.Floors.length;for(var i=h.ShootSpots,a=!1,v=0;v<i.length;v++)if(i[v].VisibleInnerShootSpots&&i[v].VisibleInnerShootSpots.length){a=!0;break}return e.isHasVisibleInnerShootSpots=a,console.log("数据处理后：",e),e}(s,m,l,h,c)).dataFrom=i,o.roomDir=yr.a.routerMatch.roomDir,a(o,i,n),r=o.Info,r=(void 0===r?{}:r).CoverBgUrl,kn&&kn.resetLoading&&kn.resetLoading.setNewHouseLoadingBg(r,o.dataFrom),console.log("houseData------2222222",o),Mn(function(t){var e=t.type,o=t.spots,r=t.floors,t=t.floorRooms,n={roomNums:0,floorNums:1};if("2D"===e)n.roomNums=o.length;else{n.floorNums=r.length;for(var i=0,a=Object.values(t);i<a.length;i++){var s=a[i];n.roomNums+=+s.length}}return n}(o));case 8:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}())}var qn={},Zn={};function Jn(e){var t=window.VRHOUSE_CONFIG.HIDE_ROOMS,o=void 0===t?{}:t,t=o.queryNames,t=void 0===t?[]:t,o=o.isFuzzyQuery,r=void 0===o||o;return 0!==t.filter(function(t){return!1===r?t===e:-1!==e.indexOf(t)}).length}function Qn(t,e){var o=1<arguments.length&&void 0!==e?e:qn;if(!gn)return t;var r=t.split("_")[0].replace(/[0-9]/gi,""),n=gn.vr.rooms.filter(function(t){return t.name==r}),i=0;if(n[0]){var a=o[n[0].translation],e=n[0].name;return a?(i=a.length,a.push(e)):o[n[0].translation]=[n[0].name],"玄关"===t&&(yr.d.entry=n[0].translation),n[0].translation+""+(i+1)}return t}function $n(e,t){t=t.filter(function(t){return t.name==e});return t[0]&&t[0].translation||e}function ti(e){return e?(1<arguments.length&&void 0!==arguments[1]?arguments[1]:fn).ShootSpots.filter(function(t){return t.ID===e})[0]:{}}var ei={},oi=!1,ri=null,ni=null,ii={};function ai(t){t.MODULE;var r=new Map,n=Sn;_n.system=(t={reload:function(t,e){n.dispatch("toDoReset","system",t,e)},addReloadedListener:function(t){function e(){t(fn,Object.assign({},VRHOUSE_CONFIG))}r.set(t,e),n.add("reseted","system",e)},removeReloadedListener:function(t){var e=r.get(t);r.delete(t),n.remove("reseted","system",e)},addReloadProgressListener:function(o){function t(t){var e=t.sum,t=t.step;o({sum:e,num:void 0===t?0:t})}r.set(o,t),n.add("resetProgress","system",t),n.add("startReset","system",t)},removeReloadProgressListener:function(t){var e=r.get(t);r.delete(t),n.remove("resetProgress","system",e),n.remove("startReset","system",e)},addStopReloadListener:function(t){function e(){t()}r.set(t,e),n.add("resetBreak","system",e)},removeStopReloadListener:function(t){var e=r.get(t);r.delete(t),n.remove("resetBreak","system",e)},addLoadedListener:function(t){function e(){t(fn,Object.assign({},window.VRHOUSE_CONFIG))}r.set(t,e),n.add("leave","firstScreen",e)},removeLoadedListener:function(t){var e=r.get(t);r.delete(t),n.remove("leave","firstScreen",e)},addLoadProgressListener:function(o){function t(t){var e=t.sum,t=t.step;o({sum:e,num:void 0===t?0:t})}r.set(o,t),n.add("startLoad","firstScreen",t),n.add("loadProgress","firstScreen",t)},removeLoadProgressListener:function(t){var e=r.get(t);r.delete(t),n.remove("startLoad","firstScreen",e),n.remove("loadProgress","firstScreen",e)},addToDoBackListener:function(e){function t(t){e(t)}r.set(e,t),n.add("toDoBack","init",t)}},S()(t,"removeLoadProgressListener",function(t){var e=r.get(t);r.delete(t),n.remove("toDoBack","init",e)}),S()(t,"setSizeUnit",function(t){Sn.dispatch("todoResetSize","sizeTranslateDom",{translateType:"ft"===t?"mToFt":"ftToM",sizeUnitType:t})}),S()(t,"sizeTranslate",function(t){var e=t.size,o=t.originalSizeUnit,r=t.toSizeUnit,t=t.callback;Sn.dispatch("todoSizeTranslate","sizeTranslateDom",{size:e,sizeType:o,translateType:"ft"===r?"mToFt":"ftToM",cb:t},"api")}),S()(t,"hideMarketing",function(t){Sn.dispatch(t?"toDoRenderOut":"toDoRenderIn","marketing",null,null)}),t)}function si(){return(si=x()(P.a.mark(function t(e){var o,r,n,i,a;return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.STYLE_ICON=e.STYLE_ICON||yr.f.styleIcon,n=e.MODULE,e.isCompare,e.CUSTOMER,r=e.SAFE_TOP_HEIGHT,a=void 0===r?0:r,e.IS_SHOW_COMPASS_DIRECTION,o=e.uiUrl,r=Xn(n,"room"),n=Xn(n,"house"),r.IS_SHOW_FLOORPLAN,a=parseInt(a,10),i={domTool:dn,config:e,frameManager:mn,AppParams:yr.a,PanoramaParams:yr.e,CommonParams:yr.b,FeaturesParams:yr.c,BScroll:mo,room:r,houseConfig:n,lottieAnimation:vi,safeTopHeight:a,translateDataFn:$n,logFn:Mn,moduleConfig:An,houseData:fn,DOMS:kn,VRHOUSE_SPACE:_n,raycasterManager:bn,progressManager:En,jsonLoader:ln,jsLoader:hn,linkLoader:cn,textureLoader:un,collectManager:xn,renderTool:pn,TextInfos:yr.g,translationData:gn,dataLoadding:Wn,canvasStepper:Dn},o)return t.next=10,new Promise(function(t,e){hn.load({url:o,onload:function(){window.buildUI(i),t()},onerror:function(){t()}})});t.next=12;break;case 10:t.next=21;break;case 12:if(void 0===o)return t.next=15,u.e(0).then(u.bind(null,"UOBl"));t.next=20;break;case 15:a=t.sent,(0,a.default)(i),t.next=21;break;case 20:window.buildUI&&window.buildUI(i);case 21:case"end":return t.stop()}},t)}))).apply(this,arguments)}function li(t){Object.assign(ii,t);var l=ii;ln=l.jsonLoader,hn=l.jsLoader,cn=l.linkLoader,un=l.textureLoader,l.cubeClip?un.cubeClip=function(){return l.cubeClip(yr.a.isMobile)}:un.cubeClip=function(){return yr.a.isMobile,0};var e=l.rendererId,o=l.MODULE,r=l.CUSTOMER;l.loadStartTime=(new Date).getTime(),pn=So(e),!0===l.IS_WHITE_STYLE&&(pn.container.style.backgroundColor="#fff"),dn=Yo(e);var n=l.dataFrom,i=l.LANGUAGE,t=l.decorationStyleList,h=Xn(o,"room"),e=Xn(r,"compare"),o=e&&e.compareList||t||{};console.log(e,989898777);var r=o&&o[0]?o[0].dataFrom:"",t=h.GET_RELOAD_NEW_HOUSE_DATA_CB,a=h.DEFAULT_UI_RENDERED_CB;h.inLandscape,h.IS_SHOW_RULER_BTN;window.GET_RELOAD_NEW_HOUSE_DATA_CB=ni=t;o=h.SIZE_UNIT_TYPE,e=h.IS_DRAW_FLOORPLAN,t=h.IS_SHOW_SIZE_UNIT_TYPE_BTN;return yr.a.SIZE_UNIT_TYPE=void 0===o?"m":o,mi(),yr.a.IS_DRAW_FLOORPLAN=e,yr.a.IS_SHOW_SIZE_UNIT_TYPE_BTN=t,console.log("startLoading"),Wn(r||n,function(){var e=x()(P.a.mark(function t(r){var n;return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return fn=r,function(e){Sn=new ur(function(t,e,o,r,n){}),window.listener=Sn,window.frameManager=mn,Sn.add("resize","window",function(t,e){var o=e.innerWidth,e=e.innerHeight;pn.resize(o,e)}),window.addEventListener("resize",function(t){yn(t)}),window.addEventListener("scroll",function(t){Sn.dispatch("scroll","window",t,window)}),window.addEventListener("orientationchange",function(t){vn(!1),window.setTimeout(function(){vn(!0),yn()},200),setTimeout(function(){window.scrollTo(0,1),setTimeout(function(){window.scrollTo(0,1)},100)},300)});var o=pn.renderer.domElement,r=!1;o.addEventListener("click",function(t){Sn.dispatch("pointClick","canvas",t,o)}),o.addEventListener("dblclick",function(t){Sn.dispatch("pointDblclick","canvas",t,o)}),yr.a.isMobile?(o.addEventListener("touchstart",function(t){Sn.dispatch("pointDown","canvas",t,o),r=!0}),o.addEventListener("touchmove",function(t){r&&Sn.dispatch("pointMove","canvas",t,o)}),o.addEventListener("touchend",function(t){r&&Sn.dispatch("pointUp","canvas",t,o),r=!1})):(o.addEventListener("mousedown",function(t){Sn.dispatch("pointDown","canvas",t,o),r=!0}),o.addEventListener("mousemove",function(t){r&&Sn.dispatch("pointMove","canvas",t,o)}),o.addEventListener("mouseup",function(t){r&&Sn.dispatch("pointUp","canvas",t,o),r=!1}),o.addEventListener("mouseenter",function(t){Sn.dispatch("pointEnter","canvas",t,o)}),o.addEventListener("mouseout",function(t){Sn.dispatch("pointOut","canvas",t,o)})),Sn.add("todoChangeVrType","module",function(){yr.b.vrType=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"vr"});var n=yr.a.sizeTranslate;yr.a.SIZE_UNIT_TYPE,Sn.add("todoSizeTranslate","sizeTranslateDom",function(t){var e=t.translateType,e=(t.size,t.sizeType,t.cb),o=n(t);e&&e(o)}),Sn.add("todoResetSize","sizeTranslateDom",function(t){t=t.sizeUnitType;Xn(e.MODULE,"room").SIZE_UNIT_TYPE=t})}(l),En=new vr(Sn,mn),o=window.THREE,bn=new mr(o,pn,Sn,"canvas",["pointDown","pointMove","pointUp","pointEnter","pointOut","pointDblclick"]),function(){var r={},t={statusPipe:{toDoRegister:function(t){var e=t.key,o=t.getter,t=t.setter;r[e]={getter:o,setter:t}},toDoCancel:function(t){t=t.key;delete r[t]},toDoGet:function(t){if(t&&"function"==typeof t){var e,o={};for(e in r)o[e]=r[e].getter();t(n(o,!0))}},toDoSet:function(t){var e,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};for(e in t=n(t))r[e]&&r[e].setter&&r[e].setter(t[e],o)},toDoAddCall:function(t){var e=t.key,t=t.call;ei[e]?console.error("statusPipe: key".concat(e,"已存在")):ei[e]=t},toDoUpdateCall:function(t){var e=t.key,t=t.call;ei[e]?ei[e]=t:console.error("statusPipe: key".concat(e,"不存在"))},toDoRemoveCall:function(t){t=t.key;delete ei[t]}}};Sn.addWithMap(t);var n=function(t,e){if(t){if(e){var o=t.houseModule,r=void 0===o?{}:o,n=t.roomModule,i=t.floorPlanRender,a=t.room2DModule,s="3D"===fn.type?n:a,l="3D"===fn.type?"panoCamera":"pano2DCamera",h=(c={currentHotSpotID:s.spotId,currentGuideTab:r.currentGuideTab,currentDisplayFloorID:s.floor&&s.floor.id,isGuideFullScreen:r.isGuideFullScreen,type:s.type},S()(c,l,{position:s.camera&&s.camera.position,rotation:s.camera&&s.camera.rotation,fov:s.camera&&s.camera.fov}),S()(c,"stereoCamera",{position:r.camera&&r.camera.position,rotation:r.camera&&r.camera.rotation,fov:r.camera&&r.camera.fov}),S()(c,"floorCamera",{position:i.camera&&i.camera.position,rotation:i.camera&&i.camera.rotation,fov:i.camera&&i.camera.fov}),c);return t.origin=h,t}var o=t.currentHotSpotID,n=t.currentGuideTab,a=t.currentDisplayFloorID,l=t.isGuideFullScreen,s=t.stereoCamera,r=t.panoCamera,i=t.pano2DCamera,c=t.floorCamera,h=t.type,t="3D"===h?"roomModule":"room2DModule",i="3D"===h?r:i,h=S()({},t,{spotId:o,camera:i,floor:{index:"",id:a},type:h});return s&&(h.houseModule={isGuideFullScreen:l,camera:s,currentGuideTab:n}),c&&(h.floorPlanRender={camera:c,isGuideFullScreen:l}),h}}}(),e=void 0,e=Xn((o=l).MODULE,"room"),e={renderTool:pn,textureLoader:un,listener:Sn,config:o,frameManager:mn,PanoramaParams:yr.e,AppParams:yr.a,HouseParams:yr.d,houseData:fn,textData:yr.g.textData,room:e,logFn:Mn,ToolbarData:yr.h,canvasStepper:Dn},Cn.room=new Ho(e),Cn.house=new Wo(e),Cn.floorPlan=new Fr(e),Cn.compass=new Vr(e),yr.a.isMobile&&(Cn.vr=new Gr(e)),function(){Rn.apply(this,arguments)}(l),Sn.dispatch("toDoAddCall","statusPipe",{key:"getVrViewerSdkVersion",call:function(){return"5.5.7-1"}}),Sn.dispatch("loading","init",null,null),ai(l),t.next=12,function(){return Fn.apply(this,arguments)}(l);case 12:return t.next=14,function(){return Bn.apply(this,arguments)}(l);case 14:return t.next=16,function(){return jn.apply(this,arguments)}(l);case 16:return t.next=18,function(){return si.apply(this,arguments)}(l);case 18:return t.next=20,function(t){var e=t.MODULE,o=t.CUSTOMER,r=t.BUSINESS,n=Xn(e,"room").UI_SHOW_CB,t=(Xn(o,"compare"),In.room2D),e=In.room,o=In.house;t.loadData(fn),t.update(),e.loadData(fn),e.update(),o.loadData(fn),o.update(),Sn.add("leave","firstScreen",function(){console.log("firstScreen leave11111111111",window.name,(new Date).getTime()),window.vrchatSdkV2&&window.top!==window.self||window.vrChatConnectorApi.interceptBackEvent(),setTimeout(function(){window.vrChatConnectorApi.firstFrameReady()},0)}),(o=En.buildProgress("firstScreen",["enter","startLoad","loadProgress","leave"],["toDoWaitingLoad","toDoWaitedLoad"])).onComplete=function(){yn(),requestAnimationFrame(function(t){return console.log("------------------首屏加载时间: "+t)}),xn.init(ei,Ln,Vn,r),vn(),setTimeout(function(){n&&n()},0)},o.start(0),console.log("initEnterend")}(l);case 20:Sn.dispatch("loaded","init",null,null),Or({MODULES:In,RENDERS:Cn,listener:Sn,DOMS:kn}),Sn.add("toDoReset","system",di),Sn.dispatch("toDoAddCall","statusPipe",{key:"reloadNewHouse",call:function(t){Sn.dispatch("toDoReset","system",t)}}),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&(Sn.dispatch("release","render"),console.log("我是后台吗",document.visibilityState))}),a&&a(),window.vrChatConnectorConfig||(window.vrChatConnectorConfig={}),window.vrChatConnectorConfig.backEventCb=function(){console.log("backEventCb======>");var e=!0;xn.end(),Sn.dispatch("toDoBack","init",function(t){0==t&&(e=t)}),1==e&&window.vrChatConnectorApi.wvrExit()},window.vrChatConnectorConfig.refreshCurrentSpotCb=function(){var t,e=fn,o=e.floorRooms,r=e.roomSpots,e=e.type,n=Cn.room.end.spot.ID,i=null;for(t in r)r[t].includes(n)&&(i=t);for(var a in o)o[a].includes(i)&&0;Sn.dispatch("toDoSetDataId","2D"===e?"room2DModule":"roomModule",n,{from:"WVRRefreshCurrentSpot",type:"cut"}),Cn.floorPlan.root.visible&&(Cn.floorPlan.changeRenderer("empty"),window.setTimeout(function(){Cn.floorPlan.changeRenderer("map")},100))},n={roomModule:{toDoSetDataId:function(t,e){oi=!0,console.log("isInAnimation111======>",oi)},setedDataId:function(){oi=!1,console.log("isInAnimation=========>",oi)}},module:{todoSetLog:function(t){Mn(t)},todoGetRulerConfig:function(t,e){e(fi(t))}}},Sn.addWithMap(n),Sn.dispatch("toDoAddCall","statusPipe",{key:"creatCompare",call:function(){var t,e,o,r,n,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};oi||yr.a&&!yr.a.isMobile||(((Cn||{}).house||{}).isGuideFullScreen&&Sn.dispatch("toDoChangeModule","module",{from:"houseModule",to:"roomModule"},{origin:1}),o=(Xn((t=void 0===(n=i.data)?{}:n).CUSTOMER,"compare")||{}).compareList,(e=(l||{}).VR_CHANGE_CB)&&e({type:"toCompareStart"}),Sn.dispatch("toShowCompareBtn","compareRender",i),n=(window.VRHOUSE_API.getCurrentHotSpotDetail()||{}).ID,i=((Xn(window.VRHOUSE_CONFIG.SDK,"tv","inLoadName")||{}).option||{}).data,ri=i,t.SDK=[],!o||0===o.length||(r=o[0].anchorData)&&(i=l.STYLE_ICON,o=l.STYLE_COLOR,t.STYLE_ICON=i,t.STYLE_COLOR=o,t.SDK=[{inLoadName:"anchor",option:{data:r}}]),t.SDK.push({inLoadName:"tv",option:{data:null}}),(r=fi(h))&&t.SDK.push(r),Sn.dispatch("toDoReset","system",t,{currentHotSpot:n,showLoading:!1,type:"toCreatCompare"}),n=function t(){Sn.dispatch("toHideCompareBtn","compareRender"),Sn.remove("reseted","system",t),e&&e({type:"toCompareEnd"})},Sn.add("reseted","system",n))}}),Sn.dispatch("toDoAddCall","statusPipe",{key:"removeCompare",call:function(t){var e,o,r,n,i,a,s;oi||yr.a&&!yr.a.isMobile||(Sn.dispatch("removeListener","compare"),e=((Cn||{}).house||{}).isGuideFullScreen,o=t.data,s=(window.VRHOUSE_API.getCurrentHotSpotDetail()||{}).ID,r=(l||{}).VR_CHANGE_CB,o.CUSTOMER_DELETE=["compare"],n=((void 0===(i=(Xn(window.VRHOUSE_CONFIG.SDK,"anchor","inLoadName")||{}).option)?{}:i)||{}).data,o.SDK=[],n&&(t=l.STYLE_ICON,i=l.STYLE_COLOR,o.STYLE_ICON=t,o.STYLE_COLOR=i,o.SDK=[{inLoadName:"anchor",option:{data:n}}]),ri&&(a={inLoadName:"tv",option:{data:ri}},o.SDK.push(a)),(a=fi(h))&&o.SDK.push(a),Sn.dispatch("toDoReset","system",o,{currentHotSpot:s,showLoading:!1}),r&&r({type:"toVrPanoramaStart"}),s=function t(){Sn.dispatch("compareRenderOut","compare",{listener:Sn,DOMS:kn}),Sn.remove("reseted","system",t),r&&r({type:"toVrPanoramaEnd"}),e&&Sn.dispatch("toDoChangeModule","module",{from:"houseModule",to:"roomModule"},{origin:1})},Sn.add("reseted","system",s))}}),Sn.dispatch("toDoAddCall","statusPipe",{key:"getFov",call:function(t){var r=0;return Sn.dispatch("toDoGet","statusPipe",function(t){var e=t.roomModule,o=t.room2DModule;e?r=t.roomModule.camera.fov:o&&(r=t.room2DModule.camera.fov)}),r}});case 34:case"end":return t.stop()}var e,o},t)}));return function(t){return e.apply(this,arguments)}}(),function(t){throw t.message+="  ->json@".concat(n.house),t},!!r,i),ei}var hi=null,ci=null,ui=null,pi=null;function di(p,d){var f=this,t=p.dataFrom,m=p.SDK,g=p.SDK_DELETE,v=p.CUSTOMER,y=p.CUSTOMER_DELETE,e=(p.isReload,p.panoId),S=d;p.BUSINESS=ii.BUSINESS||{},p.BUSINESS.dataId=e,xn.reset(e);var b=(p.MODULE||[{key:"room"}]).map(function(t){return"[object Object]"===Object.prototype.toString.call(t)?Object.assign({},t):t});if(hi&&!hi.isCompleted())return ci=p,ui=S,void console.warn("连续重载");pi=Object.assign({},t);var E=(S||{}).type,o=null;"toCreatCompare"===E&&(o=(r=(Xn(v,"compare")||{}).compareList)&&r[0]?r[0].dataFrom:"",kn.hotSpot.noReLoading=!0);var w=Xn(b,"room");w||(b.push({key:"room"}),w=Xn(b,"room"));var e=w,t=e.SIZE_UNIT_TYPE,r=e.IS_SHOW_SIZE_UNIT_TYPE_BTN,e=e.IS_DRAW_FLOORPLAN;w.SIZE_UNIT_TYPE=t||yr.a.SIZE_UNIT_TYPE,yr.a.SIZE_UNIT_TYPE=w.SIZE_UNIT_TYPE,void 0!==e&&(yr.a.IS_DRAW_FLOORPLAN=e),w.IS_SHOW_SIZE_UNIT_TYPE_BTN=void 0!==r?r:yr.a.IS_SHOW_SIZE_UNIT_TYPE_BTN,yr.a.IS_SHOW_SIZE_UNIT_TYPE_BTN=w.IS_SHOW_SIZE_UNIT_TYPE_BTN,pi=o||pi,d&&!d.showLoading||(Sn.dispatch("toDoRenderOut","roomModule",{from:"reLoad"},this),Sn.dispatch("toDoRenderOut","room2DModule",null,this)),p.HIDE_ROOMS&&(window.VRHOUSE_CONFIG.HIDE_ROOMS=p.HIDE_ROOMS),Wn(pi,function(){var r=x()(P.a.mark(function t(e,o,r){var h,c,u;return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o!==pi)return console.warn("打断重载"),Sn.dispatch("resetBreak","system",{config:p,starter:S},null),t.abrupt("return");t.next=4;break;case 4:!1!==(S||{}).updatePageId&&mi(!0),(h=S?S.currentHotSpot:null)&&(e.defaultSpotId=h),fn=e,ni&&ni(r),c=function(r){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],n=[];return t.forEach(function(t){var e,o=t.inLoadName||t.key;r[o]?(e=r[o].option,Object.assign(r[o],t),e&&(Object.assign(e,t.option),r[o].option=e)):n.push(t)}),e.forEach(function(t){var e,o;r[t]&&(e=(o=r[t]).url,o=o.style,e=document.querySelector('script[src="'.concat(e,'"]')),o=document.querySelector('link[href="'.concat(o,'"]')),r[t].delete=!0,e&&e.parentElement.removeChild(e),o&&o.parentElement.removeChild(o),delete r[t])}),n},un.clear(),un.prefix=o.prefix,hi||(hi=En.buildProgress("system",["readyReset","startReset","resetProgress","readyReseted"],["toDoWaitingReset","toDoWaitedReset"]),Sn.add("readyReseted","system",function(){ci&&(console.warn("连续重载开始"),di(ci,ui),ui=ci=null)})),u=function(){var t=x()(P.a.mark(function t(){var e,o,r,n,i,a,s,l;return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(Sn.dispatch("toDoWaitingReset","system",1,f),e=Object.assign({},p),a=["MODULE","SDK","SDK_DELETE","CUSTOMER","CUSTOMER_DELETE"],yr.a.objectDeepAssign,a.forEach(function(t){e[t]&&delete e[t]}),yr.a.isDrawFloorPlan||(w.SIZE_UNIT_TYPE="m",w.IS_SHOW_SIZE_UNIT_TYPE_BTN=!1),Object.assign(ii,e),Object.assign(window.VRHOUSE_CONFIG,e),o=0,r=["STYLE_COLOR","STYLE_ICON"];o<r.length;o++)!p[n=r[o]]&&ii[n]&&(p[n]=ii[n]);return c(An,b),Sn.dispatch("toDoReset","module",fn,p),m=m||[],i=[],Object.values(An).forEach(function(t){i.push(t)}),s=On(m,i),a=T()(s,2),s=a[0],a=a[1],s&&!a&&m.push(s),t.next=18,Hn(c(Ln,m,g));case 18:return Sn.dispatch("toDoReset","sdk",fn,p),t.next=21,Un(c(Vn,v,y),S);case 21:Sn.dispatch("toDoReset","customer",fn,p),s=S?S.currentHotSpot:null,"2D"===fn.type?(l=function t(){d&&!d.showLoading&&(Sn.dispatch("toDoRenderOut","roomModule",{from:"reLoad"},f),Sn.dispatch("toDoRenderOut","room2DModule",null,f)),Sn.dispatch("toDoWaitedReset","system",1,f),Sn.remove("setedDataId","room2DModule",t),Sn.remove("readyReset","system",u)},Sn.add("setedDataId","room2DModule",l),l=function t(e){Sn.dispatch("toDoRenderIn","room2DModule",null,null),Sn.dispatch("reseted","system",e,null),Sn.remove("readyReseted","system",t)},Sn.add("readyReseted","system",l),Sn.dispatch("toDoSetDataId","room2DModule",s,{type:"cut",from:"system",isBestRotation:!h}),console.log(Ln)):(l=function t(){d&&!d.showLoading&&(Sn.dispatch("toDoRenderOut","roomModule",{from:"reLoad"},f),Sn.dispatch("toDoRenderOut","room2DModule",null,f)),Sn.dispatch("toDoWaitedReset","system",1,f),Sn.remove("setedDataId","roomModule",t),Sn.remove("readyReset","system",u)},Sn.add("setedDataId","roomModule",l),l=function t(e){Sn.dispatch("toDoRenderIn","roomModule",null,null),Sn.dispatch("reseted","system",e,null),Sn.remove("readyReseted","system",t)},Sn.add("readyReseted","system",l),Sn.dispatch("toDoSetDataId","roomModule",s,{type:"cut",from:"system",isBestRotation:!h,clickType:E}));case 24:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),Sn.add("readyReset","system",u),hi.start(0);case 17:case"end":return t.stop()}},t)}));return function(t,e,o){return r.apply(this,arguments)}}(),function(t){console.log(t),Sn.dispatch("resetError","system",t,null)},!0)}function fi(t){var e=t.IS_SHOW_RULER_BTN,e=void 0===e||e,t=t.inLandscape,t=void 0===t?{}:t;Object(Do.o)()||(e=void 0===(o=t.IS_SHOW_RULER_BTN)?e:o);t=kn.toolbar.buttonMap.ruler;if(e&&void 0!==t){var o={key:"ruler"};return Object(Do.o)()?o.open=t.isRulerOpenV:(o.inLandscape={buttonShow:e},o.inLandscape.open=t.isRulerOpenV),o}return!1}function mi(t){t&&(Tn=gi()),(yr.a.isIosEnv||yr.a.isAndroidEnv)&&window.vrChatConnectorApi.updatePageId({id:Tn})}function gi(){for(var t="",e=0;e<16;e++)t+=Math.floor(16*Math.random()).toString(16);return t.toUpperCase()}function vi(t){t=Object.assign({renderer:"svg",loop:!0,autoplay:!0},t);return t.path="//j1.58cdn.com.cn/git/teg-app-fe/vr-house-viewer-V5-test/static/assetsData/"+t.path+".json",H.a.loadAnimation(t)}(new a).get(function(t,e){wn=t}),Mn({whiteScreenTime:window.performance.timing.responseStart-window.performance.timing.navigationStart}),VRHOUSE_CONFIG.NO_CONSOLE_LOG||VRHOUSE_CONFIG.MINIMIZE_WEBGL_CONTEXTS||(window.Stats=new O(function(t){Mn(t)}),window.Stats.showPanel(0),document.body.appendChild(window.Stats.dom))},RQRG:function(t,e,o){"use strict";var r=o("XKFU"),n=o("S/j/"),i=o("2OiF"),a=o("hswa");o("nh4g")&&r(r.P+o("xbSm"),"Object",{__defineGetter__:function(t,e){a.f(n(this),t,{get:i(e),enumerable:!0,configurable:!0})}})},RW0V:function(t,e,o){var r=o("S/j/"),n=o("DVgA");o("Xtr8")("keys",function(){return function(t){return n(r(t))}})},RYi7:function(t,e){var o=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?r:o)(t)}},"RjD/":function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},RwTk:function(t,e,o){var r=o("XKFU");r(r.P+r.R,"Map",{toJSON:o("RLh9")("Map")})},"S/j/":function(t,e,o){var r=o("vhPU");t.exports=function(t){return Object(r(t))}},SMB2:function(t,e,o){"use strict";o("OGtf")("bold",function(t){return function(){return t(this,"b","","")}})},SPin:function(t,e,o){"use strict";var r=o("XKFU"),n=o("eyMr");r(r.P+r.F*!o("LyE8")([].reduceRight,!0),"Array",{reduceRight:function(t){return n(this,t,arguments.length,arguments[1],!0)}})},SRfc:function(t,e,o){"use strict";var c=o("y3w9"),u=o("ne8i"),p=o("A5AN"),d=o("Xxuz");o("IU+Z")("match",1,function(r,n,l,h){return[function(t){var e=r(this),o=null==t?void 0:t[n];return void 0!==o?o.call(t,e):new RegExp(t)[n](String(e))},function(t){var e=h(l,t,this);if(e.done)return e.value;var o=c(t),r=String(this);if(!o.global)return d(o,r);for(var n=o.unicode,i=[],a=o.lastIndex=0;null!==(s=d(o,r));){var s=String(s[0]);""===(i[a]=s)&&(o.lastIndex=p(r,u(o.lastIndex),n)),a++}return 0===a?null:i}]})},SksO:function(o,t){function r(t,e){return o.exports=r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},o.exports.default=o.exports,o.exports.__esModule=!0,r(t,e)}o.exports=r,o.exports.default=o.exports,o.exports.__esModule=!0},SlkY:function(t,e,o){var u=o("m0Pp"),p=o("H6hf"),d=o("M6Qj"),f=o("y3w9"),m=o("ne8i"),g=o("J+6e"),v={},y={};(e=t.exports=function(t,e,o,r,n){var i,a,s,l,n=n?function(){return t}:g(t),h=u(o,r,e?2:1),c=0;if("function"!=typeof n)throw TypeError(t+" is not iterable!");if(d(n)){for(i=m(t.length);c<i;c++)if((l=e?h(f(a=t[c])[0],a[1]):h(t[c]))===v||l===y)return l}else for(s=n.call(t);!(a=s.next()).done;)if((l=p(s,h,a.value,e))===v||l===y)return l}).BREAK=v,e.RETURN=y},T39b:function(t,e,o){"use strict";var r=o("wmvG"),n=o("s5qY");t.exports=o("4LiD")("Set",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{add:function(t){return r.def(n(this,"Set"),t=0===t?0:t,t)}},r)},Tdpu:function(t,e,o){o("7DDg")("Float64",8,function(r){return function(t,e,o){return r(this,t,e,o)}})},Tze0:function(t,e,o){"use strict";o("qncB")("trim",function(t){return function(){return t(this,3)}})},U2t9:function(t,e,o){var r=o("XKFU"),o=Math.asinh;r(r.S+r.F*!(o&&0<1/o(0)),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},UExd:function(t,e,o){var l=o("nh4g"),h=o("DVgA"),c=o("aCFj"),u=o("UqcF").f;t.exports=function(s){return function(t){for(var e,o=c(t),r=h(o),n=r.length,i=0,a=[];i<n;)e=r[i++],l&&!u.call(o,e)||a.push(s?[e,o[e]]:o[e]);return a}}},URgk:function(t,n,i){!function(t){var e=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function r(t,e){this._id=t,this._clearFn=e}n.setTimeout=function(){return new r(o.call(setTimeout,e,arguments),clearTimeout)},n.setInterval=function(){return new r(o.call(setInterval,e,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(e,this._id)},n.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},i("YBdB"),n.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,n.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}.call(this,i("yLpj"))},UUeW:function(t,e,o){var r=o("K0xU")("match");t.exports=function(e){var o=/./;try{"/./"[e](o)}catch(t){try{return o[r]=!1,!"/./"[e](o)}catch(t){}}return!0}},Ugos:function(t,e,o){"use strict";var r,i=o("C/va"),a=RegExp.prototype.exec,s=String.prototype.replace,n=a,l="lastIndex",h=(r=/a/,o=/b*/g,a.call(r,"a"),a.call(o,"a"),0!==r[l]||0!==o[l]),c=void 0!==/()??/.exec("")[1];(h||c)&&(n=function(t){var e,o,r,n;return c&&(o=new RegExp("^"+this.source+"$(?!\\s)",i.call(this))),h&&(e=this[l]),r=a.call(this,t),h&&r&&(this[l]=this.global?r.index+r[0].length:e),c&&r&&1<r.length&&s.call(r[0],o,function(){for(n=1;n<arguments.length-2;n++)void 0===arguments[n]&&(r[n]=void 0)}),r}),t.exports=n},UqcF:function(t,e){e.f={}.propertyIsEnumerable},"V+eJ":function(t,e,o){"use strict";var r=o("XKFU"),n=o("w2a5")(!1),i=[].indexOf,a=!!i&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!o("LyE8")(i)),"Array",{indexOf:function(t){return a?i.apply(this,arguments)||0:n(this,t,arguments[1])}})},"V/DX":function(t,e,o){var r=o("0/R4");o("Xtr8")("isSealed",function(e){return function(t){return!r(t)||!!e&&e(t)}})},VKir:function(t,e,o){"use strict";var r=o("XKFU"),n=o("eeVq"),i=o("vvmO"),a=1..toPrecision;r(r.P+r.F*(n(function(){return"1"!==a.call(1,void 0)})||!n(function(){a.call({})})),"Number",{toPrecision:function(t){var e=i(this,"Number#toPrecision: incorrect invocation!");return void 0===t?a.call(e):a.call(e,t)}})},VRzm:function(t,e,o){"use strict";function r(){}var n,i,a,s,l=o("LQAc"),p=o("dyZX"),h=o("m0Pp"),c=o("I8a+"),u=o("XKFU"),d=o("0/R4"),f=o("2OiF"),m=o("9gX7"),g=o("SlkY"),v=o("69bn"),y=o("GZEu").set,S=o("gHnn")(),b=o("pbhE"),E=o("nICZ"),w=o("ol8x"),T=o("vKrd"),x="Promise",P=p.TypeError,M=p.process,D=M&&M.versions,C=D&&D.v8||"",k=p[x],R="process"==c(M),I=i=b.f,c=!!function(){try{var t=k.resolve(1),e=(t.constructor={})[o("K0xU")("species")]=function(t){t(r,r)};return(R||"function"==typeof PromiseRejectionEvent)&&t.then(r)instanceof e&&0!==C.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(t){}}(),A=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},_=function(u,o){var r;u._n||(u._n=!0,r=u._c,S(function(){for(var n,h=u._v,c=1==u._s,t=0,e=function(t){var e,o,r,n,i=c?t.ok:t.fail,a=t.resolve,s=t.reject,l=t.domain;try{i?(c||(2==u._h&&(n=u,y.call(p,function(){var t;R?M.emit("rejectionHandled",n):(t=p.onrejectionhandled)&&t({promise:n,reason:n._v})})),u._h=1),!0===i?e=h:(l&&l.enter(),e=i(h),l&&(l.exit(),r=!0)),e===t.promise?s(P("Promise-chain cycle")):(o=A(e))?o.call(e,a,s):a(e)):s(h)}catch(t){l&&!r&&l.exit(),s(t)}};r.length>t;)e(r[t++]);u._c=[],u._n=!1,o&&!u._h&&(n=u,y.call(p,function(){var t,e,o=n._v,r=F(n);if(r&&(t=E(function(){R?M.emit("unhandledRejection",o,n):(e=p.onunhandledrejection)?e({promise:n,reason:o}):(e=p.console)&&e.error&&e.error("Unhandled promise rejection",o)}),n._h=R||F(n)?2:1),n._a=void 0,r&&t.e)throw t.v}))}))},F=function(t){return 1!==t._h&&0===(t._a||t._c).length},O=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),_(e,!0))},L=function(t){var o,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw P("Promise can't be resolved itself");(o=A(t))?S(function(){var e={_w:r,_d:!1};try{o.call(t,h(L,e,1),h(O,e,1))}catch(t){O.call(e,t)}}):(r._v=t,r._s=1,_(r,!1))}catch(t){O.call({_w:r,_d:!1},t)}}};c||(k=function(t){m(this,k,x,"_h"),f(t),n.call(this);try{t(h(L,this,1),h(O,this,1))}catch(t){O.call(this,t)}},(n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=o("3Lyj")(k.prototype,{then:function(t,e){var o=I(v(this,k));return o.ok="function"!=typeof t||t,o.fail="function"==typeof e&&e,o.domain=R?M.domain:void 0,this._c.push(o),this._a&&this._a.push(o),this._s&&_(this,!1),o.promise},catch:function(t){return this.then(void 0,t)}}),a=function(){var t=new n;this.promise=t,this.resolve=h(L,t,1),this.reject=h(O,t,1)},b.f=I=function(t){return t===k||t===s?new a:i(t)}),u(u.G+u.W+u.F*!c,{Promise:k}),o("fyDq")(k,x),o("elZq")(x),s=o("g3g5")[x],u(u.S+u.F*!c,x,{reject:function(t){var e=I(this);return(0,e.reject)(t),e.promise}}),u(u.S+u.F*(l||!c),x,{resolve:function(t){return T(l&&this===s?k:this,t)}}),u(u.S+u.F*!(c&&o("XMVh")(function(t){k.all(t).catch(r)})),x,{all:function(t){var a=this,e=I(a),s=e.resolve,l=e.reject,o=E(function(){var r=[],n=0,i=1;g(t,!1,function(t){var e=n++,o=!1;r.push(void 0),i++,a.resolve(t).then(function(t){o||(o=!0,r[e]=t,--i||s(r))},l)}),--i||s(r)});return o.e&&l(o.v),e.promise},race:function(t){var e=this,o=I(e),r=o.reject,n=E(function(){g(t,!1,function(t){e.resolve(t).then(o.resolve,r)})});return n.e&&r(n.v),o.promise}})},VTer:function(t,e,o){var r=o("g3g5"),n=o("dyZX"),i="__core-js_shared__",a=n[i]||(n[i]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:o("LQAc")?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},Vd3H:function(t,e,o){"use strict";var r=o("XKFU"),n=o("2OiF"),i=o("S/j/"),a=o("eeVq"),s=[].sort,l=[1,2,3];r(r.P+r.F*(a(function(){l.sort(void 0)})||!a(function(){l.sort(null)})||!o("LyE8")(s)),"Array",{sort:function(t){return void 0===t?s.call(i(this)):s.call(i(this),n(t))}})},VpUO:function(t,e,o){var r=o("XKFU"),i=o("d/Gc"),a=String.fromCharCode,o=String.fromCodePoint;r(r.S+r.F*(!!o&&1!=o.length),"String",{fromCodePoint:function(t){for(var e,o=[],r=arguments.length,n=0;n<r;){if(e=+arguments[n++],i(e,1114111)!==e)throw RangeError(e+" is not a valid code point");o.push(e<65536?a(e):a(55296+((e-=65536)>>10),e%1024+56320))}return o.join("")}})},W8MJ:function(t,e){function r(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),t},t.exports.default=t.exports,t.exports.__esModule=!0},WLL4:function(t,e,o){var r=o("XKFU");r(r.S+r.F*!o("nh4g"),"Object",{defineProperties:o("FJW5")})},WkPL:function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,r=new Array(e);o<e;o++)r[o]=t[o];return r},t.exports.default=t.exports,t.exports.__esModule=!0},XKFU:function(t,e,o){function d(t,e,o){var r,n,i,a=t&d.F,s=t&d.G,l=t&d.P,h=t&d.B,c=s?f:t&d.S?f[e]||(f[e]={}):(f[e]||{})[S],u=s?m:m[e]||(m[e]={}),p=u[S]||(u[S]={});for(r in o=s?e:o)n=((i=!a&&c&&void 0!==c[r])?c:o)[r],i=h&&i?y(n,f):l&&"function"==typeof n?y(Function.call,n):n,c&&v(c,r,n,t&d.U),u[r]!=n&&g(u,r,i),l&&p[r]!=n&&(p[r]=n)}var f=o("dyZX"),m=o("g3g5"),g=o("Mukb"),v=o("KroJ"),y=o("m0Pp"),S="prototype";f.core=m,d.F=1,d.G=2,d.S=4,d.P=8,d.B=16,d.W=32,d.U=64,d.R=128,t.exports=d},XMVh:function(t,e,o){var i=o("K0xU")("iterator"),a=!1;try{var r=[7][i]();r.return=function(){a=!0},Array.from(r,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!a)return!1;var o=!1;try{var r=[7],n=r[i]();n.next=function(){return{done:o=!0}},r[i]=function(){return n},t(r)}catch(t){}return o}},XUCW:function(t,e,o){o("KOQb")("WeakMap")},XZCp:function(t,e,o){o("KOQb")("WeakSet")},Xbzi:function(t,e,o){var n=o("0/R4"),i=o("i5dc").set;t.exports=function(t,e,o){var r,e=e.constructor;return e!==o&&"function"==typeof e&&(r=e.prototype)!==o.prototype&&n(r)&&i&&i(t,r),t}},XfKG:function(t,e,o){var r=o("XKFU"),o=o("11IZ");r(r.S+r.F*(Number.parseFloat!=o),"Number",{parseFloat:o})},XfO3:function(t,e,o){"use strict";var r=o("AvRE")(!0);o("Afnz")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t=this._t,e=this._i;return e>=t.length?{value:void 0,done:!0}:(e=r(t,e),this._i+=e.length,{value:e,done:!1})})},Xtr8:function(t,e,o){var n=o("XKFU"),i=o("g3g5"),a=o("eeVq");t.exports=function(t,e){var o=(i.Object||{})[t]||Object[t],r={};r[t]=e(o),n(n.S+n.F*a(function(){o(1)}),"Object",r)}},Xxuz:function(t,e,o){"use strict";var r=o("I8a+"),n=RegExp.prototype.exec;t.exports=function(t,e){var o=t.exec;if("function"==typeof o){o=o.call(t,e);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return n.call(t,e)}},Y9lz:function(t,e,o){o("7DDg")("Float32",4,function(r){return function(t,e,o){return r(this,t,e,o)}})},YBdB:function(t,e,o){!function(t,d){!function(o,r){"use strict";var n,i,a,s,l,h,e,t;function c(t){delete i[t]}function u(t){if(a)setTimeout(u,0,t);else{var e=i[t];if(e){a=!0;try{!function(t){var e=t.callback,o=t.args;switch(o.length){case 0:e();break;case 1:e(o[0]);break;case 2:e(o[0],o[1]);break;case 3:e(o[0],o[1],o[2]);break;default:e.apply(r,o)}}(e)}finally{c(t),a=!1}}}}function p(){function t(t){t.source===o&&"string"==typeof t.data&&0===t.data.indexOf(e)&&u(+t.data.slice(e.length))}var e="setImmediate$"+Math.random()+"$";o.addEventListener?o.addEventListener("message",t,!1):o.attachEvent("onmessage",t),l=function(t){o.postMessage(e+t,"*")}}o.setImmediate||(n=1,a=!(i={}),s=o.document,t=(t=Object.getPrototypeOf&&Object.getPrototypeOf(o))&&t.setTimeout?t:o,"[object process]"==={}.toString.call(o.process)?l=function(t){d.nextTick(function(){u(t)})}:!function(){if(o.postMessage&&!o.importScripts){var t=!0,e=o.onmessage;return o.onmessage=function(){t=!1},o.postMessage("","*"),o.onmessage=e,t}}()?l=o.MessageChannel?((e=new MessageChannel).port1.onmessage=function(t){u(t.data)},function(t){e.port2.postMessage(t)}):s&&"onreadystatechange"in s.createElement("script")?(h=s.documentElement,function(t){var e=s.createElement("script");e.onreadystatechange=function(){u(t),e.onreadystatechange=null,h.removeChild(e),e=null},h.appendChild(e)}):function(t){setTimeout(u,0,t)}:p(),t.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),o=0;o<e.length;o++)e[o]=arguments[o+1];return i[n]={callback:t,args:e},l(n),n++},t.clearImmediate=c)}("undefined"==typeof self?void 0===t?this:t:self)}.call(this,o("yLpj"),o("8oxB"))},YJVH:function(t,e,o){"use strict";var r=o("XKFU"),n=o("CkkT")(4);r(r.P+r.F*!o("LyE8")([].every,!0),"Array",{every:function(t){return n(this,t,arguments[1])}})},YTvA:function(t,e,o){var r=o("VTer")("keys"),n=o("ylqs");t.exports=function(t){return r[t]||(r[t]=n(t))}},Ymqv:function(t,e,o){var r=o("LZWt");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},Z2Ku:function(t,e,o){"use strict";var r=o("XKFU"),n=o("w2a5")(!0);r(r.P,"Array",{includes:function(t){return n(this,t,1<arguments.length?arguments[1]:void 0)}}),o("nGyu")("includes")},Z6vF:function(t,e,o){function r(t){s(t,n,{value:{i:"O"+ ++l,w:{}}})}var n=o("ylqs")("meta"),i=o("0/R4"),a=o("aagx"),s=o("hswa").f,l=0,h=Object.isExtensible||function(){return!0},c=!o("eeVq")(function(){return h(Object.preventExtensions({}))}),u=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,n)){if(!h(t))return"F";if(!e)return"E";r(t)}return t[n].i},getWeak:function(t,e){if(!a(t,n)){if(!h(t))return!0;if(!e)return!1;r(t)}return t[n].w},onFreeze:function(t){return c&&u.NEED&&h(t)&&!a(t,n)&&r(t),t}}},ZByz:function(t,e,o){},ZD67:function(t,e,o){"use strict";function a(t){return t._l||(t._l=new r)}function r(){this.a=[]}function n(t,e){return m(t.a,function(t){return t[0]===e})}var s=o("3Lyj"),l=o("Z6vF").getWeak,i=o("y3w9"),h=o("0/R4"),c=o("9gX7"),u=o("SlkY"),p=o("CkkT"),d=o("aagx"),f=o("s5qY"),m=p(5),g=p(6),v=0;r.prototype={get:function(t){t=n(this,t);if(t)return t[1]},has:function(t){return!!n(this,t)},set:function(t,e){var o=n(this,t);o?o[1]=e:this.a.push([t,e])},delete:function(e){var t=g(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},t.exports={getConstructor:function(t,o,r,n){var i=t(function(t,e){c(t,i,o,"_i"),t._t=o,t._i=v++,t._l=void 0,null!=e&&u(e,r,t[n],t)});return s(i.prototype,{delete:function(t){if(!h(t))return!1;var e=l(t);return!0===e?a(f(this,o)).delete(t):e&&d(e,this._i)&&delete e[this._i]},has:function(t){if(!h(t))return!1;var e=l(t);return!0===e?a(f(this,o)).has(t):e&&d(e,this._i)}}),i},def:function(t,e,o){var r=l(i(e),!0);return!0===r?a(t).set(e,o):r[t._i]=o,t},ufstore:a}},ZDp4:function(t,e){t.exports=function(t){if(null==t)throw new TypeError("Cannot destructure undefined")},t.exports.default=t.exports,t.exports.__esModule=!0},"ZNX/":function(t,e,o){"use strict";var r=o("XKFU"),n=o("S/j/"),i=o("apmT"),a=o("OP3Y"),s=o("EemH").f;o("nh4g")&&r(r.P+o("xbSm"),"Object",{__lookupSetter__:function(t){var e,o=n(this),r=i(t,!0);do{if(e=s(o,r))return e.set}while(o=a(o))}})},ZSil:function(t,e,o){},ZhPi:function(t,e,o){var r=o("WkPL");t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(o="Object"===o&&t.constructor?t.constructor.name:o)||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?r(t,e):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0},Zshi:function(t,e,o){var r=o("0/R4");o("Xtr8")("isFrozen",function(e){return function(t){return!r(t)||!!e&&e(t)}})},Zvmr:function(t,e,o){o("ioFf"),o("hHhE"),o("HAE/"),o("WLL4"),o("mYba"),o("5Pf0"),o("RW0V"),o("JduL"),o("DW2E"),o("z2o2"),o("mura"),o("Zshi"),o("V/DX"),o("FlsD"),o("91GP"),o("25dN"),o("/SS/"),o("Btvt"),o("2Spj"),o("f3/d"),o("IXt9"),o("GNAe"),o("tyy+"),o("xfY5"),o("A2zW"),o("VKir"),o("Ljet"),o("/KAi"),o("fN96"),o("7h0T"),o("sbF8"),o("h/M4"),o("knhD"),o("XfKG"),o("BP8U"),o("fyVe"),o("U2t9"),o("2atp"),o("+auO"),o("MtdB"),o("Jcmo"),o("nzyx"),o("BC7C"),o("x8ZO"),o("9P93"),o("eHKK"),o("BJ/l"),o("pp/T"),o("CyHz"),o("bBoP"),o("x8Yj"),o("hLT2"),o("VpUO"),o("eI33"),o("Tze0"),o("XfO3"),o("oDIu"),o("rvZc"),o("L9s1"),o("FLlr"),o("9VmF"),o("hEkN"),o("nIY7"),o("+oPb"),o("SMB2"),o("0mN4"),o("bDcW"),o("nsiH"),o("0LDn"),o("tUrg"),o("84bF"),o("FEjr"),o("Zz4T"),o("JCqj"),o("eM6i"),o("AphP"),o("jqX0"),o("h7Nl"),o("yM4b"),o("LK8F"),o("HEwt"),o("6AQ9"),o("Nz9U"),o("I78e"),o("Vd3H"),o("8+KV"),o("bWfx"),o("0l/t"),o("dZ+Y"),o("YJVH"),o("DNiP"),o("SPin"),o("V+eJ"),o("mGWK"),o("dE+T"),o("bHtr"),o("dRSK"),o("INYr"),o("0E+W"),o("yt8O"),o("Oyvg"),o("sMXx"),o("a1Th"),o("OEbY"),o("SRfc"),o("pIFo"),o("OG14"),o("KKXr"),o("VRzm"),o("9AAn"),o("T39b"),o("EK0E"),o("wCsR"),o("xm80"),o("Ji/l"),o("sFw1"),o("NO8f"),o("aqI/"),o("Faw5"),o("r1bV"),o("tuSo"),o("nCnK"),o("Y9lz"),o("Tdpu"),o("3xty"),o("I5cv"),o("iMoV"),o("uhZd"),o("f/aN"),o("0YWM"),o("694e"),o("LTTk"),o("9rMk"),o("IlFx"),o("xpiv"),o("oZ/O"),o("klPD"),o("knU9"),o("Z2Ku"),o("6VaU"),o("cfFb"),o("NTXk"),o("9XZr"),o("7VC1"),o("I74W"),o("fA63"),o("mI1R"),o("rE2o"),o("x8qZ"),o("jm62"),o("hhXQ"),o("/8Fb"),o("RQRG"),o("/uf1"),o("uaHG"),o("ZNX/"),o("RwTk"),o("25qn"),o("cpsI"),o("mcXe"),o("dk85"),o("vdFj"),o("QWy2"),o("3YpW"),o("XUCW"),o("XZCp"),o("DDYI"),o("ojR+"),o("QnYD"),o("CeCd"),o("DACs"),o("J0gd"),o("H5GT"),o("nABe"),o("L3jF"),o("tMJk"),o("Hxic"),o("aSs8"),o("x3Uh"),o("ilze"),o("7X58"),o("CX2u"),o("qcxO"),o("49D4"),o("zq+C"),o("45Tv"),o("uAtd"),o("BqfV"),o("fN/3"),o("iW+S"),o("7Dlh"),o("Opxb"),o("DSV3"),o("N7VW"),o("R5XZ"),o("Ew+T"),o("rGqo"),t.exports=o("g3g5")},Zz4T:function(t,e,o){"use strict";o("OGtf")("sub",function(t){return function(){return t(this,"sub","","")}})},a1Th:function(t,e,o){"use strict";o("OEbY");function r(t){o("KroJ")(RegExp.prototype,s,t,!0)}var n=o("y3w9"),i=o("C/va"),a=o("nh4g"),s="toString",l=/./[s];o("eeVq")(function(){return"/a/b"!=l.call({source:"a",flags:"b"})})?r(function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!a&&t instanceof RegExp?i.call(t):void 0)}):l.name!=s&&r(function(){return l.call(this)})},a1gu:function(t,e,o){var r=o("cDf5").default,n=o("PJYZ");t.exports=function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return n(t)},t.exports.default=t.exports,t.exports.__esModule=!0},aCFj:function(t,e,o){var r=o("Ymqv"),n=o("vhPU");t.exports=function(t){return r(n(t))}},aSs8:function(t,e,o){var o=o("XKFU"),r=Math.PI/180;o(o.S,"Math",{radians:function(t){return t*r}})},aagx:function(t,e){var o={}.hasOwnProperty;t.exports=function(t,e){return o.call(t,e)}},apmT:function(t,e,o){var n=o("0/R4");t.exports=function(t,e){if(!n(t))return t;var o,r;if(e&&"function"==typeof(o=t.toString)&&!n(r=o.call(t)))return r;if("function"==typeof(o=t.valueOf)&&!n(r=o.call(t)))return r;if(!e&&"function"==typeof(o=t.toString)&&!n(r=o.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},"aqI/":function(t,e,o){o("7DDg")("Uint8",1,function(r){return function(t,e,o){return r(this,t,e,o)}},!0)},auqX:function(t,e,o){},bBoP:function(t,e,o){var r=o("XKFU"),n=o("LVwc"),i=Math.exp;r(r.S+r.F*o("eeVq")(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(n(t)-n(-t))/2:(i(t-1)-i(-t-1))*(Math.E/2)}})},bDcW:function(t,e,o){"use strict";o("OGtf")("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},bHtr:function(t,e,o){var r=o("XKFU");r(r.P,"Array",{fill:o("Nr18")}),o("nGyu")("fill")},bWfx:function(t,e,o){"use strict";var r=o("XKFU"),n=o("CkkT")(1);r(r.P+r.F*!o("LyE8")([].map,!0),"Array",{map:function(t){return n(this,t,arguments[1])}})},cDf5:function(e,t){function o(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=o=function(t){return typeof t}:e.exports=o=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e.exports.default=e.exports,e.exports.__esModule=!0,o(t)}e.exports=o,e.exports.default=e.exports,e.exports.__esModule=!0},cfFb:function(t,e,o){"use strict";var r=o("XKFU"),n=o("xF/b"),i=o("S/j/"),a=o("ne8i"),s=o("RYi7"),l=o("zRwo");r(r.P,"Array",{flatten:function(){var t=arguments[0],e=i(this),o=a(e.length),r=l(e,0);return n(r,e,e,o,0,void 0===t?1:s(t)),r}}),o("nGyu")("flatten")},cpsI:function(t,e,o){o("xqFc")("Map")},czNK:function(t,e,o){"use strict";var p=o("nh4g"),d=o("DVgA"),f=o("JiEa"),m=o("UqcF"),g=o("S/j/"),v=o("Ymqv"),n=Object.assign;t.exports=!n||o("eeVq")(function(){var t={},e={},o=Symbol(),r="abcdefghijklmnopqrst";return t[o]=7,r.split("").forEach(function(t){e[t]=t}),7!=n({},t)[o]||Object.keys(n({},e)).join("")!=r})?function(t,e){for(var o=g(t),r=arguments.length,n=1,i=f.f,a=m.f;n<r;)for(var s,l=v(arguments[n++]),h=i?d(l).concat(i(l)):d(l),c=h.length,u=0;u<c;)s=h[u++],p&&!a.call(l,s)||(o[s]=l[s]);return o}:n},"d/Gc":function(t,e,o){var r=o("RYi7"),n=Math.max,i=Math.min;t.exports=function(t,e){return(t=r(t))<0?n(t+e,0):i(t,e)}},"dE+T":function(t,e,o){var r=o("XKFU");r(r.P,"Array",{copyWithin:o("upKx")}),o("nGyu")("copyWithin")},dRSK:function(t,e,o){"use strict";var r=o("XKFU"),n=o("CkkT")(5),i=!0;"find"in[]&&Array(1).find(function(){i=!1}),r(r.P+r.F*i,"Array",{find:function(t){return n(this,t,1<arguments.length?arguments[1]:void 0)}}),o("nGyu")("find")},"dZ+Y":function(t,e,o){"use strict";var r=o("XKFU"),n=o("CkkT")(3);r(r.P+r.F*!o("LyE8")([].some,!0),"Array",{some:function(t){return n(this,t,arguments[1])}})},dk85:function(t,e,o){o("xqFc")("WeakMap")},dyZX:function(t,e){t=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},e7yV:function(t,e,o){var r=o("aCFj"),n=o("kJMx").f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==i.call(t)?function(t){try{return n(t)}catch(t){return a.slice()}}(t):n(r(t))}},eHKK:function(t,e,o){o=o("XKFU");o(o.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},eI33:function(t,e,o){var r=o("XKFU"),a=o("aCFj"),s=o("ne8i");r(r.S,"String",{raw:function(t){for(var e=a(t.raw),o=s(e.length),r=arguments.length,n=[],i=0;i<o;)n.push(String(e[i++])),i<r&&n.push(String(arguments[i]));return n.join("")}})},eLYw:function(t,e,o){},eM6i:function(t,e,o){o=o("XKFU");o(o.S,"Date",{now:function(){return(new Date).getTime()}})},eeVq:function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},elZq:function(t,e,o){"use strict";var r=o("dyZX"),n=o("hswa"),i=o("nh4g"),a=o("K0xU")("species");t.exports=function(t){t=r[t];i&&t&&!t[a]&&n.f(t,a,{configurable:!0,get:function(){return this}})}},eyMr:function(t,e,o){var c=o("2OiF"),u=o("S/j/"),p=o("Ymqv"),d=o("ne8i");t.exports=function(t,e,o,r,n){c(e);var i=u(t),a=p(i),s=d(i.length),l=n?s-1:0,h=n?-1:1;if(o<2)for(;;){if(l in a){r=a[l],l+=h;break}if(l+=h,n?l<0:s<=l)throw TypeError("Reduce of empty array with no initial value")}for(;n?0<=l:l<s;l+=h)l in a&&(r=e(r,a[l],l,i));return r}},"f/aN":function(t,e,o){"use strict";function r(t){this._t=i(t),this._i=0;var e,o=this._k=[];for(e in t)o.push(e)}var n=o("XKFU"),i=o("y3w9");o("QaDb")(r,"Object",function(){var t,e=this._k;do{if(this._i>=e.length)return{value:void 0,done:!0}}while(!((t=e[this._i++])in this._t));return{value:t,done:!1}}),n(n.S,"Reflect",{enumerate:function(t){return new r(t)}})},"f3/d":function(t,e,o){var r=o("hswa").f,n=Function.prototype,i=/^\s*function ([^ (]*)/;"name"in n||o("nh4g")&&r(n,"name",{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(t){return""}}})},fA63:function(t,e,o){"use strict";o("qncB")("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},"fN/3":function(t,e,o){var r=o("N6cJ"),n=o("y3w9"),i=r.keys,a=r.key;r.exp({getOwnMetadataKeys:function(t){return i(n(t),arguments.length<2?void 0:a(arguments[1]))}})},fN96:function(t,e,o){var r=o("XKFU");r(r.S,"Number",{isInteger:o("nBIS")})},fyDq:function(t,e,o){var r=o("hswa").f,n=o("aagx"),i=o("K0xU")("toStringTag");t.exports=function(t,e,o){t&&!n(t=o?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},fyVe:function(t,e,o){var r=o("XKFU"),n=o("1sa7"),i=Math.sqrt,o=Math.acosh;r(r.S+r.F*!(o&&710==Math.floor(o(Number.MAX_VALUE))&&o(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:94906265.62425156<t?Math.log(t)+Math.LN2:n(t-1+i(t-1)*i(t+1))}})},g3g5:function(t,e){t=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},g4EE:function(t,e,o){"use strict";var r=o("y3w9"),n=o("apmT");t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return n(r(this),"number"!=t)}},g6HL:function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},gHnn:function(t,e,o){var s=o("dyZX"),l=o("GZEu").set,h=s.MutationObserver||s.WebKitMutationObserver,c=s.process,u=s.Promise,p="process"==o("LZWt")(c);t.exports=function(){function t(){var t,e;for(p&&(t=c.domain)&&t.exit();o;){e=o.fn,o=o.next;try{e()}catch(t){throw o?n():r=void 0,t}}r=void 0,t&&t.enter()}var o,r,e,n,i,a;return n=p?function(){c.nextTick(t)}:!h||s.navigator&&s.navigator.standalone?u&&u.resolve?(e=u.resolve(void 0),function(){e.then(t)}):function(){l.call(s,t)}:(i=!0,a=document.createTextNode(""),new h(t).observe(a,{characterData:!0}),function(){a.data=i=!i}),function(t){t={fn:t,next:void 0};r&&(r.next=t),o||(o=t,n()),r=t}}},"h/M4":function(t,e,o){o=o("XKFU");o(o.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},h7Nl:function(t,e,o){var r=Date.prototype,n="Invalid Date",i=r.toString,a=r.getTime;new Date(NaN)+""!=n&&o("KroJ")(r,"toString",function(){var t=a.call(this);return t==t?i.call(this):n})},hEkN:function(t,e,o){"use strict";o("OGtf")("anchor",function(e){return function(t){return e(this,"a","name",t)}})},hHhE:function(t,e,o){var r=o("XKFU");r(r.S,"Object",{create:o("Kuth")})},hLT2:function(t,e,o){o=o("XKFU");o(o.S,"Math",{trunc:function(t){return(0<t?Math.floor:Math.ceil)(t)}})},hPIQ:function(t,e){t.exports={}},hhXQ:function(t,e,o){var r=o("XKFU"),n=o("UExd")(!1);r(r.S,"Object",{values:function(t){return n(t)}})},hswa:function(t,e,o){var r=o("y3w9"),n=o("xpql"),i=o("apmT"),a=Object.defineProperty;e.f=o("nh4g")?Object.defineProperty:function(t,e,o){if(r(t),e=i(e,!0),r(o),n)try{return a(t,e,o)}catch(t){}if("get"in o||"set"in o)throw TypeError("Accessors not supported!");return"value"in o&&(t[e]=o.value),t}},i5dc:function(t,e,n){function i(t,e){if(r(t),!o(e)&&null!==e)throw TypeError(e+": can't set as prototype!")}var o=n("0/R4"),r=n("y3w9");t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,o,r){try{(r=n("m0Pp")(Function.call,n("EemH").f(Object.prototype,"__proto__").set,2))(t,[]),o=!(t instanceof Array)}catch(t){o=!0}return function(t,e){return i(t,e),o?t.__proto__=e:r(t,e),t}}({},!1):void 0),check:i}},iMoV:function(t,e,o){var r=o("hswa"),n=o("XKFU"),i=o("y3w9"),a=o("apmT");n(n.S+n.F*o("eeVq")(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,o){i(t),e=a(e,!0),i(o);try{return r.f(t,e,o),!0}catch(t){return!1}}})},"iW+S":function(t,e,o){function r(t,e,o){return!!s(t,e,o)||null!==(e=a(e))&&r(t,e,o)}var n=o("N6cJ"),i=o("y3w9"),a=o("OP3Y"),s=n.has,l=n.key;n.exp({hasMetadata:function(t,e){return r(t,i(e),arguments.length<3?void 0:l(arguments[2]))}})},iWIM:function(r,t,e){var n=e("n3AX");function i(t,e,o){return"undefined"!=typeof Reflect&&Reflect.get?r.exports=i=Reflect.get:r.exports=i=function(t,e,o){t=n(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(o):e.value}},r.exports.default=r.exports,r.exports.__esModule=!0,i(t,e,o||t)}r.exports=i,r.exports.default=r.exports,r.exports.__esModule=!0},ilze:function(t,e,o){o=o("XKFU");o(o.S,"Math",{umulh:function(t,e){var o=+t,r=+e,t=65535&o,e=65535&r,o=o>>>16,r=r>>>16,e=(o*e>>>0)+(t*e>>>16);return o*r+(e>>>16)+((t*r>>>0)+(65535&e)>>>16)}})},ioFf:function(t,e,o){"use strict";function r(t){var e=X[t]=C(H[N]);return e._k=t,e}function n(t,e){w(t);for(var o,r=b(e=P(e)),n=0,i=r.length;n<i;)$(t,o=r[n++],e[o]);return t}function i(t){var e=G.call(this,t=M(t,!0));return!(this===Y&&l(X,t)&&!l(W,t))&&(!(e||!l(this,t)||!l(X,t)||l(this,z)&&this[z][t])||e)}function a(t,e){if(t=P(t),e=M(e,!0),t!==Y||!l(X,e)||l(W,e)){var o=F(t,e);return!o||!l(X,e)||l(t,z)&&t[z][e]||(o.enumerable=!0),o}}var s=o("dyZX"),l=o("aagx"),h=o("nh4g"),c=o("XKFU"),u=o("KroJ"),p=o("Z6vF").KEY,d=o("eeVq"),f=o("VTer"),m=o("fyDq"),g=o("ylqs"),v=o("K0xU"),y=o("N8g3"),S=o("OnI7"),b=o("1MBn"),E=o("EWmC"),w=o("y3w9"),T=o("0/R4"),x=o("S/j/"),P=o("aCFj"),M=o("apmT"),D=o("RjD/"),C=o("Kuth"),k=o("e7yV"),R=o("EemH"),I=o("JiEa"),A=o("hswa"),_=o("DVgA"),F=R.f,O=A.f,L=k.f,H=s.Symbol,B=s.JSON,V=B&&B.stringify,N="prototype",z=v("_hidden"),U=v("toPrimitive"),G={}.propertyIsEnumerable,j=f("symbol-registry"),X=f("symbols"),W=f("op-symbols"),Y=Object[N],K="function"==typeof H&&!!I.f,q=s.QObject,Z=!q||!q[N]||!q[N].findChild,J=h&&d(function(){return 7!=C(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a})?function(t,e,o){var r=F(Y,e);r&&delete Y[e],O(t,e,o),r&&t!==Y&&O(Y,e,r)}:O,Q=K&&"symbol"==typeof H.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof H},$=function(t,e,o){return t===Y&&$(W,e,o),w(t),e=M(e,!0),w(o),l(X,e)?(o.enumerable?(l(t,z)&&t[z][e]&&(t[z][e]=!1),o=C(o,{enumerable:D(0,!1)})):(l(t,z)||O(t,z,D(1,{})),t[z][e]=!0),J(t,e,o)):O(t,e,o)},f=function(t){for(var e,o=L(P(t)),r=[],n=0;o.length>n;)l(X,e=o[n++])||e==z||e==p||r.push(e);return r},q=function(t){for(var e,o=t===Y,r=L(o?W:P(t)),n=[],i=0;r.length>i;)!l(X,e=r[i++])||o&&!l(Y,e)||n.push(X[e]);return n};K||(u((H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor!");var e=g(0<arguments.length?arguments[0]:void 0),o=function(t){this===Y&&o.call(W,t),l(this,z)&&l(this[z],e)&&(this[z][e]=!1),J(this,e,D(1,t))};return h&&Z&&J(Y,e,{configurable:!0,set:o}),r(e)})[N],"toString",function(){return this._k}),R.f=a,A.f=$,o("kJMx").f=k.f=f,o("UqcF").f=i,I.f=q,h&&!o("LQAc")&&u(Y,"propertyIsEnumerable",i,!0),y.f=function(t){return r(v(t))}),c(c.G+c.W+c.F*!K,{Symbol:H});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)v(tt[et++]);for(var ot=_(v.store),rt=0;ot.length>rt;)S(ot[rt++]);c(c.S+c.F*!K,"Symbol",{for:function(t){return l(j,t+="")?j[t]:j[t]=H(t)},keyFor:function(t){if(!Q(t))throw TypeError(t+" is not a symbol!");for(var e in j)if(j[e]===t)return e},useSetter:function(){Z=!0},useSimple:function(){Z=!1}}),c(c.S+c.F*!K,"Object",{create:function(t,e){return void 0===e?C(t):n(C(t),e)},defineProperty:$,defineProperties:n,getOwnPropertyDescriptor:a,getOwnPropertyNames:f,getOwnPropertySymbols:q});q=d(function(){I.f(1)});c(c.S+c.F*q,"Object",{getOwnPropertySymbols:function(t){return I.f(x(t))}}),B&&c(c.S+c.F*(!K||d(function(){var t=H();return"[null]"!=V([t])||"{}"!=V({a:t})||"{}"!=V(Object(t))})),"JSON",{stringify:function(t){for(var e,o,r=[t],n=1;n<arguments.length;)r.push(arguments[n++]);if(o=e=r[1],(T(e)||void 0!==t)&&!Q(t))return E(e)||(e=function(t,e){if("function"==typeof o&&(e=o.call(this,t,e)),!Q(e))return e}),r[1]=e,V.apply(B,r)}}),H[N][U]||o("Mukb")(H[N],U,H[N].valueOf),m(H,"Symbol"),m(Math,"Math",!0),m(s.JSON,"JSON",!0)},jm62:function(t,e,o){var r=o("XKFU"),l=o("mQtv"),h=o("aCFj"),c=o("EemH"),u=o("8a7r");r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,o,r=h(t),n=c.f,i=l(r),a={},s=0;i.length>s;)void 0!==(o=n(r,e=i[s++]))&&u(a,e,o);return a}})},jqX0:function(t,e,o){var r=o("XKFU"),o=o("jtBr");r(r.P+r.F*(Date.prototype.toISOString!==o),"Date",{toISOString:o})},jtBr:function(t,e,o){"use strict";function r(t){return 9<t?t:"0"+t}var o=o("eeVq"),n=Date.prototype.getTime,i=Date.prototype.toISOString;t.exports=o(function(){return"0385-07-25T07:06:39.999Z"!=i.call(new Date(-5e13-1))})||!o(function(){i.call(new Date(NaN))})?function(){if(!isFinite(n.call(this)))throw RangeError("Invalid time value");var t=this.getUTCFullYear(),e=this.getUTCMilliseconds(),o=t<0?"-":9999<t?"+":"";return o+("00000"+Math.abs(t)).slice(o?-6:-4)+"-"+r(this.getUTCMonth()+1)+"-"+r(this.getUTCDate())+"T"+r(this.getUTCHours())+":"+r(this.getUTCMinutes())+":"+r(this.getUTCSeconds())+"."+(99<e?e:"0"+r(e))+"Z"}:i},kJMx:function(t,e,o){var r=o("zhAb"),n=o("4R4u").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,n)}},kLCe:function(t){t.exports=JSON.parse('{"v":"5.6.9","fr":25,"ip":0,"op":50,"w":90,"h":90,"nm":"进度条_一直动的部分","ddd":0,"assets":[{"id":"comp_0","layers":[{"ddd":0,"ind":1,"ty":4,"nm":"形状图层 7","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":180,"ix":10},"p":{"a":0,"k":[45,45,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[99,99,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[13.576,0],[0,-13.576],[-13.576,0],[0,13.576]],"o":[[-13.576,0],[0,13.576],[13.576,0],[0,-13.576]],"v":[[0,-24.581],[-24.581,0],[0,24.581],[24.581,0]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":7,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"椭圆 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[100],"e":[66]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":25,"s":[66],"e":[100]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":50,"s":[100],"e":[66]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":75,"s":[66],"e":[100]},{"t":100}],"ix":1},"e":{"a":0,"k":100,"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"修剪路径 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":750,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"形状图层 6","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[45,45,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[99,99,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[13.576,0],[0,-13.576],[-13.576,0],[0,13.576]],"o":[[-13.576,0],[0,13.576],[13.576,0],[0,-13.576]],"v":[[0,-24.581],[-24.581,0],[0,24.581],[24.581,0]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":7,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"椭圆 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[100],"e":[66]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":25,"s":[66],"e":[100]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":50,"s":[100],"e":[66]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":75,"s":[66],"e":[100]},{"t":100}],"ix":1},"e":{"a":0,"k":100,"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"修剪路径 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":750,"st":0,"bm":0}]}],"layers":[{"ddd":0,"ind":1,"ty":0,"nm":"进度条_一直动的部分_不转","refId":"comp_0","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[0],"e":[1440]},{"t":100}],"ix":10},"p":{"a":0,"k":[45,45,0],"ix":2},"a":{"a":0,"k":[45,45,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"w":90,"h":90,"ip":0,"op":750,"st":0,"bm":0}],"markers":[]}')},kcoS:function(t,e,o){var r=o("lvtm"),o=Math.pow,n=o(2,-52),i=o(2,-23),a=o(2,127)*(2-i),s=o(2,-126);t.exports=Math.fround||function(t){var e=Math.abs(t),o=r(t);return e<s?o*(e/s/i+1/n-1/n)*s*i:a<(e=(t=(1+i/n)*e)-(t-e))||e!=e?o*(1/0):o*e}},klPD:function(t,e,o){var s=o("hswa"),l=o("EemH"),h=o("OP3Y"),c=o("aagx"),r=o("XKFU"),u=o("RjD/"),p=o("y3w9"),d=o("0/R4");r(r.S,"Reflect",{set:function t(e,o,r){var n,i=arguments.length<4?e:arguments[3],a=l.f(p(e),o);if(!a){if(d(n=h(e)))return t(n,o,r,i);a=u(0)}if(c(a,"value")){if(!1===a.writable||!d(i))return!1;if(n=l.f(i,o)){if(n.get||n.set||!1===n.writable)return!1;n.value=r,s.f(i,o,n)}else s.f(i,o,u(0,r));return!0}return void 0!==a.set&&(a.set.call(i,r),!0)}})},knU9:function(t,e,o){var r=o("XKFU"),n=o("i5dc");n&&r(r.S,"Reflect",{setPrototypeOf:function(t,e){n.check(t,e);try{return n.set(t,e),!0}catch(t){return!1}}})},knhD:function(t,e,o){o=o("XKFU");o(o.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},l0Rn:function(t,e,o){"use strict";var n=o("RYi7"),i=o("vhPU");t.exports=function(t){var e=String(i(this)),o="",r=n(t);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(o+=e);return o}},lPHp:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__,pHb,qHb;"undefined"!=typeof navigator&&(pHb=window||{},qHb=function(window){"use strict";var svgNS="http://www.w3.org/2000/svg",locationHref="",initialDefaultFrame=-999999,subframeEnabled=!0,idPrefix="",expressionsPlugin,isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),cachedColors={},bmRnd,bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};function ProjectInterface(){return{}}!function(){for(var t=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],e=t.length,o=0;o<e;o+=1)BMMath[t[o]]=Math[t[o]]}(),BMMath.random=Math.random,BMMath.abs=function(t){if("object"==typeof t&&t.length){for(var e=createSizedArray(t.length),o=t.length,r=0;r<o;r+=1)e[r]=Math.abs(t[r]);return e}return Math.abs(t)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function roundValues(t){bmRnd=t?Math.round:function(t){return t}}function styleDiv(t){t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.display="block",t.style.transformOrigin="0 0",t.style.webkitTransformOrigin="0 0",t.style.backfaceVisibility="visible",t.style.webkitBackfaceVisibility="visible",t.style.transformStyle="preserve-3d",t.style.webkitTransformStyle="preserve-3d",t.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(t,e,o,r){this.type=t,this.currentTime=e,this.totalTime=o,this.direction=r<0?-1:1}function BMCompleteEvent(t,e){this.type=t,this.direction=e<0?-1:1}function BMCompleteLoopEvent(t,e,o,r){this.type=t,this.currentLoop=o,this.totalLoops=e,this.direction=r<0?-1:1}function BMSegmentStartEvent(t,e,o){this.type=t,this.firstFrame=e,this.totalFrames=o}function BMDestroyEvent(t,e){this.type=t,this.target=e}function BMRenderFrameErrorEvent(t,e){this.type="renderFrameError",this.nativeError=t,this.currentTime=e}function BMConfigErrorEvent(t){this.type="configError",this.nativeError=t}function BMAnimationConfigErrorEvent(t,e){this.type=t,this.nativeError=e}roundValues(!1);var createElementID=(WHb=0,function(){return idPrefix+"__lottie_element_"+(WHb+=1)}),WHb;function HSVtoRGB(t,e,o){var r,n,i,a=Math.floor(6*t),t=6*t-a,s=o*(1-e),l=o*(1-t*e),h=o*(1-(1-t)*e);switch(a%6){case 0:r=o,n=h,i=s;break;case 1:r=l,n=o,i=s;break;case 2:r=s,n=o,i=h;break;case 3:r=s,n=l,i=o;break;case 4:r=h,n=s,i=o;break;case 5:r=o,n=s,i=l}return[r,n,i]}function RGBtoHSV(t,e,o){var r,n=Math.max(t,e,o),i=Math.min(t,e,o),a=n-i,s=0===n?0:a/n,l=n/255;switch(n){case i:r=0;break;case t:r=e-o+a*(e<o?6:0),r/=6*a;break;case e:r=o-t+2*a,r/=6*a;break;case o:r=t-e+4*a,r/=6*a}return[r,s,l]}function addSaturationToRGB(t,e){t=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return t[1]+=e,1<t[1]?t[1]=1:t[1]<=0&&(t[1]=0),HSVtoRGB(t[0],t[1],t[2])}function addBrightnessToRGB(t,e){t=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return t[2]+=e,1<t[2]?t[2]=1:t[2]<0&&(t[2]=0),HSVtoRGB(t[0],t[1],t[2])}function addHueToRGB(t,e){t=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return t[0]+=e/360,1<t[0]?--t[0]:t[0]<0&&(t[0]+=1),HSVtoRGB(t[0],t[1],t[2])}var rgbToHex=function(){for(var t,r=[],e=0;e<256;e+=1)t=e.toString(16),r[e]=1===t.length?"0"+t:t;return function(t,e,o){return"#"+r[t=t<0?0:t]+r[e=e<0?0:e]+r[o=o<0?0:o]}}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(t,e){if(this._cbs[t])for(var o=this._cbs[t],r=0;r<o.length;r+=1)o[r](e)},addEventListener:function(t,e){return this._cbs[t]||(this._cbs[t]=[]),this._cbs[t].push(e),function(){this.removeEventListener(t,e)}.bind(this)},removeEventListener:function(t,e){if(e){if(this._cbs[t]){for(var o=0,r=this._cbs[t].length;o<r;)this._cbs[t][o]===e&&(this._cbs[t].splice(o,1),--o,--r),o+=1;this._cbs[t].length||(this._cbs[t]=null)}}else this._cbs[t]=null}};var createTypedArray="function"==typeof Uint8ClampedArray&&"function"==typeof Float32Array?function(t,e){return"float32"===t?new Float32Array(e):"int16"===t?new Int16Array(e):"uint8c"===t?new Uint8ClampedArray(e):PIb(t,e)}:PIb;function PIb(t,e){var o,r=0,n=[];switch(t){case"int16":case"uint8c":o=1;break;default:o=1.1}for(r=0;r<e;r+=1)n.push(o);return n}function createSizedArray(t){return Array.apply(null,{length:t})}function createNS(t){return document.createElementNS(svgNS,t)}function createTag(t){return document.createElement(t)}function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(t){-1===this.dynamicProperties.indexOf(t)&&(this.dynamicProperties.push(t),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;for(var t=this.dynamicProperties.length,e=0;e<t;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(t){this.container=t,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var getBlendMode=(dJb={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"},function(t){return dJb[t]||""}),dJb,lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"},Matrix=(fJb=Math.cos,gJb=Math.sin,hJb=Math.tan,iJb=Math.round,function(){this.reset=jJb,this.rotate=kJb,this.rotateX=lJb,this.rotateY=mJb,this.rotateZ=nJb,this.skew=pJb,this.skewFromAxis=qJb,this.shear=oJb,this.scale=rJb,this.setTransform=sJb,this.translate=tJb,this.transform=uJb,this.applyToPoint=zJb,this.applyToX=AJb,this.applyToY=BJb,this.applyToZ=CJb,this.applyToPointArray=HJb,this.applyToTriplePoints=GJb,this.applyToPointStringified=IJb,this.toCSS=JJb,this.to2dCSS=LJb,this.clone=xJb,this.cloneFromProps=yJb,this.equals=wJb,this.inversePoints=FJb,this.inversePoint=EJb,this.getInverseMatrix=DJb,this._t=this.transform,this.isIdentity=vJb,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}),fJb,gJb,hJb,iJb;function jJb(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function kJb(t){if(0===t)return this;var e=fJb(t),t=gJb(t);return this._t(e,-t,0,0,t,e,0,0,0,0,1,0,0,0,0,1)}function lJb(t){if(0===t)return this;var e=fJb(t),t=gJb(t);return this._t(1,0,0,0,0,e,-t,0,0,t,e,0,0,0,0,1)}function mJb(t){if(0===t)return this;var e=fJb(t),t=gJb(t);return this._t(e,0,t,0,0,1,0,0,-t,0,e,0,0,0,0,1)}function nJb(t){if(0===t)return this;var e=fJb(t),t=gJb(t);return this._t(e,-t,0,0,t,e,0,0,0,0,1,0,0,0,0,1)}function oJb(t,e){return this._t(1,e,t,1,0,0)}function pJb(t,e){return this.shear(hJb(t),hJb(e))}function qJb(t,e){var o=fJb(e),e=gJb(e);return this._t(o,e,0,0,-e,o,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,hJb(t),1,0,0,0,0,1,0,0,0,0,1)._t(o,-e,0,0,e,o,0,0,0,0,1,0,0,0,0,1)}function rJb(t,e,o){return o||0===o||(o=1),1===t&&1===e&&1===o?this:this._t(t,0,0,0,0,e,0,0,0,0,o,0,0,0,0,1)}function sJb(t,e,o,r,n,i,a,s,l,h,c,u,p,d,f,m){return this.props[0]=t,this.props[1]=e,this.props[2]=o,this.props[3]=r,this.props[4]=n,this.props[5]=i,this.props[6]=a,this.props[7]=s,this.props[8]=l,this.props[9]=h,this.props[10]=c,this.props[11]=u,this.props[12]=p,this.props[13]=d,this.props[14]=f,this.props[15]=m,this}function tJb(t,e,o){return o=o||0,0!==t||0!==e||0!==o?this._t(1,0,0,0,0,1,0,0,0,0,1,0,t,e,o,1):this}function uJb(t,e,o,r,n,i,a,s,l,h,c,u,p,d,f,m){var g=this.props;if(1===t&&0===e&&0===o&&0===r&&0===n&&1===i&&0===a&&0===s&&0===l&&0===h&&1===c&&0===u)return g[12]=g[12]*t+g[15]*p,g[13]=g[13]*i+g[15]*d,g[14]=g[14]*c+g[15]*f,g[15]*=m,this._identityCalculated=!1,this;var v=g[0],y=g[1],S=g[2],b=g[3],E=g[4],w=g[5],T=g[6],x=g[7],P=g[8],M=g[9],D=g[10],C=g[11],k=g[12],R=g[13],I=g[14],A=g[15];return g[0]=v*t+y*n+S*l+b*p,g[1]=v*e+y*i+S*h+b*d,g[2]=v*o+y*a+S*c+b*f,g[3]=v*r+y*s+S*u+b*m,g[4]=E*t+w*n+T*l+x*p,g[5]=E*e+w*i+T*h+x*d,g[6]=E*o+w*a+T*c+x*f,g[7]=E*r+w*s+T*u+x*m,g[8]=P*t+M*n+D*l+C*p,g[9]=P*e+M*i+D*h+C*d,g[10]=P*o+M*a+D*c+C*f,g[11]=P*r+M*s+D*u+C*m,g[12]=k*t+R*n+I*l+A*p,g[13]=k*e+R*i+I*h+A*d,g[14]=k*o+R*a+I*c+A*f,g[15]=k*r+R*s+I*u+A*m,this._identityCalculated=!1,this}function vJb(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function wJb(t){for(var e=0;e<16;){if(t.props[e]!==this.props[e])return!1;e+=1}return!0}function xJb(t){for(var e=0;e<16;e+=1)t.props[e]=this.props[e];return t}function yJb(t){for(var e=0;e<16;e+=1)this.props[e]=t[e]}function zJb(t,e,o){return{x:t*this.props[0]+e*this.props[4]+o*this.props[8]+this.props[12],y:t*this.props[1]+e*this.props[5]+o*this.props[9]+this.props[13],z:t*this.props[2]+e*this.props[6]+o*this.props[10]+this.props[14]}}function AJb(t,e,o){return t*this.props[0]+e*this.props[4]+o*this.props[8]+this.props[12]}function BJb(t,e,o){return t*this.props[1]+e*this.props[5]+o*this.props[9]+this.props[13]}function CJb(t,e,o){return t*this.props[2]+e*this.props[6]+o*this.props[10]+this.props[14]}function DJb(){var t=this.props[0]*this.props[5]-this.props[1]*this.props[4],e=this.props[5]/t,o=-this.props[1]/t,r=-this.props[4]/t,n=this.props[0]/t,i=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/t,a=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/t,t=new Matrix;return t.props[0]=e,t.props[1]=o,t.props[4]=r,t.props[5]=n,t.props[12]=i,t.props[13]=a,t}function EJb(t){return this.getInverseMatrix().applyToPointArray(t[0],t[1],t[2]||0)}function FJb(t){for(var e=t.length,o=[],r=0;r<e;r+=1)o[r]=EJb(t[r]);return o}function GJb(t,e,o){var r,n,i,a,s,l,h=createTypedArray("float32",6);return this.isIdentity()?(h[0]=t[0],h[1]=t[1],h[2]=e[0],h[3]=e[1],h[4]=o[0],h[5]=o[1]):(r=this.props[0],n=this.props[1],i=this.props[4],a=this.props[5],s=this.props[12],l=this.props[13],h[0]=t[0]*r+t[1]*i+s,h[1]=t[0]*n+t[1]*a+l,h[2]=e[0]*r+e[1]*i+s,h[3]=e[0]*n+e[1]*a+l,h[4]=o[0]*r+o[1]*i+s,h[5]=o[0]*n+o[1]*a+l),h}function HJb(t,e,o){o=this.isIdentity()?[t,e,o]:[t*this.props[0]+e*this.props[4]+o*this.props[8]+this.props[12],t*this.props[1]+e*this.props[5]+o*this.props[9]+this.props[13],t*this.props[2]+e*this.props[6]+o*this.props[10]+this.props[14]];return o}function IJb(t,e){if(this.isIdentity())return t+","+e;var o=this.props;return Math.round(100*(t*o[0]+e*o[4]+o[12]))/100+","+Math.round(100*(t*o[1]+e*o[5]+o[13]))/100}function JJb(){for(var t=0,e=this.props,o="matrix3d(";t<16;)o+=iJb(1e4*e[t])/1e4,o+=15===t?")":",",t+=1;return o}function KJb(t){return t<1e-6&&0<t||-1e-6<t&&t<0?iJb(1e4*t)/1e4:t}function LJb(){var t=this.props;return"matrix("+KJb(t[0])+","+KJb(t[1])+","+KJb(t[4])+","+KJb(t[5])+","+KJb(t[12])+","+KJb(t[13])+")"}!function(i,a){var s,l=this,h=256,c=6,u="random",p=a.pow(h,c),d=a.pow(2,52),f=2*d,m=h-1;function g(t){var e,o=t.length,a=this,r=0,n=a.i=a.j=0,i=a.S=[];for(o||(t=[o++]);r<h;)i[r]=r++;for(r=0;r<h;r++)i[r]=i[n=m&n+t[r%o]+(e=i[r])],i[n]=e;a.g=function(t){for(var e,o=0,r=a.i,n=a.j,i=a.S;t--;)e=i[r=m&r+1],o=o*h+i[m&(i[r]=i[n=m&n+e])+(i[n]=e)];return a.i=r,a.j=n,o}}function v(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function y(t,e){for(var o,r=t+"",n=0;n<r.length;)e[m&n]=m&(o^=19*e[m&n])+r.charCodeAt(n++);return S(e)}function S(t){return String.fromCharCode.apply(0,t)}a["seed"+u]=function(t,e,o){var r=[],t=y(function t(e,o){var r,n=[],i=typeof e;if(o&&"object"==i)for(r in e)try{n.push(t(e[r],o-1))}catch(t){}return n.length?n:"string"==i?e:e+"\0"}((e=!0===e?{entropy:!0}:e||{}).entropy?[t,S(i)]:null===t?function(){try{if(s)return S(s.randomBytes(h));var e=new Uint8Array(h);return(l.crypto||l.msCrypto).getRandomValues(e),S(e)}catch(t){e=l.navigator,e=e&&e.plugins;return[+new Date,l,e,l.screen,S(i)]}}():t,3),r),n=new g(r);return(r=function(){for(var t=n.g(c),e=p,o=0;t<d;)t=(t+o)*h,e*=h,o=n.g(1);for(;f<=t;)t/=2,e/=2,o>>>=1;return(t+o)/e}).int32=function(){return 0|n.g(4)},r.quick=function(){return n.g(4)/4294967296},r.double=r,y(S(n.S),i),(e.pass||o||function(t,e,o,r){return r&&(r.S&&v(r,n),t.state=function(){return v(n,{})}),o?(a[u]=t,e):t})(r,t,"global"in e?e.global:this==a,e.state)},y(a.random(),i)}([],BMMath);var BezierFactory=(xNb={getBezierEasing:function(t,e,o,r,n){n=n||("bez_"+t+"_"+e+"_"+o+"_"+r).replace(/\./g,"p");if(yNb[n])return yNb[n];r=new ONb([t,e,o,r]);return yNb[n]=r}},yNb={},ENb=11,FNb=1/(ENb-1),GNb="function"==typeof Float32Array,ONb.prototype={get:function(t){var e=this._p[0],o=this._p[1],r=this._p[2],n=this._p[3];return this._precomputed||this._precompute(),e===o&&r===n?t:0===t?0:1===t?1:KNb(this._getTForX(t),o,n)},_precompute:function(){var t=this._p[0],e=this._p[1],o=this._p[2],r=this._p[3];this._precomputed=!0,t===e&&o===r||this._calcSampleValues()},_calcSampleValues:function(){for(var t=this._p[0],e=this._p[2],o=0;o<ENb;++o)this._mSampleValues[o]=KNb(o*FNb,t,e)},_getTForX:function(t){for(var e=this._p[0],o=this._p[2],r=this._mSampleValues,n=0,i=1,a=ENb-1;i!==a&&r[i]<=t;++i)n+=FNb;var s=n+(t-r[--i])/(r[i+1]-r[i])*FNb,l=LNb(s,e,o);return.001<=l?function(t,e,o,r){for(var n=0;n<4;++n){var i=LNb(e,o,r);if(0===i)return e;e-=(KNb(e,o,r)-t)/i}return e}(t,s,e,o):0===l?s:function(t,e,o,r,n){for(var i,a,s=0;0<(i=KNb(a=e+(o-e)/2,r,n)-t)?o=a:e=a,1e-7<Math.abs(i)&&++s<10;);return a}(t,n,n+FNb,e,o)}},xNb),xNb,yNb,ENb,FNb,GNb;function HNb(t,e){return 1-3*e+3*t}function KNb(t,e,o){return((HNb(e,o)*t+(3*o-6*e))*t+3*e)*t}function LNb(t,e,o){return 3*HNb(e,o)*t*t+2*(3*o-6*e)*t+3*e}function ONb(t){this._p=t,this._mSampleValues=new(GNb?Float32Array:Array)(ENb),this._precomputed=!1,this.get=this.get.bind(this)}function extendPrototype(t,e){for(var o,r=t.length,n=0;n<r;n+=1)for(var i in o=t[n].prototype)Object.prototype.hasOwnProperty.call(o,i)&&(e.prototype[i]=o[i])}function getDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)}function createProxyFunction(t){function e(){}return e.prototype=t,e}function bezFunction(){var M=Math;function g(t,e,o,r,n,i){e=t*r+e*n+o*i-n*r-i*t-o*e;return-.001<e&&e<.001}var c=function(t,e,o,r){for(var n,i,a,s,l=defaultCurveSegments,h=0,c=[],u=[],p=bezierLengthPool.newElement(),d=o.length,f=0;f<l;f+=1){for(a=f/(l-1),n=s=0;n<d;n+=1)i=bmPow(1-a,3)*t[n]+3*bmPow(1-a,2)*a*o[n]+3*(1-a)*bmPow(a,2)*r[n]+bmPow(a,3)*e[n],c[n]=i,null!==u[n]&&(s+=bmPow(c[n]-u[n],2)),u[n]=c[n];s&&(h+=s=bmSqrt(s)),p.percents[f]=a,p.lengths[f]=h}return p.addedLength=h,p};function v(t){this.segmentLength=0,this.points=new Array(t)}function y(t,e){this.partialLength=t,this.point=e}var S,t=(S={},function(t,e,o,r){var n=(t[0]+"_"+t[1]+"_"+e[0]+"_"+e[1]+"_"+o[0]+"_"+o[1]+"_"+r[0]+"_"+r[1]).replace(/\./g,"p");if(!S[n]){for(var i,a,s,l,h,c=defaultCurveSegments,u=0,p=null,d=new v(c=2===t.length&&(t[0]!==e[0]||t[1]!==e[1])&&g(t[0],t[1],e[0],e[1],t[0]+o[0],t[1]+o[1])&&g(t[0],t[1],e[0],e[1],e[0]+r[0],e[1]+r[1])?2:c),f=o.length,m=0;m<c;m+=1){for(h=createSizedArray(f),s=m/(c-1),i=l=0;i<f;i+=1)a=bmPow(1-s,3)*t[i]+3*bmPow(1-s,2)*s*(t[i]+o[i])+3*(1-s)*bmPow(s,2)*(e[i]+r[i])+bmPow(s,3)*e[i],h[i]=a,null!==p&&(l+=bmPow(h[i]-p[i],2));u+=l=bmSqrt(l),d.points[m]=new y(l,h),p=h}d.segmentLength=u,S[n]=d}return S[n]});function D(t,e){var o=e.percents,r=e.lengths,n=o.length,i=bmFloor((n-1)*t),a=t*e.addedLength,s=0;if(i===n-1||0===i||a===r[i])return o[i];for(var l=r[i]>a?-1:1,h=!0;h;)if(r[i]<=a&&r[i+1]>a?(s=(a-r[i])/(r[i+1]-r[i]),h=!1):i+=l,i<0||n-1<=i){if(i===n-1)return o[i];h=!1}return o[i]+(o[i+1]-o[i])*s}var C=createTypedArray("float32",8);return{getSegmentsLength:function(t){for(var e=segmentsLengthPool.newElement(),o=t.c,r=t.v,n=t.o,i=t.i,a=t._length,s=e.lengths,l=0,h=0;h<a-1;h+=1)s[h]=c(r[h],r[h+1],n[h],i[h+1]),l+=s[h].addedLength;return o&&a&&(s[h]=c(r[h],r[0],n[h],i[0]),l+=s[h].addedLength),e.totalLength=l,e},getNewSegment:function(t,e,o,r,n,i,a){n<0?n=0:1<n&&(n=1);for(var s=D(n,a),n=D(i=1<i?1:i,a),l=t.length,h=(i=1-s)*i*i,c=s*i*i*3,u=s*s*i*3,p=s*s*s,d=i*i*(a=1-n),f=s*i*a+i*s*a+i*i*n,m=s*s*a+i*s*n+s*i*n,g=s*s*n,v=i*a*a,y=s*a*a+i*n*a+i*a*n,S=s*n*a+i*n*n+s*a*n,b=s*n*n,E=a*a*a,w=n*a*a+a*n*a+a*a*n,T=n*n*a+a*n*n+n*a*n,x=n*n*n,P=0;P<l;P+=1)C[4*P]=M.round(1e3*(h*t[P]+c*o[P]+u*r[P]+p*e[P]))/1e3,C[4*P+1]=M.round(1e3*(d*t[P]+f*o[P]+m*r[P]+g*e[P]))/1e3,C[4*P+2]=M.round(1e3*(v*t[P]+y*o[P]+S*r[P]+b*e[P]))/1e3,C[4*P+3]=M.round(1e3*(E*t[P]+w*o[P]+T*r[P]+x*e[P]))/1e3;return C},getPointInSegment:function(t,e,o,r,n,i){return n=D(n,i),i=1-n,[M.round(1e3*(i*i*i*t[0]+(n*i*i+i*n*i+i*i*n)*o[0]+(n*n*i+i*n*n+n*i*n)*r[0]+n*n*n*e[0]))/1e3,M.round(1e3*(i*i*i*t[1]+(n*i*i+i*n*i+i*i*n)*o[1]+(n*n*i+i*n*n+n*i*n)*r[1]+n*n*n*e[1]))/1e3]},buildBezierData:t,pointOnLine2D:g,pointOnLine3D:function(t,e,o,r,n,i,a,s,l){if(0===o&&0===i&&0===l)return g(t,e,r,n,a,s);var h=M.sqrt(M.pow(r-t,2)+M.pow(n-e,2)+M.pow(i-o,2)),o=M.sqrt(M.pow(a-t,2)+M.pow(s-e,2)+M.pow(l-o,2)),i=M.sqrt(M.pow(a-r,2)+M.pow(s-n,2)+M.pow(l-i,2));return-1e-4<(i=o<h?i<h?h-o-i:i-o-h:o<i?i-o-h:o-h-i)&&i<1e-4}}}!function(){for(var n=0,t=["ms","moz","webkit","o"],e=0;e<t.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[t[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[e]+"CancelAnimationFrame"]||window[t[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var e=(new Date).getTime(),o=Math.max(0,16-(e-n)),r=setTimeout(function(){t(e+o)},o);return n=e+o,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();var bez=bezFunction();function dataFunctionManager(){function u(t,e,o){for(var r,n,i,a=t.length,s=0;s<a;s+=1)if("ks"in(i=t[s])&&!i.completed){if(i.completed=!0,i.tt&&(t[s-1].td=i.tt),i.hasMask)for(var l=i.masksProperties,h=l.length,c=0;c<h;c+=1)if(l[c].pt.k.i)p(l[c].pt.k);else for(n=l[c].pt.k.length,r=0;r<n;r+=1)l[c].pt.k[r].s&&p(l[c].pt.k[r].s[0]),l[c].pt.k[r].e&&p(l[c].pt.k[r].e[0]);0===i.ty?(i.layers=function(t,e){var o=0,r=e.length;for(;o<r;){if(e[o].id===t)return e[o].layers.__used?JSON.parse(JSON.stringify(e[o].layers)):(e[o].layers.__used=!0,e[o].layers);o+=1}return null}(i.refId,e),u(i.layers,e,o)):4===i.ty?function t(e){var o;var r=e.length;var n;var i;for(o=r-1;0<=o;--o)if("sh"===e[o].ty)if(e[o].ks.k.i)p(e[o].ks.k);else for(i=e[o].ks.k.length,n=0;n<i;n+=1)e[o].ks.k[n].s&&p(e[o].ks.k[n].s[0]),e[o].ks.k[n].e&&p(e[o].ks.k[n].e[0]);else"gr"===e[o].ty&&t(e[o].it)}(i.shapes):5===i.ty&&(0!==(i=i).t.a.length||"m"in i.t.p||(i.singleShape=!0))}}function p(t){for(var e=t.i.length,o=0;o<e;o+=1)t.i[o][0]+=t.v[o][0],t.i[o][1]+=t.v[o][1],t.o[o][0]+=t.v[o][0],t.o[o][1]+=t.v[o][1]}function s(t,e){e=e?e.split("."):[100,100,100];return t[0]>e[0]||!(e[0]>t[0])&&(t[1]>e[1]||!(e[1]>t[1])&&(t[2]>e[2]||(e[2],void t[2])))}var r,o=(r=[4,4,14],function(t){if(s(r,t.v)&&(n(t.layers),t.assets))for(var e=t.assets.length,o=0;o<e;o+=1)t.assets[o].layers&&n(t.assets[o].layers)});function n(t){for(var e,o,r=t.length,n=0;n<r;n+=1)5===t[n].ty&&(e=t[n],o=void 0,o=e.t.d,e.t.d={k:[{s:o,t:0}]})}var l,i,a=(l=[4,7,99],function(t){if(t.chars&&!s(l,t.v))for(var e,o,r,n,i=t.chars.length,a=0;a<i;a+=1)if(t.chars[a].data&&t.chars[a].data.shapes)for(o=(n=t.chars[a].data.shapes[0].it).length,e=0;e<o;e+=1)(r=n[e].ks.k).__converted||(p(n[e].ks.k),r.__converted=!0)}),h=(i=[5,7,15],function(t){if(s(i,t.v)&&(c(t.layers),t.assets))for(var e=t.assets.length,o=0;o<e;o+=1)t.assets[o].layers&&c(t.assets[o].layers)});function c(t){for(var e,o=t.length,r=0;r<o;r+=1)5===t[r].ty&&("number"==typeof(e=(e=t[r]).t.p).a&&(e.a={a:0,k:e.a}),"number"==typeof e.p&&(e.p={a:0,k:e.p}),"number"==typeof e.r&&(e.r={a:0,k:e.r}))}var d,f=(d=[4,1,9],function(t){if(s(d,t.v)&&(m(t.layers),t.assets))for(var e=t.assets.length,o=0;o<e;o+=1)t.assets[o].layers&&m(t.assets[o].layers)});function m(t){for(var e=t.length,o=0;o<e;o+=1)4===t[o].ty&&!function t(e){for(var o,r,n=e.length,i=0;i<n;i+=1)if("gr"===e[i].ty)t(e[i].it);else if("fl"===e[i].ty||"st"===e[i].ty)if(e[i].c.k&&e[i].c.k[0].i)for(r=e[i].c.k.length,o=0;o<r;o+=1)e[i].c.k[o].s&&(e[i].c.k[o].s[0]/=255,e[i].c.k[o].s[1]/=255,e[i].c.k[o].s[2]/=255,e[i].c.k[o].s[3]/=255),e[i].c.k[o].e&&(e[i].c.k[o].e[0]/=255,e[i].c.k[o].e[1]/=255,e[i].c.k[o].e[2]/=255,e[i].c.k[o].e[3]/=255);else e[i].c.k[0]/=255,e[i].c.k[1]/=255,e[i].c.k[2]/=255,e[i].c.k[3]/=255}(t[o].shapes)}var g,v=(g=[4,4,18],function(t){if(s(g,t.v)&&(y(t.layers),t.assets))for(var e=t.assets.length,o=0;o<e;o+=1)t.assets[o].layers&&y(t.assets[o].layers)});function y(t){for(var e,o,r,n=t.length,i=0;i<n;i+=1){if((e=t[i]).hasMask)for(var a=e.masksProperties,s=a.length,l=0;l<s;l+=1)if(a[l].pt.k.i)a[l].pt.k.c=a[l].cl;else for(r=a[l].pt.k.length,o=0;o<r;o+=1)a[l].pt.k[o].s&&(a[l].pt.k[o].s[0].c=a[l].cl),a[l].pt.k[o].e&&(a[l].pt.k[o].e[0].c=a[l].cl);4===e.ty&&!function t(e){for(var o,r,n=e.length-1;0<=n;--n)if("sh"===e[n].ty)if(e[n].ks.k.i)e[n].ks.k.c=e[n].closed;else for(r=e[n].ks.k.length,o=0;o<r;o+=1)e[n].ks.k[o].s&&(e[n].ks.k[o].s[0].c=e[n].closed),e[n].ks.k[o].e&&(e[n].ks.k[o].e[0].c=e[n].closed);else"gr"===e[n].ty&&t(e[n].it)}(e.shapes)}}var t={completeData:function(t,e){t.__complete||(f(t),o(t),a(t),h(t),v(t),u(t.layers,t.assets,e),t.__complete=!0)}};return t.checkColors=f,t.checkChars=a,t.checkPathProperties=h,t.checkShapes=v,t.completeLayers=u,t}var dataManager=dataFunctionManager();function getFontProperties(t){for(var e=t.fStyle?t.fStyle.split(" "):[],o="normal",r="normal",n=e.length,i=0;i<n;i+=1)switch(e[i].toLowerCase()){case"italic":r="italic";break;case"bold":o="700";break;case"black":o="900";break;case"medium":o="500";break;case"regular":case"normal":o="400";break;case"light":case"thin":o="200"}return{style:r,weight:t.fWeight||o}}var FontManager=(FTb={w:0,size:0,shapes:[]},GTb=(GTb=[]).concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]),HTb=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"],ITb=[65039,8205],WTb.isModifier=function(t,e){return e=t.toString(16)+e.toString(16),-1!==HTb.indexOf(e)},WTb.isZeroWidthJoiner=function(t,e){return e?t===ITb[0]&&e===ITb[1]:t===ITb[1]},WTb.isCombinedCharacter=function(t){return-1!==GTb.indexOf(t)},WTb.prototype={addChars:function(t){if(t){this.chars||(this.chars=[]);for(var e,o,r=t.length,n=this.chars.length,i=0;i<r;i+=1){for(e=0,o=!1;e<n;)this.chars[e].style===t[i].style&&this.chars[e].fFamily===t[i].fFamily&&this.chars[e].ch===t[i].ch&&(o=!0),e+=1;o||(this.chars.push(t[i]),n+=1)}}},addFonts:function(t,e){if(t){if(this.chars)return this.isLoaded=!0,void(this.fonts=t.list);for(var o=t.list,r=o.length,n=r,i=0;i<r;i+=1){var a,s,l,h,c=!0;if(o[i].loaded=!1,o[i].monoCase=KTb(o[i].fFamily,"monospace"),o[i].sansCase=KTb(o[i].fFamily,"sans-serif"),o[i].fPath){if("p"===o[i].fOrigin||3===o[i].origin)(c=0<(l=document.querySelectorAll('style[f-forigin="p"][f-family="'+o[i].fFamily+'"], style[f-origin="3"][f-family="'+o[i].fFamily+'"]')).length?!1:c)&&((s=createTag("style")).setAttribute("f-forigin",o[i].fOrigin),s.setAttribute("f-origin",o[i].origin),s.setAttribute("f-family",o[i].fFamily),s.type="text/css",s.innerText="@font-face {font-family: "+o[i].fFamily+"; font-style: normal; src: url('"+o[i].fPath+"');}",e.appendChild(s));else if("g"===o[i].fOrigin||1===o[i].origin){for(l=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),a=0;a<l.length;a+=1)-1!==l[a].href.indexOf(o[i].fPath)&&(c=!1);c&&((h=createTag("link")).setAttribute("f-forigin",o[i].fOrigin),h.setAttribute("f-origin",o[i].origin),h.type="text/css",h.rel="stylesheet",h.href=o[i].fPath,document.body.appendChild(h))}else if("t"===o[i].fOrigin||2===o[i].origin){for(l=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),a=0;a<l.length;a+=1)o[i].fPath===l[a].src&&(c=!1);c&&((h=createTag("link")).setAttribute("f-forigin",o[i].fOrigin),h.setAttribute("f-origin",o[i].origin),h.setAttribute("rel","stylesheet"),h.setAttribute("href",o[i].fPath),e.appendChild(h))}}else o[i].loaded=!0,--n;o[i].helper=function(t,e){var o=createNS("text");o.style.fontSize="100px";var r=getFontProperties(e);return o.setAttribute("font-family",e.fFamily),o.setAttribute("font-style",r.style),o.setAttribute("font-weight",r.weight),o.textContent="1",e.fClass?(o.style.fontFamily="inherit",o.setAttribute("class",e.fClass)):o.style.fontFamily=e.fFamily,t.appendChild(o),createTag("canvas").getContext("2d").font=e.fWeight+" "+e.fStyle+" 100px "+e.fFamily,o}(e,o[i]),o[i].cache={},this.fonts.push(o[i])}0===n?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},getCharData:function(t,e,o){for(var r=0,n=this.chars.length;r<n;){if(this.chars[r].ch===t&&this.chars[r].style===e&&this.chars[r].fFamily===o)return this.chars[r];r+=1}return("string"==typeof t&&13!==t.charCodeAt(0)||!t)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",t,e,o)),FTb},getFontByName:function(t){for(var e=0,o=this.fonts.length;e<o;){if(this.fonts[e].fName===t)return this.fonts[e];e+=1}return this.fonts[0]},measureText:function(t,e,o){var r,n,i=this.getFontByName(e),a=t.charCodeAt(0);return i.cache[a+1]||(r=i.helper," "===t?(r.textContent="|"+t+"|",n=r.getComputedTextLength(),r.textContent="||",e=r.getComputedTextLength(),i.cache[a+1]=(n-e)/100):(r.textContent=t,i.cache[a+1]=r.getComputedTextLength()/100)),i.cache[a+1]*o},checkLoadedFonts:function(){for(var t,e,o=this.fonts.length,r=o,n=0;n<o;n+=1)this.fonts[n].loaded?--r:"n"===this.fonts[n].fOrigin||0===this.fonts[n].origin?this.fonts[n].loaded=!0:(t=this.fonts[n].monoCase.node,e=this.fonts[n].monoCase.w,t.offsetWidth!==e?(--r,this.fonts[n].loaded=!0):(t=this.fonts[n].sansCase.node,e=this.fonts[n].sansCase.w,t.offsetWidth!==e&&(--r,this.fonts[n].loaded=!0)),this.fonts[n].loaded&&(this.fonts[n].sansCase.parent.parentNode.removeChild(this.fonts[n].sansCase.parent),this.fonts[n].monoCase.parent.parentNode.removeChild(this.fonts[n].monoCase.parent)));0!==r&&Date.now()-this.initTime<5e3?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)},setIsLoaded:function(){this.isLoaded=!0}},WTb),FTb,GTb,HTb,ITb;function KTb(t,e){var o=createTag("span");o.setAttribute("aria-hidden",!0),o.style.fontFamily=e;var r=createTag("span");r.innerText="giItT1WQy@!-/#",o.style.position="absolute",o.style.left="-10000px",o.style.top="-10000px",o.style.fontSize="300px",o.style.fontVariant="normal",o.style.fontStyle="normal",o.style.fontWeight="normal",o.style.letterSpacing="0",o.appendChild(r),document.body.appendChild(o);var n=r.offsetWidth;return r.style.fontFamily=function(t){for(var e=t.split(","),o=e.length,r=[],n=0;n<o;n+=1)"sans-serif"!==e[n]&&"monospace"!==e[n]&&r.push(e[n]);return r.join(",")}(t)+", "+e,{node:r,w:n,parent:o}}function WTb(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)}var PropertyFactory=(cVb=initialDefaultFrame,dVb=Math.abs,{getProp:function(t,e,o,r,n){var i;if(e.k.length)if("number"==typeof e.k[0])i=new nVb(t,e,r,n);else switch(o){case 0:i=new oVb(t,e,r,n);break;case 1:i=new pVb(t,e,r,n)}else i=new mVb(t,e,r,n);return i.effectsSequence.length&&n.addDynamicProperty(i),i}}),cVb,dVb;function eVb(t,e){var o,r=this.offsetTime;"multidimensional"===this.propType&&(o=createTypedArray("float32",this.pv.length));for(var n,i,a,s=e.lastIndex,l=s,h=this.keyframes.length-1,c=!0;c;){if(n=this.keyframes[l],i=this.keyframes[l+1],l===h-1&&t>=i.t-r){n.h&&(n=i),s=0;break}if(i.t-r>t){s=l;break}l<h-1?l+=1:(s=0,c=!1)}var u,p,d,f,m,g=i.t-r,v=n.t-r;if(n.to){n.bezierData||(n.bezierData=bez.buildBezierData(n.s,i.s||n.e,n.to,n.ti));var y=n.bezierData;if(g<=t||t<v)for(var S=g<=t?y.points.length-1:0,b=y.points[S].point.length,E=0;E<b;E+=1)o[E]=y.points[S].point[E];else{n.__fnct?a=n.__fnct:(a=BezierFactory.getBezierEasing(n.o.x,n.o.y,n.i.x,n.i.y,n.n).get,n.__fnct=a);for(var w,T=a((t-v)/(g-v)),x=y.segmentLength*T,P=e.lastFrame<t&&e._lastKeyframeIndex===l?e._lastAddedLength:0,M=e.lastFrame<t&&e._lastKeyframeIndex===l?e._lastPoint:0,c=!0,D=y.points.length;c;){if(P+=y.points[M].partialLength,0==x||0===T||M===y.points.length-1){for(b=y.points[M].point.length,E=0;E<b;E+=1)o[E]=y.points[M].point[E];break}if(P<=x&&x<P+y.points[M+1].partialLength){for(w=(x-P)/y.points[M+1].partialLength,b=y.points[M].point.length,E=0;E<b;E+=1)o[E]=y.points[M].point[E]+(y.points[M+1].point[E]-y.points[M].point[E])*w;break}M<D-1?M+=1:c=!1}e._lastPoint=M,e._lastAddedLength=P-y.points[M].partialLength,e._lastKeyframeIndex=l}}else{var C,k,R,I,A,_,F,h=n.s.length,O=i.s||n.e;if(this.sh&&1!==n.h)g<=t?(o[0]=O[0],o[1]=O[1],o[2]=O[2]):t<=v?(o[0]=n.s[0],o[1]=n.s[1],o[2]=n.s[2]):(_=hVb(n.s),F=hVb(O),u=o,p=function(t,e,o){var r,n=[],i=t[0],a=t[1],s=t[2],l=t[3],h=e[0],c=e[1],u=e[2],p=e[3];(t=i*h+a*c+s*u+l*p)<0&&(t=-t,h=-h,c=-c,u=-u,p=-p);o=1e-6<1-t?(e=Math.acos(t),t=Math.sin(e),r=Math.sin((1-o)*e)/t,Math.sin(o*e)/t):(r=1-o,o);return n[0]=r*i+o*h,n[1]=r*a+o*c,n[2]=r*s+o*u,n[3]=r*l+o*p,n}(_,F,(t-v)/(g-v)),d=p[0],f=p[1],m=p[2],_=p[3],F=Math.atan2(2*f*_-2*d*m,1-2*f*f-2*m*m),p=Math.asin(2*d*f+2*m*_),m=Math.atan2(2*d*_-2*f*m,1-2*d*d-2*m*m),u[0]=F/degToRads,u[1]=p/degToRads,u[2]=m/degToRads);else for(l=0;l<h;l+=1)1!==n.h&&(T=g<=t?1:t<v?0:(n.o.x.constructor===Array?(n.__fnct||(n.__fnct=[]),n.__fnct[l]?a=n.__fnct[l]:(C=void 0===n.o.x[l]?n.o.x[0]:n.o.x[l],k=void 0===n.o.y[l]?n.o.y[0]:n.o.y[l],R=void 0===n.i.x[l]?n.i.x[0]:n.i.x[l],I=void 0===n.i.y[l]?n.i.y[0]:n.i.y[l],a=BezierFactory.getBezierEasing(C,k,R,I).get,n.__fnct[l]=a)):n.__fnct?a=n.__fnct:(C=n.o.x,k=n.o.y,R=n.i.x,I=n.i.y,a=BezierFactory.getBezierEasing(C,k,R,I).get,n.__fnct=a),a((t-v)/(g-v)))),O=i.s||n.e,A=1===n.h?n.s[l]:n.s[l]+(O[l]-n.s[l])*T,"multidimensional"===this.propType?o[l]=A:o=A}return e.lastIndex=s,o}function hVb(t){var e=t[0]*degToRads,o=t[1]*degToRads,r=t[2]*degToRads,n=Math.cos(e/2),i=Math.cos(o/2),t=Math.cos(r/2),e=Math.sin(e/2),o=Math.sin(o/2),r=Math.sin(r/2);return[e*o*t+n*i*r,e*i*t+n*o*r,n*o*t-e*i*r,n*i*t-e*o*r]}function iVb(){var t=this.comp.renderedFrame-this.offsetTime,e=this.keyframes[0].t-this.offsetTime,o=this.keyframes[this.keyframes.length-1].t-this.offsetTime;return t===this._caching.lastFrame||this._caching.lastFrame!==cVb&&(this._caching.lastFrame>=o&&o<=t||this._caching.lastFrame<e&&t<e)||(this._caching.lastFrame>=t&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0),e=this.interpolateValue(t,this._caching),this.pv=e),this._caching.lastFrame=t,this.pv}function jVb(t){var e;if("unidimensional"===this.propType)e=t*this.mult,1e-5<dVb(this.v-e)&&(this.v=e,this._mdf=!0);else for(var o=0,r=this.v.length;o<r;)e=t[o]*this.mult,1e-5<dVb(this.v[o]-e)&&(this.v[o]=e,this._mdf=!0),o+=1}function kVb(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{this.lock=!0,this._mdf=this._isFirstFrame;for(var t=this.effectsSequence.length,e=this.kf?this.pv:this.data.k,o=0;o<t;o+=1)e=this.effectsSequence[o](e);this.setVValue(e),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function lVb(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}function mVb(t,e,o,r){this.propType="unidimensional",this.mult=o||1,this.data=e,this.v=o?e.k*o:e.k,this.pv=e.k,this._mdf=!1,this.elem=t,this.container=r,this.comp=t.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=kVb,this.setVValue=jVb,this.addEffect=lVb}function nVb(t,e,o,r){var n;this.propType="multidimensional",this.mult=o||1,this.data=e,this._mdf=!1,this.elem=t,this.container=r,this.comp=t.comp,this.k=!1,this.kf=!1,this.frameId=-1;var i=e.k.length;for(this.v=createTypedArray("float32",i),this.pv=createTypedArray("float32",i),this.vel=createTypedArray("float32",i),n=0;n<i;n+=1)this.v[n]=e.k[n]*this.mult,this.pv[n]=e.k[n];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=kVb,this.setVValue=jVb,this.addEffect=lVb}function oVb(t,e,o,r){this.propType="unidimensional",this.keyframes=e.k,this.offsetTime=t.data.st,this.frameId=-1,this._caching={lastFrame:cVb,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=e,this.mult=o||1,this.elem=t,this.container=r,this.comp=t.comp,this.v=cVb,this.pv=cVb,this._isFirstFrame=!0,this.getValue=kVb,this.setVValue=jVb,this.interpolateValue=eVb,this.effectsSequence=[iVb.bind(this)],this.addEffect=lVb}function pVb(t,e,o,r){this.propType="multidimensional";for(var n,i,a,s,l=e.k.length,h=0;h<l-1;h+=1)e.k[h].to&&e.k[h].s&&e.k[h+1]&&e.k[h+1].s&&(n=e.k[h].s,i=e.k[h+1].s,a=e.k[h].to,s=e.k[h].ti,(2===n.length&&(n[0]!==i[0]||n[1]!==i[1])&&bez.pointOnLine2D(n[0],n[1],i[0],i[1],n[0]+a[0],n[1]+a[1])&&bez.pointOnLine2D(n[0],n[1],i[0],i[1],i[0]+s[0],i[1]+s[1])||3===n.length&&(n[0]!==i[0]||n[1]!==i[1]||n[2]!==i[2])&&bez.pointOnLine3D(n[0],n[1],n[2],i[0],i[1],i[2],n[0]+a[0],n[1]+a[1],n[2]+a[2])&&bez.pointOnLine3D(n[0],n[1],n[2],i[0],i[1],i[2],i[0]+s[0],i[1]+s[1],i[2]+s[2]))&&(e.k[h].to=null,e.k[h].ti=null),n[0]===i[0]&&n[1]===i[1]&&0===a[0]&&0===a[1]&&0===s[0]&&0===s[1]&&(2===n.length||n[2]===i[2]&&0===a[2]&&0===s[2])&&(e.k[h].to=null,e.k[h].ti=null));this.effectsSequence=[iVb.bind(this)],this.data=e,this.keyframes=e.k,this.offsetTime=t.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=o||1,this.elem=t,this.container=r,this.comp=t.comp,this.getValue=kVb,this.setVValue=jVb,this.interpolateValue=eVb,this.frameId=-1;var c=e.k[0].s.length;for(this.v=createTypedArray("float32",c),this.pv=createTypedArray("float32",c),h=0;h<c;h+=1)this.v[h]=cVb,this.pv[h]=cVb;this._caching={lastFrame:cVb,lastIndex:0,value:createTypedArray("float32",c)},this.addEffect=lVb}var TransformPropertyFactory=(zXb=[0,0],FXb.prototype={applyToMatrix:function(t){var e=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||e,this.a&&t.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&t.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&t.skewFromAxis(-this.sk.v,this.sa.v),this.r?t.rotate(-this.r.v):t.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?t.translate(this.px.v,this.py.v,-this.pz.v):t.translate(this.px.v,this.py.v,0):t.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(t){var e,o,r,n;this.elem.globalData.frameId!==this.frameId&&(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),(this._mdf||t)&&(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented&&(n=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime?o=this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(e=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/n,0),this.p.getValueAtTime(this.p.keyframes[0].t/n,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(e=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/n,0),this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/n,0)):(e=this.p.pv,this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/n,this.p.offsetTime)):this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime?(e=[],o=[],r=this.px,t=this.py,r._caching.lastFrame+r.offsetTime<=r.keyframes[0].t?(e[0]=r.getValueAtTime((r.keyframes[0].t+.01)/n,0),e[1]=t.getValueAtTime((t.keyframes[0].t+.01)/n,0),o[0]=r.getValueAtTime(r.keyframes[0].t/n,0),o[1]=t.getValueAtTime(t.keyframes[0].t/n,0)):r._caching.lastFrame+r.offsetTime>=r.keyframes[r.keyframes.length-1].t?(e[0]=r.getValueAtTime(r.keyframes[r.keyframes.length-1].t/n,0),e[1]=t.getValueAtTime(t.keyframes[t.keyframes.length-1].t/n,0),o[0]=r.getValueAtTime((r.keyframes[r.keyframes.length-1].t-.01)/n,0),o[1]=t.getValueAtTime((t.keyframes[t.keyframes.length-1].t-.01)/n,0)):(e=[r.pv,t.pv],o[0]=r.getValueAtTime((r._caching.lastFrame+r.offsetTime-.01)/n,r.offsetTime),o[1]=t.getValueAtTime((t._caching.lastFrame+t.offsetTime-.01)/n,t.offsetTime))):e=o=zXb,this.v.rotate(-Math.atan2(e[1]-o[1],e[0]-o[0]))),this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])),this.frameId=this.elem.globalData.frameId)},precalculateMatrix:function(){if(!this.a.k&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],FXb),FXb.prototype.addDynamicProperty=function(t){this._addDynamicProperty(t),this.elem.addDynamicProperty(t),this._isDirty=!0},FXb.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(t,e,o){return new FXb(t,e,o)}}),zXb;function FXb(t,e,o){if(this.elem=t,this.frameId=-1,this.propType="transform",this.data=e,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(o||t),e.p&&e.p.s?(this.px=PropertyFactory.getProp(t,e.p.x,0,0,this),this.py=PropertyFactory.getProp(t,e.p.y,0,0,this),e.p.z&&(this.pz=PropertyFactory.getProp(t,e.p.z,0,0,this))):this.p=PropertyFactory.getProp(t,e.p||{k:[0,0,0]},1,0,this),e.rx){if(this.rx=PropertyFactory.getProp(t,e.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(t,e.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(t,e.rz,0,degToRads,this),e.or.k[0].ti)for(var r=e.or.k.length,n=0;n<r;n+=1)e.or.k[n].to=null,e.or.k[n].ti=null;this.or=PropertyFactory.getProp(t,e.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(t,e.r||{k:0},0,degToRads,this);e.sk&&(this.sk=PropertyFactory.getProp(t,e.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(t,e.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(t,e.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(t,e.s||{k:[100,100,100]},1,.01,this),e.o?this.o=PropertyFactory.getProp(t,e.o,0,.01,t):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(t,e){this.c=t,this.setLength(e);for(var o=0;o<e;)this.v[o]=pointPool.newElement(),this.o[o]=pointPool.newElement(),this.i[o]=pointPool.newElement(),o+=1},ShapePath.prototype.setLength=function(t){for(;this._maxLength<t;)this.doubleArrayLength();this._length=t},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(t,e,o,r,n){var i;switch(this._length=Math.max(this._length,r+1),this._length>=this._maxLength&&this.doubleArrayLength(),o){case"v":i=this.v;break;case"i":i=this.i;break;case"o":i=this.o;break;default:i=[]}i[r]&&(!i[r]||n)||(i[r]=pointPool.newElement()),i[r][0]=t,i[r][1]=e},ShapePath.prototype.setTripleAt=function(t,e,o,r,n,i,a,s){this.setXYAt(t,e,"v",a,s),this.setXYAt(o,r,"o",a,s),this.setXYAt(n,i,"i",a,s)},ShapePath.prototype.reverse=function(){var t=new ShapePath;t.setPathData(this.c,this._length);var e=this.v,o=this.o,r=this.i,n=0;this.c&&(t.setTripleAt(e[0][0],e[0][1],r[0][0],r[0][1],o[0][0],o[0][1],0,!1),n=1);for(var i=this._length-1,a=this._length,s=n;s<a;s+=1)t.setTripleAt(e[i][0],e[i][1],r[i][0],r[i][1],o[i][0],o[i][1],s,!1),--i;return t};var ShapePropertyFactory=function(){var n=-999999;function t(t,e,o){var r,n,i,a,s,l,h,c=o.lastIndex,u=this.keyframes;if(t<u[0].t-this.offsetTime)r=u[0].s[0],n=!0,c=0;else if(t>=u[u.length-1].t-this.offsetTime)r=(u[u.length-1].s?u[u.length-1].s:u[u.length-2].e)[0],n=!0;else{for(var p,d,f,m,g,v=c,y=u.length-1,S=!0;S&&(p=u[v],!((d=u[v+1]).t-this.offsetTime>t));)v<y-1?v+=1:S=!1;c=v,(n=1===p.h)||(m=t>=d.t-this.offsetTime?1:t<p.t-this.offsetTime?0:(p.__fnct?f=p.__fnct:(f=BezierFactory.getBezierEasing(p.o.x,p.o.y,p.i.x,p.i.y).get,p.__fnct=f),f((t-(p.t-this.offsetTime))/(d.t-this.offsetTime-(p.t-this.offsetTime)))),g=(d.s||p.e)[0]),r=p.s[0]}for(s=e._length,l=r.i[0].length,o.lastIndex=c,i=0;i<s;i+=1)for(a=0;a<l;a+=1)h=n?r.i[i][a]:r.i[i][a]+(g.i[i][a]-r.i[i][a])*m,e.i[i][a]=h,h=n?r.o[i][a]:r.o[i][a]+(g.o[i][a]-r.o[i][a])*m,e.o[i][a]=h,h=n?r.v[i][a]:r.v[i][a]+(g.v[i][a]-r.v[i][a])*m,e.v[i][a]=h}function r(){this.paths=this.localShapeCollection}function e(t){!function(t,e){if(t._length===e._length&&t.c===e.c){for(var o=t._length,r=0;r<o;r+=1)if(t.v[r][0]!==e.v[r][0]||t.v[r][1]!==e.v[r][1]||t.o[r][0]!==e.o[r][0]||t.o[r][1]!==e.o[r][1]||t.i[r][0]!==e.i[r][0]||t.i[r][1]!==e.i[r][1])return;return 1}}(this.v,t)&&(this.v=shapePool.clone(t),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function o(){if(this.elem.globalData.frameId!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{this.lock=!0,this._mdf=!1;for(var t=this.kf?this.pv:(this.data.ks||this.data.pt).k,e=this.effectsSequence.length,o=0;o<e;o+=1)t=this.effectsSequence[o](t);this.setVValue(t),this.lock=!1,this.frameId=this.elem.globalData.frameId}else this._mdf=!1}function i(t,e,o){this.propType="shape",this.comp=t.comp,this.container=t,this.elem=t,this.data=e,this.k=!1,this.kf=!1,this._mdf=!1;e=(3===o?e.pt:e.ks).k;this.v=shapePool.clone(e),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=r,this.effectsSequence=[]}function a(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}function s(t,e,o){this.propType="shape",this.comp=t.comp,this.elem=t,this.container=t,this.offsetTime=t.data.st,this.keyframes=(3===o?e.pt:e.ks).k,this.k=!0,this.kf=!0;e=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,e),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=n,this.reset=r,this._caching={lastFrame:n,lastIndex:0},this.effectsSequence=[function(){var t=this.comp.renderedFrame-this.offsetTime,e=this.keyframes[0].t-this.offsetTime,o=this.keyframes[this.keyframes.length-1].t-this.offsetTime,r=this._caching.lastFrame;return r!==n&&(r<e&&t<e||o<r&&o<t)||(this._caching.lastIndex=r<t?this._caching.lastIndex:0,this.interpolateShape(t,this.pv,this._caching)),this._caching.lastFrame=t,this.pv}.bind(this)]}i.prototype.interpolateShape=t,i.prototype.getValue=o,i.prototype.setVValue=e,i.prototype.addEffect=a,s.prototype.getValue=o,s.prototype.interpolateShape=t,s.prototype.setVValue=e,s.prototype.addEffect=a;var l,h=(l=roundCorner,c.prototype={reset:r,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var t=this.p.v[0],e=this.p.v[1],o=this.s.v[0]/2,r=this.s.v[1]/2,n=3!==this.d,i=this.v;i.v[0][0]=t,i.v[0][1]=e-r,i.v[1][0]=n?t+o:t-o,i.v[1][1]=e,i.v[2][0]=t,i.v[2][1]=e+r,i.v[3][0]=n?t-o:t+o,i.v[3][1]=e,i.i[0][0]=n?t-o*l:t+o*l,i.i[0][1]=e-r,i.i[1][0]=n?t+o:t-o,i.i[1][1]=e-r*l,i.i[2][0]=n?t+o*l:t-o*l,i.i[2][1]=e+r,i.i[3][0]=n?t-o:t+o,i.i[3][1]=e+r*l,i.o[0][0]=n?t+o*l:t-o*l,i.o[0][1]=e-r,i.o[1][0]=n?t+o:t-o,i.o[1][1]=e+r*l,i.o[2][0]=n?t-o*l:t+o*l,i.o[2][1]=e+r,i.o[3][0]=n?t-o:t+o,i.o[3][1]=e-r*l}},extendPrototype([DynamicPropertyContainer],c),c);function c(t,e){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=e.d,this.elem=t,this.comp=t.comp,this.frameId=-1,this.initDynamicPropertyContainer(t),this.p=PropertyFactory.getProp(t,e.p,1,0,this),this.s=PropertyFactory.getProp(t,e.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}var u=(p.prototype={reset:r,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var t=2*Math.floor(this.pt.v),e=2*Math.PI/t,o=!0,r=this.or.v,n=this.ir.v,i=this.os.v,a=this.is.v,s=2*Math.PI*r/(2*t),l=2*Math.PI*n/(2*t),h=-Math.PI/2;h+=this.r.v;for(var c=3===this.data.d?-1:1,u=this.v._length=0;u<t;u+=1){var p=o?i:a,d=o?s:l,f=(v=o?r:n)*Math.cos(h),m=v*Math.sin(h),g=0===f&&0===m?0:m/Math.sqrt(f*f+m*m),v=0===f&&0===m?0:-f/Math.sqrt(f*f+m*m);f+=+this.p.v[0],m+=+this.p.v[1],this.v.setTripleAt(f,m,f-g*d*p*c,m-v*d*p*c,f+g*d*p*c,m+v*d*p*c,u,!0),o=!o,h+=e*c}},convertPolygonToPath:function(){var t,e=Math.floor(this.pt.v),o=2*Math.PI/e,r=this.or.v,n=this.os.v,i=2*Math.PI*r/(4*e),a=.5*-Math.PI,s=3===this.data.d?-1:1;for(a+=this.r.v,t=this.v._length=0;t<e;t+=1){var l=r*Math.cos(a),h=r*Math.sin(a),c=0===l&&0===h?0:h/Math.sqrt(l*l+h*h),u=0===l&&0===h?0:-l/Math.sqrt(l*l+h*h);l+=+this.p.v[0],h+=+this.p.v[1],this.v.setTripleAt(l,h,l-c*i*n*s,h-u*i*n*s,l+c*i*n*s,h+u*i*n*s,t,!0),a+=o*s}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],p),p);function p(t,e){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=t,this.comp=t.comp,this.data=e,this.frameId=-1,this.d=e.d,this.initDynamicPropertyContainer(t),1===e.sy?(this.ir=PropertyFactory.getProp(t,e.ir,0,0,this),this.is=PropertyFactory.getProp(t,e.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(t,e.pt,0,0,this),this.p=PropertyFactory.getProp(t,e.p,1,0,this),this.r=PropertyFactory.getProp(t,e.r,0,degToRads,this),this.or=PropertyFactory.getProp(t,e.or,0,0,this),this.os=PropertyFactory.getProp(t,e.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}var d=(f.prototype={convertRectToPath:function(){var t=this.p.v[0],e=this.p.v[1],o=this.s.v[0]/2,r=this.s.v[1]/2,n=bmMin(o,r,this.r.v),i=n*(1-roundCorner);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(t+o,e-r+n,t+o,e-r+n,t+o,e-r+i,0,!0),this.v.setTripleAt(t+o,e+r-n,t+o,e+r-i,t+o,e+r-n,1,!0),0!==n?(this.v.setTripleAt(t+o-n,e+r,t+o-n,e+r,t+o-i,e+r,2,!0),this.v.setTripleAt(t-o+n,e+r,t-o+i,e+r,t-o+n,e+r,3,!0),this.v.setTripleAt(t-o,e+r-n,t-o,e+r-n,t-o,e+r-i,4,!0),this.v.setTripleAt(t-o,e-r+n,t-o,e-r+i,t-o,e-r+n,5,!0),this.v.setTripleAt(t-o+n,e-r,t-o+n,e-r,t-o+i,e-r,6,!0),this.v.setTripleAt(t+o-n,e-r,t+o-i,e-r,t+o-n,e-r,7,!0)):(this.v.setTripleAt(t-o,e+r,t-o+i,e+r,t-o,e+r,2),this.v.setTripleAt(t-o,e-r,t-o,e-r+i,t-o,e-r,3))):(this.v.setTripleAt(t+o,e-r+n,t+o,e-r+i,t+o,e-r+n,0,!0),0!==n?(this.v.setTripleAt(t+o-n,e-r,t+o-n,e-r,t+o-i,e-r,1,!0),this.v.setTripleAt(t-o+n,e-r,t-o+i,e-r,t-o+n,e-r,2,!0),this.v.setTripleAt(t-o,e-r+n,t-o,e-r+n,t-o,e-r+i,3,!0),this.v.setTripleAt(t-o,e+r-n,t-o,e+r-i,t-o,e+r-n,4,!0),this.v.setTripleAt(t-o+n,e+r,t-o+n,e+r,t-o+i,e+r,5,!0),this.v.setTripleAt(t+o-n,e+r,t+o-i,e+r,t+o-n,e+r,6,!0),this.v.setTripleAt(t+o,e+r-n,t+o,e+r-n,t+o,e+r-i,7,!0)):(this.v.setTripleAt(t-o,e-r,t-o+i,e-r,t-o,e-r,1,!0),this.v.setTripleAt(t-o,e+r,t-o,e+r-i,t-o,e+r,2,!0),this.v.setTripleAt(t+o,e+r,t+o-i,e+r,t+o,e+r,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:r},extendPrototype([DynamicPropertyContainer],f),f);function f(t,e){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=t,this.comp=t.comp,this.frameId=-1,this.d=e.d,this.initDynamicPropertyContainer(t),this.p=PropertyFactory.getProp(t,e.p,1,0,this),this.s=PropertyFactory.getProp(t,e.s,1,0,this),this.r=PropertyFactory.getProp(t,e.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}var m={getShapeProp:function(t,e,o){var r;return 3===o||4===o?r=new((3===o?e.pt:e.ks).k.length?s:i)(t,e,o):5===o?r=new d(t,e):6===o?r=new h(t,e):7===o&&(r=new u(t,e)),r.k&&t.addDynamicProperty(r),r},getConstructorFunction:function(){return i},getKeyframedConstructorFunction:function(){return s}};return m}(),ShapeModifiers=(F$b={},G$b={},F$b.registerModifier=function(t,e){G$b[t]||(G$b[t]=e)},F$b.getModifier=function(t,e,o){return new G$b[t](e,o)},F$b),F$b,G$b;function ShapeModifier(){}function TrimModifier(){}function RoundCornersModifier(){}function PuckerAndBloatModifier(){}function RepeaterModifier(){}function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}function DashProperty(t,e,o,r){this.elem=t,this.frameId=-1,this.dataProps=createSizedArray(e.length),this.renderer=o,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",e.length?e.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(r);for(var n,i=e.length||0,a=0;a<i;a+=1)n=PropertyFactory.getProp(t,e[a].v,0,0,this),this.k=n.k||this.k,this.dataProps[a]={n:e[a].n,p:n};this.k||this.getValue(!0),this._isAnimated=this.k}function GradientProperty(t,e,o){this.data=e,this.c=createTypedArray("uint8c",4*e.p);var r=e.k.k[0].s?e.k.k[0].s.length-4*e.p:e.k.k.length-4*e.p;this.o=createTypedArray("float32",r),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=r,this.initDynamicPropertyContainer(o),this.prop=PropertyFactory.getProp(t,e.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(t){var e;this.closed||(t.sh.container.addDynamicProperty(t.sh),e={shape:t.sh,data:t,localShapeCollection:shapeCollectionPool.newShapeCollection()},this.shapes.push(e),this.addShapeToModifier(e),this._isAnimated&&t.setAsAnimated())},ShapeModifier.prototype.init=function(t,e){this.shapes=[],this.elem=t,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(t,e){this.s=PropertyFactory.getProp(t,e.s,0,.01,this),this.e=PropertyFactory.getProp(t,e.e,0,.01,this),this.o=PropertyFactory.getProp(t,e.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=e.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(t){t.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(t,e,o,r,n){var i=[];e<=1?i.push({s:t,e:e}):1<=t?i.push({s:t-1,e:e-1}):(i.push({s:t,e:1}),i.push({s:0,e:e-1}));for(var a,s,l=[],h=i.length,c=0;c<h;c+=1)(s=i[c]).e*n<r||s.s*n>r+o||(a=s.s*n<=r?0:(s.s*n-r)/o,s=s.e*n>=r+o?1:(s.e*n-r)/o,l.push([a,s]));return l.length||l.push([0,0]),l},TrimModifier.prototype.releasePathsData=function(t){for(var e=t.length,o=0;o<e;o+=1)segmentsLengthPool.release(t[o]);return t.length=0,t},TrimModifier.prototype.processShapes=function(t){var e,o,r,n;this._mdf||t?((e=this.o.v%360/360)<0&&(e+=1),o=1<this.s.v?1+e:this.s.v<0?0+e:this.s.v+e,(r=1<this.e.v?1+e:this.e.v<0?0+e:this.e.v+e)<o&&(e=o,o=r,r=e),o=1e-4*Math.round(1e4*o),r=1e-4*Math.round(1e4*r),this.sValue=o,this.eValue=r):(o=this.sValue,r=this.eValue);var i,a,s,l,h,c=this.shapes.length,u=0;if(r===o)for(m=0;m<c;m+=1)this.shapes[m].localShapeCollection.releaseShapes(),this.shapes[m].shape._mdf=!0,this.shapes[m].shape.paths=this.shapes[m].localShapeCollection,this._mdf&&(this.shapes[m].pathsData.length=0);else if(1===r&&0===o||0===r&&1===o){if(this._mdf)for(m=0;m<c;m+=1)this.shapes[m].pathsData.length=0,this.shapes[m].shape._mdf=!0}else{for(var p,d,f=[],m=0;m<c;m+=1)if((p=this.shapes[m]).shape._mdf||this._mdf||t||2===this.m){if(a=(n=p.shape.paths)._length,h=0,!p.shape._mdf&&p.pathsData.length)h=p.totalShapeLength;else{for(s=this.releasePathsData(p.pathsData),i=0;i<a;i+=1)l=bez.getSegmentsLength(n.shapes[i]),s.push(l),h+=l.totalLength;p.totalShapeLength=h,p.pathsData=s}u+=h,p.shape._mdf=!0}else p.shape.paths=p.localShapeCollection;var g,v=o,y=r,S=0;for(m=c-1;0<=m;--m)if((p=this.shapes[m]).shape._mdf){for((d=p.localShapeCollection).releaseShapes(),2===this.m&&1<c?(g=this.calculateShapeEdges(o,r,p.totalShapeLength,S,u),S+=p.totalShapeLength):g=[[v,y]],a=g.length,i=0;i<a;i+=1){v=g[i][0],y=g[i][1],f.length=0,y<=1?f.push({s:p.totalShapeLength*v,e:p.totalShapeLength*y}):1<=v?f.push({s:p.totalShapeLength*(v-1),e:p.totalShapeLength*(y-1)}):(f.push({s:p.totalShapeLength*v,e:p.totalShapeLength}),f.push({s:0,e:p.totalShapeLength*(y-1)}));var b,E=this.addShapes(p,f[0]);f[0].s!==f[0].e&&(1<f.length&&(E=p.shape.paths.shapes[p.shape.paths._length-1].c?(b=E.pop(),this.addPaths(E,d),this.addShapes(p,f[1],b)):(this.addPaths(E,d),this.addShapes(p,f[1]))),this.addPaths(E,d))}p.shape.paths=d}}},TrimModifier.prototype.addPaths=function(t,e){for(var o=t.length,r=0;r<o;r+=1)e.addShape(t[r])},TrimModifier.prototype.addSegment=function(t,e,o,r,n,i,a){n.setXYAt(e[0],e[1],"o",i),n.setXYAt(o[0],o[1],"i",i+1),a&&n.setXYAt(t[0],t[1],"v",i),n.setXYAt(r[0],r[1],"v",i+1)},TrimModifier.prototype.addSegmentFromArray=function(t,e,o,r){e.setXYAt(t[1],t[5],"o",o),e.setXYAt(t[2],t[6],"i",o+1),r&&e.setXYAt(t[0],t[4],"v",o),e.setXYAt(t[3],t[7],"v",o+1)},TrimModifier.prototype.addShapes=function(t,e,o){var r,n,i,a,s,l,h,c,u=t.pathsData,p=t.shape.paths.shapes,d=t.shape.paths._length,f=0,m=[],g=!0,v=o?(a=o._length,o._length):(o=shapePool.newElement(),a=0);for(m.push(o),r=0;r<d;r+=1){for(s=u[r].lengths,o.c=p[r].c,i=p[r].c?s.length:s.length+1,n=1;n<i;n+=1)if(f+(c=s[n-1]).addedLength<e.s)f+=c.addedLength,o.c=!1;else{if(f>e.e){o.c=!1;break}e.s<=f&&e.e>=f+c.addedLength?(this.addSegment(p[r].v[n-1],p[r].o[n-1],p[r].i[n],p[r].v[n],o,a,g),g=!1):(l=bez.getNewSegment(p[r].v[n-1],p[r].v[n],p[r].o[n-1],p[r].i[n],(e.s-f)/c.addedLength,(e.e-f)/c.addedLength,s[n-1]),this.addSegmentFromArray(l,o,a,g),o.c=g=!1),f+=c.addedLength,a+=1}if(p[r].c&&s.length&&(c=s[n-1],f<=e.e?(h=s[n-1].addedLength,e.s<=f&&e.e>=f+h?(this.addSegment(p[r].v[n-1],p[r].o[n-1],p[r].i[0],p[r].v[0],o,a,g),g=!1):(l=bez.getNewSegment(p[r].v[n-1],p[r].v[0],p[r].o[n-1],p[r].i[0],(e.s-f)/h,(e.e-f)/h,s[n-1]),this.addSegmentFromArray(l,o,a,g),o.c=g=!1)):o.c=!1,f+=c.addedLength,a+=1),o._length&&(o.setXYAt(o.v[v][0],o.v[v][1],"i",v),o.setXYAt(o.v[o._length-1][0],o.v[o._length-1][1],"o",o._length-1)),f>e.e)break;r<d-1&&(o=shapePool.newElement(),g=!0,m.push(o),a=0)}return m},ShapeModifiers.registerModifier("tm",TrimModifier),extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(t,e.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(t,e){var o=shapePool.newElement();o.c=t.c;for(var r,n,i,a,s,l,h,c,u,p,d=t._length,f=0,m=0;m<d;m+=1)r=t.v[m],i=t.o[m],n=t.i[m],r[0]===i[0]&&r[1]===i[1]&&r[0]===n[0]&&r[1]===n[1]?0!==m&&m!==d-1||t.c?(a=0===m?t.v[d-1]:t.v[m-1],l=(s=Math.sqrt(Math.pow(r[0]-a[0],2)+Math.pow(r[1]-a[1],2)))?Math.min(s/2,e)/s:0,u=r[0]+(a[0]-r[0])*l,p=r[1]-(r[1]-a[1])*l,h=u-(u-r[0])*roundCorner,c=p-(p-r[1])*roundCorner,o.setTripleAt(u,p,h,c,u,p,f),f+=1,a=m===d-1?t.v[0]:t.v[m+1],l=(s=Math.sqrt(Math.pow(r[0]-a[0],2)+Math.pow(r[1]-a[1],2)))?Math.min(s/2,e)/s:0,h=r[0]+(a[0]-r[0])*l,c=r[1]+(a[1]-r[1])*l,u=h-(h-r[0])*roundCorner,p=c-(c-r[1])*roundCorner,o.setTripleAt(h,c,h,c,u,p,f)):o.setTripleAt(r[0],r[1],i[0],i[1],n[0],n[1],f):o.setTripleAt(t.v[m][0],t.v[m][1],t.o[m][0],t.o[m][1],t.i[m][0],t.i[m][1],f),f+=1;return o},RoundCornersModifier.prototype.processShapes=function(t){var e,o,r,n=this.shapes.length,i=this.rd.v;if(0!==i)for(var a,s,l=0;l<n;l+=1){if(s=(a=this.shapes[l]).localShapeCollection,a.shape._mdf||this._mdf||t)for(s.releaseShapes(),a.shape._mdf=!0,e=a.shape.paths.shapes,r=a.shape.paths._length,o=0;o<r;o+=1)s.addShape(this.processPath(e[o],i));a.shape.paths=a.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},ShapeModifiers.registerModifier("rd",RoundCornersModifier),extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(t,e.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(t,e){for(var o=e/100,r=[0,0],n=t._length,i=0,i=0;i<n;i+=1)r[0]+=t.v[i][0],r[1]+=t.v[i][1];r[0]/=n,r[1]/=n;var a,s,l,h,c,u,p=shapePool.newElement();for(p.c=t.c,i=0;i<n;i+=1)a=t.v[i][0]+(r[0]-t.v[i][0])*o,s=t.v[i][1]+(r[1]-t.v[i][1])*o,l=t.o[i][0]+(r[0]-t.o[i][0])*-o,h=t.o[i][1]+(r[1]-t.o[i][1])*-o,c=t.i[i][0]+(r[0]-t.i[i][0])*-o,u=t.i[i][1]+(r[1]-t.i[i][1])*-o,p.setTripleAt(a,s,l,h,c,u,i);return p},PuckerAndBloatModifier.prototype.processShapes=function(t){var e,o,r,n=this.shapes.length,i=this.amount.v;if(0!==i)for(var a,s,l=0;l<n;l+=1){if(s=(a=this.shapes[l]).localShapeCollection,a.shape._mdf||this._mdf||t)for(s.releaseShapes(),a.shape._mdf=!0,e=a.shape.paths.shapes,r=a.shape.paths._length,o=0;o<r;o+=1)s.addShape(this.processPath(e[o],i));a.shape.paths=a.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(t,e.c,0,null,this),this.o=PropertyFactory.getProp(t,e.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(t,e.tr,this),this.so=PropertyFactory.getProp(t,e.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(t,e.tr.eo,0,.01,this),this.data=e,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(t,e,o,r,n,i){var a=i?-1:1,s=r.s.v[0]+(1-r.s.v[0])*(1-n),l=r.s.v[1]+(1-r.s.v[1])*(1-n);t.translate(r.p.v[0]*a*n,r.p.v[1]*a*n,r.p.v[2]),e.translate(-r.a.v[0],-r.a.v[1],r.a.v[2]),e.rotate(-r.r.v*a*n),e.translate(r.a.v[0],r.a.v[1],r.a.v[2]),o.translate(-r.a.v[0],-r.a.v[1],r.a.v[2]),o.scale(i?1/s:s,i?1/l:l),o.translate(r.a.v[0],r.a.v[1],r.a.v[2])},RepeaterModifier.prototype.init=function(t,e,o,r){for(this.elem=t,this.arr=e,this.pos=o,this.elemsData=r,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e[o]);0<o;)this._elements.unshift(e[--o]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(t){for(var e=t.length,o=0;o<e;o+=1)t[o]._processed=!1,"gr"===t[o].ty&&this.resetElements(t[o].it)},RepeaterModifier.prototype.cloneElements=function(t){t=JSON.parse(JSON.stringify(t));return this.resetElements(t),t},RepeaterModifier.prototype.changeGroupRender=function(t,e){for(var o=t.length,r=0;r<o;r+=1)t[r]._render=e,"gr"===t[r].ty&&this.changeGroupRender(t[r].it,e)},RepeaterModifier.prototype.processShapes=function(t){var e,o,r,n,i,a=!1;if(this._mdf||t){var s,l=Math.ceil(this.c.v);if(this._groups.length<l){for(;this._groups.length<l;){var h={it:this.cloneElements(this._elements),ty:"gr"};h.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,h),this._groups.splice(0,0,h),this._currentCopies+=1}this.elem.reloadShapes(),a=!0}for(r=i=0;r<=this._groups.length-1;r+=1)this._groups[r]._render=s=i<l,this.changeGroupRender(this._groups[r].it,s),s||(0!==(s=(s=this.elemsData[r].it)[s.length-1]).transform.op.v?(s.transform.op._mdf=!0,s.transform.op.v=0):s.transform.op._mdf=!1),i+=1;this._currentCopies=l;var c=this.o.v,t=c%1,u=0<c?Math.floor(c):Math.ceil(c),p=this.pMatrix.props,d=this.rMatrix.props,f=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var m,g,v=0;if(0<c){for(;v<u;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),v+=1;t&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,t,!1),v+=t)}else if(c<0){for(;u<v;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),--v;t&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-t,!0),v-=t)}for(r=1===this.data.m?0:this._currentCopies-1,n=1===this.data.m?1:-1,i=this._currentCopies;i;){if(g=(o=(e=this.elemsData[r].it)[e.length-1].transform.mProps.v.props).length,e[e.length-1].transform.mProps._mdf=!0,e[e.length-1].transform.op._mdf=!0,e[e.length-1].transform.op.v=1===this._currentCopies?this.so.v:this.so.v+(this.eo.v-this.so.v)*(r/(this._currentCopies-1)),0!==v){for((0!==r&&1===n||r!==this._currentCopies-1&&-1===n)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15]),this.matrix.transform(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15]),this.matrix.transform(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15]),m=0;m<g;m+=1)o[m]=this.matrix.props[m];this.matrix.reset()}else for(this.matrix.reset(),m=0;m<g;m+=1)o[m]=this.matrix.props[m];v+=1,--i,r+=n}}else for(i=this._currentCopies,r=0,n=1;i;)o=(e=this.elemsData[r].it)[e.length-1].transform.mProps.v.props,e[e.length-1].transform.mProps._mdf=!1,e[e.length-1].transform.op._mdf=!1,--i,r+=n;return a},RepeaterModifier.prototype.addShape=function(){},ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeCollection.prototype.addShape=function(t){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=t,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){for(var t=0;t<this._length;t+=1)shapePool.release(this.shapes[t]);this._length=0},DashProperty.prototype.getValue=function(t){if((this.elem.globalData.frameId!==this.frameId||t)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||t,this._mdf)){var e=0,o=this.dataProps.length;for("svg"===this.renderer&&(this.dashStr=""),e=0;e<o;e+=1)"o"!==this.dataProps[e].n?"svg"===this.renderer?this.dashStr+=" "+this.dataProps[e].p.v:this.dashArray[e]=this.dataProps[e].p.v:this.dashoffset[0]=this.dataProps[e].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),GradientProperty.prototype.comparePoints=function(t,e){for(var o=0,r=this.o.length/2;o<r;){if(.01<Math.abs(t[4*o]-t[4*e+2*o]))return!1;o+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var t=0,e=this.data.k.k.length;t<e;){if(!this.comparePoints(this.data.k.k[t].s,this.data.p))return!1;t+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(t){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||t){for(var e,o,r=4*this.data.p,n=0;n<r;n+=1)e=n%4==0?100:255,o=Math.round(this.prop.v[n]*e),this.c[n]!==o&&(this.c[n]=o,this._cmdf=!t);if(this.o.length)for(r=this.prop.v.length,n=4*this.data.p;n<r;n+=1)e=n%2==0?100:1,o=n%2==0?Math.round(100*this.prop.v[n]):this.prop.v[n],this.o[n-4*this.data.p]!==o&&(this.o[n-4*this.data.p]=o,this._omdf=!t);this._mdf=!t}},extendPrototype([DynamicPropertyContainer],GradientProperty);var buildShapeString=function(t,e,o,r){if(0===e)return"";for(var n=t.o,i=t.i,a=t.v,s=" M"+r.applyToPointStringified(a[0][0],a[0][1]),l=1;l<e;l+=1)s+=" C"+r.applyToPointStringified(n[l-1][0],n[l-1][1])+" "+r.applyToPointStringified(i[l][0],i[l][1])+" "+r.applyToPointStringified(a[l][0],a[l][1]);return o&&e&&(s+=" C"+r.applyToPointStringified(n[l-1][0],n[l-1][1])+" "+r.applyToPointStringified(i[0][0],i[0][1])+" "+r.applyToPointStringified(a[0][0],a[0][1]),s+="z"),s},audioControllerFactory=(Mb1.prototype={addAudio:function(t){this.audios.push(t)},pause:function(){for(var t=this.audios.length,e=0;e<t;e+=1)this.audios[e].pause()},resume:function(){for(var t=this.audios.length,e=0;e<t;e+=1)this.audios[e].resume()},setRate:function(t){for(var e=this.audios.length,o=0;o<e;o+=1)this.audios[o].setRate(t)},createAudio:function(t){return this.audioFactory?this.audioFactory(t):Howl?new Howl({src:[t]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(t){this.audioFactory=t},setVolume:function(t){this._volume=t,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){for(var t=this.audios.length,e=0;e<t;e+=1)this.audios[e].volume(this._volume*(this._isMuted?0:1))}},function(){return new Mb1});function Mb1(t){this.audios=[],this.audioFactory=t,this._volume=1,this._isMuted=!1}var ImagePreloader=(_b1=function(){var t=createTag("canvas");t.width=1,t.height=1;var e=t.getContext("2d");return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),t}(),p11.prototype={loadAssets:function(t,e){this.imagesLoadedCb=e;for(var o=t.length,r=0;r<o;r+=1)t[r].layers||(t[r].t&&"seq"!==t[r].t?3===t[r].t&&(this.totalFootages+=1,this.images.push(this.createFootageData(t[r]))):(this.totalImages+=1,this.images.push(this._createImageData(t[r]))))},setAssetsPath:function(t){this.assetsPath=t||""},setPath:function(t){this.path=t||""},loadedImages:function(){return this.totalImages===this.loadedAssets},loadedFootages:function(){return this.totalFootages===this.loadedFootagesCount},destroy:function(){this.imagesLoadedCb=null,this.images.length=0},getAsset:function(t){for(var e=0,o=this.images.length;e<o;){if(this.images[e].assetData===t)return this.images[e].img;e+=1}return null},createImgData:function(t){var e=c11(t,this.assetsPath,this.path),o=createTag("img");o.crossOrigin="anonymous",o.addEventListener("load",this._imageLoaded,!1),o.addEventListener("error",function(){r.img=_b1,this._imageLoaded()}.bind(this),!1),o.src=e;var r={img:o,assetData:t};return r},createImageData:function(t){var e=c11(t,this.assetsPath,this.path),o=createNS("image");isSafari?this.testImageLoaded(o):o.addEventListener("load",this._imageLoaded,!1),o.addEventListener("error",function(){r.img=_b1,this._imageLoaded()}.bind(this),!1),o.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this._elementHelper.append?this._elementHelper.append(o):this._elementHelper.appendChild(o);var r={img:o,assetData:t};return r},imageLoaded:a11,footageLoaded:b11,setCacheType:function(t,e){"svg"===t?(this._elementHelper=e,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}},p11),_b1;function a11(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function b11(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function c11(t,e,o){var r="";return t.e?r=t.p:e?r=e+(e=-1!==(e=t.p).indexOf("images/")?e.split("/")[1]:e):(r=o,r+=t.u||"",r+=t.p),r}function p11(){this._imageLoaded=a11.bind(this),this._footageLoaded=b11.bind(this),this.testImageLoaded=function(t){var e=0,o=setInterval(function(){(t.getBBox().width||500<e)&&(this._imageLoaded(),clearInterval(o)),e+=1}.bind(this),50)}.bind(this),this.createFootageData=function(t){var e={assetData:t},t=c11(t,this.assetsPath,this.path);return assetLoader.load(t,function(t){e.img=t,this._footageLoaded()}.bind(this),function(){e.img={},this._footageLoaded()}.bind(this)),e}.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}var featureSupport=(Y11={maskType:!0},(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(Y11.maskType=!1),Y11),Y11,filtersFactory=(Z11={},Z11.createFilter=function(t,e){var o=createNS("filter");o.setAttribute("id",t),!0!==e&&(o.setAttribute("filterUnits","objectBoundingBox"),o.setAttribute("x","0%"),o.setAttribute("y","0%"),o.setAttribute("width","100%"),o.setAttribute("height","100%"));return o},Z11.createAlphaToLuminanceFilter=function(){var t=createNS("feColorMatrix");return t.setAttribute("type","matrix"),t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),t},Z11),Z11,assetLoader={load:function(t,e,o){var r,n=new XMLHttpRequest;try{n.responseType="json"}catch(t){}n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status)r=ec1(n),e(r);else try{r=ec1(n),e(r)}catch(t){o&&o(t)}},n.open("GET",t,!0),n.send()}};function ec1(t){return t.response&&"object"==typeof t.response?t.response:t.response&&"string"==typeof t.response?JSON.parse(t.response):t.responseText?JSON.parse(t.responseText):null}function TextAnimatorProperty(t,e,o){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=t,this._renderType=e,this._elem=o,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(o)}function TextAnimatorDataProperty(t,e,o){var r={propType:!1},n=PropertyFactory.getProp,i=e.a;this.a={r:i.r?n(t,i.r,0,degToRads,o):r,rx:i.rx?n(t,i.rx,0,degToRads,o):r,ry:i.ry?n(t,i.ry,0,degToRads,o):r,sk:i.sk?n(t,i.sk,0,degToRads,o):r,sa:i.sa?n(t,i.sa,0,degToRads,o):r,s:i.s?n(t,i.s,1,.01,o):r,a:i.a?n(t,i.a,1,0,o):r,o:i.o?n(t,i.o,0,.01,o):r,p:i.p?n(t,i.p,1,0,o):r,sw:i.sw?n(t,i.sw,0,0,o):r,sc:i.sc?n(t,i.sc,1,0,o):r,fc:i.fc?n(t,i.fc,1,0,o):r,fh:i.fh?n(t,i.fh,0,0,o):r,fs:i.fs?n(t,i.fs,0,.01,o):r,fb:i.fb?n(t,i.fb,0,.01,o):r,t:i.t?n(t,i.t,0,0,o):r},this.s=TextSelectorProp.getTextSelectorProp(t,e.s,o),this.s.t=e.s.t}function LetterProps(t,e,o,r,n,i){this.o=t,this.sw=e,this.sc=o,this.fc=r,this.m=n,this.p=i,this._mdf={o:!0,sw:!!e,sc:!!o,fc:!!r,m:!0,p:!0}}function TextProperty(t,e){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,this.data=e,this.elem=t,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextAnimatorProperty.prototype.searchProperties=function(){for(var t,e=this._textData.a.length,o=PropertyFactory.getProp,r=0;r<e;r+=1)t=this._textData.a[r],this._animatorsData[r]=new TextAnimatorDataProperty(this._elem,t,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:o(this._elem,this._textData.p.a,0,0,this),f:o(this._elem,this._textData.p.f,0,0,this),l:o(this._elem,this._textData.p.l,0,0,this),r:o(this._elem,this._textData.p.r,0,0,this),p:o(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=o(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(t,e){if(this.lettersChangedFlag=e,this._mdf||this._isFirstFrame||e||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var o,r,n,i,a,s,l,h,c,u,p,d,f,m=this._moreOptions.alignment.v,g=this._animatorsData,v=this._textData,y=this.mHelper,S=this._renderType,b=this.renderedLetters.length,E=t.l;if(this._hasMaskedPath){if(f=this._pathData.m,!this._pathData.n||this._pathData._mdf){for(var w,T=f.v,x={tLength:0,segments:[]},P=(T=this._pathData.r.v?T.reverse():T)._length-1,M=p=0;M<P;M+=1)w=bez.buildBezierData(T.v[M],T.v[M+1],[T.o[M][0]-T.v[M][0],T.o[M][1]-T.v[M][1]],[T.i[M+1][0]-T.v[M+1][0],T.i[M+1][1]-T.v[M+1][1]]),x.tLength+=w.segmentLength,x.segments.push(w),p+=w.segmentLength;M=P,f.v.c&&(w=bez.buildBezierData(T.v[M],T.v[0],[T.o[M][0]-T.v[M][0],T.o[M][1]-T.v[M][1]],[T.i[0][0]-T.v[0][0],T.i[0][1]-T.v[0][1]]),x.tLength+=w.segmentLength,x.segments.push(w),p+=w.segmentLength),this._pathData.pi=x}if(x=this._pathData.pi,o=this._pathData.f.v,a=1,i=!(n=s=0),c=x.segments,o<0&&f.v.c)for(x.tLength<Math.abs(o)&&(o=-Math.abs(o)%x.tLength),a=(h=c[s=c.length-1].points).length-1;o<0;)o+=h[a].partialLength,--a<0&&(a=(h=c[--s].points).length-1);l=(h=c[s].points)[a-1],u=(r=h[a]).partialLength}P=E.length;var D,C,k,R,I,A,_,F,O,L,H,B,V,N,z,U,G=0,j=0,X=1.2*t.finalSize*.714,W=!0,Y=g.length,K=-1,q=o,Z=s,J=a,Q=-1,$="",tt=this.defaultPropsArray;if(2===t.j||1===t.j){var et=0,ot=0,rt=2===t.j?-.5:-1,nt=0,it=!0;for(M=0;M<P;M+=1)if(E[M].n){for(et&&(et+=ot);nt<M;)E[nt].animatorJustifyOffset=et,nt+=1;it=!(et=0)}else{for(st=0;st<Y;st+=1)(D=g[st].a).t.propType&&(it&&2===t.j&&(ot+=D.t.v*rt),(k=g[st].s.getMult(E[M].anIndexes[st],v.a[st].s.totalChars)).length?et+=D.t.v*k[0]*rt:et+=D.t.v*k*rt);it=!1}for(et&&(et+=ot);nt<M;)E[nt].animatorJustifyOffset=et,nt+=1}for(M=0;M<P;M+=1){if(y.reset(),_=1,E[M].n)G=0,j+=t.yOffset,j+=W?1:0,o=q,W=!1,this._hasMaskedPath&&(l=(h=c[s=Z].points)[(a=J)-1],u=(r=h[a]).partialLength,n=0),z=B=N=$="",tt=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Q!==E[M].line){switch(t.j){case 1:o+=p-t.lineWidths[E[M].line];break;case 2:o+=(p-t.lineWidths[E[M].line])/2}Q=E[M].line}K!==E[M].ind&&(E[K]&&(o+=E[K].extra),o+=E[M].an/2,K=E[M].ind),o+=m[0]*E[M].an*.005;for(var at=0,st=0;st<Y;st+=1)(D=g[st].a).p.propType&&((k=g[st].s.getMult(E[M].anIndexes[st],v.a[st].s.totalChars)).length?at+=D.p.v[0]*k[0]:at+=D.p.v[0]*k),D.a.propType&&((k=g[st].s.getMult(E[M].anIndexes[st],v.a[st].s.totalChars)).length?at+=D.a.v[0]*k[0]:at+=D.a.v[0]*k);for(i=!0,this._pathData.a.v&&(o=.5*E[0].an+(p-this._pathData.f.v-.5*E[0].an-.5*E[E.length-1].an)*K/(P-1),o+=this._pathData.f.v);i;)o+at<=n+u||!h?(d=(o+at-n)/r.partialLength,I=l.point[0]+(r.point[0]-l.point[0])*d,A=l.point[1]+(r.point[1]-l.point[1])*d,y.translate(-m[0]*E[M].an*.005,-m[1]*X*.01),i=!1):h&&(n+=r.partialLength,(a+=1)>=h.length&&(a=0,h=c[s+=1]?c[s].points:f.v.c?c[s=a=0].points:(n-=r.partialLength,null)),h&&(l=r,u=(r=h[a]).partialLength));R=E[M].an/2-E[M].add,y.translate(-R,0,0)}else R=E[M].an/2-E[M].add,y.translate(-R,0,0),y.translate(-m[0]*E[M].an*.005,-m[1]*X*.01,0);for(st=0;st<Y;st+=1)(D=g[st].a).t.propType&&(k=g[st].s.getMult(E[M].anIndexes[st],v.a[st].s.totalChars),0===G&&0===t.j||(this._hasMaskedPath?k.length?o+=D.t.v*k[0]:o+=D.t.v*k:k.length?G+=D.t.v*k[0]:G+=D.t.v*k));for(t.strokeWidthAnim&&(O=t.sw||0),t.strokeColorAnim&&(F=t.sc?[t.sc[0],t.sc[1],t.sc[2]]:[0,0,0]),t.fillColorAnim&&t.fc&&(L=[t.fc[0],t.fc[1],t.fc[2]]),st=0;st<Y;st+=1)(D=g[st].a).a.propType&&((k=g[st].s.getMult(E[M].anIndexes[st],v.a[st].s.totalChars)).length?y.translate(-D.a.v[0]*k[0],-D.a.v[1]*k[1],D.a.v[2]*k[2]):y.translate(-D.a.v[0]*k,-D.a.v[1]*k,D.a.v[2]*k));for(st=0;st<Y;st+=1)(D=g[st].a).s.propType&&((k=g[st].s.getMult(E[M].anIndexes[st],v.a[st].s.totalChars)).length?y.scale(1+(D.s.v[0]-1)*k[0],1+(D.s.v[1]-1)*k[1],1):y.scale(1+(D.s.v[0]-1)*k,1+(D.s.v[1]-1)*k,1));for(st=0;st<Y;st+=1){if(D=g[st].a,k=g[st].s.getMult(E[M].anIndexes[st],v.a[st].s.totalChars),D.sk.propType&&(k.length?y.skewFromAxis(-D.sk.v*k[0],D.sa.v*k[1]):y.skewFromAxis(-D.sk.v*k,D.sa.v*k)),D.r.propType&&(k.length?y.rotateZ(-D.r.v*k[2]):y.rotateZ(-D.r.v*k)),D.ry.propType&&(k.length?y.rotateY(D.ry.v*k[1]):y.rotateY(D.ry.v*k)),D.rx.propType&&(k.length?y.rotateX(D.rx.v*k[0]):y.rotateX(D.rx.v*k)),D.o.propType&&(k.length?_+=(D.o.v*k[0]-_)*k[0]:_+=(D.o.v*k-_)*k),t.strokeWidthAnim&&D.sw.propType&&(k.length?O+=D.sw.v*k[0]:O+=D.sw.v*k),t.strokeColorAnim&&D.sc.propType)for(H=0;H<3;H+=1)k.length?F[H]+=(D.sc.v[H]-F[H])*k[0]:F[H]+=(D.sc.v[H]-F[H])*k;if(t.fillColorAnim&&t.fc){if(D.fc.propType)for(H=0;H<3;H+=1)k.length?L[H]+=(D.fc.v[H]-L[H])*k[0]:L[H]+=(D.fc.v[H]-L[H])*k;D.fh.propType&&(L=k.length?addHueToRGB(L,D.fh.v*k[0]):addHueToRGB(L,D.fh.v*k)),D.fs.propType&&(L=k.length?addSaturationToRGB(L,D.fs.v*k[0]):addSaturationToRGB(L,D.fs.v*k)),D.fb.propType&&(L=k.length?addBrightnessToRGB(L,D.fb.v*k[0]):addBrightnessToRGB(L,D.fb.v*k))}}for(st=0;st<Y;st+=1)(D=g[st].a).p.propType&&(k=g[st].s.getMult(E[M].anIndexes[st],v.a[st].s.totalChars),this._hasMaskedPath?k.length?y.translate(0,D.p.v[1]*k[0],-D.p.v[2]*k[1]):y.translate(0,D.p.v[1]*k,-D.p.v[2]*k):k.length?y.translate(D.p.v[0]*k[0],D.p.v[1]*k[1],-D.p.v[2]*k[2]):y.translate(D.p.v[0]*k,D.p.v[1]*k,-D.p.v[2]*k));if(t.strokeWidthAnim&&(B=O<0?0:O),t.strokeColorAnim&&(V="rgb("+Math.round(255*F[0])+","+Math.round(255*F[1])+","+Math.round(255*F[2])+")"),t.fillColorAnim&&t.fc&&(N="rgb("+Math.round(255*L[0])+","+Math.round(255*L[1])+","+Math.round(255*L[2])+")"),this._hasMaskedPath)y.translate(0,-t.ls),y.translate(0,m[1]*X*.01+j,0),this._pathData.p.v&&(U=(r.point[1]-l.point[1])/(r.point[0]-l.point[0]),U=180*Math.atan(U)/Math.PI,r.point[0]<l.point[0]&&(U+=180),y.rotate(-U*Math.PI/180)),y.translate(I,A,0),o-=m[0]*E[M].an*.005,E[M+1]&&K!==E[M+1].ind&&(o+=E[M].an/2,o+=.001*t.tr*t.finalSize);else{switch(y.translate(G,j,0),t.ps&&y.translate(t.ps[0],t.ps[1]+t.ascent,0),t.j){case 1:y.translate(E[M].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[E[M].line]),0,0);break;case 2:y.translate(E[M].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[E[M].line])/2,0,0)}y.translate(0,-t.ls),y.translate(R,0,0),y.translate(m[0]*E[M].an*.005,m[1]*X*.01,0),G+=E[M].l+.001*t.tr*t.finalSize}"html"===S?$=y.toCSS():"svg"===S?$=y.to2dCSS():tt=[y.props[0],y.props[1],y.props[2],y.props[3],y.props[4],y.props[5],y.props[6],y.props[7],y.props[8],y.props[9],y.props[10],y.props[11],y.props[12],y.props[13],y.props[14],y.props[15]],z=_}b<=M?(C=new LetterProps(z,B,V,N,$,tt),this.renderedLetters.push(C),b+=1,this.lettersChangedFlag=!0):(C=this.renderedLetters[M],this.lettersChangedFlag=C.update(z,B,V,N,$,tt)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),LetterProps.prototype.update=function(t,e,o,r,n,i){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1;var a=this._mdf.p=!1;return this.o!==t&&(this.o=t,a=this._mdf.o=!0),this.sw!==e&&(this.sw=e,a=this._mdf.sw=!0),this.sc!==o&&(this.sc=o,a=this._mdf.sc=!0),this.fc!==r&&(this.fc=r,a=this._mdf.fc=!0),this.m!==n&&(this.m=n,a=this._mdf.m=!0),!i.length||this.p[0]===i[0]&&this.p[1]===i[1]&&this.p[4]===i[4]&&this.p[5]===i[5]&&this.p[12]===i[12]&&this.p[13]===i[13]||(this.p=i,a=this._mdf.p=!0),a},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},TextProperty.prototype.setCurrentData=function(t){t.__complete||this.completeTextData(t),this.currentData=t,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=1<this.data.d.k.length,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(t){this.effectsSequence.push(t),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(t){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||t){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var e=this.currentData,o=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{this.lock=!0,this._mdf=!1;for(var r=this.effectsSequence.length,n=t||this.data.d.k[this.keysIndex].s,i=0;i<r;i+=1)n=o!==this.keysIndex?this.effectsSequence[i](n,n.t):this.effectsSequence[i](this.currentData,n.t);e!==n&&this.setCurrentData(n),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},TextProperty.prototype.getKeyframeValue=function(){for(var t=this.data.d.k,e=this.elem.comp.renderedFrame,o=0,r=t.length;o<=r-1&&!(o===r-1||t[o+1].t>e);)o+=1;return this.keysIndex!==o&&(this.keysIndex=o),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(t){for(var e,o,r=[],n=0,i=t.length,a=!1;n<i;)e=t.charCodeAt(n),FontManager.isCombinedCharacter(e)?r[r.length-1]+=t.charAt(n):55296<=e&&e<=56319?56320<=(o=t.charCodeAt(n+1))&&o<=57343?(a||FontManager.isModifier(e,o)?(r[r.length-1]+=t.substr(n,2),a=!1):r.push(t.substr(n,2)),n+=1):r.push(t.charAt(n)):56319<e?(o=t.charCodeAt(n+1),FontManager.isZeroWidthJoiner(e,o)?(a=!0,r[r.length-1]+=t.substr(n,2),n+=1):r.push(t.charAt(n))):FontManager.isZeroWidthJoiner(e)?(r[r.length-1]+=t.charAt(n),a=!0):r.push(t.charAt(n)),n+=1;return r},TextProperty.prototype.completeTextData=function(t){t.__complete=!0;var e,o,r,n=this.elem.globalData.fontManager,i=this.data,a=[],s=0,l=i.m.g,h=0,c=0,u=0,p=[],d=0,f=0,m=n.getFontByName(t.f),g=0,v=getFontProperties(m);t.fWeight=v.weight,t.fStyle=v.style,t.finalSize=t.s,t.finalText=this.buildFinalText(t.t),P=t.finalText.length,t.finalLineHeight=t.lh;var y,S=t.tr/1e3*t.finalSize;if(t.sz)for(var b=!0,E=t.sz[0],w=t.sz[1];b;){for(var T,x=0,d=0,P=(T=this.buildFinalText(t.t)).length,S=t.tr/1e3*t.finalSize,M=-1,D=0;D<P;D+=1)y=T[D].charCodeAt(0),e=!1," "===T[D]?M=D:13!==y&&3!==y||(e=!(d=0),x+=t.finalLineHeight||1.2*t.finalSize),E<d+(g=n.chars?(r=n.getCharData(T[D],m.fStyle,m.fFamily),e?0:r.w*t.finalSize/100):n.measureText(T[D],t.f,t.finalSize))&&" "!==T[D]?(-1===M?P+=1:D=M,x+=t.finalLineHeight||1.2*t.finalSize,T.splice(D,M===D?1:0,"\r"),M=-1,d=0):(d+=g,d+=S);x+=m.ascent*t.finalSize/100,this.canResize&&t.finalSize>this.minimumFontSize&&w<x?(--t.finalSize,t.finalLineHeight=t.finalSize*t.lh/t.s):(t.finalText=T,P=t.finalText.length,b=!1)}d=-S;var C,g=0,k=0;for(D=0;D<P;D+=1)if(e=!1,13===(y=(C=t.finalText[D]).charCodeAt(0))||3===y?(k=0,p.push(d),f=f<d?d:f,d=-2*S,e=!(o=""),u+=1):o=C,g=n.chars?(r=n.getCharData(C,m.fStyle,n.getFontByName(t.f).fFamily),e?0:r.w*t.finalSize/100):n.measureText(o,t.f,t.finalSize)," "===C?k+=g+S:(d+=g+S+k,k=0),a.push({l:g,an:g,add:h,n:e,anIndexes:[],val:o,line:u,animatorJustifyOffset:0}),2==l){if(h+=g,""===o||" "===o||D===P-1){for(""!==o&&" "!==o||(h-=g);c<=D;)a[c].an=h,a[c].ind=s,a[c].extra=g,c+=1;s+=1,h=0}}else if(3==l){if(h+=g,""===o||D===P-1){for(""===o&&(h-=g);c<=D;)a[c].an=h,a[c].ind=s,a[c].extra=g,c+=1;h=0,s+=1}}else a[s].ind=s,a[s].extra=0,s+=1;if(t.l=a,f=f<d?d:f,p.push(d),t.sz)t.boxWidth=t.sz[0],t.justifyOffset=0;else switch(t.boxWidth=f,t.j){case 1:t.justifyOffset=-t.boxWidth;break;case 2:t.justifyOffset=-t.boxWidth/2;break;default:t.justifyOffset=0}t.lineWidths=p;for(var R,I,A,_,F=i.a,O=F.length,L=[],H=0;H<O;H+=1){for((R=F[H]).a.sc&&(t.strokeColorAnim=!0),R.a.sw&&(t.strokeWidthAnim=!0),(R.a.fc||R.a.fh||R.a.fs||R.a.fb)&&(t.fillColorAnim=!0),A=R.s.b,D=_=0;D<P;D+=1)(I=a[D]).anIndexes[H]=_,(1==A&&""!==I.val||2==A&&""!==I.val&&" "!==I.val||3==A&&(I.n||" "==I.val||D==P-1)||4==A&&(I.n||D==P-1))&&(1===R.s.rn&&L.push(_),_+=1);i.a[H].s.totalChars=_;var B,V=-1;if(1===R.s.rn)for(D=0;D<P;D+=1)V!=(I=a[D]).anIndexes[H]&&(V=I.anIndexes[H],B=L.splice(Math.floor(Math.random()*L.length),1)[0]),I.anIndexes[H]=B}t.yOffset=t.finalLineHeight||1.2*t.finalSize,t.ls=t.ls||0,t.ascent=m.ascent*t.finalSize/100},TextProperty.prototype.updateDocumentData=function(t,e){e=void 0===e?this.keysIndex:e;var o=this.copyData({},this.data.d.k[e].s),o=this.copyData(o,t);this.data.d.k[e].s=o,this.recalculate(e),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(t){t=this.data.d.k[t].s;t.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(t)},TextProperty.prototype.canResizeFont=function(t){this.canResize=t,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(t){this.minimumFontSize=Math.floor(t)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=(n31=Math.max,o31=Math.min,p31=Math.floor,q31.prototype={getMult:function(t){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var e=0,o=0,r=1,n=1;0<this.ne.v?e=this.ne.v/100:o=-this.ne.v/100,0<this.xe.v?r=1-this.xe.v/100:n=1+this.xe.v/100;var i=BezierFactory.getBezierEasing(e,o,r,n).get,a=0,e=this.finalS,o=this.finalE,r=this.data.sh;return a=2===r?i(a=o===e?o<=t?1:0:n31(0,o31(.5/(o-e)+(t-e)/(o-e),1))):3===r?i(a=o===e?o<=t?0:1:1-n31(0,o31(.5/(o-e)+(t-e)/(o-e),1))):4===r?(o===e?a=0:(a=n31(0,o31(.5/(o-e)+(t-e)/(o-e),1)))<.5?a*=2:a=1-2*(a-.5),i(a)):i(a=5===r?o===e?0:(i=-(n=o-e)/2+(t=o31(n31(0,t+.5-e),o-e)),n=n/2,Math.sqrt(1-i*i/(n*n))):6===r?o===e?0:(t=o31(n31(0,t+.5-e),o-e),(1+Math.cos(Math.PI+2*Math.PI*t/(o-e)))/2):t>=p31(e)?n31(0,o31(t-e<0?o31(o,1)-(e-t):o-t,1)):a),100!==this.sm.v&&(a<(t=.5-.5*(o=0===(o=.01*this.sm.v)?1e-8:o))?a=0:1<(a=(a-t)/o)&&(a=1)),a*this.a.v},getValue:function(t){this.iterateDynamicProperties(),this._mdf=t||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,t&&2===this.data.r&&(this.e.v=this._currentTextLength);var e=2===this.data.r?1:100/this.data.totalChars,o=this.o.v/e,t=this.s.v/e+o,e=this.e.v/e+o;e<t&&(o=t,t=e,e=o),this.finalS=t,this.finalE=e}},extendPrototype([DynamicPropertyContainer],q31),{getTextSelectorProp:function(t,e,o){return new q31(t,e)}}),n31,o31,p31;function q31(t,e){this._currentTextLength=-1,this.k=!1,this.data=e,this.elem=t,this.comp=t.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(t),this.s=PropertyFactory.getProp(t,e.s||{k:0},0,0,this),"e"in e?this.e=PropertyFactory.getProp(t,e.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(t,e.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(t,e.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(t,e.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(t,e.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(t,e.a,0,.01,this),this.dynamicProperties.length||this.getValue()}var poolFactory=function(t,e,o){var r=0,n=t,i=createSizedArray(n);return{newElement:function(){var t;t=r?i[--r]:e();return t},release:function(t){r===n&&(i=pooling.double(i),n*=2);o&&o(t);i[r]=t,r+=1}}},pooling={double:function(t){return t.concat(createSizedArray(t.length))}},pointPool=poolFactory(8,function(){return createTypedArray("float32",2)}),shapePool=(he1=poolFactory(4,function(){return new ShapePath},function(t){for(var e=t._length,o=0;o<e;o+=1)pointPool.release(t.v[o]),pointPool.release(t.i[o]),pointPool.release(t.o[o]),t.v[o]=null,t.i[o]=null,t.o[o]=null;t._length=0,t.c=!1}),he1.clone=function(t){var e,o=he1.newElement(),r=void 0===t._length?t.v.length:t._length;for(o.setLength(r),o.c=t.c,e=0;e<r;e+=1)o.setTripleAt(t.v[e][0],t.v[e][1],t.o[e][0],t.o[e][1],t.i[e][0],t.i[e][1],e);return o},he1),he1,shapeCollectionPool=(pe1={newShapeCollection:function(){var t;t=qe1?se1[--qe1]:new ShapeCollection;return t},release:function(t){var e,o=t._length;for(e=0;e<o;e+=1)shapePool.release(t.shapes[e]);t._length=0,qe1===re1&&(se1=pooling.double(se1),re1*=2);se1[qe1]=t,qe1+=1}},qe1=0,re1=4,se1=createSizedArray(re1),pe1),pe1,qe1,re1,se1,segmentsLengthPool=poolFactory(8,function(){return{lengths:[],totalLength:0}},function(t){for(var e=t.lengths.length,o=0;o<e;o+=1)bezierLengthPool.release(t.lengths[o]);t.lengths.length=0}),bezierLengthPool=poolFactory(8,function(){return{addedLength:0,percents:createTypedArray("float32",defaultCurveSegments),lengths:createTypedArray("float32",defaultCurveSegments)}}),markerParser=function(e){for(var t=[],o=0;o<e.length;o+=1){var r=e[o],r={time:r.tm,duration:r.dr};try{r.payload=JSON.parse(e[o].cm)}catch(t){try{r.payload=function(t){for(var e,o=t.split("\r\n"),r={},n=0,i=0;i<o.length;i+=1)2===(e=o[i].split(":")).length&&(r[e[0]]=e[1].trim(),n+=1);if(0===n)throw new Error;return r}(e[o].cm)}catch(t){r.payload={name:e[o]}}}t.push(r)}return t};function BaseRenderer(){}function SVGRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var o,r="";e&&e.title&&(t=createNS("title"),o=createElementID(),t.setAttribute("id",o),t.textContent=e.title,this.svgElement.appendChild(t),r+=o),e&&e.description&&(o=createNS("desc"),n=createElementID(),o.setAttribute("id",n),o.textContent=e.description,this.svgElement.appendChild(o),r+=" "+n),r&&this.svgElement.setAttribute("aria-labelledby",r);var n=createNS("defs");this.svgElement.appendChild(n);r=createNS("g");this.svgElement.appendChild(r),this.layerElement=r,this.renderConfig={preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",progressiveLoad:e&&e.progressiveLoad||!1,hideOnTransparent:!(e&&!1===e.hideOnTransparent),viewBoxOnly:e&&e.viewBoxOnly||!1,viewBoxSize:e&&e.viewBoxSize||!1,className:e&&e.className||"",id:e&&e.id||"",focusable:e&&e.focusable,filterSize:{width:e&&e.filterSize&&e.filterSize.width||"100%",height:e&&e.filterSize&&e.filterSize.height||"100%",x:e&&e.filterSize&&e.filterSize.x||"0%",y:e&&e.filterSize&&e.filterSize.y||"0%"}},this.globalData={_mdf:!1,frameNum:-1,defs:n,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function CanvasRenderer(t,e){this.animationItem=t,this.renderConfig={clearCanvas:!e||void 0===e.clearCanvas||e.clearCanvas,context:e&&e.context||null,progressiveLoad:e&&e.progressiveLoad||!1,preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",className:e&&e.className||"",id:e&&e.id||""},this.renderConfig.dpr=e&&e.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=e&&e.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}function HybridRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(e&&!1===e.hideOnTransparent),filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function MaskElement(t,e,o){this.data=t,this.element=e,this.globalData=o,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var r,n=this.globalData.defs,i=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(i),this.solidPath="";for(var a,s,l,h,c=this.masksProperties,u=0,p=[],d=createElementID(),f="clipPath",m="clip-path",g=0;g<i;g+=1)if(("a"!==c[g].mode&&"n"!==c[g].mode||c[g].inv||100!==c[g].o.k||c[g].o.x)&&(m=f="mask"),"s"!==c[g].mode&&"i"!==c[g].mode||0!==u?a=null:((a=createNS("rect")).setAttribute("fill","#ffffff"),a.setAttribute("width",this.element.comp.data.w||0),a.setAttribute("height",this.element.comp.data.h||0),p.push(a)),r=createNS("path"),"n"===c[g].mode)this.viewData[g]={op:PropertyFactory.getProp(this.element,c[g].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,c[g],3),elem:r,lastPath:""},n.appendChild(r);else{if(u+=1,r.setAttribute("fill","s"===c[g].mode?"#000000":"#ffffff"),r.setAttribute("clip-rule","nonzero"),0!==c[g].x.k?(m=f="mask",l=PropertyFactory.getProp(this.element,c[g].x,0,null,this.element),h=createElementID(),(b=createNS("filter")).setAttribute("id",h),(s=createNS("feMorphology")).setAttribute("operator","erode"),s.setAttribute("in","SourceGraphic"),s.setAttribute("radius","0"),b.appendChild(s),n.appendChild(b),r.setAttribute("stroke","s"===c[g].mode?"#000000":"#ffffff")):l=s=null,this.storedData[g]={elem:r,x:l,expan:s,lastPath:"",lastOperator:"",filterId:h,lastRadius:0},"i"===c[g].mode){for(var v=p.length,y=createNS("g"),S=0;S<v;S+=1)y.appendChild(p[S]);var b=createNS("mask");b.setAttribute("mask-type","alpha"),b.setAttribute("id",d+"_"+u),b.appendChild(r),n.appendChild(b),y.setAttribute("mask","url("+locationHref+"#"+d+"_"+u+")"),p.length=0,p.push(y)}else p.push(r);c[g].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[g]={elem:r,lastPath:"",op:PropertyFactory.getProp(this.element,c[g].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,c[g],3),invRect:a},this.viewData[g].prop.k||this.drawPath(c[g],this.viewData[g].prop.v,this.viewData[g])}for(this.maskElement=createNS(f),i=p.length,g=0;g<i;g+=1)this.maskElement.appendChild(p[g]);0<u&&(this.maskElement.setAttribute("id",d),this.element.maskedElement.setAttribute(m,"url("+locationHref+"#"+d+")"),n.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}function HierarchyElement(){}function FrameElement(){}function TransformElement(){}function RenderableElement(){}function RenderableDOMElement(){}function ProcessedElement(t,e){this.elem=t,this.pos=e}function SVGStyleData(t,e){this.data=t,this.type=t.ty,this.d="",this.lvl=e,this._mdf=!1,this.closed=!0===t.hd,this.pElem=createNS("path"),this.msElem=null}function SVGShapeData(t,e,o){this.caches=[],this.styles=[],this.transformers=t,this.lStr="",this.sh=o,this.lvl=e,this._isAnimated=!!o.k;for(var r=0,n=t.length;r<n;){if(t[r].mProps.dynamicProperties.length){this._isAnimated=!0;break}r+=1}}function SVGTransformData(t,e,o){this.transform={mProps:t,op:e,container:o},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}function SVGStrokeStyleData(t,e,o){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=o,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(t,e,o){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=o}function SVGGradientFillStyleData(t,e,o){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.initGradientData(t,e,o)}function SVGGradientStrokeStyleData(t,e,o){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.initGradientData(t,e,o),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}BaseRenderer.prototype.checkLayers=function(t){var e,o,r=this.layers.length;for(this.completeLayers=!0,e=r-1;0<=e;--e)this.elements[e]||(o=this.layers[e]).ip-o.st<=t-this.layers[e].st&&o.op-o.st>t-this.layers[e].st&&this.buildItem(e),this.completeLayers=!!this.elements[e]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(t){switch(t.ty){case 2:return this.createImage(t);case 0:return this.createComp(t);case 1:return this.createSolid(t);case 3:return this.createNull(t);case 4:return this.createShape(t);case 5:return this.createText(t);case 6:return this.createAudio(t);case 13:return this.createCamera(t);case 15:return this.createFootage(t);default:return this.createNull(t)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(t){return new AudioElement(t,this.globalData,this)},BaseRenderer.prototype.createFootage=function(t){return new FootageElement(t,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){for(var t=this.layers.length,e=0;e<t;e+=1)this.buildItem(e);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(t){this.completeLayers=!1;for(var e,o=t.length,r=this.layers.length,n=0;n<o;n+=1)for(e=0;e<r;){if(this.layers[e].id===t[n].id){this.layers[e]=t[n];break}e+=1}},BaseRenderer.prototype.setProjectInterface=function(t){this.globalData.projectInterface=t},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(t,e,o){for(var r=this.elements,n=this.layers,i=0,a=n.length;i<a;)n[i].ind==e&&(r[i]&&!0!==r[i]?(o.push(r[i]),r[i].setAsParent(),void 0!==n[i].parent?this.buildElementParenting(t,n[i].parent,o):t.setHierarchy(o)):(this.buildItem(i),this.addPendingElement(t))),i+=1},BaseRenderer.prototype.addPendingElement=function(t){this.pendingElements.push(t)},BaseRenderer.prototype.searchExtraCompositions=function(t){for(var e,o=t.length,r=0;r<o;r+=1)t[r].xt&&((e=this.createComp(t[r])).initExpressions(),this.globalData.projectInterface.registerComposition(e))},BaseRenderer.prototype.setupGlobalData=function(t,e){this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(t.chars),this.globalData.fontManager.addFonts(t.fonts,e),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=t.fr,this.globalData.nm=t.nm,this.globalData.compSize={w:t.w,h:t.h}},extendPrototype([BaseRenderer],SVGRenderer),SVGRenderer.prototype.createNull=function(t){return new NullElement(t,this.globalData,this)},SVGRenderer.prototype.createShape=function(t){return new SVGShapeElement(t,this.globalData,this)},SVGRenderer.prototype.createText=function(t){return new SVGTextLottieElement(t,this.globalData,this)},SVGRenderer.prototype.createImage=function(t){return new IImageElement(t,this.globalData,this)},SVGRenderer.prototype.createComp=function(t){return new SVGCompElement(t,this.globalData,this)},SVGRenderer.prototype.createSolid=function(t){return new ISolidElement(t,this.globalData,this)},SVGRenderer.prototype.configAnimation=function(t){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+t.w+" "+t.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",t.w),this.svgElement.setAttribute("height",t.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)"),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),void 0!==this.renderConfig.focusable&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var e=this.globalData.defs;this.setupGlobalData(t,e),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=t;var o=createNS("clipPath"),r=createNS("rect");r.setAttribute("width",t.w),r.setAttribute("height",t.h),r.setAttribute("x",0),r.setAttribute("y",0);var n=createElementID();o.setAttribute("id",n),o.appendChild(r),this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+n+")"),e.appendChild(o),this.layers=t.layers,this.elements=createSizedArray(t.layers.length)},SVGRenderer.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;for(var t=this.layers?this.layers.length:0,e=0;e<t;e+=1)this.elements[e]&&this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRenderer.prototype.updateContainerSize=function(){},SVGRenderer.prototype.buildItem=function(t){var e,o=this.elements;o[t]||99===this.layers[t].ty||(o[t]=!0,e=this.createItem(this.layers[t]),o[t]=e,expressionsPlugin&&(0===this.layers[t].ty&&this.globalData.projectInterface.registerComposition(e),e.initExpressions()),this.appendElementInPos(e,t),this.layers[t].tt&&(this.elements[t-1]&&!0!==this.elements[t-1]?e.setMatte(o[t-1].layerId):(this.buildItem(t-1),this.addPendingElement(e))))},SVGRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();if(t.checkParenting(),t.data.tt)for(var e=0,o=this.elements.length;e<o;){if(this.elements[e]===t){t.setMatte(this.elements[e-1].layerId);break}e+=1}}},SVGRenderer.prototype.renderFrame=function(t){if(this.renderedFrame!==t&&!this.destroyed){var e;null===t?t=this.renderedFrame:this.renderedFrame=t,this.globalData.frameNum=t,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=t,this.globalData._mdf=!1;var o=this.layers.length;for(this.completeLayers||this.checkLayers(t),e=o-1;0<=e;--e)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(t-this.layers[e].st);if(this.globalData._mdf)for(e=0;e<o;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()}},SVGRenderer.prototype.appendElementInPos=function(t,e){t=t.getBaseElement();if(t){for(var o,r=0;r<e;)this.elements[r]&&!0!==this.elements[r]&&this.elements[r].getBaseElement()&&(o=this.elements[r].getBaseElement()),r+=1;o?this.layerElement.insertBefore(t,o):this.layerElement.appendChild(t)}},SVGRenderer.prototype.hide=function(){this.layerElement.style.display="none"},SVGRenderer.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseRenderer],CanvasRenderer),CanvasRenderer.prototype.createShape=function(t){return new CVShapeElement(t,this.globalData,this)},CanvasRenderer.prototype.createText=function(t){return new CVTextElement(t,this.globalData,this)},CanvasRenderer.prototype.createImage=function(t){return new CVImageElement(t,this.globalData,this)},CanvasRenderer.prototype.createComp=function(t){return new CVCompElement(t,this.globalData,this)},CanvasRenderer.prototype.createSolid=function(t){return new CVSolidElement(t,this.globalData,this)},CanvasRenderer.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRenderer.prototype.ctxTransform=function(t){var e;1===t[0]&&0===t[1]&&0===t[4]&&1===t[5]&&0===t[12]&&0===t[13]||(this.renderConfig.clearCanvas?(this.transformMat.cloneFromProps(t),e=this.contextData.cTr.props,this.transformMat.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]),this.contextData.cTr.cloneFromProps(this.transformMat.props),e=this.contextData.cTr.props,this.canvasContext.setTransform(e[0],e[1],e[4],e[5],e[12],e[13])):this.canvasContext.transform(t[0],t[1],t[4],t[5],t[12],t[13]))},CanvasRenderer.prototype.ctxOpacity=function(t){if(!this.renderConfig.clearCanvas)return this.canvasContext.globalAlpha*=t<0?0:t,void(this.globalData.currentGlobalAlpha=this.contextData.cO);this.contextData.cO*=t<0?0:t,this.globalData.currentGlobalAlpha!==this.contextData.cO&&(this.canvasContext.globalAlpha=this.contextData.cO,this.globalData.currentGlobalAlpha=this.contextData.cO)},CanvasRenderer.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRenderer.prototype.save=function(t){if(this.renderConfig.clearCanvas){t&&this.canvasContext.save();var e=this.contextData.cTr.props;this.contextData._length<=this.contextData.cArrPos&&this.contextData.duplicate();for(var o=this.contextData.saved[this.contextData.cArrPos],r=0;r<16;r+=1)o[r]=e[r];this.contextData.savedOp[this.contextData.cArrPos]=this.contextData.cO,this.contextData.cArrPos+=1}else this.canvasContext.save()},CanvasRenderer.prototype.restore=function(t){if(this.renderConfig.clearCanvas){t&&(this.canvasContext.restore(),this.globalData.blendMode="source-over"),--this.contextData.cArrPos;for(var e=this.contextData.saved[this.contextData.cArrPos],o=this.contextData.cTr.props,r=0;r<16;r+=1)o[r]=e[r];this.canvasContext.setTransform(e[0],e[1],e[4],e[5],e[12],e[13]),e=this.contextData.savedOp[this.contextData.cArrPos],this.contextData.cO=e,this.globalData.currentGlobalAlpha!==e&&(this.canvasContext.globalAlpha=e,this.globalData.currentGlobalAlpha=e)}else this.canvasContext.restore()},CanvasRenderer.prototype.configAnimation=function(t){var e,o;this.animationItem.wrapper?(this.animationItem.container=createTag("canvas"),(e=this.animationItem.container.style).width="100%",e.height="100%",e.transformOrigin=o="0px 0px 0px",e.mozTransformOrigin=o,e.webkitTransformOrigin=o,e["-webkit-transform"]=o,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)):this.canvasContext=this.renderConfig.context,this.data=t,this.layers=t.layers,this.transformCanvas={w:t.w,h:t.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(t,document.body),this.globalData.canvasContext=this.canvasContext,(this.globalData.renderer=this).globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(t.layers.length),this.updateContainerSize()},CanvasRenderer.prototype.updateContainerSize=function(){var t,e,o,r,n,i,a;this.reset(),this.animationItem.wrapper&&this.animationItem.container?(t=this.animationItem.wrapper.offsetWidth,e=this.animationItem.wrapper.offsetHeight,this.animationItem.container.setAttribute("width",t*this.renderConfig.dpr),this.animationItem.container.setAttribute("height",e*this.renderConfig.dpr)):(t=this.canvasContext.canvas.width*this.renderConfig.dpr,e=this.canvasContext.canvas.height*this.renderConfig.dpr),-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")?(o=(i=this.renderConfig.preserveAspectRatio.split(" "))[1]||"meet",r=(a=i[0]||"xMidYMid").substr(0,4),n=a.substr(4),(i=t/e)<(a=this.transformCanvas.w/this.transformCanvas.h)&&"meet"===o||a<i&&"slice"===o?(this.transformCanvas.sx=t/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=t/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=e/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=e/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx="xMid"===r&&(a<i&&"meet"===o||i<a&&"slice"===o)?(t-this.transformCanvas.w*(e/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===r&&(a<i&&"meet"===o||i<a&&"slice"===o)?(t-this.transformCanvas.w*(e/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty="YMid"===n&&(i<a&&"meet"===o||a<i&&"slice"===o)?(e-this.transformCanvas.h*(t/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===n&&(i<a&&"meet"===o||a<i&&"slice"===o)?(e-this.transformCanvas.h*(t/this.transformCanvas.w))*this.renderConfig.dpr:0):("none"===this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=t/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=e/(this.transformCanvas.h/this.renderConfig.dpr)):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0),this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRenderer.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");for(var t=(this.layers?this.layers.length:0)-1;0<=t;--t)this.elements[t]&&this.elements[t].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRenderer.prototype.renderFrame=function(t,e){if((this.renderedFrame!==t||!0!==this.renderConfig.clearCanvas||e)&&!this.destroyed&&-1!==t){var o;this.renderedFrame=t,this.globalData.frameNum=t-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||e,this.globalData.projectInterface.currentFrame=t;var r=this.layers.length;for(this.completeLayers||this.checkLayers(t),o=0;o<r;o+=1)(this.completeLayers||this.elements[o])&&this.elements[o].prepareFrame(t-this.layers[o].st);if(this.globalData._mdf){for(!0===this.renderConfig.clearCanvas?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),o=r-1;0<=o;--o)(this.completeLayers||this.elements[o])&&this.elements[o].renderFrame();!0!==this.renderConfig.clearCanvas&&this.restore()}}},CanvasRenderer.prototype.buildItem=function(t){var e,o=this.elements;o[t]||99===this.layers[t].ty||(e=this.createItem(this.layers[t],this,this.globalData),(o[t]=e).initExpressions())},CanvasRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRenderer.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRenderer.prototype.show=function(){this.animationItem.container.style.display="block"},extendPrototype([BaseRenderer],HybridRenderer),HybridRenderer.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRenderer.prototype.appendElementInPos=function(t,e){var o=t.getBaseElement();if(o){t=this.layers[e];if(t.ddd&&this.supports3d)this.addTo3dContainer(o,e);else if(this.threeDElements)this.addTo3dContainer(o,e);else{for(var r,n,i=0;i<e;)this.elements[i]&&!0!==this.elements[i]&&this.elements[i].getBaseElement&&(n=this.elements[i],r=(this.layers[i].ddd?this.getThreeDContainerByPos(i):n.getBaseElement())||r),i+=1;r?t.ddd&&this.supports3d||this.layerElement.insertBefore(o,r):t.ddd&&this.supports3d||this.layerElement.appendChild(o)}}},HybridRenderer.prototype.createShape=function(t){return new(this.supports3d?HShapeElement:SVGShapeElement)(t,this.globalData,this)},HybridRenderer.prototype.createText=function(t){return new(this.supports3d?HTextElement:SVGTextLottieElement)(t,this.globalData,this)},HybridRenderer.prototype.createCamera=function(t){return this.camera=new HCameraElement(t,this.globalData,this),this.camera},HybridRenderer.prototype.createImage=function(t){return new(this.supports3d?HImageElement:IImageElement)(t,this.globalData,this)},HybridRenderer.prototype.createComp=function(t){return new(this.supports3d?HCompElement:SVGCompElement)(t,this.globalData,this)},HybridRenderer.prototype.createSolid=function(t){return new(this.supports3d?HSolidElement:ISolidElement)(t,this.globalData,this)},HybridRenderer.prototype.createNull=SVGRenderer.prototype.createNull,HybridRenderer.prototype.getThreeDContainerByPos=function(t){for(var e=0,o=this.threeDElements.length;e<o;){if(this.threeDElements[e].startPos<=t&&this.threeDElements[e].endPos>=t)return this.threeDElements[e].perspectiveElem;e+=1}return null},HybridRenderer.prototype.createThreeDContainer=function(t,e){var o=createTag("div");styleDiv(o);var r,n,i=createTag("div");styleDiv(i),"3d"===e&&((r=o.style).width=this.globalData.compSize.w+"px",r.height=this.globalData.compSize.h+"px",r.webkitTransformOrigin=n="50% 50%",r.mozTransformOrigin=n,r.transformOrigin=n,(r=i.style).transform=n="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)",r.webkitTransform=n),o.appendChild(i);e={container:i,perspectiveElem:o,startPos:t,endPos:t,type:e};return this.threeDElements.push(e),e},HybridRenderer.prototype.build3dContainers=function(){for(var t,e=this.layers.length,o="",r=0;r<e;r+=1)this.layers[r].ddd&&3!==this.layers[r].ty?(t="3d"!==o?this.createThreeDContainer(r,o="3d"):t).endPos=Math.max(t.endPos,r):(t="2d"!==o?this.createThreeDContainer(r,o="2d"):t).endPos=Math.max(t.endPos,r);for(r=(e=this.threeDElements.length)-1;0<=r;--r)this.resizerElem.appendChild(this.threeDElements[r].perspectiveElem)},HybridRenderer.prototype.addTo3dContainer=function(t,e){for(var o=0,r=this.threeDElements.length;o<r;){if(e<=this.threeDElements[o].endPos){for(var n,i=this.threeDElements[o].startPos;i<e;)this.elements[i]&&this.elements[i].getBaseElement&&(n=this.elements[i].getBaseElement()),i+=1;n?this.threeDElements[o].container.insertBefore(t,n):this.threeDElements[o].container.appendChild(t);break}o+=1}},HybridRenderer.prototype.configAnimation=function(t){var e=createTag("div"),o=this.animationItem.wrapper,r=e.style;r.width=t.w+"px",r.height=t.h+"px",styleDiv(this.resizerElem=e),r.transformStyle="flat",r.mozTransformStyle="flat",r.webkitTransformStyle="flat",this.renderConfig.className&&e.setAttribute("class",this.renderConfig.className),o.appendChild(e),r.overflow="hidden";e=createNS("svg");e.setAttribute("width","1"),e.setAttribute("height","1"),styleDiv(e),this.resizerElem.appendChild(e);r=createNS("defs");e.appendChild(r),this.data=t,this.setupGlobalData(t,e),this.globalData.defs=r,this.layers=t.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRenderer.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;for(var t=this.layers?this.layers.length:0,e=0;e<t;e+=1)this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRenderer.prototype.updateContainerSize=function(){var t,e,o,r=this.animationItem.wrapper.offsetWidth,n=this.animationItem.wrapper.offsetHeight,r=r/n<this.globalData.compSize.w/this.globalData.compSize.h?(t=r/this.globalData.compSize.w,e=r/this.globalData.compSize.w,o=0,(n-this.globalData.compSize.h*(r/this.globalData.compSize.w))/2):(t=n/this.globalData.compSize.h,e=n/this.globalData.compSize.h,o=(r-this.globalData.compSize.w*(n/this.globalData.compSize.h))/2,0),n=this.resizerElem.style;n.webkitTransform="matrix3d("+t+",0,0,0,0,"+e+",0,0,0,0,1,0,"+o+","+r+",0,1)",n.transform=n.webkitTransform},HybridRenderer.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRenderer.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRenderer.prototype.show=function(){this.resizerElem.style.display="block"},HybridRenderer.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else for(var t=this.globalData.compSize.w,e=this.globalData.compSize.h,o=this.threeDElements.length,r=0;r<o;r+=1){var n=this.threeDElements[r].perspectiveElem.style;n.webkitPerspective=Math.sqrt(Math.pow(t,2)+Math.pow(e,2))+"px",n.perspective=n.webkitPerspective}},HybridRenderer.prototype.searchExtraCompositions=function(t){for(var e,o=t.length,r=createTag("div"),n=0;n<o;n+=1)t[n].xt&&((e=this.createComp(t[n],r,this.globalData.comp,null)).initExpressions(),this.globalData.projectInterface.registerComposition(e))},MaskElement.prototype.getMaskProperty=function(t){return this.viewData[t].prop},MaskElement.prototype.renderFrame=function(t){for(var e,o=this.element.finalTransform.mat,r=this.masksProperties.length,n=0;n<r;n+=1)(this.viewData[n].prop._mdf||t)&&this.drawPath(this.masksProperties[n],this.viewData[n].prop.v,this.viewData[n]),(this.viewData[n].op._mdf||t)&&this.viewData[n].elem.setAttribute("fill-opacity",this.viewData[n].op.v),"n"!==this.masksProperties[n].mode&&(this.viewData[n].invRect&&(this.element.finalTransform.mProp._mdf||t)&&this.viewData[n].invRect.setAttribute("transform",o.getInverseMatrix().to2dCSS()),this.storedData[n].x&&(this.storedData[n].x._mdf||t)&&(e=this.storedData[n].expan,this.storedData[n].x.v<0?("erode"!==this.storedData[n].lastOperator&&(this.storedData[n].lastOperator="erode",this.storedData[n].elem.setAttribute("filter","url("+locationHref+"#"+this.storedData[n].filterId+")")),e.setAttribute("radius",-this.storedData[n].x.v)):("dilate"!==this.storedData[n].lastOperator&&(this.storedData[n].lastOperator="dilate",this.storedData[n].elem.setAttribute("filter",null)),this.storedData[n].elem.setAttribute("stroke-width",2*this.storedData[n].x.v))))},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var t="M0,0 ";return t+=" h"+this.globalData.compSize.w,t+=" v"+this.globalData.compSize.h,t+=" h-"+this.globalData.compSize.w,t+=" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(t,e,o){for(var r,n=" M"+e.v[0][0]+","+e.v[0][1],i=e._length,a=1;a<i;a+=1)n+=" C"+e.o[a-1][0]+","+e.o[a-1][1]+" "+e.i[a][0]+","+e.i[a][1]+" "+e.v[a][0]+","+e.v[a][1];e.c&&1<i&&(n+=" C"+e.o[a-1][0]+","+e.o[a-1][1]+" "+e.i[0][0]+","+e.i[0][1]+" "+e.v[0][0]+","+e.v[0][1]),o.lastPath!==n&&(r="",o.elem&&(e.c&&(r=t.inv?this.solidPath+n:n),o.elem.setAttribute("d",r)),o.lastPath=n)},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(t){this.hierarchy=t},setAsParent:function(){this._isParent=!0},checkParenting:function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent,[])}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(t,e){for(var o=this.dynamicProperties.length,r=0;r<o;r+=1)(e||this._isParent&&"transform"===this.dynamicProperties[r].propType)&&(this.dynamicProperties[r].getValue(),this.dynamicProperties[r]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(t){-1===this.dynamicProperties.indexOf(t)&&this.dynamicProperties.push(t)}},TransformElement.prototype={initTransform:function(){this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_opMdf:!1,mat:new Matrix},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var t,e=this.finalTransform.mat,o=0,r=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;o<r;){if(this.hierarchy[o].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}o+=1}if(this.finalTransform._matMdf)for(t=this.finalTransform.mProp.v.props,e.cloneFromProps(t),o=0;o<r;o+=1)t=this.hierarchy[o].finalTransform.mProp.v.props,e.transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}},globalToLocal:function(t){var e=[];e.push(this.finalTransform);for(var o=!0,r=this.comp;o;)r.finalTransform?(r.data.hasMask&&e.splice(0,0,r.finalTransform),r=r.comp):o=!1;for(var n,i=e.length,a=0;a<i;a+=1)n=e[a].mat.applyToPointArray(0,0,0),t=[t[0]-n[0],t[1]-n[1],0];return t},mHelper:new Matrix},RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(t){-1===this.renderableComponents.indexOf(t)&&this.renderableComponents.push(t)},removeRenderableComponent:function(t){-1!==this.renderableComponents.indexOf(t)&&this.renderableComponents.splice(this.renderableComponents.indexOf(t),1)},prepareRenderableFrame:function(t){this.checkLayerLimits(t)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(t){this.data.ip-this.data.st<=t&&this.data.op-this.data.st>t?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){for(var t=this.renderableComponents.length,e=0;e<t;e+=1)this.renderableComponents[e].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(t,e,o){this.initFrame(),this.initBaseData(t,e,o),this.initTransform(t,e,o),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),SVGGradientFillStyleData.prototype.initGradientData=function(t,e,o){this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.s=PropertyFactory.getProp(t,e.s,1,null,this),this.e=PropertyFactory.getProp(t,e.e,1,null,this),this.h=PropertyFactory.getProp(t,e.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(t,e.a||{k:0},0,degToRads,this),this.g=new GradientProperty(t,e.g,this),this.style=o,this.stops=[],this.setGradientData(o.pElem,e),this.setGradientOpacity(e,o),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(t,e){var o=createElementID(),r=createNS(1===e.t?"linearGradient":"radialGradient");r.setAttribute("id",o),r.setAttribute("spreadMethod","pad"),r.setAttribute("gradientUnits","userSpaceOnUse");for(var n,i=[],a=4*e.g.p,s=0;s<a;s+=4)n=createNS("stop"),r.appendChild(n),i.push(n);t.setAttribute("gf"===e.ty?"fill":"stroke","url("+locationHref+"#"+o+")"),this.gf=r,this.cst=i},SVGGradientFillStyleData.prototype.setGradientOpacity=function(t,e){if(this.g._hasOpacity&&!this.g._collapsable){var o,r=createNS("mask"),n=createNS("path");r.appendChild(n);var i=createElementID(),a=createElementID();r.setAttribute("id",a);var s=createNS(1===t.t?"linearGradient":"radialGradient");s.setAttribute("id",i),s.setAttribute("spreadMethod","pad"),s.setAttribute("gradientUnits","userSpaceOnUse");for(var l=(t.g.k.k[0].s||t.g.k.k).length,h=this.stops,c=4*t.g.p;c<l;c+=2)(o=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),s.appendChild(o),h.push(o);n.setAttribute("gf"===t.ty?"fill":"stroke","url("+locationHref+"#"+i+")"),"gs"===t.ty&&(n.setAttribute("stroke-linecap",lineCapEnum[t.lc||2]),n.setAttribute("stroke-linejoin",lineJoinEnum[t.lj||2]),1===t.lj&&n.setAttribute("stroke-miterlimit",t.ml)),this.of=s,this.ms=r,this.ost=h,this.maskId=a,e.msElem=n}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var SVGElementsRenderer=(fh1=new Matrix,gh1=new Matrix,{createRenderFunction:function(t){switch(t.ty){case"fl":return lh1;case"gf":return nh1;case"gs":return mh1;case"st":return oh1;case"sh":case"el":case"rc":case"sr":return kh1;case"tr":return jh1;default:return null}}}),fh1,gh1;function jh1(t,e,o){(o||e.transform.op._mdf)&&e.transform.container.setAttribute("opacity",e.transform.op.v),(o||e.transform.mProps._mdf)&&e.transform.container.setAttribute("transform",e.transform.mProps.v.to2dCSS())}function kh1(t,e,o){for(var r,n,i,a,s,l,h,c,u,p,d=e.styles.length,f=e.lvl,m=0;m<d;m+=1){if(a=e.sh._mdf||o,e.styles[m].lvl<f){for(h=gh1.reset(),u=f-e.styles[m].lvl,p=e.transformers.length-1;!a&&0<u;)a=e.transformers[p].mProps._mdf||a,--u,--p;if(a)for(u=f-e.styles[m].lvl,p=e.transformers.length-1;0<u;)c=e.transformers[p].mProps.v.props,h.transform(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15]),--u,--p}else h=fh1;if(n=(l=e.sh.paths)._length,a){for(i="",r=0;r<n;r+=1)(s=l.shapes[r])&&s._length&&(i+=buildShapeString(s,s._length,s.c,h));e.caches[m]=i}else i=e.caches[m];e.styles[m].d+=!0===t.hd?"":i,e.styles[m]._mdf=a||e.styles[m]._mdf}}function lh1(t,e,o){var r=e.style;(e.c._mdf||o)&&r.pElem.setAttribute("fill","rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||o)&&r.pElem.setAttribute("fill-opacity",e.o.v)}function mh1(t,e,o){nh1(t,e,o),oh1(0,e,o)}function nh1(t,e,o){var r,n,i,a,s=e.gf,l=e.g._hasOpacity,h=e.s.v,c=e.e.v;if((e.o._mdf||o)&&(n="gf"===t.ty?"fill-opacity":"stroke-opacity",e.style.pElem.setAttribute(n,e.o.v)),(e.s._mdf||o)&&(n="x1"==(r=1===t.t?"x1":"cx")?"y1":"cy",s.setAttribute(r,h[0]),s.setAttribute(n,h[1]),l&&!e.g._collapsable&&(e.of.setAttribute(r,h[0]),e.of.setAttribute(n,h[1]))),e.g._cmdf||o)for(var u=e.cst,p=e.g.c,d=u.length,f=0;f<d;f+=1)(i=u[f]).setAttribute("offset",p[4*f]+"%"),i.setAttribute("stop-color","rgb("+p[4*f+1]+","+p[4*f+2]+","+p[4*f+3]+")");if(l&&(e.g._omdf||o)){var m=e.g.o;for(d=(u=e.g._collapsable?e.cst:e.ost).length,f=0;f<d;f+=1)i=u[f],e.g._collapsable||i.setAttribute("offset",m[2*f]+"%"),i.setAttribute("stop-opacity",m[2*f+1])}1===t.t?(e.e._mdf||o)&&(s.setAttribute("x2",c[0]),s.setAttribute("y2",c[1]),l&&!e.g._collapsable&&(e.of.setAttribute("x2",c[0]),e.of.setAttribute("y2",c[1]))):((e.s._mdf||e.e._mdf||o)&&(a=Math.sqrt(Math.pow(h[0]-c[0],2)+Math.pow(h[1]-c[1],2)),s.setAttribute("r",a),l&&!e.g._collapsable&&e.of.setAttribute("r",a)),(e.e._mdf||e.h._mdf||e.a._mdf||o)&&(a=a||Math.sqrt(Math.pow(h[0]-c[0],2)+Math.pow(h[1]-c[1],2)),o=Math.atan2(c[1]-h[1],c[0]-h[0]),1<=(c=e.h.v)?c=.99:c<=-1&&(c=-.99),a=a*c,c=Math.cos(o+e.a.v)*a+h[0],h=Math.sin(o+e.a.v)*a+h[1],s.setAttribute("fx",c),s.setAttribute("fy",h),l&&!e.g._collapsable&&(e.of.setAttribute("fx",c),e.of.setAttribute("fy",h))))}function oh1(t,e,o){var r=e.style,n=e.d;n&&(n._mdf||o)&&n.dashStr&&(r.pElem.setAttribute("stroke-dasharray",n.dashStr),r.pElem.setAttribute("stroke-dashoffset",n.dashoffset[0])),e.c&&(e.c._mdf||o)&&r.pElem.setAttribute("stroke","rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||o)&&r.pElem.setAttribute("stroke-opacity",e.o.v),(e.w._mdf||o)&&(r.pElem.setAttribute("stroke-width",e.w.v),r.msElem&&r.msElem.setAttribute("stroke-width",e.w.v))}function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}function CVShapeData(t,e,o,r){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var n=4;"rc"===e.ty?n=5:"el"===e.ty?n=6:"sr"===e.ty&&(n=7),this.sh=ShapePropertyFactory.getShapeProp(t,e,n,t);for(var i,a=o.length,s=0;s<a;s+=1)o[s].closed||(i={transforms:r.addTransformSequence(o[s].transforms),trNodes:[]},this.styledShapes.push(i),o[s].elements.push(i))}function BaseElement(){}function NullElement(t,e,o){this.initFrame(),this.initBaseData(t,e,o),this.initFrame(),this.initTransform(t,e,o),this.initHierarchy()}function SVGBaseElement(){}function IShapeElement(){}function ITextElement(){}function ICompElement(){}function IImageElement(t,e,o){this.assetData=e.getAssetData(t.refId),this.initElement(t,e,o),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ISolidElement(t,e,o){this.initElement(t,e,o)}function AudioElement(t,e,o){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(t.refId),this.initBaseData(t,e,o),this._isPlaying=!1,this._canPlay=!1;o=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(o),this._currentTime=0,this.globalData.audioController.addAudio(this),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function FootageElement(t,e,o){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(t.refId),this.footageData=e.imageLoader.getAsset(this.assetData),this.initBaseData(t,e,o)}function SVGCompElement(t,e,o){this.layers=t.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,o),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function SVGTextLottieElement(t,e,o){this.textSpans=[],this.renderType="svg",this.initElement(t,e,o)}function SVGShapeElement(t,e,o){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(t,e,o),this.prevViewData=[]}function SVGTintFilter(t,e){this.filterManager=e;var o=createNS("feColorMatrix");o.setAttribute("type","matrix"),o.setAttribute("color-interpolation-filters","linearRGB"),o.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),o.setAttribute("result","f1"),t.appendChild(o),(o=createNS("feColorMatrix")).setAttribute("type","matrix"),o.setAttribute("color-interpolation-filters","sRGB"),o.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),o.setAttribute("result","f2"),t.appendChild(o),this.matrixFilter=o,100===e.effectElements[2].p.v&&!e.effectElements[2].p.k||(e=createNS("feMerge"),t.appendChild(e),(t=createNS("feMergeNode")).setAttribute("in","SourceGraphic"),e.appendChild(t),(t=createNS("feMergeNode")).setAttribute("in","f2"),e.appendChild(t))}function SVGFillFilter(t,e){this.filterManager=e;e=createNS("feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),t.appendChild(e),this.matrixFilter=e}function SVGGaussianBlurEffect(t,e){t.setAttribute("x","-100%"),t.setAttribute("y","-100%"),t.setAttribute("width","300%"),t.setAttribute("height","300%"),this.filterManager=e;e=createNS("feGaussianBlur");t.appendChild(e),this.feGaussianBlur=e}function SVGStrokeEffect(t,e){this.initialized=!1,this.filterManager=e,this.elem=t,this.paths=[]}function SVGTritoneFilter(t,e){this.filterManager=e;e=createNS("feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("color-interpolation-filters","linearRGB"),e.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),e.setAttribute("result","f1"),t.appendChild(e);e=createNS("feComponentTransfer");e.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(e),this.matrixFilter=e;t=createNS("feFuncR");t.setAttribute("type","table"),e.appendChild(t),this.feFuncR=t;t=createNS("feFuncG");t.setAttribute("type","table"),e.appendChild(t),this.feFuncG=t;t=createNS("feFuncB");t.setAttribute("type","table"),e.appendChild(t),this.feFuncB=t}function SVGProLevelsFilter(t,e){this.filterManager=e;var o=this.filterManager.effectElements,e=createNS("feComponentTransfer");(o[10].p.k||0!==o[10].p.v||o[11].p.k||1!==o[11].p.v||o[12].p.k||1!==o[12].p.v||o[13].p.k||0!==o[13].p.v||o[14].p.k||1!==o[14].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",e)),(o[17].p.k||0!==o[17].p.v||o[18].p.k||1!==o[18].p.v||o[19].p.k||1!==o[19].p.v||o[20].p.k||0!==o[20].p.v||o[21].p.k||1!==o[21].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",e)),(o[24].p.k||0!==o[24].p.v||o[25].p.k||1!==o[25].p.v||o[26].p.k||1!==o[26].p.v||o[27].p.k||0!==o[27].p.v||o[28].p.k||1!==o[28].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",e)),(o[31].p.k||0!==o[31].p.v||o[32].p.k||1!==o[32].p.v||o[33].p.k||1!==o[33].p.v||o[34].p.k||0!==o[34].p.v||o[35].p.k||1!==o[35].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",e)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(e.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(e),e=createNS("feComponentTransfer")),(o[3].p.k||0!==o[3].p.v||o[4].p.k||1!==o[4].p.v||o[5].p.k||1!==o[5].p.v||o[6].p.k||0!==o[6].p.v||o[7].p.k||1!==o[7].p.v)&&(e.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(e),this.feFuncRComposed=this.createFeFunc("feFuncR",e),this.feFuncGComposed=this.createFeFunc("feFuncG",e),this.feFuncBComposed=this.createFeFunc("feFuncB",e))}function SVGDropShadowEffect(t,e){var o=e.container.globalData.renderConfig.filterSize;t.setAttribute("x",o.x),t.setAttribute("y",o.y),t.setAttribute("width",o.width),t.setAttribute("height",o.height),this.filterManager=e;e=createNS("feGaussianBlur");e.setAttribute("in","SourceAlpha"),e.setAttribute("result","drop_shadow_1"),e.setAttribute("stdDeviation","0"),this.feGaussianBlur=e,t.appendChild(e);e=createNS("feOffset");e.setAttribute("dx","25"),e.setAttribute("dy","0"),e.setAttribute("in","drop_shadow_1"),e.setAttribute("result","drop_shadow_2"),this.feOffset=e,t.appendChild(e);e=createNS("feFlood");e.setAttribute("flood-color","#00ff00"),e.setAttribute("flood-opacity","1"),e.setAttribute("result","drop_shadow_3"),this.feFlood=e,t.appendChild(e);e=createNS("feComposite");e.setAttribute("in","drop_shadow_3"),e.setAttribute("in2","drop_shadow_2"),e.setAttribute("operator","in"),e.setAttribute("result","drop_shadow_4"),t.appendChild(e);e=createNS("feMerge");t.appendChild(e),t=createNS("feMergeNode"),e.appendChild(t),(t=createNS("feMergeNode")).setAttribute("in","SourceGraphic"),this.feMergeNode=t,this.feMerge=e,this.originalNodeAdded=!1,e.appendChild(t)}ShapeTransformManager.prototype={addTransformSequence:function(t){for(var e=t.length,o="_",r=0;r<e;r+=1)o+=t[r].transform.key+"_";var n=this.sequences[o];return n||(n={transforms:[].concat(t),finalTransform:new Matrix,_mdf:!1},this.sequences[o]=n,this.sequenceList.push(n)),n},processSequence:function(t,e){for(var o,r=0,n=t.transforms.length,i=e;r<n&&!e;){if(t.transforms[r].transform.mProps._mdf){i=!0;break}r+=1}if(i)for(t.finalTransform.reset(),r=n-1;0<=r;--r)o=t.transforms[r].transform.mProps.v.props,t.finalTransform.transform(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9],o[10],o[11],o[12],o[13],o[14],o[15]);t._mdf=i},processSequences:function(t){for(var e=this.sequenceList.length,o=0;o<e;o+=1)this.processSequence(this.sequenceList[o],t)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}},CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var t=0,e=this.data.masksProperties.length;t<e;){if("n"!==this.data.masksProperties[t].mode&&!1!==this.data.masksProperties[t].cl)return!0;t+=1}return!1},initExpressions:function(){this.layerInterface=LayerExpressionInterface(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var t=EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(t),0===this.data.ty||this.data.xt?this.compInterface=CompExpressionInterface(this):4===this.data.ty?(this.layerInterface.shapeInterface=ShapeExpressionInterface(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):5===this.data.ty&&(this.layerInterface.textInterface=TextExpressionInterface(this),this.layerInterface.text=this.layerInterface.textInterface)},setBlendMode:function(){var t=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=t},initBaseData:function(t,e,o){this.globalData=e,this.comp=o,this.data=t,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},NullElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var t,e,o,r,n,i,a,s=null;this.data.td?3==this.data.td||1==this.data.td?((r=createNS("mask")).setAttribute("id",this.layerId),r.setAttribute("mask-type",3==this.data.td?"luminance":"alpha"),r.appendChild(this.layerElement),this.globalData.defs.appendChild(s=r),featureSupport.maskType||1!=this.data.td||(r.setAttribute("mask-type","luminance"),t=createElementID(),e=filtersFactory.createFilter(t),this.globalData.defs.appendChild(e),e.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(n=createNS("g")).appendChild(this.layerElement),s=n,r.appendChild(n),n.setAttribute("filter","url("+locationHref+"#"+t+")"))):2==this.data.td&&((i=createNS("mask")).setAttribute("id",this.layerId),i.setAttribute("mask-type","alpha"),a=createNS("g"),i.appendChild(a),t=createElementID(),e=filtersFactory.createFilter(t),(o=createNS("feComponentTransfer")).setAttribute("in","SourceGraphic"),e.appendChild(o),(r=createNS("feFuncA")).setAttribute("type","table"),r.setAttribute("tableValues","1.0 0.0"),o.appendChild(r),this.globalData.defs.appendChild(e),(r=createNS("rect")).setAttribute("width",this.comp.data.w),r.setAttribute("height",this.comp.data.h),r.setAttribute("x","0"),r.setAttribute("y","0"),r.setAttribute("fill","#ffffff"),r.setAttribute("opacity","0"),a.setAttribute("filter","url("+locationHref+"#"+t+")"),a.appendChild(r),a.appendChild(this.layerElement),s=a,featureSupport.maskType||(i.setAttribute("mask-type","luminance"),e.appendChild(filtersFactory.createAlphaToLuminanceFilter()),n=createNS("g"),a.appendChild(r),n.appendChild(this.layerElement),s=n,a.appendChild(n)),this.globalData.defs.appendChild(i)):this.data.tt?(this.matteElement.appendChild(this.layerElement),s=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.ty||this.data.hd||(a=createNS("clipPath"),(n=createNS("path")).setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z"),i=createElementID(),a.setAttribute("id",i),a.appendChild(n),this.globalData.defs.appendChild(a),this.checkMasks()?((a=createNS("g")).setAttribute("clip-path","url("+locationHref+"#"+i+")"),a.appendChild(this.layerElement),this.transformedElement=a,s?s.appendChild(this.transformedElement):this.baseElement=this.transformedElement):this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+i+")")),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.mat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.mProp.o.v)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this)},setMatte:function(t){this.matteElement&&this.matteElement.setAttribute("mask","url("+locationHref+"#"+t+")")}},IShapeElement.prototype={addShapeToModifiers:function(t){for(var e=this.shapeModifiers.length,o=0;o<e;o+=1)this.shapeModifiers[o].addShape(t)},isShapeInAnimatedModifiers:function(t){for(var e=this.shapeModifiers.length;0<e;)if(this.shapeModifiers[0].isAnimatedWithShape(t))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){for(var t=this.shapes.length,e=0;e<t;e+=1)this.shapes[e].sh.reset();for(e=(t=this.shapeModifiers.length)-1;0<=e&&!this.shapeModifiers[e].processShapes(this._isFirstFrame);--e);}},searchProcessedElement:function(t){for(var e=this.processedElements,o=0,r=e.length;o<r;){if(e[o].elem===t)return e[o].pos;o+=1}return 0},addProcessedElement:function(t,e){for(var o=this.processedElements,r=o.length;r;)if(o[--r].elem===t)return void(o[r].pos=e);o.push(new ProcessedElement(t,e))},prepareFrame:function(t){this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange)}},ITextElement.prototype.initElement=function(t,e,o){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(t,e,o),this.textProperty=new TextProperty(this,t.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(t.t,this.renderType,this),this.initTransform(t,e,o),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)},ITextElement.prototype.createPathShape=function(t,e){for(var o,r=e.length,n="",i=0;i<r;i+=1)o=e[i].ks.k,n+=buildShapeString(o,o.i.length,!0,t);return n},ITextElement.prototype.updateDocumentData=function(t,e){this.textProperty.updateDocumentData(t,e)},ITextElement.prototype.canResizeFont=function(t){this.textProperty.canResizeFont(t)},ITextElement.prototype.setMinimumFontSize=function(t){this.textProperty.setMinimumFontSize(t)},ITextElement.prototype.applyTextPropertiesToMatrix=function(t,e,o,r,n){switch(t.ps&&e.translate(t.ps[0],t.ps[1]+t.ascent,0),e.translate(0,-t.ls,0),t.j){case 1:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[o]),0,0);break;case 2:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[o])/2,0,0)}e.translate(r,n,0)},ITextElement.prototype.buildColor=function(t){return"rgb("+Math.round(255*t[0])+","+Math.round(255*t[1])+","+Math.round(255*t[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(t,e,o){this.initFrame(),this.initBaseData(t,e,o),this.initTransform(t,e,o),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&e.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(t){if(this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),this.isInRange||this.data.xt){var e;this.tm._placeholder?this.renderedFrame=t/this.data.sr:((o=this.tm.v)===this.data.op&&(o=this.data.op-1),this.renderedFrame=o);var o=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),e=o-1;0<=e;--e)(this.completeLayers||this.elements[e])&&(this.elements[e].prepareFrame(this.renderedFrame-this.layers[e].st),this.elements[e]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){for(var t=this.layers.length,e=0;e<t;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},ICompElement.prototype.setElements=function(t){this.elements=t},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){for(var t=this.layers.length,e=0;e<t;e+=1)this.elements[e]&&this.elements[e].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var t=createNS("rect");t.setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.layerElement.appendChild(t)},AudioElement.prototype.prepareFrame=function(t){this.prepareRenderableFrame(t,!0),this.prepareProperties(t,!0),this.tm._placeholder?this._currentTime=t/this.data.sr:(t=this.tm.v,this._currentTime=t)},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||.1<Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek()))&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(t){this.audio.rate(t)},AudioElement.prototype.volume=function(t){this.audio.volume(t)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){},FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){this.layerInterface=FootageInterface(this)},FootageElement.prototype.getFootageData=function(){return this.footageData},extendPrototype([SVGRenderer,ICompElement,SVGBaseElement],SVGCompElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(t){for(var e=0,o=t.length,r=[],n="";e<o;)t[e]===String.fromCharCode(13)||t[e]===String.fromCharCode(3)?(r.push(n),n=""):n+=t[e],e+=1;return r.push(n),r},SVGTextLottieElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t?t.l.length:0),t.fc?this.layerElement.setAttribute("fill",this.buildColor(t.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),t.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(t.sc)),this.layerElement.setAttribute("stroke-width",t.sw)),this.layerElement.setAttribute("font-size",t.finalSize);var e,o,r=this.globalData.fontManager.getFontByName(t.f);r.fClass?this.layerElement.setAttribute("class",r.fClass):(this.layerElement.setAttribute("font-family",r.fFamily),e=t.fWeight,o=t.fStyle,this.layerElement.setAttribute("font-style",o),this.layerElement.setAttribute("font-weight",e)),this.layerElement.setAttribute("aria-label",t.t);var n,i=t.l||[],a=!!this.globalData.fontManager.chars;S=i.length;var s=this.mHelper,l="",h=this.data.singleShape,c=0,u=0,p=!0,d=.001*t.tr*t.finalSize;if(!h||a||t.sz){var f,m=this.textSpans.length;for(b=0;b<S;b+=1)a&&h&&0!==b||(n=b<m?this.textSpans[b]:createNS(a?"path":"text"),m<=b&&(n.setAttribute("stroke-linecap","butt"),n.setAttribute("stroke-linejoin","round"),n.setAttribute("stroke-miterlimit","4"),this.textSpans[b]=n,this.layerElement.appendChild(n)),n.style.display="inherit"),s.reset(),s.scale(t.finalSize/100,t.finalSize/100),h&&(i[b].n&&(c=-d,u+=t.yOffset,u+=p?1:0,p=!1),this.applyTextPropertiesToMatrix(t,s,i[b].line,c,u),c+=i[b].l||0,c+=d),a?(f=(f=(f=this.globalData.fontManager.getCharData(t.finalText[b],r.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily))&&f.data||{}).shapes?f.shapes[0].it:[],h?l+=this.createPathShape(s,f):n.setAttribute("d",this.createPathShape(s,f))):(h&&n.setAttribute("transform","translate("+s.props[12]+","+s.props[13]+")"),n.textContent=i[b].val,n.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"));h&&n&&n.setAttribute("d",l)}else{var g=this.textContainer,v="start";switch(t.j){case 1:v="end";break;case 2:v="middle";break;default:v="start"}g.setAttribute("text-anchor",v),g.setAttribute("letter-spacing",d);for(var y=this.buildTextContents(t.finalText),S=y.length,u=t.ps?t.ps[1]+t.ascent:0,b=0;b<S;b+=1)(n=this.textSpans[b]||createNS("tspan")).textContent=y[b],n.setAttribute("x",0),n.setAttribute("y",u),n.style.display="inherit",g.appendChild(n),this.textSpans[b]=n,u+=t.finalLineHeight;this.layerElement.appendChild(g)}for(;b<this.textSpans.length;)this.textSpans[b].style.display="none",b+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){var t;return this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged&&(this._sizeChanged=!1,t=this.layerElement.getBBox(),this.bbox={top:t.y,left:t.x,width:t.width,height:t.height}),this.bbox},SVGTextLottieElement.prototype.renderInnerContent=function(){if(!this.data.singleShape&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;for(var t,e,o=this.textAnimator.renderedLetters,r=this.textProperty.currentData.l,n=r.length,i=0;i<n;i+=1)r[i].n||(t=o[i],e=this.textSpans[i],t._mdf.m&&e.setAttribute("transform",t.m),t._mdf.o&&e.setAttribute("opacity",t.o),t._mdf.sw&&e.setAttribute("stroke-width",t.sw),t._mdf.sc&&e.setAttribute("stroke",t.sc),t._mdf.fc&&e.setAttribute("fill",t.fc))}},extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){for(var t,e,o,r=this.shapes.length,n=this.stylesList.length,i=[],a=!1,s=0;s<n;s+=1){for(o=this.stylesList[s],a=!1,t=i.length=0;t<r;t+=1)-1!==(e=this.shapes[t]).styles.indexOf(o)&&(i.push(e),a=e._isAnimated||a);1<i.length&&a&&this.setShapesAsAnimated(i)}},SVGShapeElement.prototype.setShapesAsAnimated=function(t){for(var e=t.length,o=0;o<e;o+=1)t[o].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(t,e){var o,r=new SVGStyleData(t,e),e=r.pElem;return"st"===t.ty?o=new SVGStrokeStyleData(this,t,r):"fl"===t.ty?o=new SVGFillStyleData(this,t,r):"gf"!==t.ty&&"gs"!==t.ty||(o=new("gf"===t.ty?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,t,r),this.globalData.defs.appendChild(o.gf),o.maskId&&(this.globalData.defs.appendChild(o.ms),this.globalData.defs.appendChild(o.of),e.setAttribute("mask","url("+locationHref+"#"+o.maskId+")"))),"st"!==t.ty&&"gs"!==t.ty||(e.setAttribute("stroke-linecap",lineCapEnum[t.lc||2]),e.setAttribute("stroke-linejoin",lineJoinEnum[t.lj||2]),e.setAttribute("fill-opacity","0"),1===t.lj&&e.setAttribute("stroke-miterlimit",t.ml)),2===t.r&&e.setAttribute("fill-rule","evenodd"),t.ln&&e.setAttribute("id",t.ln),t.cl&&e.setAttribute("class",t.cl),t.bm&&(e.style["mix-blend-mode"]=getBlendMode(t.bm)),this.stylesList.push(r),this.addToAnimatedContents(t,o),o},SVGShapeElement.prototype.createGroupElement=function(t){var e=new ShapeGroupData;return t.ln&&e.gr.setAttribute("id",t.ln),t.cl&&e.gr.setAttribute("class",t.cl),t.bm&&(e.gr.style["mix-blend-mode"]=getBlendMode(t.bm)),e},SVGShapeElement.prototype.createTransformElement=function(t,e){var o=TransformPropertyFactory.getTransformProperty(this,t,this),e=new SVGTransformData(o,o.o,e);return this.addToAnimatedContents(t,e),e},SVGShapeElement.prototype.createShapeElement=function(t,e,o){var r=4;"rc"===t.ty?r=5:"el"===t.ty?r=6:"sr"===t.ty&&(r=7);r=new SVGShapeData(e,o,ShapePropertyFactory.getShapeProp(this,t,r,this));return this.shapes.push(r),this.addShapeToModifiers(r),this.addToAnimatedContents(t,r),r},SVGShapeElement.prototype.addToAnimatedContents=function(t,e){for(var o=0,r=this.animatedContents.length;o<r;){if(this.animatedContents[o].element===e)return;o+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(t),element:e,data:t})},SVGShapeElement.prototype.setElementStyles=function(t){for(var e=t.styles,o=this.stylesList.length,r=0;r<o;r+=1)this.stylesList[r].closed||e.push(this.stylesList[r])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;for(var t=this.itemsData.length,e=0;e<t;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),t=this.dynamicProperties.length,e=0;e<t;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(t,e,o,r,n,i,a){for(var s,l,h,c,u,p=[].concat(i),d=t.length-1,f=[],m=[],g=d;0<=g;--g){if((u=this.searchProcessedElement(t[g]))?e[g]=o[u-1]:t[g]._render=a,"fl"===t[g].ty||"st"===t[g].ty||"gf"===t[g].ty||"gs"===t[g].ty)u?e[g].style.closed=!1:e[g]=this.createStyleElement(t[g],n),t[g]._render&&r.appendChild(e[g].style.pElem),f.push(e[g].style);else if("gr"===t[g].ty){if(u)for(l=e[g].it.length,s=0;s<l;s+=1)e[g].prevViewData[s]=e[g].it[s];else e[g]=this.createGroupElement(t[g]);this.searchShapes(t[g].it,e[g].it,e[g].prevViewData,e[g].gr,n+1,p,a),t[g]._render&&r.appendChild(e[g].gr)}else"tr"===t[g].ty?(u||(e[g]=this.createTransformElement(t[g],r)),h=e[g].transform,p.push(h)):"sh"===t[g].ty||"rc"===t[g].ty||"el"===t[g].ty||"sr"===t[g].ty?(u||(e[g]=this.createShapeElement(t[g],p,n)),this.setElementStyles(e[g])):"tm"===t[g].ty||"rd"===t[g].ty||"ms"===t[g].ty||"pb"===t[g].ty?(u?(c=e[g]).closed=!1:((c=ShapeModifiers.getModifier(t[g].ty)).init(this,t[g]),e[g]=c,this.shapeModifiers.push(c)),m.push(c)):"rp"===t[g].ty&&(u?(c=e[g]).closed=!0:(c=ShapeModifiers.getModifier(t[g].ty),(e[g]=c).init(this,t,g,e),this.shapeModifiers.push(c),a=!1),m.push(c));this.addProcessedElement(t[g],g+1)}for(d=f.length,g=0;g<d;g+=1)f[g].closed=!0;for(d=m.length,g=0;g<d;g+=1)m[g].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();for(var t=this.stylesList.length,e=0;e<t;e+=1)this.stylesList[e].reset();for(this.renderShape(),e=0;e<t;e+=1)(this.stylesList[e]._mdf||this._isFirstFrame)&&(this.stylesList[e].msElem&&(this.stylesList[e].msElem.setAttribute("d",this.stylesList[e].d),this.stylesList[e].d="M0 0"+this.stylesList[e].d),this.stylesList[e].pElem.setAttribute("d",this.stylesList[e].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){for(var t,e=this.animatedContents.length,o=0;o<e;o+=1)t=this.animatedContents[o],(this._isFirstFrame||t.element._isAnimated)&&!0!==t.data&&t.fn(t.data,t.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},SVGTintFilter.prototype.renderFrame=function(t){var e,o;(t||this.filterManager._mdf)&&(e=this.filterManager.effectElements[0].p.v,o=this.filterManager.effectElements[1].p.v,t=this.filterManager.effectElements[2].p.v/100,this.matrixFilter.setAttribute("values",o[0]-e[0]+" 0 0 0 "+e[0]+" "+(o[1]-e[1])+" 0 0 0 "+e[1]+" "+(o[2]-e[2])+" 0 0 0 "+e[2]+" 0 0 0 "+t+" 0"))},SVGFillFilter.prototype.renderFrame=function(t){var e;(t||this.filterManager._mdf)&&(e=this.filterManager.effectElements[2].p.v,t=this.filterManager.effectElements[6].p.v,this.matrixFilter.setAttribute("values","0 0 0 0 "+e[0]+" 0 0 0 0 "+e[1]+" 0 0 0 0 "+e[2]+" 0 0 0 "+t+" 0"))},SVGGaussianBlurEffect.prototype.renderFrame=function(t){var e;(t||this.filterManager._mdf)&&(e=.3*this.filterManager.effectElements[0].p.v,t=this.filterManager.effectElements[1].p.v,this.feGaussianBlur.setAttribute("stdDeviation",(3==t?0:e)+" "+(2==t?0:e)),e=1==this.filterManager.effectElements[2].p.v?"wrap":"duplicate",this.feGaussianBlur.setAttribute("edgeMode",e))},SVGStrokeEffect.prototype.initialize=function(){var t,e,o,r,n=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(r=this.elem.maskManager.masksProperties.length,o=0):r=(o=this.filterManager.effectElements[0].p.v-1)+1,(e=createNS("g")).setAttribute("fill","none"),e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-dashoffset",1);o<r;o+=1)t=createNS("path"),e.appendChild(t),this.paths.push({p:t,m:o});if(3===this.filterManager.effectElements[10].p.v){var i=createNS("mask"),a=createElementID();i.setAttribute("id",a),i.setAttribute("mask-type","alpha"),i.appendChild(e),this.elem.globalData.defs.appendChild(i);var s=createNS("g");for(s.setAttribute("mask","url("+locationHref+"#"+a+")");n[0];)s.appendChild(n[0]);this.elem.layerElement.appendChild(s),this.masker=i,e.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(n=this.elem.layerElement.children||this.elem.layerElement.childNodes;n.length;)this.elem.layerElement.removeChild(n[0]);this.elem.layerElement.appendChild(e),this.elem.layerElement.removeAttribute("mask"),e.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=e},SVGStrokeEffect.prototype.renderFrame=function(t){this.initialized||this.initialize();for(var e,o,r=this.paths.length,n=0;n<r;n+=1)if(-1!==this.paths[n].m&&(h=this.elem.maskManager.viewData[this.paths[n].m],e=this.paths[n].p,(t||this.filterManager._mdf||h.prop._mdf)&&e.setAttribute("d",h.lastPath),t||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||h.prop._mdf)){if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){for(var i=.01*Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),a=.01*Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),s=e.getTotalLength(),l="0 0 0 "+s*i+" ",h=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01,c=Math.floor(s*(a-i)/h),u=0;u<c;u+=1)l+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01+" ";l+="0 "+10*s+" 0 0"}else l="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01;e.setAttribute("stroke-dasharray",l)}(t||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(t||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),1!==this.filterManager.effectElements[10].p.v&&2!==this.filterManager.effectElements[10].p.v||(t||this.filterManager.effectElements[3].p._mdf)&&(o=this.filterManager.effectElements[3].p.v,this.pathMasker.setAttribute("stroke","rgb("+bmFloor(255*o[0])+","+bmFloor(255*o[1])+","+bmFloor(255*o[2])+")"))},SVGTritoneFilter.prototype.renderFrame=function(t){var e,o,r,n;(t||this.filterManager._mdf)&&(n=this.filterManager.effectElements[0].p.v,e=this.filterManager.effectElements[1].p.v,r=(o=this.filterManager.effectElements[2].p.v)[0]+" "+e[0]+" "+n[0],t=o[1]+" "+e[1]+" "+n[1],n=o[2]+" "+e[2]+" "+n[2],this.feFuncR.setAttribute("tableValues",r),this.feFuncG.setAttribute("tableValues",t),this.feFuncB.setAttribute("tableValues",n))},SVGProLevelsFilter.prototype.createFeFunc=function(t,e){t=createNS(t);return t.setAttribute("type","table"),e.appendChild(t),t},SVGProLevelsFilter.prototype.getTableValue=function(t,e,o,r,n){for(var i,a=0,s=Math.min(t,e),l=Math.max(t,e),h=Array.call(null,{length:256}),c=0,u=n-r,p=e-t;a<=256;)i=(i=a/256)<=s?p<0?n:r:l<=i?p<0?r:n:r+u*Math.pow((i-t)/p,1/o),h[c]=i,c+=1,a+=256/255;return h.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(t){var e,o;(t||this.filterManager._mdf)&&(o=this.filterManager.effectElements,this.feFuncRComposed&&(t||o[3].p._mdf||o[4].p._mdf||o[5].p._mdf||o[6].p._mdf||o[7].p._mdf)&&(e=this.getTableValue(o[3].p.v,o[4].p.v,o[5].p.v,o[6].p.v,o[7].p.v),this.feFuncRComposed.setAttribute("tableValues",e),this.feFuncGComposed.setAttribute("tableValues",e),this.feFuncBComposed.setAttribute("tableValues",e)),this.feFuncR&&(t||o[10].p._mdf||o[11].p._mdf||o[12].p._mdf||o[13].p._mdf||o[14].p._mdf)&&(e=this.getTableValue(o[10].p.v,o[11].p.v,o[12].p.v,o[13].p.v,o[14].p.v),this.feFuncR.setAttribute("tableValues",e)),this.feFuncG&&(t||o[17].p._mdf||o[18].p._mdf||o[19].p._mdf||o[20].p._mdf||o[21].p._mdf)&&(e=this.getTableValue(o[17].p.v,o[18].p.v,o[19].p.v,o[20].p.v,o[21].p.v),this.feFuncG.setAttribute("tableValues",e)),this.feFuncB&&(t||o[24].p._mdf||o[25].p._mdf||o[26].p._mdf||o[27].p._mdf||o[28].p._mdf)&&(e=this.getTableValue(o[24].p.v,o[25].p.v,o[26].p.v,o[27].p.v,o[28].p.v),this.feFuncB.setAttribute("tableValues",e)),this.feFuncA&&(t||o[31].p._mdf||o[32].p._mdf||o[33].p._mdf||o[34].p._mdf||o[35].p._mdf)&&(e=this.getTableValue(o[31].p.v,o[32].p.v,o[33].p.v,o[34].p.v,o[35].p.v),this.feFuncA.setAttribute("tableValues",e)))},SVGDropShadowEffect.prototype.renderFrame=function(t){var e,o;(t||this.filterManager._mdf)&&((t||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),(t||this.filterManager.effectElements[0].p._mdf)&&(o=this.filterManager.effectElements[0].p.v,this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*o[0]),Math.round(255*o[1]),Math.round(255*o[2])))),(t||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),(t||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf)&&(e=this.filterManager.effectElements[3].p.v,o=(this.filterManager.effectElements[2].p.v-90)*degToRads,t=e*Math.cos(o),o=e*Math.sin(o),this.feOffset.setAttribute("dx",t),this.feOffset.setAttribute("dy",o)))};var _svgMatteSymbols=[];function SVGMatte3Effect(t,e,o){this.initialized=!1,this.filterManager=e,this.filterElem=t,(this.elem=o).matteElement=createNS("g"),o.matteElement.appendChild(o.layerElement),o.matteElement.appendChild(o.transformedElement),o.baseElement=o.matteElement}function SVGEffects(t){var e,o,r=t.data.ef?t.data.ef.length:0,n=createElementID(),i=filtersFactory.createFilter(n,!0),a=0;for(this.filters=[],e=0;e<r;e+=1)o=null,20===t.data.ef[e].ty?(a+=1,o=new SVGTintFilter(i,t.effectsManager.effectElements[e])):21===t.data.ef[e].ty?(a+=1,o=new SVGFillFilter(i,t.effectsManager.effectElements[e])):22===t.data.ef[e].ty?o=new SVGStrokeEffect(t,t.effectsManager.effectElements[e]):23===t.data.ef[e].ty?(a+=1,o=new SVGTritoneFilter(i,t.effectsManager.effectElements[e])):24===t.data.ef[e].ty?(a+=1,o=new SVGProLevelsFilter(i,t.effectsManager.effectElements[e])):25===t.data.ef[e].ty?(a+=1,o=new SVGDropShadowEffect(i,t.effectsManager.effectElements[e])):28===t.data.ef[e].ty?o=new SVGMatte3Effect(i,t.effectsManager.effectElements[e],t):29===t.data.ef[e].ty&&(a+=1,o=new SVGGaussianBlurEffect(i,t.effectsManager.effectElements[e])),o&&this.filters.push(o);a&&(t.globalData.defs.appendChild(i),t.layerElement.setAttribute("filter","url("+locationHref+"#"+n+")")),this.filters.length&&t.addRenderableComponent(this)}function CVContextData(){var t;this.saved=[],this.cArrPos=0,this.cTr=new Matrix,this.cO=1;for(this.savedOp=createTypedArray("float32",15),t=0;t<15;t+=1)this.saved[t]=createTypedArray("float32",16);this._length=15}function CVBaseElement(){}function CVImageElement(t,e,o){this.assetData=e.getAssetData(t.refId),this.img=e.imageLoader.getAsset(this.assetData),this.initElement(t,e,o)}function CVCompElement(t,e,o){this.completeLayers=!1,this.layers=t.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(t,e,o),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function CVMaskElement(t,e){this.data=t,this.element=e,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);for(var o=this.masksProperties.length,r=!1,n=0;n<o;n+=1)"n"!==this.masksProperties[n].mode&&(r=!0),this.viewData[n]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[n],3);(this.hasMasks=r)&&this.element.addRenderableComponent(this)}function CVShapeElement(t,e,o){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(t,e,o)}function CVSolidElement(t,e,o){this.initElement(t,e,o)}function CVTextElement(t,e,o){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(t,e,o)}function CVEffects(){}function HBaseElement(){}function HSolidElement(t,e,o){this.initElement(t,e,o)}function HCompElement(t,e,o){this.layers=t.layers,this.supports3d=!t.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,o),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function HShapeElement(t,e,o){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(t,e,o),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(t,e,o){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(t,e,o)}function HImageElement(t,e,o){this.assetData=e.getAssetData(t.refId),this.initElement(t,e,o)}function HCameraElement(t,e,o){this.initFrame(),this.initBaseData(t,e,o),this.initHierarchy();o=PropertyFactory.getProp;if(this.pe=o(this,t.pe,0,0,this),t.ks.p.s?(this.px=o(this,t.ks.p.x,1,0,this),this.py=o(this,t.ks.p.y,1,0,this),this.pz=o(this,t.ks.p.z,1,0,this)):this.p=o(this,t.ks.p,1,0,this),t.ks.a&&(this.a=o(this,t.ks.a,1,0,this)),t.ks.or.k.length&&t.ks.or.k[0].to)for(var r=t.ks.or.k.length,n=0;n<r;n+=1)t.ks.or.k[n].to=null,t.ks.or.k[n].ti=null;this.or=o(this,t.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=o(this,t.ks.rx,0,degToRads,this),this.ry=o(this,t.ks.ry,0,degToRads,this),this.rz=o(this,t.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HEffects(){}SVGMatte3Effect.prototype.findSymbol=function(t){for(var e=0,o=_svgMatteSymbols.length;e<o;){if(_svgMatteSymbols[e]===t)return _svgMatteSymbols[e];e+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(t,e){var o=t.layerElement.parentNode;if(o){for(var r,n=o.children,i=0,a=n.length;i<a&&n[i]!==t.layerElement;)i+=1;i<=a-2&&(r=n[i+1]);var s=createNS("use");s.setAttribute("href","#"+e),r?o.insertBefore(s,r):o.appendChild(s)}},SVGMatte3Effect.prototype.setElementAsMask=function(t,e){var o,r,n,i;this.findSymbol(e)||(o=createElementID(),(r=createNS("mask")).setAttribute("id",e.layerId),r.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(e),(n=t.globalData.defs).appendChild(r),(i=createNS("symbol")).setAttribute("id",o),this.replaceInParent(e,o),i.appendChild(e.layerElement),n.appendChild(i),(i=createNS("use")).setAttribute("href","#"+o),r.appendChild(i),e.data.hd=!1,e.show()),t.setMatte(e.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var t=this.filterManager.effectElements[0].p.v,e=this.elem.comp.elements,o=0,r=e.length;o<r;)e[o]&&e[o].data.ind===t&&this.setElementAsMask(this.elem,e[o]),o+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGEffects.prototype.renderFrame=function(t){for(var e=this.filters.length,o=0;o<e;o+=1)this.filters[o].renderFrame(t)},CVContextData.prototype.duplicate=function(){var t=2*this._length,e=this.savedOp;this.savedOp=createTypedArray("float32",t),this.savedOp.set(e);for(var o=0,o=this._length;o<t;o+=1)this.saved[o]=createTypedArray("float32",16);this._length=t},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.cO=1},CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){this.canvasContext=this.globalData.canvasContext,this.renderableEffectsManager=new CVEffects(this)},createContent:function(){},setBlendMode:function(){var t,e=this.globalData;e.blendMode!==this.data.bm&&(e.blendMode=this.data.bm,t=getBlendMode(this.data.bm),e.canvasContext.globalCompositeOperation=t)},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},renderFrame:function(){var t;this.hidden||this.data.hd||(this.renderTransform(),this.renderRenderable(),this.setBlendMode(),t=0===this.data.ty,this.globalData.renderer.save(t),this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v),this.renderInnerContent(),this.globalData.renderer.restore(t),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){var t,e,o,r,n,i,a,s,l;!this.img.width||this.assetData.w===this.img.width&&this.assetData.h===this.img.height||((t=createTag("canvas")).width=this.assetData.w,t.height=this.assetData.h,e=t.getContext("2d"),o=this.img.width,r=this.img.height,i=this.assetData.w/this.assetData.h,l=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio,i<(n=o/r)&&"xMidYMid slice"===l||n<i&&"xMidYMid slice"!==l?a=(s=r)*i:s=(a=o)/i,e.drawImage(this.img,(o-a)/2,(r-s)/2,a,s,0,0,this.assetData.w,this.assetData.h),this.img=t)},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([CanvasRenderer,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var t=this.canvasContext;t.beginPath(),t.moveTo(0,0),t.lineTo(this.data.w,0),t.lineTo(this.data.w,this.data.h),t.lineTo(0,this.data.h),t.lineTo(0,0),t.clip();for(var e=this.layers.length-1;0<=e;--e)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},CVCompElement.prototype.destroy=function(){for(var t=this.layers.length-1;0<=t;--t)this.elements[t]&&this.elements[t].destroy();this.layers=null,this.elements=null},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var t,e,o,r,n=this.element.finalTransform.mat,i=this.element.canvasContext,a=this.masksProperties.length;for(i.beginPath(),t=0;t<a;t+=1)if("n"!==this.masksProperties[t].mode){this.masksProperties[t].inv&&(i.moveTo(0,0),i.lineTo(this.element.globalData.compSize.w,0),i.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),i.lineTo(0,this.element.globalData.compSize.h),i.lineTo(0,0)),r=this.viewData[t].v,e=n.applyToPointArray(r.v[0][0],r.v[0][1],0),i.moveTo(e[0],e[1]);for(var s=r._length,l=1;l<s;l+=1)o=n.applyToTriplePoints(r.o[l-1],r.i[l],r.v[l]),i.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);o=n.applyToTriplePoints(r.o[l-1],r.i[0],r.v[0]),i.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}this.element.globalData.renderer.save(!0),i.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(t,e){var o={data:t,type:t.ty,preTransforms:this.transformsManager.addTransformSequence(e),transforms:[],elements:[],closed:!0===t.hd},r={};return"fl"===t.ty||"st"===t.ty?(r.c=PropertyFactory.getProp(this,t.c,1,255,this),r.c.k||(o.co="rgb("+bmFloor(r.c.v[0])+","+bmFloor(r.c.v[1])+","+bmFloor(r.c.v[2])+")")):"gf"!==t.ty&&"gs"!==t.ty||(r.s=PropertyFactory.getProp(this,t.s,1,null,this),r.e=PropertyFactory.getProp(this,t.e,1,null,this),r.h=PropertyFactory.getProp(this,t.h||{k:0},0,.01,this),r.a=PropertyFactory.getProp(this,t.a||{k:0},0,degToRads,this),r.g=new GradientProperty(this,t.g,this)),r.o=PropertyFactory.getProp(this,t.o,0,.01,this),"st"===t.ty||"gs"===t.ty?(o.lc=lineCapEnum[t.lc||2],o.lj=lineJoinEnum[t.lj||2],1==t.lj&&(o.ml=t.ml),r.w=PropertyFactory.getProp(this,t.w,0,null,this),r.w.k||(o.wi=r.w.v),t.d&&(e=new DashProperty(this,t.d,"canvas",this),r.d=e,r.d.k||(o.da=r.d.dashArray,o.do=r.d.dashoffset[0]))):o.r=2===t.r?"evenodd":"nonzero",this.stylesList.push(o),r.style=o,r},CVShapeElement.prototype.createGroupElement=function(){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(t){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,t.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,t,this)}}},CVShapeElement.prototype.createShapeElement=function(t){t=new CVShapeData(this,t,this.stylesList,this.transformsManager);return this.shapes.push(t),this.addShapeToModifiers(t),t},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;for(var t=this.itemsData.length,e=0;e<t;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),t=this.dynamicProperties.length,e=0;e<t;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(t){for(var e=this.stylesList.length,o=0;o<e;o+=1)this.stylesList[o].closed||this.stylesList[o].transforms.push(t)},CVShapeElement.prototype.removeTransformFromStyleList=function(){for(var t=this.stylesList.length,e=0;e<t;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.pop()},CVShapeElement.prototype.closeStyles=function(t){for(var e=t.length,o=0;o<e;o+=1)t[o].closed=!0},CVShapeElement.prototype.searchShapes=function(t,e,o,r,n){for(var i,a,s,l,h,c=t.length-1,u=[],p=[],d=[].concat(n),f=c;0<=f;--f){if((s=this.searchProcessedElement(t[f]))?e[f]=o[s-1]:t[f]._shouldRender=r,"fl"===t[f].ty||"st"===t[f].ty||"gf"===t[f].ty||"gs"===t[f].ty)s?e[f].style.closed=!1:e[f]=this.createStyleElement(t[f],d),u.push(e[f].style);else if("gr"===t[f].ty){if(s)for(a=e[f].it.length,i=0;i<a;i+=1)e[f].prevViewData[i]=e[f].it[i];else e[f]=this.createGroupElement(t[f]);this.searchShapes(t[f].it,e[f].it,e[f].prevViewData,r,d)}else"tr"===t[f].ty?(s||(h=this.createTransformElement(t[f]),e[f]=h),d.push(e[f]),this.addTransformToStyleList(e[f])):"sh"===t[f].ty||"rc"===t[f].ty||"el"===t[f].ty||"sr"===t[f].ty?s||(e[f]=this.createShapeElement(t[f])):"tm"===t[f].ty||"rd"===t[f].ty||"pb"===t[f].ty?(s?(l=e[f]).closed=!1:((l=ShapeModifiers.getModifier(t[f].ty)).init(this,t[f]),e[f]=l,this.shapeModifiers.push(l)),p.push(l)):"rp"===t[f].ty&&(s?(l=e[f]).closed=!0:(l=ShapeModifiers.getModifier(t[f].ty),(e[f]=l).init(this,t,f,e),this.shapeModifiers.push(l),r=!1),p.push(l));this.addProcessedElement(t[f],f+1)}for(this.removeTransformFromStyleList(),this.closeStyles(u),c=p.length,f=0;f<c;f+=1)p[f].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(t,e){(t._opMdf||e.op._mdf||this._isFirstFrame)&&(e.opacity=t.opacity,e.opacity*=e.op.v,e._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){for(var t,e,o,r,n,i,a,s,l=this.stylesList.length,h=this.globalData.renderer,c=this.globalData.canvasContext,u=0;u<l;u+=1)if(("st"!==(a=(s=this.stylesList[u]).type)&&"gs"!==a||0!==s.wi)&&s.data._shouldRender&&0!==s.coOp&&0!==this.globalData.currentGlobalAlpha){for(h.save(),n=s.elements,"st"===a||"gs"===a?(c.strokeStyle="st"===a?s.co:s.grd,c.lineWidth=s.wi,c.lineCap=s.lc,c.lineJoin=s.lj,c.miterLimit=s.ml||0):c.fillStyle="fl"===a?s.co:s.grd,h.ctxOpacity(s.coOp),"st"!==a&&"gs"!==a&&c.beginPath(),h.ctxTransform(s.preTransforms.finalTransform.props),e=n.length,t=0;t<e;t+=1){for("st"!==a&&"gs"!==a||(c.beginPath(),s.da&&(c.setLineDash(s.da),c.lineDashOffset=s.do)),r=(i=n[t].trNodes).length,o=0;o<r;o+=1)"m"===i[o].t?c.moveTo(i[o].p[0],i[o].p[1]):"c"===i[o].t?c.bezierCurveTo(i[o].pts[0],i[o].pts[1],i[o].pts[2],i[o].pts[3],i[o].pts[4],i[o].pts[5]):c.closePath();"st"!==a&&"gs"!==a||(c.stroke(),s.da&&c.setLineDash(this.dashResetter))}"st"!==a&&"gs"!==a&&c.fill(s.r),h.restore()}},CVShapeElement.prototype.renderShape=function(t,e,o,r){for(var n=t,i=e.length-1;0<=i;--i)"tr"===e[i].ty?(n=o[i].transform,this.renderShapeTransform(t,n)):"sh"===e[i].ty||"el"===e[i].ty||"rc"===e[i].ty||"sr"===e[i].ty?this.renderPath(e[i],o[i]):"fl"===e[i].ty?this.renderFill(e[i],o[i],n):"st"===e[i].ty?this.renderStroke(e[i],o[i],n):"gf"===e[i].ty||"gs"===e[i].ty?this.renderGradientFill(e[i],o[i],n):"gr"===e[i].ty?this.renderShape(n,e[i].it,o[i].it):e[i].ty;r&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(t,e){if(this._isFirstFrame||e._mdf||t.transforms._mdf){var o,r,n=t.trNodes,i=e.paths,a=i._length;n.length=0;for(var s=t.transforms.finalTransform,l=0;l<a;l+=1){var h=i.shapes[l];if(h&&h.v){for(r=h._length,o=1;o<r;o+=1)1===o&&n.push({t:"m",p:s.applyToPointArray(h.v[0][0],h.v[0][1],0)}),n.push({t:"c",pts:s.applyToTriplePoints(h.o[o-1],h.i[o],h.v[o])});1===r&&n.push({t:"m",p:s.applyToPointArray(h.v[0][0],h.v[0][1],0)}),h.c&&r&&(n.push({t:"c",pts:s.applyToTriplePoints(h.o[o-1],h.i[0],h.v[0])}),n.push({t:"z"}))}}t.trNodes=n}},CVShapeElement.prototype.renderPath=function(t,e){if(!0!==t.hd&&t._shouldRender)for(var o=e.styledShapes.length,r=0;r<o;r+=1)this.renderStyledShape(e.styledShapes[r],e.sh)},CVShapeElement.prototype.renderFill=function(t,e,o){var r=e.style;(e.c._mdf||this._isFirstFrame)&&(r.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||o._opMdf||this._isFirstFrame)&&(r.coOp=e.o.v*o.opacity)},CVShapeElement.prototype.renderGradientFill=function(t,e,o){var r=e.style;if(!r.grd||e.g._mdf||e.s._mdf||e.e._mdf||1!==t.t&&(e.h._mdf||e.a._mdf)){var n,i,a,s,l=this.globalData.canvasContext,h=e.s.v,c=e.e.v;s=1===t.t?l.createLinearGradient(h[0],h[1],c[0],c[1]):(n=Math.sqrt(Math.pow(h[0]-c[0],2)+Math.pow(h[1]-c[1],2)),i=Math.atan2(c[1]-h[1],c[0]-h[0]),1<=(a=e.h.v)?a=.99:a<=-1&&(a=-.99),c=n*a,a=Math.cos(i+e.a.v)*c+h[0],c=Math.sin(i+e.a.v)*c+h[1],l.createRadialGradient(a,c,0,h[0],h[1],n));for(var u=t.g.p,p=e.g.c,d=1,f=0;f<u;f+=1)e.g._hasOpacity&&e.g._collapsable&&(d=e.g.o[2*f+1]),s.addColorStop(p[4*f]/100,"rgba("+p[4*f+1]+","+p[4*f+2]+","+p[4*f+3]+","+d+")");r.grd=s}r.coOp=e.o.v*o.opacity},CVShapeElement.prototype.renderStroke=function(t,e,o){var r=e.style,n=e.d;n&&(n._mdf||this._isFirstFrame)&&(r.da=n.dashArray,r.do=n.dashoffset[0]),(e.c._mdf||this._isFirstFrame)&&(r.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||o._opMdf||this._isFirstFrame)&&(r.coOp=e.o.v*o.opacity),(e.w._mdf||this._isFirstFrame)&&(r.wi=e.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){var t=this.canvasContext;t.fillStyle=this.data.sc,t.fillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=!1;t.fc?(e=!0,this.values.fill=this.buildColor(t.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=e;e=!1;t.sc&&(e=!0,this.values.stroke=this.buildColor(t.sc),this.values.sWidth=t.sw);var o,r,n,i,a,s,l,h,c,u=this.globalData.fontManager.getFontByName(t.f),p=t.l,d=this.mHelper;this.stroke=e,this.values.fValue=t.finalSize+"px "+this.globalData.fontManager.getFontByName(t.f).fFamily;for(var f=t.finalText.length,m=this.data.singleShape,g=.001*t.tr*t.finalSize,v=0,y=0,S=!0,b=0,E=0;E<f;E+=1){for(o=(o=this.globalData.fontManager.getCharData(t.finalText[E],u.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily))&&o.data||{},d.reset(),m&&p[E].n&&(v=-g,y+=t.yOffset,y+=S?1:0,S=!1),s=(i=o.shapes?o.shapes[0].it:[]).length,d.scale(t.finalSize/100,t.finalSize/100),m&&this.applyTextPropertiesToMatrix(t,d,p[E].line,v,y),h=createSizedArray(s),a=0;a<s;a+=1){for(n=i[a].ks.k.i.length,l=i[a].ks.k,c=[],r=1;r<n;r+=1)1===r&&c.push(d.applyToX(l.v[0][0],l.v[0][1],0),d.applyToY(l.v[0][0],l.v[0][1],0)),c.push(d.applyToX(l.o[r-1][0],l.o[r-1][1],0),d.applyToY(l.o[r-1][0],l.o[r-1][1],0),d.applyToX(l.i[r][0],l.i[r][1],0),d.applyToY(l.i[r][0],l.i[r][1],0),d.applyToX(l.v[r][0],l.v[r][1],0),d.applyToY(l.v[r][0],l.v[r][1],0));c.push(d.applyToX(l.o[r-1][0],l.o[r-1][1],0),d.applyToY(l.o[r-1][0],l.o[r-1][1],0),d.applyToX(l.i[0][0],l.i[0][1],0),d.applyToY(l.i[0][0],l.i[0][1],0),d.applyToX(l.v[0][0],l.v[0][1],0),d.applyToY(l.v[0][0],l.v[0][1],0)),h[a]=c}m&&(v+=p[E].l,v+=g),this.textSpans[b]?this.textSpans[b].elem=h:this.textSpans[b]={elem:h},b+=1}},CVTextElement.prototype.renderInnerContent=function(){var t,e,o,r,n=this.canvasContext;n.font=this.values.fValue,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=4,this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);for(var i,a,s,l=this.textAnimator.renderedLetters,h=this.textProperty.currentData.l,c=h.length,u=null,p=null,d=null,f=0;f<c;f+=1)if(!h[f].n){if((i=l[f])&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(i.p),this.globalData.renderer.ctxOpacity(i.o)),this.fill){for(i&&i.fc?u!==i.fc&&(u=i.fc,n.fillStyle=i.fc):u!==this.values.fill&&(u=this.values.fill,n.fillStyle=this.values.fill),e=(a=this.textSpans[f].elem).length,this.globalData.canvasContext.beginPath(),t=0;t<e;t+=1)for(r=(s=a[t]).length,this.globalData.canvasContext.moveTo(s[0],s[1]),o=2;o<r;o+=6)this.globalData.canvasContext.bezierCurveTo(s[o],s[o+1],s[o+2],s[o+3],s[o+4],s[o+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(i&&i.sw?d!==i.sw&&(d=i.sw,n.lineWidth=i.sw):d!==this.values.sWidth&&(d=this.values.sWidth,n.lineWidth=this.values.sWidth),i&&i.sc?p!==i.sc&&(p=i.sc,n.strokeStyle=i.sc):p!==this.values.stroke&&(p=this.values.stroke,n.strokeStyle=this.values.stroke),e=(a=this.textSpans[f].elem).length,this.globalData.canvasContext.beginPath(),t=0;t<e;t+=1)for(r=(s=a[t]).length,this.globalData.canvasContext.moveTo(s[0],s[1]),o=2;o<r;o+=6)this.globalData.canvasContext.bezierCurveTo(s[o],s[o+1],s[o+2],s[o+3],s[o+4],s[o+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}i&&this.globalData.renderer.restore()}},CVEffects.prototype.renderFrame=function(){},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){var t,e=this.transformedElement?this.transformedElement.style:{};this.finalTransform._matMdf&&(t=this.finalTransform.mat.toCSS(),e.transform=t,e.webkitTransform=t),this.finalTransform._opMdf&&(e.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=HybridRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var t;this.data.hasMask?((t=createNS("rect")).setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((t=createTag("div")).style.width=this.data.sw+"px",t.style.height=this.data.sh+"px",t.style.backgroundColor=this.data.sc),this.layerElement.appendChild(t)},extendPrototype([HybridRenderer,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(t,e){for(var o,r=0;r<e;)this.elements[r]&&this.elements[r].getBaseElement&&(o=this.elements[r].getBaseElement()),r+=1;o?this.layerElement.insertBefore(t,o):this.layerElement.appendChild(t)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var t,e;this.baseElement.style.fontSize=0,this.data.hasMask?(this.layerElement.appendChild(this.shapesContainer),t=this.svgElement):(t=createNS("svg"),e=this.comp.data||this.globalData.compSize,t.setAttribute("width",e.w),t.setAttribute("height",e.h),t.appendChild(this.shapesContainer),this.layerElement.appendChild(t)),this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=t},HShapeElement.prototype.getTransformedPoint=function(t,e){for(var o=t.length,r=0;r<o;r+=1)e=t[r].mProps.v.applyToPointArray(e[0],e[1],0);return e},HShapeElement.prototype.calculateShapeBoundingBox=function(t,e){var o,r,n,i,a,s=t.sh.v,l=t.transformers,h=s._length;if(!(h<=1)){for(o=0;o<h-1;o+=1)r=this.getTransformedPoint(l,s.v[o]),n=this.getTransformedPoint(l,s.o[o]),i=this.getTransformedPoint(l,s.i[o+1]),a=this.getTransformedPoint(l,s.v[o+1]),this.checkBounds(r,n,i,a,e);s.c&&(r=this.getTransformedPoint(l,s.v[o]),n=this.getTransformedPoint(l,s.o[o]),i=this.getTransformedPoint(l,s.i[0]),a=this.getTransformedPoint(l,s.v[0]),this.checkBounds(r,n,i,a,e))}},HShapeElement.prototype.checkBounds=function(t,e,o,r,n){this.getBoundsOfCurve(t,e,o,r);r=this.shapeBoundingBox;n.x=bmMin(r.left,n.x),n.xMax=bmMax(r.right,n.xMax),n.y=bmMin(r.top,n.y),n.yMax=bmMax(r.bottom,n.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(t,e,o,r){for(var n,i,a,s,l=[[t[0],r[0]],[t[1],r[1]]],h=0;h<2;++h)n=6*t[h]-12*e[h]+6*o[h],s=-3*t[h]+9*e[h]-9*o[h]+3*r[h],a=3*e[h]-3*t[h],n|=0,a|=0,0==(s|=0)&&0==n||(0==s?0<(i=-a/n)&&i<1&&l[h].push(this.calculateF(i,t,e,o,r,h)):0<=(i=n*n-4*a*s)&&(0<(a=(-n+bmSqrt(i))/(2*s))&&a<1&&l[h].push(this.calculateF(a,t,e,o,r,h)),0<(s=(-n-bmSqrt(i))/(2*s))&&s<1&&l[h].push(this.calculateF(s,t,e,o,r,h))));this.shapeBoundingBox.left=bmMin.apply(null,l[0]),this.shapeBoundingBox.top=bmMin.apply(null,l[1]),this.shapeBoundingBox.right=bmMax.apply(null,l[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,l[1])},HShapeElement.prototype.calculateF=function(t,e,o,r,n,i){return bmPow(1-t,3)*e[i]+3*bmPow(1-t,2)*t*o[i]+3*(1-t)*bmPow(t,2)*r[i]+bmPow(t,3)*n[i]},HShapeElement.prototype.calculateBoundingBox=function(t,e){for(var o=t.length,r=0;r<o;r+=1)t[r]&&t[r].sh?this.calculateShapeBoundingBox(t[r],e):t[r]&&t[r].it&&this.calculateBoundingBox(t[r].it,e)},HShapeElement.prototype.currentBoxContains=function(t){return this.currentBBox.x<=t.x&&this.currentBBox.y<=t.y&&this.currentBBox.width+this.currentBBox.x>=t.x+t.width&&this.currentBBox.height+this.currentBBox.y>=t.y+t.height},HShapeElement.prototype.renderInnerContent=function(){var t,e;this._renderShapeFrame(),this.hidden||!this._isFirstFrame&&!this._mdf||((e=this.tempBoundingBox).x=t=999999,e.xMax=-t,e.y=t,e.yMax=-t,this.calculateBoundingBox(this.itemsData,e),e.width=e.xMax<e.x?0:e.xMax-e.x,e.height=e.yMax<e.y?0:e.yMax-e.y,this.currentBoxContains(e)||(t=!1,this.currentBBox.w!==e.width&&(this.currentBBox.w=e.width,this.shapeCont.setAttribute("width",e.width),t=!0),this.currentBBox.h!==e.height&&(this.currentBBox.h=e.height,this.shapeCont.setAttribute("height",e.height),t=!0),!t&&this.currentBBox.x===e.x&&this.currentBBox.y===e.y||(this.currentBBox.w=e.width,this.currentBBox.h=e.height,this.currentBBox.x=e.x,this.currentBBox.y=e.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),t=this.shapeCont.style,e="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)",t.transform=e,t.webkitTransform=e)))},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){var t;this.isMasked=this.checkMasks(),this.isMasked?(this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH),t=createNS("g"),this.maskedElement.appendChild(t),this.innerElem=t):(this.renderType="html",this.innerElem=this.layerElement),this.checkParenting()},HTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=this.innerElem.style,o=t.fc?this.buildColor(t.fc):"rgba(0,0,0,0)";e.fill=o,e.color=o,t.sc&&(e.stroke=this.buildColor(t.sc),e.strokeWidth=t.sw+"px");var r,n=this.globalData.fontManager.getFontByName(t.f);this.globalData.fontManager.chars||(e.fontSize=t.finalSize+"px",e.lineHeight=t.finalSize+"px",n.fClass?this.innerElem.className=n.fClass:(e.fontFamily=n.fFamily,r=t.fWeight,o=t.fStyle,e.fontStyle=o,e.fontWeight=r));for(var i,a,s,l,h,c,u,p,d=t.l,f=d.length,m=this.mHelper,g=0,v=0;v<f;v+=1)this.globalData.fontManager.chars?(this.textPaths[g]?i=this.textPaths[g]:((i=createNS("path")).setAttribute("stroke-linecap",lineCapEnum[1]),i.setAttribute("stroke-linejoin",lineJoinEnum[2]),i.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[g]?s=(a=this.textSpans[g]).children[0]:((a=createTag("div")).style.lineHeight=0,(s=createNS("svg")).appendChild(i),styleDiv(a)))):this.isMasked?i=this.textPaths[g]||createNS("text"):this.textSpans[g]?(a=this.textSpans[g],i=this.textPaths[g]):(styleDiv(a=createTag("span")),styleDiv(i=createTag("span")),a.appendChild(i)),this.globalData.fontManager.chars?(c=(h=this.globalData.fontManager.getCharData(t.finalText[v],n.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily))?h.data:null,m.reset(),c&&c.shapes&&(h=c.shapes[0].it,m.scale(t.finalSize/100,t.finalSize/100),l=this.createPathShape(m,h),i.setAttribute("d",l)),this.isMasked?this.innerElem.appendChild(i):(this.innerElem.appendChild(a),c&&c.shapes?(document.body.appendChild(s),p=s.getBBox(),s.setAttribute("width",p.width+2),s.setAttribute("height",p.height+2),s.setAttribute("viewBox",p.x-1+" "+(p.y-1)+" "+(p.width+2)+" "+(p.height+2)),c=s.style,u="translate("+(p.x-1)+"px,"+(p.y-1)+"px)",c.transform=u,c.webkitTransform=u,d[v].yOffset=p.y-1):(s.setAttribute("width",1),s.setAttribute("height",1)),a.appendChild(s))):(i.textContent=d[v].val,i.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked?this.innerElem.appendChild(i):(this.innerElem.appendChild(a),u=i.style,p="translate3d(0,"+-t.finalSize/1.2+"px,0)",u.transform=p,u.webkitTransform=p)),this.isMasked?this.textSpans[g]=i:this.textSpans[g]=a,this.textSpans[g].style.display="block",this.textPaths[g]=i,g+=1;for(;g<this.textSpans.length;)this.textSpans[g].style.display="none",g+=1},HTextElement.prototype.renderInnerContent=function(){var t;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;this.isMasked&&this.finalTransform._matMdf&&(this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),t=this.svgElement.style,n="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)",t.transform=n,t.webkitTransform=n)}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){for(var e,o,r,n,i=0,a=this.textAnimator.renderedLetters,s=this.textProperty.currentData.l,l=s.length,h=0;h<l;h+=1)s[h].n?i+=1:(o=this.textSpans[h],r=this.textPaths[h],e=a[i],i+=1,e._mdf.m&&(this.isMasked?o.setAttribute("transform",e.m):(o.style.webkitTransform=e.m,o.style.transform=e.m)),o.style.opacity=e.o,e.sw&&e._mdf.sw&&r.setAttribute("stroke-width",e.sw),e.sc&&e._mdf.sc&&r.setAttribute("stroke",e.sc),e.fc&&e._mdf.fc&&(r.setAttribute("fill",e.fc),r.style.color=e.fc));this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)&&(n=this.innerElem.getBBox(),this.currentBBox.w!==n.width&&(this.currentBBox.w=n.width,this.svgElement.setAttribute("width",n.width)),this.currentBBox.h!==n.height&&(this.currentBBox.h=n.height,this.svgElement.setAttribute("height",n.height)),this.currentBBox.w===n.width+2&&this.currentBBox.h===n.height+2&&this.currentBBox.x===n.x-1&&this.currentBBox.y===n.y-1||(this.currentBBox.w=n.width+2,this.currentBBox.h=n.height+2,this.currentBBox.x=n.x-1,this.currentBBox.y=n.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),t=this.svgElement.style,n="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)",t.transform=n,t.webkitTransform=n))}},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData),e=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(e),e.crossOrigin="anonymous",e.src=t,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){for(var t,e,o,r,n,i=this.comp.threeDElements.length,a=0;a<i;a+=1)"3d"===(n=this.comp.threeDElements[a]).type&&(t=n.perspectiveElem.style,e=n.container.style,o=this.pe.v+"px",r="0px 0px 0px",n="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)",t.perspective=o,t.webkitPerspective=o,e.transformOrigin=r,e.mozTransformOrigin=r,e.webkitTransformOrigin=r,t.transform=n,t.webkitTransform=n)},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var t,e,o=this._isFirstFrame;if(this.hierarchy)for(l=this.hierarchy.length,h=0;h<l;h+=1)o=this.hierarchy[h].finalTransform.mProp._mdf||o;if(o||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(h=l=this.hierarchy.length-1;0<=h;--h){var r=this.hierarchy[h].finalTransform.mProp;this.mat.translate(-r.p.v[0],-r.p.v[1],r.p.v[2]),this.mat.rotateX(-r.or.v[0]).rotateY(-r.or.v[1]).rotateZ(r.or.v[2]),this.mat.rotateX(-r.rx.v).rotateY(-r.ry.v).rotateZ(r.rz.v),this.mat.scale(1/r.s.v[0],1/r.s.v[1],1/r.s.v[2]),this.mat.translate(r.a.v[0],r.a.v[1],r.a.v[2])}this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a&&(e=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]],t=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)),e=[e[0]/t,e[1]/t,e[2]/t],t=Math.sqrt(e[2]*e[2]+e[0]*e[0]),t=Math.atan2(e[1],t),e=Math.atan2(e[0],-e[2]),this.mat.rotateY(e).rotateX(-t)),this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var n=!this._prevMat.equals(this.mat);if((n||this.pe._mdf)&&this.comp.threeDElements){for(var i,a,s,l=this.comp.threeDElements.length,h=0;h<l;h+=1)"3d"===(s=this.comp.threeDElements[h]).type&&(n&&(i=this.mat.toCSS(),(a=s.container.style).transform=i,a.webkitTransform=i),this.pe._mdf&&((s=s.perspectiveElem.style).perspective=this.pe.v+"px",s.webkitPerspective=this.pe.v+"px"));this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},HEffects.prototype.renderFrame=function(){};var animationManager=(es1={},fs1=[],gs1=0,hs1=0,is1=0,js1=!0,ks1=!1,es1.registerAnimation=ms1,es1.loadAnimation=function(t){var e=new AnimationItem;return qs1(e,null),e.setParams(t),e},es1.setSpeed=function(t,e){for(var o=0;o<hs1;o+=1)fs1[o].animation.setSpeed(t,e)},es1.setDirection=function(t,e){for(var o=0;o<hs1;o+=1)fs1[o].animation.setDirection(t,e)},es1.play=function(t){for(var e=0;e<hs1;e+=1)fs1[e].animation.play(t)},es1.pause=function(t){for(var e=0;e<hs1;e+=1)fs1[e].animation.pause(t)},es1.stop=function(t){for(var e=0;e<hs1;e+=1)fs1[e].animation.stop(t)},es1.togglePause=function(t){for(var e=0;e<hs1;e+=1)fs1[e].animation.togglePause(t)},es1.searchAnimations=function(t,e,o){for(var r,n=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),i=n.length,a=0;a<i;a+=1)o&&n[a].setAttribute("data-bm-type",o),ms1(n[a],t);e&&0===i&&(o=o||"svg",(r=document.getElementsByTagName("body")[0]).innerText="",(e=createTag("div")).style.width="100%",e.style.height="100%",e.setAttribute("data-bm-type",o),r.appendChild(e),ms1(e,t))},es1.resize=function(){for(var t=0;t<hs1;t+=1)fs1[t].animation.resize()},es1.goToAndStop=function(t,e,o){for(var r=0;r<hs1;r+=1)fs1[r].animation.goToAndStop(t,e,o)},es1.destroy=function(t){for(var e=hs1-1;0<=e;--e)fs1[e].animation.destroy(t)},es1.freeze=function(){ks1=!0},es1.unfreeze=function(){ks1=!1,Es1()},es1.setVolume=function(t,e){for(var o=0;o<hs1;o+=1)fs1[o].animation.setVolume(t,e)},es1.mute=function(t){for(var e=0;e<hs1;e+=1)fs1[e].animation.mute(t)},es1.unmute=function(t){for(var e=0;e<hs1;e+=1)fs1[e].animation.unmute(t)},es1.getRegisteredAnimations=function(){for(var t=fs1.length,e=[],o=0;o<t;o+=1)e.push(fs1[o].animation);return e},es1),es1,fs1,gs1,hs1,is1,js1,ks1;function ls1(t){for(var e=0,o=t.target;e<hs1;)fs1[e].animation===o&&(fs1.splice(e,1),--e,--hs1,o.isPaused||ps1()),e+=1}function ms1(t,e){if(!t)return null;for(var o=0;o<hs1;){if(fs1[o].elem===t&&null!==fs1[o].elem)return fs1[o].animation;o+=1}var r=new AnimationItem;return qs1(r,t),r.setData(t,e),r}function os1(){is1+=1,Es1()}function ps1(){--is1}function qs1(t,e){t.addEventListener("destroy",ls1),t.addEventListener("_active",os1),t.addEventListener("_idle",ps1),fs1.push({elem:e,animation:t}),hs1+=1}function vs1(t){for(var e=t-gs1,o=0;o<hs1;o+=1)fs1[o].animation.advanceTime(e);gs1=t,is1&&!ks1?window.requestAnimationFrame(vs1):js1=!0}function ws1(t){gs1=t,window.requestAnimationFrame(vs1)}function Es1(){!ks1&&is1&&js1&&(window.requestAnimationFrame(ws1),js1=!1)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=subframeEnabled,this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[]};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(t){(t.wrapper||t.container)&&(this.wrapper=t.wrapper||t.container);var e="svg";switch(t.animType?e=t.animType:t.renderer&&(e=t.renderer),e){case"canvas":this.renderer=new CanvasRenderer(this,t.rendererSettings);break;case"svg":this.renderer=new SVGRenderer(this,t.rendererSettings);break;default:this.renderer=new HybridRenderer(this,t.rendererSettings)}this.imagePreloader.setCacheType(e,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=e,""===t.loop||null===t.loop||void 0===t.loop||!0===t.loop?this.loop=!0:!1===t.loop?this.loop=!1:this.loop=parseInt(t.loop,10),this.autoplay=!("autoplay"in t)||t.autoplay,this.name=t.name||"",this.autoloadSegments=!Object.prototype.hasOwnProperty.call(t,"autoloadSegments")||t.autoloadSegments,this.assetsPath=t.assetsPath,this.initialSegment=t.initialSegment,t.audioFactory&&this.audioController.setAudioFactory(t.audioFactory),t.animationData?this.configAnimation(t.animationData):t.path&&(-1!==t.path.lastIndexOf("\\")?this.path=t.path.substr(0,t.path.lastIndexOf("\\")+1):this.path=t.path.substr(0,t.path.lastIndexOf("/")+1),this.fileName=t.path.substr(t.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),assetLoader.load(t.path,this.configAnimation.bind(this),function(){this.trigger("data_failed")}.bind(this)))},AnimationItem.prototype.setData=function(t,e){var o={wrapper:t,animationData:e=e&&"object"!=typeof e?JSON.parse(e):e},e=t.attributes;o.path=e.getNamedItem("data-animation-path")?e.getNamedItem("data-animation-path").value:e.getNamedItem("data-bm-path")?e.getNamedItem("data-bm-path").value:e.getNamedItem("bm-path")?e.getNamedItem("bm-path").value:"",o.animType=e.getNamedItem("data-anim-type")?e.getNamedItem("data-anim-type").value:e.getNamedItem("data-bm-type")?e.getNamedItem("data-bm-type").value:e.getNamedItem("bm-type")?e.getNamedItem("bm-type").value:e.getNamedItem("data-bm-renderer")?e.getNamedItem("data-bm-renderer").value:e.getNamedItem("bm-renderer")?e.getNamedItem("bm-renderer").value:"canvas";t=e.getNamedItem("data-anim-loop")?e.getNamedItem("data-anim-loop").value:e.getNamedItem("data-bm-loop")?e.getNamedItem("data-bm-loop").value:e.getNamedItem("bm-loop")?e.getNamedItem("bm-loop").value:"";"false"===t?o.loop=!1:"true"===t?o.loop=!0:""!==t&&(o.loop=parseInt(t,10));t=e.getNamedItem("data-anim-autoplay")?e.getNamedItem("data-anim-autoplay").value:e.getNamedItem("data-bm-autoplay")?e.getNamedItem("data-bm-autoplay").value:!e.getNamedItem("bm-autoplay")||e.getNamedItem("bm-autoplay").value;o.autoplay="false"!==t,o.name=e.getNamedItem("data-name")?e.getNamedItem("data-name").value:e.getNamedItem("data-bm-name")?e.getNamedItem("data-bm-name").value:e.getNamedItem("bm-name")?e.getNamedItem("bm-name").value:"","false"===(e.getNamedItem("data-anim-prerender")?e.getNamedItem("data-anim-prerender").value:e.getNamedItem("data-bm-prerender")?e.getNamedItem("data-bm-prerender").value:e.getNamedItem("bm-prerender")?e.getNamedItem("bm-prerender").value:"")&&(o.prerender=!1),this.setParams(o)},AnimationItem.prototype.includeLayers=function(t){t.op>this.animationData.op&&(this.animationData.op=t.op,this.totalFrames=Math.floor(t.op-this.animationData.ip));for(var e,o=this.animationData.layers,r=o.length,n=t.layers,i=n.length,a=0;a<i;a+=1)for(e=0;e<r;){if(o[e].id===n[a].id){o[e]=n[a];break}e+=1}if((t.chars||t.fonts)&&(this.renderer.globalData.fontManager.addChars(t.chars),this.renderer.globalData.fontManager.addFonts(t.fonts,this.renderer.globalData.defs)),t.assets)for(r=t.assets.length,e=0;e<r;e+=1)this.animationData.assets.push(t.assets[e]);this.animationData.__complete=!1,dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),this.renderer.includeLayers(t.layers),expressionsPlugin&&expressionsPlugin.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var t=this.animationData.segments;if(!t||0===t.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);t=t.shift();this.timeCompleted=t.time*this.frameRate;t=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,assetLoader.load(t,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(t){if(this.renderer)try{this.animationData=t,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(t),t.assets||(t.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(t.assets),this.markers=markerParser(t.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(t){this.triggerConfigError(t)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||"canvas"!==this.renderer.rendererType)&&this.imagePreloader.loadedFootages()&&(this.isLoaded=!0,dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),expressionsPlugin&&expressionsPlugin.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play())},AnimationItem.prototype.resize=function(){this.renderer.updateContainerSize()},AnimationItem.prototype.setSubframe=function(t){this.isSubframeEnabled=!!t},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame()},AnimationItem.prototype.renderFrame=function(){if(!1!==this.isLoaded&&this.renderer)try{this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(t){this.triggerRenderFrameError(t)}},AnimationItem.prototype.play=function(t){t&&this.name!==t||!0===this.isPaused&&(this.isPaused=!1,this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(t){t&&this.name!==t||!1===this.isPaused&&(this.isPaused=!0,this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(t){t&&this.name!==t||(!0===this.isPaused?this.play():this.pause())},AnimationItem.prototype.stop=function(t){t&&this.name!==t||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(t){for(var e,o=0;o<this.markers.length;o+=1)if((e=this.markers[o]).payload&&e.payload.name===t)return e;return null},AnimationItem.prototype.goToAndStop=function(t,e,o){o&&this.name!==o||(o=Number(t),isNaN(o)?(o=this.getMarkerData(t))&&this.goToAndStop(o.time,!0):e?this.setCurrentRawFrameValue(t):this.setCurrentRawFrameValue(t*this.frameModifier),this.pause())},AnimationItem.prototype.goToAndPlay=function(t,e,o){var r;o&&this.name!==o||(r=Number(t),isNaN(r)?(t=this.getMarkerData(t))&&(t.duration?this.playSegments([t.time,t.time+t.duration],!0):this.goToAndStop(t.time,!0)):this.goToAndStop(r,e,o),this.play())},AnimationItem.prototype.advanceTime=function(t){var e;!0!==this.isPaused&&!1!==this.isLoaded&&(e=!1,(t=this.currentRawFrame+t*this.frameModifier)>=this.totalFrames-1&&0<this.frameModifier?this.loop&&this.playCount!==this.loop?t>=this.totalFrames?(this.playCount+=1,this.checkSegments(t%this.totalFrames)||(this.setCurrentRawFrameValue(t%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(t):this.checkSegments(t>this.totalFrames?t%this.totalFrames:0)||(e=!0,t=this.totalFrames-1):t<0?this.checkSegments(t%this.totalFrames)||(!this.loop||this.playCount--<=0&&!0!==this.loop?(e=!0,t=0):(this.setCurrentRawFrameValue(this.totalFrames+t%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(t),e&&(this.setCurrentRawFrameValue(t),this.pause(),this.trigger("complete")))},AnimationItem.prototype.adjustSegment=function(t,e){this.playCount=0,t[1]<t[0]?(0<this.frameModifier&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=t[0]-t[1],this.timeCompleted=this.totalFrames,this.firstFrame=t[1],this.setCurrentRawFrameValue(this.totalFrames-.001-e)):t[1]>t[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=t[1]-t[0],this.timeCompleted=this.totalFrames,this.firstFrame=t[0],this.setCurrentRawFrameValue(.001+e)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(t,e){var o=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<t?o=t:this.currentRawFrame+this.firstFrame>e&&(o=e-t)),this.firstFrame=t,this.totalFrames=e-t,this.timeCompleted=this.totalFrames,-1!==o&&this.goToAndStop(o,!0)},AnimationItem.prototype.playSegments=function(t,e){if(e&&(this.segments.length=0),"object"==typeof t[0])for(var o=t.length,r=0;r<o;r+=1)this.segments.push(t[r]);else this.segments.push(t);this.segments.length&&e&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(t){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),t&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(t){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),t),!0)},AnimationItem.prototype.destroy=function(t){t&&this.name!==t||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.renderer=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(t){this.currentRawFrame=t,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(t){this.playSpeed=t,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(t){this.playDirection=t<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setVolume=function(t,e){e&&this.name!==e||this.audioController.setVolume(t)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(t){t&&this.name!==t||this.audioController.mute()},AnimationItem.prototype.unmute=function(t){t&&this.name!==t||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(t){var e,o="";return t.e?o=t.p:this.assetsPath?(-1!==(e=t.p).indexOf("images/")&&(e=e.split("/")[1]),o=this.assetsPath+e):(o=this.path,o+=t.u||"",o+=t.p),o},AnimationItem.prototype.getAssetData=function(t){for(var e=0,o=this.assets.length;e<o;){if(t===this.assets[e].id)return this.assets[e];e+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(t){return t?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.trigger=function(t){if(this._cbs&&this._cbs[t])switch(t){case"enterFrame":this.triggerEvent(t,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameModifier));break;case"loopComplete":this.triggerEvent(t,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(t,new BMCompleteEvent(t,this.frameMult));break;case"segmentStart":this.triggerEvent(t,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(t,new BMDestroyEvent(t,this));break;default:this.triggerEvent(t)}"enterFrame"===t&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===t&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult)),"complete"===t&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(t,this.frameMult)),"segmentStart"===t&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames)),"destroy"===t&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(t,this))},AnimationItem.prototype.triggerRenderFrameError=function(t){t=new BMRenderFrameErrorEvent(t,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)},AnimationItem.prototype.triggerConfigError=function(t){t=new BMConfigErrorEvent(t,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)};var Expressions=(dv1={},dv1.initExpressions=function(t){var e=0,o=[];t.renderer.compInterface=CompExpressionInterface(t.renderer),t.renderer.globalData.projectInterface.registerComposition(t.renderer),t.renderer.globalData.pushExpression=function(){e+=1},t.renderer.globalData.popExpression=function(){0===--e&&function(){var t,e=o.length;for(t=0;t<e;t+=1)o[t].release();o.length=0}()},t.renderer.globalData.registerExpressionProperty=function(t){-1===o.indexOf(t)&&o.push(t)}},dv1),dv1,expressionsPlugin=Expressions,ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null;function $bm_isInstanceOfArray(t){return t.constructor===Array||t.constructor===Float32Array}function isNumerable(t,e){return"number"===t||"boolean"===t||"string"===t||e instanceof Number}function $bm_neg(t){var e=typeof t;if("number"==e||"boolean"==e||t instanceof Number)return-t;if($bm_isInstanceOfArray(t)){for(var o=t.length,r=[],n=0;n<o;n+=1)r[n]=-t[n];return r}return t.propType?t.v:-t}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(t,e){var o=typeof t,r=typeof e;if("string"==o||"string"==r)return t+e;if(isNumerable(o,t)&&isNumerable(r,e))return t+e;if($bm_isInstanceOfArray(t)&&isNumerable(r,e))return(t=t.slice(0))[0]+=e,t;if(isNumerable(o,t)&&$bm_isInstanceOfArray(e))return(e=e.slice(0))[0]=t+e[0],e;if($bm_isInstanceOfArray(t)&&$bm_isInstanceOfArray(e)){for(var n=0,i=t.length,a=e.length,s=[];n<i||n<a;)("number"==typeof t[n]||t[n]instanceof Number)&&("number"==typeof e[n]||e[n]instanceof Number)?s[n]=t[n]+e[n]:s[n]=void 0===e[n]?t[n]:t[n]||e[n],n+=1;return s}return 0}var add=sum;function sub(t,e){var o=typeof t,r=typeof e;if(isNumerable(o,t)&&isNumerable(r,e))return(t="string"==o?parseInt(t,10):t)-(e="string"==r?parseInt(e,10):e);if($bm_isInstanceOfArray(t)&&isNumerable(r,e))return(t=t.slice(0))[0]-=e,t;if(isNumerable(o,t)&&$bm_isInstanceOfArray(e))return(e=e.slice(0))[0]=t-e[0],e;if($bm_isInstanceOfArray(t)&&$bm_isInstanceOfArray(e)){for(var n=0,i=t.length,a=e.length,s=[];n<i||n<a;)("number"==typeof t[n]||t[n]instanceof Number)&&("number"==typeof e[n]||e[n]instanceof Number)?s[n]=t[n]-e[n]:s[n]=void 0===e[n]?t[n]:t[n]||e[n],n+=1;return s}return 0}function mul(t,e){var o,r,n,i=typeof t,a=typeof e;if(isNumerable(i,t)&&isNumerable(a,e))return t*e;if($bm_isInstanceOfArray(t)&&isNumerable(a,e)){for(n=t.length,o=createTypedArray("float32",n),r=0;r<n;r+=1)o[r]=t[r]*e;return o}if(isNumerable(i,t)&&$bm_isInstanceOfArray(e)){for(n=e.length,o=createTypedArray("float32",n),r=0;r<n;r+=1)o[r]=t*e[r];return o}return 0}function div(t,e){var o,r,n,i=typeof t,a=typeof e;if(isNumerable(i,t)&&isNumerable(a,e))return t/e;if($bm_isInstanceOfArray(t)&&isNumerable(a,e)){for(n=t.length,o=createTypedArray("float32",n),r=0;r<n;r+=1)o[r]=t[r]/e;return o}if(isNumerable(i,t)&&$bm_isInstanceOfArray(e)){for(n=e.length,o=createTypedArray("float32",n),r=0;r<n;r+=1)o[r]=t/e[r];return o}return 0}function mod(t,e){return(t="string"==typeof t?parseInt(t,10):t)%(e="string"==typeof e?parseInt(e,10):e)}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(t,e,o){var r;return o<e&&(r=o,o=e,e=r),Math.min(Math.max(t,e),o)}function radiansToDegrees(t){return t/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(t){return t*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(t,e){if("number"==typeof t||t instanceof Number)return Math.abs(t-(e=e||0));for(var o=Math.min(t.length,(e=e||helperLengthArray).length),r=0,n=0;n<o;n+=1)r+=Math.pow(e[n]-t[n],2);return Math.sqrt(r)}function normalize(t){return div(t,length(t))}function rgbToHsl(t){var e=t[0],o=t[1],r=t[2],n=Math.max(e,o,r),i=Math.min(e,o,r);if(n===i)0;else{switch(n){case e:0;break;case o:0;break;case r:0}0}return t[3],1}function hue2rgb(t,e,o){return o<0&&(o+=1),1<o&&--o,o<1/6?t+6*(e-t)*o:o<.5?e:o<2/3?t+(e-t)*(2/3-o)*6:t}function hslToRgb(t){var e=t[0],o=t[1],r=t[2];return 0===o?0:(hue2rgb(o=2*r-(r=r<.5?r*(1+o):r+o-r*o),r,e+1/3),hue2rgb(o,r,e),hue2rgb(o,r,e-1/3)),t[3],1}function linear(t,e,o,r,n){var i;if(void 0!==r&&void 0!==n||(r=e,n=o,e=0,o=1),o<e&&(i=o,o=e,e=i),t<=e)return r;if(o<=t)return n;var a=o===e?0:(t-e)/(o-e);if(!r.length)return r+(n-r)*a;for(var s=r.length,l=createTypedArray("float32",s),h=0;h<s;h+=1)l[h]=r[h]+(n[h]-r[h])*a;return l}function random(t,e){if(void 0===e&&(void 0===t?(t=0,e=1):(e=t,t=void 0)),e.length){var o=e.length;t=t||createTypedArray("float32",o);for(var r=createTypedArray("float32",o),n=BMMath.random(),i=0;i<o;i+=1)r[i]=t[i]+n*(e[i]-t[i]);return r}return(t=void 0===t?0:t)+BMMath.random()*(e-t)}function createPath(t,e,o,r){var n=t.length,i=shapePool.newElement();i.setPathData(!!r,n);for(var a,s,l=[0,0],h=0;h<n;h+=1)a=e&&e[h]?e[h]:l,s=o&&o[h]?o[h]:l,i.setTripleAt(t[h][0],t[h][1],s[0]+t[h][0],s[1]+t[h][1],a[0]+t[h][0],a[1]+t[h][1],h,!0);return i}function initiateExpression(elem,data,property){var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=-1!==val.indexOf("random"),elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw||0,height=elem.data.sh||0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||!0!==this.data.hd,wiggle=function(t,e){for(var o=this.pv.length||1,r=createTypedArray("float32",o),n=Math.floor(5*time),i=0,a=0;i<n;){for(a=0;a<o;a+=1)r[a]+=-e+2*e*BMMath.random();i+=1}var s=5*time,l=s-Math.floor(s),h=createTypedArray("float32",o);if(1<o){for(a=0;a<o;a+=1)h[a]=this.pv[a]+r[a]+(-e+2*e*BMMath.random())*l;return h}return this.pv+r[0]+(-e+2*e*BMMath.random())*l}.bind(this);function loopInDuration(t,e){return loopIn(t,e,!0)}function loopOutDuration(t,e){return loopOut(t,e,!0)}thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,text,textIndex,textTotal,selectorValue;function lookAt(t,e){t=[e[0]-t[0],e[1]-t[1],e[2]-t[2]],Math.atan2(t[0],Math.sqrt(t[1]*t[1]+t[2]*t[2])),Math.atan2(t[1],t[2]);return 1}function easeOut(t,e,o,r,n){return applyEase(easeOutBez,t,e,o,r,n)}function easeIn(t,e,o,r,n){return applyEase(easeInBez,t,e,o,r,n)}function ease(t,e,o,r,n){return applyEase(easeInOutBez,t,e,o,r,n)}function applyEase(t,e,o,r,n,i){void 0===n?(n=o,i=r):e=(e-o)/(r-o),1<e?e=1:e<0&&(e=0);var a=t(e);if($bm_isInstanceOfArray(n)){for(var s=n.length,l=createTypedArray("float32",s),h=0;h<s;h+=1)l[h]=(i[h]-n[h])*a+n[h];return l}return(i-n)*a+n}function nearestKey(t){var e,o,r,n=data.k.length;if(data.k.length&&"number"!=typeof data.k[0])if(o=-1,(t*=elem.comp.globalData.frameRate)<data.k[0].t)o=1,r=data.k[0].t;else{for(e=0;e<n-1;e+=1){if(t===data.k[e].t){o=e+1,r=data.k[e].t;break}if(t>data.k[e].t&&t<data.k[e+1].t){r=t-data.k[e].t>data.k[e+1].t-t?(o=e+2,data.k[e+1].t):(o=e+1,data.k[e].t);break}}-1===o&&(o=e+1,r=data.k[e].t)}else r=o=0;var i={};return i.index=o,i.time=r/elem.comp.globalData.frameRate,i}function key(t){if(!data.k.length||"number"==typeof data.k[0])throw new Error("The property has no keyframe at index "+t);for(var e={time:data.k[--t].t/elem.comp.globalData.frameRate,value:[]},o=Object.prototype.hasOwnProperty.call(data.k[t],"s")?data.k[t].s:data.k[t-1].e,r=o.length,n=0;n<r;n+=1)e[n]=o[n],e.value[n]=o[n];return e}function framesToTime(t,e){return t/(e=e||elem.comp.globalData.frameRate)}function timeToFrames(t,e){return(t=!t&&0!==t?time:t)*(e=e||elem.comp.globalData.frameRate)}function seedRandom(t){BMMath.seedrandom(randSeed+t)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(t,e){return"string"==typeof value&&(void 0===e?value.substring(t):value.substring(t,e))}function substr(t,e){return"string"==typeof value&&(void 0===e?value.substr(t):value.substr(t,e))}function posterizeTime(t){time=0===t?0:Math.floor(time*t)/t,value=valueAtTime(time)}var index=elem.data.ind,hasParent=!(!elem.hierarchy||!elem.hierarchy.length),parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(t){return value=t,_needsRandom&&seedRandom(randSeed),this.frameExpressionId===elem.globalData.frameId&&"textSelector"!==this.propType?value:("textSelector"===this.propType&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),($bm_transform=transform)&&(anchorPoint=transform.anchorPoint)),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect=effect||thisLayer(4),(hasParent=!(!elem.hierarchy||!elem.hierarchy.length))&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt="shape"===scoped_bm_rt.propType?scoped_bm_rt.v:scoped_bm_rt)}return executeExpression}return ob.initiateExpression=initiateExpression,ob}(),expressionHelpers={searchExpressions:function(t,e,o){e.x&&(o.k=!0,o.x=!0,o.initiateExpression=ExpressionManager.initiateExpression,o.effectsSequence.push(o.initiateExpression(t,e,o).bind(o)))},getSpeedAtTime:function(t){var e=this.getValueAtTime(t),o=this.getValueAtTime(t+-.01),r=0;if(e.length){for(var n=0;n<e.length;n+=1)r+=Math.pow(o[n]-e[n],2);r=100*Math.sqrt(r)}else r=0;return r},getVelocityAtTime:function(t){if(void 0!==this.vel)return this.vel;var e=this.getValueAtTime(t),o=this.getValueAtTime(t+-.001);if(e.length)for(var r=createTypedArray("float32",e.length),n=0;n<e.length;n+=1)r[n]=(o[n]-e[n])/-.001;else r=(o-e)/-.001;return r},getValueAtTime:function(t){return t*=this.elem.globalData.frameRate,(t-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<t?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(t,this._cachingAtTime),this._cachingAtTime.lastFrame=t),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(t){this.propertyGroup=t}};!function(){function a(t,e,o){if(!this.k||!this.keyframes)return this.pv;t=t?t.toLowerCase():"";var r,n,i,a,s,l=this.comp.renderedFrame,h=this.keyframes,c=h[h.length-1].t;if(l<=c)return this.pv;if(o?n=c-(r=e?Math.abs(c-this.elem.comp.globalData.frameRate*e):Math.max(0,c-this.elem.data.ip)):((!e||e>h.length-1)&&(e=h.length-1),r=c-(n=h[h.length-1-e].t)),"pingpong"===t){if(Math.floor((l-n)/r)%2!=0)return this.getValueAtTime((r-(l-n)%r+n)/this.comp.globalData.frameRate,0)}else{if("offset"===t){var u=this.getValueAtTime(n/this.comp.globalData.frameRate,0),p=this.getValueAtTime(c/this.comp.globalData.frameRate,0),d=this.getValueAtTime(((l-n)%r+n)/this.comp.globalData.frameRate,0),f=Math.floor((l-n)/r);if(this.pv.length){for(a=(s=new Array(u.length)).length,i=0;i<a;i+=1)s[i]=(p[i]-u[i])*f+d[i];return s}return(p-u)*f+d}if("continue"===t){var m=this.getValueAtTime(c/this.comp.globalData.frameRate,0),g=this.getValueAtTime((c-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(a=(s=new Array(m.length)).length,i=0;i<a;i+=1)s[i]=m[i]+(m[i]-g[i])*((l-c)/this.comp.globalData.frameRate)/5e-4;return s}return m+(l-c)/.001*(m-g)}}return this.getValueAtTime(((l-n)%r+n)/this.comp.globalData.frameRate,0)}function s(t,e,o){if(!this.k)return this.pv;t=t?t.toLowerCase():"";var r,n,i,a,s,l=this.comp.renderedFrame,h=this.keyframes,c=h[0].t;if(c<=l)return this.pv;if(o?n=c+(r=e?Math.abs(this.elem.comp.globalData.frameRate*e):Math.max(0,this.elem.data.op-c)):r=(n=h[e=!e||e>h.length-1?h.length-1:e].t)-c,"pingpong"===t){if(Math.floor((c-l)/r)%2==0)return this.getValueAtTime(((c-l)%r+c)/this.comp.globalData.frameRate,0)}else{if("offset"===t){var u=this.getValueAtTime(c/this.comp.globalData.frameRate,0),p=this.getValueAtTime(n/this.comp.globalData.frameRate,0),d=this.getValueAtTime((r-(c-l)%r+c)/this.comp.globalData.frameRate,0),f=Math.floor((c-l)/r)+1;if(this.pv.length){for(a=(s=new Array(u.length)).length,i=0;i<a;i+=1)s[i]=d[i]-(p[i]-u[i])*f;return s}return d-(p-u)*f}if("continue"===t){var m=this.getValueAtTime(c/this.comp.globalData.frameRate,0),g=this.getValueAtTime((c+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(a=(s=new Array(m.length)).length,i=0;i<a;i+=1)s[i]=m[i]+(m[i]-g[i])*(c-l)/.001;return s}return m+(m-g)*(c-l)/.001}}return this.getValueAtTime((r-((c-l)%r+c))/this.comp.globalData.frameRate,0)}function l(t,e){if(!this.k)return this.pv;if(t=.5*(t||.4),(e=Math.floor(e||5))<=1)return this.pv;for(var o,r=this.comp.renderedFrame/this.comp.globalData.frameRate,n=r-t,i=1<e?(r+t-n)/(e-1):1,a=0,s=0,l=this.pv.length?createTypedArray("float32",this.pv.length):0;a<e;){if(o=this.getValueAtTime(n+a*i),this.pv.length)for(s=0;s<this.pv.length;s+=1)l[s]+=o[s];else l+=o;a+=1}if(this.pv.length)for(s=0;s<this.pv.length;s+=1)l[s]/=e;else l/=e;return l}var r=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(t,e,o){o=r(t,e,o);return o.dynamicProperties.length?o.getValueAtTime=function(t){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var e,o,r,n,i,a,s=this._transformCachingAtTime.v;return s.cloneFromProps(this.pre.props),this.appliedTransformations<1&&(e=this.a.getValueAtTime(t),s.translate(-e[0]*this.a.mult,-e[1]*this.a.mult,e[2]*this.a.mult)),this.appliedTransformations<2&&(o=this.s.getValueAtTime(t),s.scale(o[0]*this.s.mult,o[1]*this.s.mult,o[2]*this.s.mult)),this.sk&&this.appliedTransformations<3&&(e=this.sk.getValueAtTime(t),o=this.sa.getValueAtTime(t),s.skewFromAxis(-e*this.sk.mult,o*this.sa.mult)),this.r&&this.appliedTransformations<4?(r=this.r.getValueAtTime(t),s.rotate(-r*this.r.mult)):!this.r&&this.appliedTransformations<4&&(r=this.rz.getValueAtTime(t),n=this.ry.getValueAtTime(t),i=this.rx.getValueAtTime(t),a=this.or.getValueAtTime(t),s.rotateZ(-r*this.rz.mult).rotateY(n*this.ry.mult).rotateX(i*this.rx.mult).rotateZ(-a[2]*this.or.mult).rotateY(a[1]*this.or.mult).rotateX(a[0]*this.or.mult)),this.data.p&&this.data.p.s?(n=this.px.getValueAtTime(t),i=this.py.getValueAtTime(t),this.data.p.z?(a=this.pz.getValueAtTime(t),s.translate(n*this.px.mult,i*this.py.mult,-a*this.pz.mult)):s.translate(n*this.px.mult,i*this.py.mult,0)):(t=this.p.getValueAtTime(t),s.translate(t[0]*this.p.mult,t[1]*this.p.mult,-t[2]*this.p.mult)),s}.bind(o):o.getValueAtTime=function(){return this.v.clone(new Matrix)}.bind(o),o.setGroupProperty=expressionHelpers.setGroupProperty,o};var h=PropertyFactory.getProp;PropertyFactory.getProp=function(t,e,o,r,n){var i=h(t,e,o,r,n);i.kf?i.getValueAtTime=expressionHelpers.getValueAtTime.bind(i):i.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(i),i.setGroupProperty=expressionHelpers.setGroupProperty,i.loopOut=a,i.loopIn=s,i.smooth=l,i.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(i),i.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(i),i.numKeys=1===e.a?e.k.length:0,i.propertyIndex=e.ix;r=0;return 0!==o&&(r=createTypedArray("float32",(1===e.a?e.k[0].s:e.k).length)),i._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:r},expressionHelpers.searchExpressions(t,e,i),i.k&&n.addDynamicProperty(i),i};var t=ShapePropertyFactory.getConstructorFunction(),e=ShapePropertyFactory.getKeyframedConstructorFunction();function o(){}o.prototype={vertices:function(t,e){this.k&&this.getValue();for(var o=this.v,r=(o=void 0!==e?this.getValueAtTime(e,0):o)._length,n=o[t],i=o.v,a=createSizedArray(r),s=0;s<r;s+=1)a[s]="i"===t||"o"===t?[n[s][0]-i[s][0],n[s][1]-i[s][1]]:[n[s][0],n[s][1]];return a},points:function(t){return this.vertices("v",t)},inTangents:function(t){return this.vertices("i",t)},outTangents:function(t){return this.vertices("o",t)},isClosed:function(){return this.v.c},pointOnPath:function(t,e){var o=this.v;void 0!==e&&(o=this.getValueAtTime(e,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(o));for(var e=this._segmentsLength,r=e.lengths,n=e.totalLength*t,i=0,a=r.length,s=0;i<a;){if(s+r[i].addedLength>n){var l=i,h=o.c&&i===a-1?0:i+1,c=(n-s)/r[i].addedLength,u=bez.getPointInSegment(o.v[l],o.v[h],o.o[l],o.i[h],c,r[i]);break}s+=r[i].addedLength,i+=1}return u=u||(o.c?[o.v[0][0],o.v[0][1]]:[o.v[o._length-1][0],o.v[o._length-1][1]])},vectorOnPath:function(t,e,o){1==t?t=this.v.c:0==t&&(t=.999);var r=this.pointOnPath(t,e),t=this.pointOnPath(t+.001,e),e=t[0]-r[0],t=t[1]-r[1],r=Math.sqrt(Math.pow(e,2)+Math.pow(t,2));return 0===r?[0,0]:"tangent"===o?[e/r,t/r]:[-t/r,e/r]},tangentOnPath:function(t,e){return this.vectorOnPath(t,e,"tangent")},normalOnPath:function(t,e){return this.vectorOnPath(t,e,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([o],t),extendPrototype([o],e),e.prototype.getValueAtTime=function(t){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),t*=this.elem.globalData.frameRate,(t-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<t?this._caching.lastIndex:0,this._cachingAtTime.lastTime=t,this.interpolateShape(t,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},e.prototype.initiateExpression=ExpressionManager.initiateExpression;var i=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(t,e,o,r,n){n=i(t,e,o,r,n);return n.propertyIndex=e.ix,n.lock=!1,3===o?expressionHelpers.searchExpressions(t,e.pt,n):4===o&&expressionHelpers.searchExpressions(t,e.ks,n),n.k&&t.addDynamicProperty(n),n}}(),TextProperty.prototype.getExpressionValue=function(t,e){var o=this.calculateExpression(e);if(t.t===o)return t;e={};return this.copyData(e,t),e.t=o.toString(),e.__complete=!1,e},TextProperty.prototype.searchProperty=function(){var t=this.searchKeyframes(),e=this.searchExpressions();return this.kf=t||e,this.kf},TextProperty.prototype.searchExpressions=function(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null};var ShapePathInterface=function(t,e,o){var r=e.sh;function n(t){return"Shape"===t||"shape"===t||"Path"===t||"path"===t||"ADBE Vector Shape"===t||2===t?n.path:null}e=propertyGroupFactory(n,o);return r.setGroupProperty(PropertyInterface("Path",e)),Object.defineProperties(n,{path:{get:function(){return r.k&&r.getValue(),r}},shape:{get:function(){return r.k&&r.getValue(),r}},_name:{value:t.nm},ix:{value:t.ix},propertyIndex:{value:t.ix},mn:{value:t.mn},propertyGroup:{value:o}}),n},propertyGroupFactory=function(e,o){return function(t){return(t=void 0===t?1:t)<=0?e:o(t-1)}},PropertyInterface=function(t,e){var o={_name:t};return function(t){return(t=void 0===t?1:t)<=0?o:e(t-1)}},ShapeExpressionInterface=function(t,e,r){var n;function o(t){if("number"==typeof t)return 0===(t=void 0===t?1:t)?r:n[t-1];for(var e=0,o=n.length;e<o;){if(n[e]._name===t)return n[e];e+=1}return null}return o.propertyGroup=propertyGroupFactory(o,function(){return r}),n=JB1(t,e,o.propertyGroup),o.numProperties=n.length,o._name="Contents",o};function JB1(t,e,o){for(var r=[],n=t?t.length:0,i=0;i<n;i+=1)"gr"===t[i].ty?r.push(function(t,e,o){function r(t){switch(t){case"ADBE Vectors Group":case"Contents":case 2:return r.content;default:return r.transform}}r.propertyGroup=propertyGroupFactory(r,o);o=function(t,e,o){function r(t){for(var e=0,o=n.length;e<o;){if(n[e]._name===t||n[e].mn===t||n[e].propertyIndex===t||n[e].ix===t||n[e].ind===t)return n[e];e+=1}return"number"==typeof t?n[t-1]:null}var n;r.propertyGroup=propertyGroupFactory(r,o),n=JB1(t.it,e.it,r.propertyGroup),r.numProperties=n.length;e=RB1(t.it[t.it.length-1],e.it[e.it.length-1],r.propertyGroup);return r.transform=e,r.propertyIndex=t.cix,r._name=t.nm,r}(t,e,r.propertyGroup),e=RB1(t.it[t.it.length-1],e.it[e.it.length-1],r.propertyGroup);return r.content=o,r.transform=e,Object.defineProperty(r,"_name",{get:function(){return t.nm}}),r.numProperties=t.np,r.propertyIndex=t.ix,r.nm=t.nm,r.mn=t.mn,r}(t[i],e[i],o)):"fl"===t[i].ty?r.push(function(t,e,o){function r(t){return"Color"===t||"color"===t?r.color:"Opacity"===t||"opacity"===t?r.opacity:null}return Object.defineProperties(r,{color:{get:ExpressionPropertyInterface(e.c)},opacity:{get:ExpressionPropertyInterface(e.o)},_name:{value:t.nm},mn:{value:t.mn}}),e.c.setGroupProperty(PropertyInterface("Color",o)),e.o.setGroupProperty(PropertyInterface("Opacity",o)),r}(t[i],e[i],o)):"st"===t[i].ty?r.push(function(e,o,t){var r,t=propertyGroupFactory(s,t),n=propertyGroupFactory(void 0,t);var i=e.d?e.d.length:0,a={};for(r=0;r<i;r+=1)!function(t){Object.defineProperty(a,e.d[t].nm,{get:ExpressionPropertyInterface(o.d.dataProps[t].p)})}(r),o.d.dataProps[r].p.setGroupProperty(n);function s(t){return"Color"===t||"color"===t?s.color:"Opacity"===t||"opacity"===t?s.opacity:"Stroke Width"===t||"stroke width"===t?s.strokeWidth:null}return Object.defineProperties(s,{color:{get:ExpressionPropertyInterface(o.c)},opacity:{get:ExpressionPropertyInterface(o.o)},strokeWidth:{get:ExpressionPropertyInterface(o.w)},dash:{get:function(){return a}},_name:{value:e.nm},mn:{value:e.mn}}),o.c.setGroupProperty(PropertyInterface("Color",t)),o.o.setGroupProperty(PropertyInterface("Opacity",t)),o.w.setGroupProperty(PropertyInterface("Stroke Width",t)),s}(t[i],e[i],o)):"tm"===t[i].ty?r.push(function(e,t,o){function r(t){return t===e.e.ix||"End"===t||"end"===t?r.end:t===e.s.ix?r.start:t===e.o.ix?r.offset:null}var n=propertyGroupFactory(r,o);return r.propertyIndex=e.ix,t.s.setGroupProperty(PropertyInterface("Start",n)),t.e.setGroupProperty(PropertyInterface("End",n)),t.o.setGroupProperty(PropertyInterface("Offset",n)),r.propertyIndex=e.ix,r.propertyGroup=o,Object.defineProperties(r,{start:{get:ExpressionPropertyInterface(t.s)},end:{get:ExpressionPropertyInterface(t.e)},offset:{get:ExpressionPropertyInterface(t.o)},_name:{value:e.nm}}),r.mn=e.mn,r}(t[i],e[i],o)):"tr"===t[i].ty||("el"===t[i].ty?r.push(function(e,t,o){function r(t){return e.p.ix===t?r.position:e.s.ix===t?r.size:null}o=propertyGroupFactory(r,o);r.propertyIndex=e.ix;t="tm"===t.sh.ty?t.sh.prop:t.sh;return t.s.setGroupProperty(PropertyInterface("Size",o)),t.p.setGroupProperty(PropertyInterface("Position",o)),Object.defineProperties(r,{size:{get:ExpressionPropertyInterface(t.s)},position:{get:ExpressionPropertyInterface(t.p)},_name:{value:e.nm}}),r.mn=e.mn,r}(t[i],e[i],o)):"sr"===t[i].ty?r.push(function(e,t,o){function r(t){return e.p.ix===t?r.position:e.r.ix===t?r.rotation:e.pt.ix===t?r.points:e.or.ix===t||"ADBE Vector Star Outer Radius"===t?r.outerRadius:e.os.ix===t?r.outerRoundness:!e.ir||e.ir.ix!==t&&"ADBE Vector Star Inner Radius"!==t?e.is&&e.is.ix===t?r.innerRoundness:null:r.innerRadius}o=propertyGroupFactory(r,o),t="tm"===t.sh.ty?t.sh.prop:t.sh;r.propertyIndex=e.ix,t.or.setGroupProperty(PropertyInterface("Outer Radius",o)),t.os.setGroupProperty(PropertyInterface("Outer Roundness",o)),t.pt.setGroupProperty(PropertyInterface("Points",o)),t.p.setGroupProperty(PropertyInterface("Position",o)),t.r.setGroupProperty(PropertyInterface("Rotation",o)),e.ir&&(t.ir.setGroupProperty(PropertyInterface("Inner Radius",o)),t.is.setGroupProperty(PropertyInterface("Inner Roundness",o)));return Object.defineProperties(r,{position:{get:ExpressionPropertyInterface(t.p)},rotation:{get:ExpressionPropertyInterface(t.r)},points:{get:ExpressionPropertyInterface(t.pt)},outerRadius:{get:ExpressionPropertyInterface(t.or)},outerRoundness:{get:ExpressionPropertyInterface(t.os)},innerRadius:{get:ExpressionPropertyInterface(t.ir)},innerRoundness:{get:ExpressionPropertyInterface(t.is)},_name:{value:e.nm}}),r.mn=e.mn,r}(t[i],e[i],o)):"sh"===t[i].ty?r.push(ShapePathInterface(t[i],e[i],o)):"rc"===t[i].ty?r.push(function(e,t,o){function r(t){return e.p.ix===t?r.position:e.r.ix===t?r.roundness:e.s.ix===t||"Size"===t||"ADBE Vector Rect Size"===t?r.size:null}o=propertyGroupFactory(r,o),t="tm"===t.sh.ty?t.sh.prop:t.sh;return r.propertyIndex=e.ix,t.p.setGroupProperty(PropertyInterface("Position",o)),t.s.setGroupProperty(PropertyInterface("Size",o)),t.r.setGroupProperty(PropertyInterface("Rotation",o)),Object.defineProperties(r,{position:{get:ExpressionPropertyInterface(t.p)},roundness:{get:ExpressionPropertyInterface(t.r)},size:{get:ExpressionPropertyInterface(t.s)},_name:{value:e.nm}}),r.mn=e.mn,r}(t[i],e[i],o)):"rd"===t[i].ty?r.push(function(e,t,o){function r(t){return e.r.ix===t||"Round Corners 1"===t?r.radius:null}o=propertyGroupFactory(r,o);return r.propertyIndex=e.ix,t.rd.setGroupProperty(PropertyInterface("Radius",o)),Object.defineProperties(r,{radius:{get:ExpressionPropertyInterface(t.rd)},_name:{value:e.nm}}),r.mn=e.mn,r}(t[i],e[i],o)):"rp"===t[i].ty?r.push(function(e,t,o){function r(t){return e.c.ix===t||"Copies"===t?r.copies:e.o.ix===t||"Offset"===t?r.offset:null}o=propertyGroupFactory(r,o);return r.propertyIndex=e.ix,t.c.setGroupProperty(PropertyInterface("Copies",o)),t.o.setGroupProperty(PropertyInterface("Offset",o)),Object.defineProperties(r,{copies:{get:ExpressionPropertyInterface(t.c)},offset:{get:ExpressionPropertyInterface(t.o)},_name:{value:e.nm}}),r.mn=e.mn,r}(t[i],e[i],o)):"gf"===t[i].ty?r.push(function(t,e,o){function r(t){return"Start Point"===t||"start point"===t?r.startPoint:"End Point"===t||"end point"===t?r.endPoint:"Opacity"===t||"opacity"===t?r.opacity:null}return Object.defineProperties(r,{startPoint:{get:ExpressionPropertyInterface(e.s)},endPoint:{get:ExpressionPropertyInterface(e.e)},opacity:{get:ExpressionPropertyInterface(e.o)},type:{get:function(){return"a"}},_name:{value:t.nm},mn:{value:t.mn}}),e.s.setGroupProperty(PropertyInterface("Start Point",o)),e.e.setGroupProperty(PropertyInterface("End Point",o)),e.o.setGroupProperty(PropertyInterface("Opacity",o)),r}(t[i],e[i],o)):r.push((t[i],e[i],function(){return null})));return r}function RB1(e,t,o){function r(t){return e.a.ix===t||"Anchor Point"===t?r.anchorPoint:e.o.ix===t||"Opacity"===t?r.opacity:e.p.ix===t||"Position"===t?r.position:e.r.ix===t||"Rotation"===t||"ADBE Vector Rotation"===t?r.rotation:e.s.ix===t||"Scale"===t?r.scale:e.sk&&e.sk.ix===t||"Skew"===t?r.skew:e.sa&&e.sa.ix===t||"Skew Axis"===t?r.skewAxis:null}var n=propertyGroupFactory(r,o);return t.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",n)),t.transform.mProps.p.setGroupProperty(PropertyInterface("Position",n)),t.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",n)),t.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",n)),t.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",n)),t.transform.mProps.sk&&(t.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",n)),t.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",n))),t.transform.op.setGroupProperty(PropertyInterface("Opacity",n)),Object.defineProperties(r,{opacity:{get:ExpressionPropertyInterface(t.transform.mProps.o)},position:{get:ExpressionPropertyInterface(t.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(t.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(t.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(t.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(t.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(t.transform.mProps.sa)},_name:{value:e.nm}}),r.ty="tr",r.mn=e.mn,r.propertyGroup=o,r}var TextExpressionInterface=function(e){var o;function r(t){return"ADBE Text Document"!==t?null:r.sourceText}return Object.defineProperty(r,"sourceText",{get:function(){e.textProperty.getValue();var t=e.textProperty.currentData.t;return void 0!==t&&(e.textProperty.currentData.t=void 0,(o=new String(t)).value=t||new String(t)),o}}),r},LayerExpressionInterface=function(e){function o(t){switch(t){case"ADBE Root Vectors Group":case"Contents":case 2:return o.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return r;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return o.effect;case"ADBE Text Properties":return o.textInterface;default:return null}}o.getMatrix=YD1,o.invertPoint=cE1,o.applyPoint=bE1,o.toWorld=$D1,o.toWorldVec=ZD1,o.fromWorld=aE1,o.fromWorldVec=_D1,o.toComp=$D1,o.fromComp=dE1,o.sampleImage=eE1,o.sourceRectAtTime=e.sourceRectAtTime.bind(e);var r,t=getDescriptor(r=TransformExpressionInterface((o._elem=e).finalTransform.mProp),"anchorPoint");return Object.defineProperties(o,{hasParent:{get:function(){return e.hierarchy.length}},parent:{get:function(){return e.hierarchy[0].layerInterface}},rotation:getDescriptor(r,"rotation"),scale:getDescriptor(r,"scale"),position:getDescriptor(r,"position"),opacity:getDescriptor(r,"opacity"),anchorPoint:t,anchor_point:t,transform:{get:function(){return r}},active:{get:function(){return e.isInRange}}}),o.startTime=e.data.st,o.index=e.data.ind,o.source=e.data.refId,o.height=0===e.data.ty?e.data.h:100,o.width=0===e.data.ty?e.data.w:100,o.inPoint=e.data.ip/e.comp.globalData.frameRate,o.outPoint=e.data.op/e.comp.globalData.frameRate,o._name=e.data.nm,o.registerMaskInterface=function(t){o.mask=new MaskManagerInterface(t,e)},o.registerEffectsInterface=function(t){o.effect=t},o};function YD1(t){var e=new Matrix;return void 0!==t?this._elem.finalTransform.mProp.getValueAtTime(t).clone(e):this._elem.finalTransform.mProp.applyToMatrix(e),e}function ZD1(t,e){e=this.getMatrix(e);return e.props[12]=0,e.props[13]=0,e.props[14]=0,this.applyPoint(e,t)}function $D1(t,e){e=this.getMatrix(e);return this.applyPoint(e,t)}function _D1(t,e){e=this.getMatrix(e);return e.props[12]=0,e.props[13]=0,e.props[14]=0,this.invertPoint(e,t)}function aE1(t,e){e=this.getMatrix(e);return this.invertPoint(e,t)}function bE1(t,e){if(this._elem.hierarchy&&this._elem.hierarchy.length)for(var o=this._elem.hierarchy.length,r=0;r<o;r+=1)this._elem.hierarchy[r].finalTransform.mProp.applyToMatrix(t);return t.applyToPointArray(e[0],e[1],e[2]||0)}function cE1(t,e){if(this._elem.hierarchy&&this._elem.hierarchy.length)for(var o=this._elem.hierarchy.length,r=0;r<o;r+=1)this._elem.hierarchy[r].finalTransform.mProp.applyToMatrix(t);return t.inversePoint(e)}function dE1(t){var e=new Matrix;if(e.reset(),this._elem.finalTransform.mProp.applyToMatrix(e),this._elem.hierarchy&&this._elem.hierarchy.length){for(var o=this._elem.hierarchy.length,r=0;r<o;r+=1)this._elem.hierarchy[r].finalTransform.mProp.applyToMatrix(e);return e.inversePoint(t)}return e.inversePoint(t)}function eE1(){return[1,1,1,1]}var FootageInterface=function(t){function e(t){return"Data"===t?e.dataInterface:null}return e._name="Data",e.dataInterface=RE1(t),e};function RE1(t){function e(t){return"Outline"===t?e.outlineInterface():null}function o(t){if(i[t])return"object"==typeof(i=i[n=t])?o:i;var e=t.indexOf(n);if(-1===e)return"";e=parseInt(t.substr(e+n.length),10);return"object"==typeof(i=i[e])?o:i}var r,n,i;return e._name="Outline",e.outlineInterface=(n="",i=(r=t).getFootageData(),function(){return n="",i=r.getFootageData(),o}),e}var CompExpressionInterface=function(r){function t(t){for(var e=0,o=r.layers.length;e<o;){if(r.layers[e].nm===t||r.layers[e].ind===t)return r.elements[e].layerInterface;e+=1}return null}return Object.defineProperty(t,"_name",{value:r.data.nm}),(t.layer=t).pixelAspect=1,t.height=r.data.h||r.globalData.compSize.h,t.width=r.data.w||r.globalData.compSize.w,t.pixelAspect=1,t.frameDuration=1/r.globalData.frameRate,t.displayStartTime=0,t.numLayers=r.layers.length,t},TransformExpressionInterface=function(t){function e(t){switch(t){case"scale":case"Scale":case"ADBE Scale":case 6:return e.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return e.rotation;case"ADBE Rotate X":return e.xRotation;case"ADBE Rotate Y":return e.yRotation;case"position":case"Position":case"ADBE Position":case 2:return e.position;case"ADBE Position_0":return e.xPosition;case"ADBE Position_1":return e.yPosition;case"ADBE Position_2":return e.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return e.anchorPoint;case"opacity":case"Opacity":case 11:return e.opacity;default:return null}}var o,r,n,i;return Object.defineProperty(e,"rotation",{get:ExpressionPropertyInterface(t.r||t.rz)}),Object.defineProperty(e,"zRotation",{get:ExpressionPropertyInterface(t.rz||t.r)}),Object.defineProperty(e,"xRotation",{get:ExpressionPropertyInterface(t.rx)}),Object.defineProperty(e,"yRotation",{get:ExpressionPropertyInterface(t.ry)}),Object.defineProperty(e,"scale",{get:ExpressionPropertyInterface(t.s)}),t.p?i=ExpressionPropertyInterface(t.p):(o=ExpressionPropertyInterface(t.px),r=ExpressionPropertyInterface(t.py),t.pz&&(n=ExpressionPropertyInterface(t.pz))),Object.defineProperty(e,"position",{get:function(){return t.p?i():[o(),r(),n?n():0]}}),Object.defineProperty(e,"xPosition",{get:ExpressionPropertyInterface(t.px)}),Object.defineProperty(e,"yPosition",{get:ExpressionPropertyInterface(t.py)}),Object.defineProperty(e,"zPosition",{get:ExpressionPropertyInterface(t.pz)}),Object.defineProperty(e,"anchorPoint",{get:ExpressionPropertyInterface(t.a)}),Object.defineProperty(e,"opacity",{get:ExpressionPropertyInterface(t.o)}),Object.defineProperty(e,"skew",{get:ExpressionPropertyInterface(t.sk)}),Object.defineProperty(e,"skewAxis",{get:ExpressionPropertyInterface(t.sa)}),Object.defineProperty(e,"orientation",{get:ExpressionPropertyInterface(t.or)}),e},ProjectInterface=function(){function t(t){for(var e=0,o=this.compositions.length;e<o;){if(this.compositions[e].data&&this.compositions[e].data.nm===t)return this.compositions[e].prepareFrame&&this.compositions[e].data.xt&&this.compositions[e].prepareFrame(this.currentFrame),this.compositions[e].compInterface;e+=1}return null}return t.compositions=[],t.currentFrame=0,t.registerComposition=qF1,t};function qF1(t){this.compositions.push(t)}var EffectsExpressionInterface={createEffectsInterface:function(t,e){if(t.effectsManager){var o,r=[],n=t.data.ef,i=t.effectsManager.effectElements.length;for(o=0;o<i;o+=1)r.push(function t(n,e,o,r){function i(t){for(var e=n.ef,o=0,r=e.length;o<r;){if(t===e[o].nm||t===e[o].mn||t===e[o].ix)return 5===e[o].ty?s[o]:s[o]();o+=1}throw new Error}var a=propertyGroupFactory(i,o);var s=[];var l;var h=n.ef.length;for(l=0;l<h;l+=1)5===n.ef[l].ty?s.push(t(n.ef[l],e.effectElements[l],e.effectElements[l].propertyGroup,r)):s.push(zF1(e.effectElements[l],n.ef[l].ty,r,a));"ADBE Color Control"===n.mn&&Object.defineProperty(i,"color",{get:function(){return s[0]()}});Object.defineProperties(i,{numProperties:{get:function(){return n.np}},_name:{value:n.nm},propertyGroup:{value:a}});i.enabled=0!==n.en;i.active=i.enabled;return i}(n[o],t.effectsManager.effectElements[o],e,t));var a=t.data.ef||[],s=function(t){for(o=0,i=a.length;o<i;){if(t===a[o].nm||t===a[o].mn||t===a[o].ix)return r[o];o+=1}return null};return Object.defineProperty(s,"numProperties",{get:function(){return a.length}}),s}return null}};function zF1(t,e,o,r){var n=ExpressionPropertyInterface(t.p);return t.p.setGroupProperty&&t.p.setGroupProperty(PropertyInterface("",r)),function(){return 10===e?o.comp.compInterface(t.p.v):n()}}var MaskManagerInterface=function(){function t(t,e){this._mask=t,this._data=e}Object.defineProperty(t.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(t.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}});return function(e){for(var o=createSizedArray(e.viewData.length),r=e.viewData.length,n=0;n<r;n+=1)o[n]=new t(e.viewData[n],e.masksProperties[n]);return function(t){for(n=0;n<r;){if(e.masksProperties[n].nm===t)return o[n];n+=1}return null}}}(),ExpressionPropertyInterface=(kG1={pv:0,v:0,mult:1},lG1={pv:[0,0,0],v:[0,0,0],mult:1},function(t){return t?"unidimensional"===t.propType?(o=1/(e=!((e=t)&&"pv"in e)?kG1:e).mult,r=e.pv*o,(n=new Number(r)).value=r,mG1(n,e,"unidimensional"),function(){return e.k&&e.getValue(),r=e.v*o,n.value!==r&&((n=new Number(r)).value=r,mG1(n,e,"unidimensional")),n}):(a=1/(i=!((i=t)&&"pv"in i)?lG1:i).mult,s=i.data&&i.data.l||i.pv.length,l=createTypedArray("float32",s),h=createTypedArray("float32",s),l.value=h,mG1(l,i,"multidimensional"),function(){i.k&&i.getValue();for(var t=0;t<s;t+=1)h[t]=i.v[t]*a,l[t]=h[t];return l}):pG1;var e,o,r,n,i,a,s,l,h}),kG1,lG1;function mG1(r,n,i){Object.defineProperty(r,"velocity",{get:function(){return n.getVelocityAtTime(n.comp.currentFrame)}}),r.numKeys=n.keyframes?n.keyframes.length:0,r.key=function(t){if(!r.numKeys)return 0;var e="",e="s"in n.keyframes[t-1]?n.keyframes[t-1].s:"e"in n.keyframes[t-2]?n.keyframes[t-2].e:n.keyframes[t-2].s,o="unidimensional"===i?new Number(e):Object.assign({},e);return o.time=n.keyframes[t-1].t/n.elem.comp.globalData.frameRate,o.value="unidimensional"===i?e[0]:e,o},r.valueAtTime=n.getValueAtTime,r.speedAtTime=n.getSpeedAtTime,r.velocityAtTime=n.getVelocityAtTime,r.propertyGroup=n.propertyGroup}function pG1(){return kG1}var TextExpressionSelectorPropFactory=function(t,e){this.pv=1,this.comp=t.comp,this.elem=t,this.mult=.01,this.propType="textSelector",this.textTotal=e.totalChars,this.selectorValue=100,this.lastValue=[1,1,1],this.k=!0,this.x=!0,this.getValue=ExpressionManager.initiateExpression.bind(this)(t,e,this),this.getMult=HG1,this.getVelocityAtTime=expressionHelpers.getVelocityAtTime,this.kf?this.getValueAtTime=expressionHelpers.getValueAtTime.bind(this):this.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(this),this.setGroupProperty=expressionHelpers.setGroupProperty};function HG1(t,e){return this.textIndex=t+1,this.textTotal=e,this.v=this.getValue()*this.mult,this.v}var propertyGetTextProp=TextSelectorProp.getTextSelectorProp;function SliderEffect(t,e,o){this.p=PropertyFactory.getProp(e,t.v,0,0,o)}function AngleEffect(t,e,o){this.p=PropertyFactory.getProp(e,t.v,0,0,o)}function ColorEffect(t,e,o){this.p=PropertyFactory.getProp(e,t.v,1,0,o)}function PointEffect(t,e,o){this.p=PropertyFactory.getProp(e,t.v,1,0,o)}function LayerIndexEffect(t,e,o){this.p=PropertyFactory.getProp(e,t.v,0,0,o)}function MaskIndexEffect(t,e,o){this.p=PropertyFactory.getProp(e,t.v,0,0,o)}function CheckboxEffect(t,e,o){this.p=PropertyFactory.getProp(e,t.v,0,0,o)}function NoValueEffect(){this.p={}}function EffectsManager(t,e){var o=t.ef||[];this.effectElements=[];for(var r,n=o.length,i=0;i<n;i+=1)r=new GroupEffect(o[i],e),this.effectElements.push(r)}function GroupEffect(t,e){this.init(t,e)}TextSelectorProp.getTextSelectorProp=function(t,e,o){return 1===e.t?new TextExpressionSelectorPropFactory(t,e,o):propertyGetTextProp(t,e,o)},extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(t,e){this.data=t,this.effectElements=[],this.initDynamicPropertyContainer(e);for(var o,r=this.data.ef.length,n=this.data.ef,i=0;i<r;i+=1){switch(o=null,n[i].ty){case 0:o=new SliderEffect(n[i],e,this);break;case 1:o=new AngleEffect(n[i],e,this);break;case 2:o=new ColorEffect(n[i],e,this);break;case 3:o=new PointEffect(n[i],e,this);break;case 4:case 7:o=new CheckboxEffect(n[i],e,this);break;case 10:o=new LayerIndexEffect(n[i],e,this);break;case 11:o=new MaskIndexEffect(n[i],e,this);break;case 5:o=new EffectsManager(n[i],e,this);break;default:o=new NoValueEffect(n[i],e,this)}o&&this.effectElements.push(o)}};var lottie={};function setLocationHref(t){locationHref=t}function searchAnimations(){!0===standalone?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function setSubframeRendering(t){subframeEnabled=t}function setIDPrefix(t){idPrefix=t}function loadAnimation(t){return!0===standalone&&(t.animationData=JSON.parse(animationData)),animationManager.loadAnimation(t)}function setQuality(t){if("string"==typeof t)switch(t){case"high":defaultCurveSegments=200;break;default:case"medium":defaultCurveSegments=50;break;case"low":defaultCurveSegments=10}else!isNaN(t)&&1<t&&(defaultCurveSegments=t);roundValues(!(50<=defaultCurveSegments))}function inBrowser(){return"undefined"!=typeof navigator}function installPlugin(t,e){"expressions"===t&&(expressionsPlugin=e)}function getFactory(t){switch(t){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(t){for(var e=queryString.split("&"),o=0;o<e.length;o+=1){var r=e[o].split("=");if(decodeURIComponent(r[0])==t)return decodeURIComponent(r[1])}return null}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocationHref,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.setIDPrefix=setIDPrefix,lottie.__getFactory=getFactory,lottie.version="5.7.14";var standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="",queryString,scripts,index,myScript,queryString,renderer;standalone&&(scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""},queryString=myScript.src.replace(/^[^\?]+\??/,""),renderer=getQueryVariable("renderer"));var readyStateCheckInterval=setInterval(checkReady,100);return lottie},void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return qHb(pHb)}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},lSNA:function(t,e){t.exports=function(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t},t.exports.default=t.exports,t.exports.__esModule=!0},ls82:function(C,t,e){!function(t){!function(t){"use strict";var l,h,c,u,p,d,e,o=Object.prototype,f=o.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag",s="object"==typeof C,m=t.regeneratorRuntime;function g(t,e,o,r){var n,i,a,s,e=e&&e.prototype instanceof y?e:y,e=Object.create(e.prototype),r=new P(r||[]);return e._invoke=(n=t,i=o,a=r,s=h,function(t,e){if(s===u)throw new Error("Generator is already running");if(s===p){if("throw"===t)throw e;return D()}for(a.method=t,a.arg=e;;){var o=a.delegate;if(o){var r=function t(e,o){var r=e.iterator[o.method];if(r===l){if(o.delegate=null,"throw"===o.method){if(e.iterator.return&&(o.method="return",o.arg=l,t(e,o),"throw"===o.method))return d;o.method="throw",o.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=v(r,e.iterator,o.arg);if("throw"===r.type)return o.method="throw",o.arg=r.arg,o.delegate=null,d;r=r.arg;if(!r)return o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,d;{if(!r.done)return r;o[e.resultName]=r.value,o.next=e.nextLoc,"return"!==o.method&&(o.method="next",o.arg=l)}o.delegate=null;return d}(o,a);if(r){if(r===d)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===h)throw s=p,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=u;r=v(n,i,a);if("normal"===r.type){if(s=a.done?p:c,r.arg!==d)return{value:r.arg,done:a.done}}else"throw"===r.type&&(s=p,a.method="throw",a.arg=r.arg)}}),e}function v(t,e,o){try{return{type:"normal",arg:t.call(e,o)}}catch(t){return{type:"throw",arg:t}}}function y(){}function S(){}function b(){}function E(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function w(i){function a(t,e,o,r){t=v(i[t],i,e);if("throw"!==t.type){var n=t.arg,e=n.value;return e&&"object"==typeof e&&f.call(e,"__await")?Promise.resolve(e.__await).then(function(t){a("next",t,o,r)},function(t){a("throw",t,o,r)}):Promise.resolve(e).then(function(t){n.value=t,o(n)},r)}r(t.arg)}var e;"object"==typeof t.process&&t.process.domain&&(a=t.process.domain.bind(a)),this._invoke=function(o,r){function t(){return new Promise(function(t,e){a(o,r,t,e)})}return e=e?e.then(t,t):t()}}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function M(e){if(e){var t=e[n];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,t=function t(){for(;++o<e.length;)if(f.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=l,t.done=!0,t};return t.next=t}}return{next:D}}function D(){return{value:l,done:!0}}m?s&&(C.exports=m):((m=t.regeneratorRuntime=s?C.exports:{}).wrap=g,h="suspendedStart",c="suspendedYield",u="executing",p="completed",d={},(r={})[n]=function(){return this},(s=(s=Object.getPrototypeOf)&&s(s(M([]))))&&s!==o&&f.call(s,n)&&(r=s),e=b.prototype=y.prototype=Object.create(r),(S.prototype=e.constructor=b).constructor=S,b[a]=S.displayName="GeneratorFunction",m.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===S||"GeneratorFunction"===(t.displayName||t.name))},m.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(e),t},m.awrap=function(t){return{__await:t}},E(w.prototype),w.prototype[i]=function(){return this},m.AsyncIterator=w,m.async=function(t,e,o,r){var n=new w(g(t,e,o,r));return m.isGeneratorFunction(e)?n:n.next().then(function(t){return t.done?t.value:n.next()})},E(e),e[a]="Generator",e[n]=function(){return this},e.toString=function(){return"[object Generator]"},m.keys=function(o){var t,r=[];for(t in o)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in o)return t.value=e,t.done=!1,t}return t.done=!0,t}},m.values=M,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&f.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=l)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(o){if(this.done)throw o;var r=this;function t(t,e){return i.type="throw",i.arg=o,r.next=t,e&&(r.method="next",r.arg=l),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e],i=n.completion;if("root"===n.tryLoc)return t("end");if(n.tryLoc<=this.prev){var a=f.call(n,"catchLoc"),s=f.call(n,"finallyLoc");if(a&&s){if(this.prev<n.catchLoc)return t(n.catchLoc,!0);if(this.prev<n.finallyLoc)return t(n.finallyLoc)}else if(a){if(this.prev<n.catchLoc)return t(n.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return t(n.finallyLoc)}}}},abrupt:function(t,e){for(var o=this.tryEntries.length-1;0<=o;--o){var r=this.tryEntries[o];if(r.tryLoc<=this.prev&&f.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var n=r;break}}var i=(n=n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc?null:n)?n.completion:{};return i.type=t,i.arg=e,n?(this.method="next",this.next=n.finallyLoc,d):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e];if(o.finallyLoc===t)return this.complete(o.completion,o.afterLoc),x(o),d}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e];if(o.tryLoc===t){var r,n=o.completion;return"throw"===n.type&&(r=n.arg,x(o)),r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,o){return this.delegate={iterator:M(t),resultName:e,nextLoc:o},"next"===this.method&&(this.arg=l),d}})}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}.call(this,e("yLpj"))},lvtm:function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},lwsE:function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},m0LI:function(t,e){t.exports=function(t,e){var o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var r,n,i=[],a=!0,s=!1;try{for(o=o.call(t);!(a=(r=o.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,n=t}finally{try{a||null==o.return||o.return()}finally{if(s)throw n}}return i}},t.exports.default=t.exports,t.exports.__esModule=!0},m0Pp:function(t,e,o){var i=o("2OiF");t.exports=function(r,n,t){if(i(r),void 0===n)return r;switch(t){case 1:return function(t){return r.call(n,t)};case 2:return function(t,e){return r.call(n,t,e)};case 3:return function(t,e,o){return r.call(n,t,e,o)}}return function(){return r.apply(n,arguments)}}},mGWK:function(t,e,o){"use strict";var r=o("XKFU"),n=o("aCFj"),i=o("RYi7"),a=o("ne8i"),s=[].lastIndexOf,l=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(l||!o("LyE8")(s)),"Array",{lastIndexOf:function(t){if(l)return s.apply(this,arguments)||0;var e=n(this),o=a(e.length),r=o-1;for((r=1<arguments.length?Math.min(r,i(arguments[1])):r)<0&&(r=o+r);0<=r;r--)if(r in e&&e[r]===t)return r||0;return-1}})},mI1R:function(t,e,o){"use strict";function r(t,e){this._r=t,this._s=e}var n=o("XKFU"),i=o("vhPU"),a=o("ne8i"),s=o("quPj"),l=o("C/va"),h=RegExp.prototype;o("QaDb")(r,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),n(n.P,"String",{matchAll:function(t){if(i(this),!s(t))throw TypeError(t+" is not a regexp!");var e=String(this),o="flags"in h?String(t.flags):l.call(t),o=new RegExp(t.source,~o.indexOf("g")?o:"g"+o);return o.lastIndex=a(t.lastIndex),new r(o,e)}})},mLhc:function(e,t,o){e=function(a){"use strict";var l,t=Object.prototype,h=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.asyncIterator||"@@asyncIterator",n=e.toStringTag||"@@toStringTag";function i(t,e,o){return Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function(t,e,o){return t[e]=o}}function s(t,e,o,r){var n,i,a,s,e=e&&e.prototype instanceof g?e:g,e=Object.create(e.prototype),r=new P(r||[]);return e._invoke=(n=t,i=o,a=r,s=u,function(t,e){if(s===d)throw new Error("Generator is already running");if(s===f){if("throw"===t)throw e;return D()}for(a.method=t,a.arg=e;;){var o=a.delegate;if(o){var r=function t(e,o){var r=e.iterator[o.method];if(r===l){if(o.delegate=null,"throw"===o.method){if(e.iterator.return&&(o.method="return",o.arg=l,t(e,o),"throw"===o.method))return m;o.method="throw",o.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var r=c(r,e.iterator,o.arg);if("throw"===r.type)return o.method="throw",o.arg=r.arg,o.delegate=null,m;r=r.arg;if(!r)return o.method="throw",o.arg=new TypeError("iterator result is not an object"),o.delegate=null,m;{if(!r.done)return r;o[e.resultName]=r.value,o.next=e.nextLoc,"return"!==o.method&&(o.method="next",o.arg=l)}o.delegate=null;return m}(o,a);if(r){if(r===m)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===u)throw s=f,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=d;r=c(n,i,a);if("normal"===r.type){if(s=a.done?f:p,r.arg!==m)return{value:r.arg,done:a.done}}else"throw"===r.type&&(s=f,a.method="throw",a.arg=r.arg)}}),e}function c(t,e,o){try{return{type:"normal",arg:t.call(e,o)}}catch(t){return{type:"throw",arg:t}}}a.wrap=s;var u="suspendedStart",p="suspendedYield",d="executing",f="completed",m={};function g(){}function v(){}function y(){}var S={};i(S,r,function(){return this});e=Object.getPrototypeOf,e=e&&e(e(M([])));e&&e!==t&&h.call(e,r)&&(S=e);var b=y.prototype=g.prototype=Object.create(S);function E(t){["next","throw","return"].forEach(function(e){i(t,e,function(t){return this._invoke(e,t)})})}function w(a,s){var e;this._invoke=function(o,r){function t(){return new s(function(t,e){!function e(t,o,r,n){t=c(a[t],a,o);if("throw"!==t.type){var i=t.arg;return(o=i.value)&&"object"==typeof o&&h.call(o,"__await")?s.resolve(o.__await).then(function(t){e("next",t,r,n)},function(t){e("throw",t,r,n)}):s.resolve(o).then(function(t){i.value=t,r(i)},function(t){return e("throw",t,r,n)})}n(t.arg)}(o,r,t,e)})}return e=e?e.then(t,t):t()}}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function M(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,t=function t(){for(;++o<e.length;)if(h.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=l,t.done=!0,t};return t.next=t}}return{next:D}}function D(){return{value:l,done:!0}}return i(b,"constructor",v.prototype=y),i(y,"constructor",v),v.displayName=i(y,n,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,i(t,n,"GeneratorFunction")),t.prototype=Object.create(b),t},a.awrap=function(t){return{__await:t}},E(w.prototype),i(w.prototype,o,function(){return this}),a.AsyncIterator=w,a.async=function(t,e,o,r,n){void 0===n&&(n=Promise);var i=new w(s(t,e,o,r),n);return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},E(b),i(b,n,"Generator"),i(b,r,function(){return this}),i(b,"toString",function(){return"[object Generator]"}),a.keys=function(o){var t,r=[];for(t in o)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in o)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=M,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&h.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=l)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(o){if(this.done)throw o;var r=this;function t(t,e){return i.type="throw",i.arg=o,r.next=t,e&&(r.method="next",r.arg=l),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e],i=n.completion;if("root"===n.tryLoc)return t("end");if(n.tryLoc<=this.prev){var a=h.call(n,"catchLoc"),s=h.call(n,"finallyLoc");if(a&&s){if(this.prev<n.catchLoc)return t(n.catchLoc,!0);if(this.prev<n.finallyLoc)return t(n.finallyLoc)}else if(a){if(this.prev<n.catchLoc)return t(n.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return t(n.finallyLoc)}}}},abrupt:function(t,e){for(var o=this.tryEntries.length-1;0<=o;--o){var r=this.tryEntries[o];if(r.tryLoc<=this.prev&&h.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var n=r;break}}var i=(n=n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc?null:n)?n.completion:{};return i.type=t,i.arg=e,n?(this.method="next",this.next=n.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e];if(o.finallyLoc===t)return this.complete(o.completion,o.afterLoc),x(o),m}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e];if(o.tryLoc===t){var r,n=o.completion;return"throw"===n.type&&(r=n.arg,x(o)),r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,o){return this.delegate={iterator:M(t),resultName:e,nextLoc:o},"next"===this.method&&(this.arg=l),m}},a}(e.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}},mQtv:function(t,e,o){var r=o("kJMx"),n=o("JiEa"),i=o("y3w9"),o=o("dyZX").Reflect;t.exports=o&&o.ownKeys||function(t){var e=r.f(i(t)),o=n.f;return o?e.concat(o(t)):e}},mYba:function(t,e,o){var r=o("aCFj"),n=o("EemH").f;o("Xtr8")("getOwnPropertyDescriptor",function(){return function(t,e){return n(r(t),e)}})},mcXe:function(t,e,o){o("xqFc")("Set")},mura:function(t,e,o){var r=o("0/R4"),n=o("Z6vF").onFreeze;o("Xtr8")("preventExtensions",function(e){return function(t){return e&&r(t)?e(n(t)):t}})},n3AX:function(t,e,o){var r=o("Nsbk");t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t},t.exports.default=t.exports,t.exports.__esModule=!0},nABe:function(t,e,o){o=o("XKFU");o(o.S,"Math",{iaddh:function(t,e,o,r){t>>>=0,o>>>=0;return(e>>>0)+(r>>>0)+((t&o|(t|o)&~(t+o>>>0))>>>31)|0}})},nBIS:function(t,e,o){var r=o("0/R4"),n=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&n(t)===t}},nCnK:function(t,e,o){o("7DDg")("Uint32",4,function(r){return function(t,e,o){return r(this,t,e,o)}})},nGyu:function(t,e,o){var r=o("K0xU")("unscopables"),n=Array.prototype;null==n[r]&&o("Mukb")(n,r,{}),t.exports=function(t){n[r][t]=!0}},nICZ:function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},nIY7:function(t,e,o){"use strict";o("OGtf")("big",function(t){return function(){return t(this,"big","","")}})},ne8i:function(t,e,o){var r=o("RYi7"),n=Math.min;t.exports=function(t){return 0<t?n(r(t),9007199254740991):0}},ngcb:function(t,e,o){},nh4g:function(t,e,o){t.exports=!o("eeVq")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},nsiH:function(t,e,o){"use strict";o("OGtf")("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},nzyx:function(t,e,o){var r=o("XKFU"),o=o("LVwc");r(r.S+r.F*(o!=Math.expm1),"Math",{expm1:o})},o0o1:function(t,e,o){t.exports=o("mLhc")},oDIu:function(t,e,o){"use strict";var r=o("XKFU"),n=o("AvRE")(!1);r(r.P,"String",{codePointAt:function(t){return n(this,t)}})},"oZ/O":function(t,e,o){var r=o("XKFU"),n=o("y3w9"),i=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){n(t);try{return i&&i(t),!0}catch(t){return!1}}})},"ojR+":function(t,e,o){var r=o("XKFU");r(r.S,"System",{global:o("dyZX")})},ol8x:function(t,e,o){o=o("dyZX").navigator;t.exports=o&&o.userAgent||""},pIFo:function(t,e,o){"use strict";var w=o("y3w9"),T=o("S/j/"),x=o("ne8i"),P=o("RYi7"),M=o("A5AN"),D=o("Xxuz"),C=Math.max,k=Math.min,R=Math.floor,I=/\$([$&`']|\d\d?|<[^>]*>)/g,A=/\$([$&`']|\d\d?)/g;o("IU+Z")("replace",2,function(n,i,b,E){return[function(t,e){var o=n(this),r=null==t?void 0:t[i];return void 0!==r?r.call(t,o,e):b.call(String(o),t,e)},function(t,e){var o=E(b,t,this,e);if(o.done)return o.value;var r=w(t),n=String(this),i="function"==typeof e;i||(e=String(e));var a,s=r.global;s&&(a=r.unicode,r.lastIndex=0);for(var l=[];;){if(null===(d=D(r,n)))break;if(l.push(d),!s)break;""===String(d[0])&&(r.lastIndex=M(n,x(r.lastIndex),a))}for(var h,c="",u=0,p=0;p<l.length;p++){for(var d=l[p],f=String(d[0]),m=C(k(P(d.index),n.length),0),g=[],v=1;v<d.length;v++)g.push(void 0===(h=d[v])?h:String(h));var y,S=d.groups,S=i?(y=[f].concat(g,m,n),void 0!==S&&y.push(S),String(e.apply(void 0,y))):function(i,a,s,l,h,t){var c=s+i.length,u=l.length,e=A;void 0!==h&&(h=T(h),e=I);return b.call(t,e,function(t,e){var o;switch(e.charAt(0)){case"$":return"$";case"&":return i;case"`":return a.slice(0,s);case"'":return a.slice(c);case"<":o=h[e.slice(1,-1)];break;default:var r=+e;if(0==r)return t;if(u<r){var n=R(r/10);return 0===n?t:n<=u?void 0===l[n-1]?e.charAt(1):l[n-1]+e.charAt(1):t}o=l[r-1]}return void 0===o?"":o})}(f,n,m,g,S,e);u<=m&&(c+=n.slice(u,m)+S,u=m+f.length)}return c+n.slice(u)}]})},pbhE:function(t,e,o){"use strict";var n=o("2OiF");function r(t){var o,r;this.promise=new t(function(t,e){if(void 0!==o||void 0!==r)throw TypeError("Bad Promise constructor");o=t,r=e}),this.resolve=n(o),this.reject=n(r)}t.exports.f=function(t){return new r(t)}},"pp/T":function(t,e,o){o=o("XKFU");o(o.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},q9eg:function(t,e){t.exports=function(e,o){var r=o===Object(o)?function(t){return o[t]}:o;return function(t){return String(t).replace(e,r)}}},qcxO:function(t,e,o){"use strict";var r=o("XKFU"),n=o("pbhE"),i=o("nICZ");r(r.S,"Promise",{try:function(t){var e=n.f(this),t=i(t);return(t.e?e.reject:e.resolve)(t.v),e.promise}})},qncB:function(t,e,o){var i=o("XKFU"),r=o("vhPU"),a=o("eeVq"),s=o("/e88"),o="["+s+"]",n=RegExp("^"+o+o+"*"),l=RegExp(o+o+"*$"),o=function(t,e,o){var r={},n=a(function(){return!!s[t]()||"​"!="​"[t]()}),e=r[t]=n?e(h):s[t];o&&(r[o]=e),i(i.P+i.F*n,"String",r)},h=o.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(n,"")),t=2&e?t.replace(l,""):t};t.exports=o},quPj:function(t,e,o){var r=o("0/R4"),n=o("LZWt"),i=o("K0xU")("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==n(t))}},r1bV:function(t,e,o){o("7DDg")("Uint16",2,function(r){return function(t,e,o){return r(this,t,e,o)}})},rE2o:function(t,e,o){o("OnI7")("asyncIterator")},rGqo:function(t,e,o){for(var r=o("yt8O"),n=o("DVgA"),i=o("KroJ"),a=o("dyZX"),s=o("Mukb"),l=o("hPIQ"),o=o("K0xU"),h=o("iterator"),c=o("toStringTag"),u=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=n(p),f=0;f<d.length;f++){var m,g=d[f],v=p[g],y=a[g],S=y&&y.prototype;if(S&&(S[h]||s(S,h,u),S[c]||s(S,c,g),l[g]=u,v))for(m in r)S[m]||i(S,m,r[m],!0)}},rvZc:function(t,e,o){"use strict";var r=o("XKFU"),n=o("ne8i"),i=o("0sh+"),a="endsWith",s=""[a];r(r.P+r.F*o("UUeW")(a),"String",{endsWith:function(t){var e=i(this,t,a),o=1<arguments.length?arguments[1]:void 0,r=n(e.length),r=void 0===o?r:Math.min(n(o),r),t=String(t);return s?s.call(e,t,r):e.slice(r-t.length,r)===t}})},s5qY:function(t,e,o){var r=o("0/R4");t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},sFw1:function(t,e,o){o("7DDg")("Int8",1,function(r){return function(t,e,o){return r(this,t,e,o)}})},sMXx:function(t,e,o){"use strict";var r=o("Ugos");o("XKFU")({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},sbF8:function(t,e,o){var r=o("XKFU"),n=o("nBIS"),i=Math.abs;r(r.S,"Number",{isSafeInteger:function(t){return n(t)&&i(t)<=9007199254740991}})},tMJk:function(t,e,o){o=o("XKFU");o(o.S,"Math",{imulh:function(t,e){var o=+t,r=+e,t=65535&o,e=65535&r,o=o>>16,r=r>>16,e=(o*e>>>0)+(t*e>>>16);return o*r+(e>>16)+((t*r>>>0)+(65535&e)>>16)}})},tUrg:function(t,e,o){"use strict";o("OGtf")("link",function(e){return function(t){return e(this,"a","href",t)}})},tjUo:function(M,t,D){"use strict";D.r(t),function(p,d){var t=D("lwsE"),n=D.n(t),e=D("7W2i"),i=D.n(e),o=D("a1gu"),a=D.n(o),r=D("Nsbk"),s=D.n(r),l=D("cDf5"),f=D.n(l),h=D("M0Sy"),c=D("uSGp"),t=D("+fQ6"),u=D("RK/D"),e=D("AP+2"),m=(D("7xj+"),D("xSrG")),g=D("7Pct"),v=D("RM+U");function y(o){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=s()(o);return e=r?(t=s()(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),a()(this,e)}}o=function(){function t(e){var o=this.constructor;return this.then(function(t){return o.resolve(e()).then(function(){return t})},function(t){return o.resolve(e()).then(function(){return o.reject(t)})})}function e(o){return new this(function(n,t){if(!o||void 0===o.length)return t(new TypeError(f()(o)+" "+o+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(o);if(0===i.length)return n([]);for(var a=i.length,e=0;i.length>e;e++)!function e(o,t){if(t&&("object"==f()(t)||"function"==typeof t)){var r=t.then;if("function"==typeof r)return r.call(t,function(t){e(o,t)},function(t){i[o]={status:"rejected",reason:t},0==--a&&n(i)}),0}i[o]={status:"fulfilled",value:t},0==--a&&n(i)}(e,i[e])})}function l(t){return t&&void 0!==t.length}function o(){}function i(t){if(!(this instanceof i))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],c(t,this)}function n(o,r){for(;3===o._state;)o=o._value;0!==o._state?(o._handled=!0,i._immediateFn(function(){var t,e=1===o._state?r.onFulfilled:r.onRejected;if(null!==e){try{t=e(o._value)}catch(t){return void s(r.promise,t)}a(r.promise,t)}else(1===o._state?a:s)(r.promise,o._value)})):o._deferreds.push(r)}function a(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==f()(t)||"function"==typeof t)){var o=t.then;if(t instanceof i)return e._state=3,e._value=t,void h(e);if("function"==typeof o)return void c((r=o,n=t,function(){r.apply(n,arguments)}),e)}e._state=1,e._value=t,h(e)}catch(t){s(e,t)}var r,n}function s(t,e){t._state=2,t._value=e,h(t)}function h(t){2===t._state&&0===t._deferreds.length&&i._immediateFn(function(){t._handled||i._unhandledRejectionFn(t._value)});for(var e=0,o=t._deferreds.length;e<o;e++)n(t,t._deferreds[e]);t._deferreds=null}function c(t,e){var o=!1;try{t(function(t){o||(o=!0,a(e,t))},function(t){o||(o=!0,s(e,t))})}catch(t){if(o)return;o=!0,s(e,t)}}var r=setTimeout;i.prototype.catch=function(t){return this.then(null,t)},i.prototype.then=function(r,t){var e=new this.constructor(o);return n(this,new function(t,e,o){this.onFulfilled="function"==typeof r?r:null,this.onRejected="function"==typeof e?e:null,this.promise=o}(0,t,e)),e},i.prototype.finally=t,i.all=function(e){return new i(function(n,i){if(!l(e))return i(new TypeError("Promise.all accepts an array"));var a=Array.prototype.slice.call(e);if(0===a.length)return n([]);for(var s=a.length,t=0;a.length>t;t++)!function e(o,t){try{if(t&&("object"==f()(t)||"function"==typeof t)){var r=t.then;if("function"==typeof r)return r.call(t,function(t){e(o,t)},i),0}a[o]=t,0==--s&&n(a)}catch(t){i(t)}}(t,a[t])})},i.allSettled=e,i.resolve=function(e){return e&&"object"==f()(e)&&e.constructor===i?e:new i(function(t){t(e)})},i.reject=function(o){return new i(function(t,e){e(o)})},i.race=function(n){return new i(function(t,e){if(!l(n))return e(new TypeError("Promise.race accepts an array"));for(var o=0,r=n.length;o<r;o++)i.resolve(n[o]).then(t,e)})},i._immediateFn="function"==typeof p?function(t){p(t)}:function(t){r(t,0)},i._unhandledRejectionFn=function(t){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var u=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==d)return d;throw Error("unable to locate global object")}();"function"!=typeof u.Promise?u.Promise=i:u.Promise.prototype.finally?u.Promise.allSettled||(u.Promise.allSettled=e):u.Promise.prototype.finally=t},("object"!=("undefined"==typeof exports?"undefined":f()(exports))||void 0===M)&&"function"==typeof define&&D("PDX0")?define(o):o(),vrChatConnector();r=window.Promise;window.Promise=function(t){i()(r,t);var o=y(r);function r(t,e){return n()(this,r),o.call(this,t,e||function(){})}return r}(r);l=window.VRHOUSE_CONFIG,o=l.LIB_URLS,r=(void 0===o?{}:o).domain,o=document.scripts,o=o[o.length-1].src.substring(0,o[o.length-1].src.lastIndexOf("/")+1);D.p=r||o.slice(0,o.lastIndexOf("/static/js/")+1);(0,g.a.getConfig)(l.MODULE,"room");var S,b=[[],[]],E={canvas:!!window.CanvasRenderingContext2D,webgl:!!l.MINIMIZE_WEBGL_CONTEXTS||function(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.body.clientHeight,e=document.createElement("div");return e.id="webgl-error-message",e.style.fontFamily="monospace",e.style.fontSize="13px",e.style.fontWeight="normal",e.style.textAlign="center",e.style.background="#fff",e.style.color="#000",e.style.padding="20px",e.style.width="400px",e.style.margin=t/2-26+"px auto 0",this.webgl||(e.innerHTML=(window.WebGLRenderingContext,["您的浏览器不支持此功能，建议升级浏览器。"].join("\n"))),e},addGetWebGLMessage:function(t){var e=void 0!==(t=t||{}).parent?t.parent:document.body,o=void 0!==t.id?t.id:"oldie";(t=E.getWebGLErrorMessage()).id=o,e.appendChild(t)}};if(E.webgl){var w=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"string"==typeof t&&(t=JSON.parse(t));var e,o=window.VRCHAT_ENV_API_VERSION=t?t.sdk_version:null;t&&(t.preload_id&&(window.VRHOUSE_CONFIG.preloadInfo={preloadId:t.preload_id,preloadScheme:t.scheme||"",fov:t.fov||""}),t.screen_switch&&(window.VRHOUSE_CONFIG.isCanScreenSwich="1"===t.screen_switch)),console.log("getWVRChatConfig---------》",t,window.getWVRChatConfig),o&&"1"===o[0]?(initRootDom(),e="3.5"):o&&"2"===o[0]&&"."===o[1]?"0"===o[2]?e="4.2":"1"===o[2]&&(e="4.4"):o&&"3"===o[0]&&"."===o[1]&&(e=(o[2],"latest")),"miniprogram"===o&&(e="miniprogram"),console.log(e,o),window.WVRChatNativeFunction&&window.WVRChatNativeFunction.sendMessageToNative?window.WVRChatNativeFunction.sendMessageToNative("WVRChatOutputLog",e):window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.WVRChatSendMessageToNative&&window.webkit.messageHandlers.WVRChatSendMessageToNative.postMessage(["WVRChatOutputLog",e])},T=function(){var t=window.location.search;t=1<(t=t.split("?")).length&&t[1].split("&");for(var e=0;e<t.length;e++)if(""!==t[e]){var o=t[e].split("=");if("version"===o[0])return o[1]}return""};try{var x=new OffscreenCanvas(0,0);E.webgl.texImage2D(3553,0,6048,6048,5121,x)}catch(t){window.OffscreenCanvas=void 0}(S={three:"/static/js/three.js",OrbitControl:"/static/js/OrbitControl.js",CSS2DRenderer:"/static/js/CSS2DRenderer.js",GLTFLoader:"/static/js/GLTFLoader.js",StereoEffect:"/static/js/StereoEffect.js"}).three=window.VRHOUSE_CONFIG&&window.VRHOUSE_CONFIG.LIB_URLS&&window.VRHOUSE_CONFIG.LIB_URLS.three?window.VRHOUSE_CONFIG.LIB_URLS.three:D.p+S.three,S.OrbitControl=window.VRHOUSE_CONFIG&&window.VRHOUSE_CONFIG.LIB_URLS&&window.VRHOUSE_CONFIG.LIB_URLS.OrbitControl?window.VRHOUSE_CONFIG.LIB_URLS.OrbitControl:D.p+S.OrbitControl,S.CSS2DRenderer=window.VRHOUSE_CONFIG&&window.VRHOUSE_CONFIG.LIB_URLS&&window.VRHOUSE_CONFIG.LIB_URLS.CSS2DRenderer?window.VRHOUSE_CONFIG.LIB_URLS.CSS2DRenderer:D.p+S.CSS2DRenderer,S.GLTFLoader=window.VRHOUSE_CONFIG&&window.VRHOUSE_CONFIG.LIB_URLS&&window.VRHOUSE_CONFIG.LIB_URLS.GLTFLoader?window.VRHOUSE_CONFIG.LIB_URLS.GLTFLoader:D.p+S.GLTFLoader,S.StereoEffect=window.VRHOUSE_CONFIG&&window.VRHOUSE_CONFIG.LIB_URLS&&window.VRHOUSE_CONFIG.LIB_URLS.StereoEffect?window.VRHOUSE_CONFIG.LIB_URLS.StereoEffect:D.p+S.StereoEffect,b[0].push(S.three),b[1].push(S.OrbitControl),b[1].push(S.CSS2DRenderer),b[1].push(S.GLTFLoader),b[1].push(S.StereoEffect);x=l.crossOrigin;void 0!==x&&(h.a.crossOrigin=x);var P={jsonLoader:t.a,jsLoader:h.a,linkLoader:c.a,textureLoader:null,rendererId:"root",STYLE_COLOR:"rgba(255, 170, 0, 1)",STYLE_ICON:"normal"};!function(){var t,e=T();window.location.host.toString();window.WVRChatNativeFunction&&window.WVRChatNativeFunction.getWVRChatConfig?(t=window.WVRChatNativeFunction.getWVRChatConfig(),w(t)):window.getWVRChatConfig?(t=window.getWVRChatConfig(),w(t)):w(e?{sdk_version:"miniprogram"}:{sdk_version:"3.1"}),console.log("getVersion")}(),Object(e.a)(P,l);l=P.rendererId;!l||(l=document.getElementById(l))&&l.classList&&l.classList.add("vr-render"),function(t,e){t=t.fills;Promise.all([]).then(e,e)}(P,function(){return Object(m.a)({key:"moduleConfig",val:P,TextureLoader:u.a,AppParams:g.a,init:v.a})})}else E.addGetWebGLMessage()}.call(this,D("URgk").setImmediate,D("yLpj"))},tuSo:function(t,e,o){o("7DDg")("Int32",4,function(r){return function(t,e,o){return r(this,t,e,o)}})},"tyy+":function(t,e,o){var r=o("XKFU"),o=o("11IZ");r(r.G+r.F*(parseFloat!=o),{parseFloat:o})},uAtd:function(t,e,o){function r(t,e){var o=h(t,e);return null!==(t=l(t))&&(e=r(t,e)).length?o.length?i(new n(o.concat(e))):e:o}var n=o("T39b"),i=o("Q3ne"),a=o("N6cJ"),s=o("y3w9"),l=o("OP3Y"),h=a.keys,c=a.key;a.exp({getMetadataKeys:function(t){return r(s(t),arguments.length<2?void 0:c(arguments[1]))}})},uSGp:function(t,e,o){"use strict";var r=o("lwsE"),n=o.n(r),r=o("W8MJ"),i=o.n(r),r=function(){function t(){n()(this,t)}return i()(t,[{key:"load",value:function(t){var e=t.url,o=t.onload,r=t.onerror,n=t.attributes,i=document.createElement("link");if(i.type="text/css",i.href=e,i.rel="stylesheet",i.onload=o,i.onerror=r,n)for(var a in n)i[a]=n[a];return document.head.appendChild(i),i}},{key:"loadAll",value:function(t){var e=this,o=t.urls,r=t.onload,n=t.onerror,i=o.length,a=0;(function t(){i<=a?r():e.load({url:o[a++],onload:t,onerror:function(){n()}})})()}}]),t}();e.a=new r},uaHG:function(t,e,o){"use strict";var r=o("XKFU"),n=o("S/j/"),i=o("apmT"),a=o("OP3Y"),s=o("EemH").f;o("nh4g")&&r(r.P+o("xbSm"),"Object",{__lookupGetter__:function(t){var e,o=n(this),r=i(t,!0);do{if(e=s(o,r))return e.get}while(o=a(o))}})},uhZd:function(t,e,o){var r=o("XKFU"),n=o("EemH").f,i=o("y3w9");r(r.S,"Reflect",{deleteProperty:function(t,e){var o=n(i(t),e);return!(o&&!o.configurable)&&delete t[e]}})},upKx:function(t,e,o){"use strict";var l=o("S/j/"),h=o("d/Gc"),c=o("ne8i");t.exports=[].copyWithin||function(t,e){var o=l(this),r=c(o.length),n=h(t,r),i=h(e,r),e=2<arguments.length?arguments[2]:void 0,a=Math.min((void 0===e?r:h(e,r))-i,r-n),s=1;for(i<n&&n<i+a&&(s=-1,i+=a-1,n+=a-1);0<a--;)i in o?o[n]=o[i]:delete o[n],n+=s,i+=s;return o}},vKrd:function(t,e,o){var r=o("y3w9"),n=o("0/R4"),i=o("pbhE");t.exports=function(t,e){if(r(t),n(e)&&e.constructor===t)return e;t=i.f(t);return(0,t.resolve)(e),t.promise}},vdFj:function(t,e,o){o("xqFc")("WeakSet")},vhPU:function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},vvmO:function(t,e,o){var r=o("LZWt");t.exports=function(t,e){if("number"!=typeof t&&"Number"!=r(t))throw TypeError(e);return+t}},w2a5:function(t,e,o){var l=o("aCFj"),h=o("ne8i"),c=o("d/Gc");t.exports=function(s){return function(t,e,o){var r,n=l(t),i=h(n.length),a=c(o,i);if(s&&e!=e){for(;a<i;)if((r=n[a++])!=r)return!0}else for(;a<i;a++)if((s||a in n)&&n[a]===e)return s||a||0;return!s&&-1}}},wCsR:function(t,e,o){"use strict";var r=o("ZD67"),n=o("s5qY");o("4LiD")("WeakSet",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{add:function(t){return r.def(n(this,"WeakSet"),t,!0)}},r,!1,!0)},wTVA:function(t,e){t.exports=function(t){if(Array.isArray(t))return t},t.exports.default=t.exports,t.exports.__esModule=!0},wkBT:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},wmvG:function(t,e,o){"use strict";function a(t,e){var o,r=f(e);if("F"!==r)return t._i[r];for(o=t._f;o;o=o.n)if(o.k==e)return o}var s=o("hswa").f,l=o("Kuth"),h=o("3Lyj"),c=o("m0Pp"),u=o("9gX7"),p=o("SlkY"),r=o("Afnz"),n=o("1TsA"),i=o("elZq"),d=o("nh4g"),f=o("Z6vF").fastKey,m=o("s5qY"),g=d?"_s":"size";t.exports={getConstructor:function(t,n,o,r){var i=t(function(t,e){u(t,i,n,"_i"),t._t=n,t._i=l(null),t._f=void 0,t._l=void 0,t[g]=0,null!=e&&p(e,o,t[r],t)});return h(i.prototype,{clear:function(){for(var t=m(this,n),e=t._i,o=t._f;o;o=o.n)o.r=!0,o.p&&(o.p=o.p.n=void 0),delete e[o.i];t._f=t._l=void 0,t[g]=0},delete:function(t){var e,o=m(this,n),r=a(o,t);return r&&(e=r.n,t=r.p,delete o._i[r.i],r.r=!0,t&&(t.n=e),e&&(e.p=t),o._f==r&&(o._f=e),o._l==r&&(o._l=t),o[g]--),!!r},forEach:function(t){m(this,n);for(var e,o=c(t,1<arguments.length?arguments[1]:void 0,3);e=e?e.n:this._f;)for(o(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!a(m(this,n),t)}}),d&&s(i.prototype,"size",{get:function(){return m(this,n)[g]}}),i},def:function(t,e,o){var r,n=a(t,e);return n?n.v=o:(t._l=n={i:r=f(e,!0),k:e,v:o,p:o=t._l,n:void 0,r:!1},t._f||(t._f=n),o&&(o.n=n),t[g]++,"F"!==r&&(t._i[r]=n)),t},getEntry:a,setStrong:function(t,o,e){r(t,o,function(t,e){this._t=m(t,o),this._k=e,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?n(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,n(1))},e?"entries":"values",!e,!0),i(o)}}},x3Uh:function(t,e,o){var r=o("XKFU");r(r.S,"Math",{scale:o("6dIT")})},x8Yj:function(t,e,o){var r=o("XKFU"),n=o("LVwc"),i=Math.exp;r(r.S,"Math",{tanh:function(t){var e=n(t=+t),o=n(-t);return e==1/0?1:o==1/0?-1:(e-o)/(i(t)+i(-t))}})},x8ZO:function(t,e,o){var o=o("XKFU"),l=Math.abs;o(o.S,"Math",{hypot:function(t,e){for(var o,r,n=0,i=0,a=arguments.length,s=0;i<a;)s<(o=l(arguments[i++]))?(n=n*(r=s/o)*r+1,s=o):n+=0<o?(r=o/s)*r:o;return s===1/0?1/0:s*Math.sqrt(n)}})},x8qZ:function(t,e,o){o("OnI7")("observable")},"xF/b":function(t,e,o){"use strict";var f=o("EWmC"),m=o("0/R4"),g=o("ne8i"),v=o("m0Pp"),y=o("K0xU")("isConcatSpreadable");t.exports=function t(e,o,r,n,i,a,s,l){for(var h,c,u=i,p=0,d=!!s&&v(s,l,3);p<n;){if(p in r){if(h=d?d(r[p],p,o):r[p],c=!1,(c=m(h)?void 0!==(c=h[y])?!!c:f(h):c)&&0<a)u=t(e,o,h,g(h.length),u,a-1)-1;else{if(9007199254740991<=u)throw TypeError();e[u]=h}u++}p++}return u}},xSrG:function(t,e,o){"use strict";window.__parts||(window.__parts={moduleConfig:null,THREE:null,TextureLoader:null,AppParams:null}),e.a=function(){var t=(n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).key,e=n.val,o=n.TextureLoader,r=n.AppParams,n=n.init;__parts[void 0===t?"m":t]=void 0===e?"n":e,o&&(__parts.TextureLoader=o),r&&(__parts.AppParams=r),n&&(__parts.init=n),__parts.moduleConfig&&__parts.THREE&&(e=(t=__parts).THREE,o=t.moduleConfig,r=t.TextureLoader,n=t.AppParams,t=t.init,o.textureLoader=new r({THREE:e,prefix:o.dataFrom.prefix||n.routerMatch.roomDir}),window.VRHOUSE_API=t(o))}},xbSm:function(t,e,o){"use strict";t.exports=o("LQAc")||!o("eeVq")(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete o("dyZX")[t]})},xfY5:function(t,e,o){"use strict";function r(t){if("string"==typeof(e=h(t,!1))&&2<e.length){var e,o,r,n=(e=y?e.trim():d(e,3)).charCodeAt(0);if(43===n||45===n){if(88===(t=e.charCodeAt(2))||120===t)return NaN}else if(48===n){switch(e.charCodeAt(1)){case 66:case 98:o=2,r=49;break;case 79:case 111:o=8,r=55;break;default:return+e}for(var i,a=e.slice(2),s=0,l=a.length;s<l;s++)if((i=a.charCodeAt(s))<48||r<i)return NaN;return parseInt(a,o)}}return+e}var n=o("dyZX"),i=o("aagx"),a=o("LZWt"),s=o("Xbzi"),h=o("apmT"),l=o("eeVq"),c=o("kJMx").f,u=o("EemH").f,p=o("hswa").f,d=o("qncB").trim,f="Number",m=b=n[f],g=b.prototype,v=a(o("Kuth")(g))==f,y="trim"in String.prototype;if(!b(" 0o1")||!b("0b1")||b("+0x1")){for(var S,b=function(t){var t=arguments.length<1?0:t,e=this;return e instanceof b&&(v?l(function(){g.valueOf.call(e)}):a(e)!=f)?s(new m(r(t)),e,b):r(t)},E=o("nh4g")?c(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;E.length>w;w++)i(m,S=E[w])&&!i(b,S)&&p(b,S,u(m,S));(b.prototype=g).constructor=b,o("KroJ")(n,f,b)}},xm80:function(t,e,o){"use strict";var r=o("XKFU"),n=o("D4iV"),i=o("7Qtz"),l=o("y3w9"),h=o("d/Gc"),c=o("ne8i"),a=o("0/R4"),s=o("dyZX").ArrayBuffer,u=o("69bn"),p=i.ArrayBuffer,d=i.DataView,f=n.ABV&&s.isView,m=p.prototype.slice,g=n.VIEW,i="ArrayBuffer";r(r.G+r.W+r.F*(s!==p),{ArrayBuffer:p}),r(r.S+r.F*!n.CONSTR,i,{isView:function(t){return f&&f(t)||a(t)&&g in t}}),r(r.P+r.U+r.F*o("eeVq")(function(){return!new p(2).slice(1,void 0).byteLength}),i,{slice:function(t,e){if(void 0!==m&&void 0===e)return m.call(l(this),t);for(var o=l(this).byteLength,r=h(t,o),n=h(void 0===e?o:e,o),o=new(u(this,p))(c(n-r)),i=new d(this),a=new d(o),s=0;r<n;)a.setUint8(s++,i.getUint8(r++));return o}}),o("elZq")(i)},xpiv:function(t,e,o){var r=o("XKFU");r(r.S,"Reflect",{ownKeys:o("mQtv")})},xpql:function(t,e,o){t.exports=!o("nh4g")&&!o("eeVq")(function(){return 7!=Object.defineProperty(o("Iw71")("div"),"a",{get:function(){return 7}}).a})},xqFc:function(t,e,o){"use strict";var r=o("XKFU");t.exports=function(t){r(r.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},y3w9:function(t,e,o){var r=o("0/R4");t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},yLpj:function(t,e){var o=function(){return this}();try{o=o||new Function("return this")()}catch(t){"object"==typeof window&&(o=window)}t.exports=o},yM4b:function(t,e,o){var r=o("K0xU")("toPrimitive"),n=Date.prototype;r in n||o("Mukb")(n,r,o("g4EE"))},yXPU:function(t,e){function l(t,e,o,r,n,i,a){try{var s=t[i](a),l=s.value}catch(t){return void o(t)}s.done?e(l):Promise.resolve(l).then(r,n)}t.exports=function(s){return function(){var t=this,a=arguments;return new Promise(function(e,o){var r=s.apply(t,a);function n(t){l(r,e,o,n,i,"next",t)}function i(t){l(r,e,o,n,i,"throw",t)}n(void 0)})}},t.exports.default=t.exports,t.exports.__esModule=!0},ylqs:function(t,e){var o=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++o+r).toString(36))}},yt8O:function(t,e,o){"use strict";var r=o("nGyu"),n=o("1TsA"),i=o("hPIQ"),a=o("aCFj");t.exports=o("Afnz")(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,o=this._i++;return!t||o>=t.length?(this._t=void 0,n(1)):n(0,"keys"==e?o:"values"==e?t[o]:[o,t[o]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},z2o2:function(t,e,o){var r=o("0/R4"),n=o("Z6vF").onFreeze;o("Xtr8")("seal",function(e){return function(t){return e&&r(t)?e(n(t)):t}})},zRwo:function(t,e,o){var r=o("6FMO");t.exports=function(t,e){return new(r(t))(e)}},zhAb:function(t,e,o){var a=o("aagx"),s=o("aCFj"),l=o("w2a5")(!1),h=o("YTvA")("IE_PROTO");t.exports=function(t,e){var o,r=s(t),n=0,i=[];for(o in r)o!=h&&a(r,o)&&i.push(o);for(;e.length>n;)a(r,o=e[n++])&&(~l(i,o)||i.push(o));return i}},"zq+C":function(t,e,o){var r=o("N6cJ"),n=o("y3w9"),i=r.key,a=r.map,s=r.store;r.exp({deleteMetadata:function(t,e){var o=arguments.length<3?void 0:i(arguments[2]),r=a(n(e),o,!1);if(void 0===r||!r.delete(t))return!1;if(r.size)return!0;r=s.get(e);return r.delete(o),!!r.size||s.delete(e)}})}});